!function(e){define("modernizr",[],function(){return function(){return window.Modernizr=function(e,t,n){function i(e){h.cssText=e}function r(e,t){return typeof e===t}var o,a,s,u="2.6.2",l={},c=t.documentElement,d="modernizr",f=t.createElement(d),h=f.style,p=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),g={},m=[],v=m.slice,y=function(e,n,i,r){var o,a,s,u,l=t.createElement("div"),f=t.body,h=f||t.createElement("body");if(parseInt(i,10))for(;i--;)s=t.createElement("div"),s.id=r?r[i]:d+(i+1),l.appendChild(s);return o=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),l.id=d,(f?l:h).innerHTML+=o,h.appendChild(l),f||(h.style.background="",h.style.overflow="hidden",u=c.style.overflow,c.style.overflow="hidden",c.appendChild(h)),a=n(l,e),f?l.parentNode.removeChild(l):(h.parentNode.removeChild(h),c.style.overflow=u),!!a},_={}.hasOwnProperty;s=r(_,"undefined")||r(_.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return _.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=v.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,a=t.apply(o,n.concat(v.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(v.call(arguments)))};return i}),g.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},g.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:y(["@media (",p.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},g.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n};for(var b in g)s(g,b)&&(a=b.toLowerCase(),l[a]=g[b](),m.push((l[a]?"":"no-")+a));return l.addTest=function(e,t){if("object"==typeof e)for(var i in e)s(e,i)&&l.addTest(i,e[i]);else{if(e=e.toLowerCase(),l[e]!==n)return l;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(c.className+=" "+(t?"":"no-")+e),l[e]=t}return l},i(""),f=o=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=m[e[p]];return t||(t={},g++,e[p]=g,m[g]=t),t}function o(e,n,i){if(n||(n=t),c)return n.createElement(e);i||(i=r(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():h.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),o.canHaveChildren&&!f.test(e)?i.frag.appendChild(o):o}function a(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||r(e);for(var o=n.frag.cloneNode(),a=0,s=i(),u=s.length;u>a;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function u(e){e||(e=t);var i=r(e);return!v.shivCSS||l||i.hasCSS||(i.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(e,i),e}var l,c,d=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",g=0,m={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){l=!0,c=!0}}();var v={elements:d.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:d.shivCSS!==!1,supportsUnknownElements:c,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:u,createElement:o,createDocumentFragment:a};e.html5=v,u(t)}(this,t),l._version=u,l._prefixes=p,l.testStyles=y,l}(this,this.document),e.Modernizr=Modernizr}.apply(e,arguments)})}(this),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var r=-1,o=e?e.length:0;++r<o;){var a=e[r];t(i,a,n(a),e)}return i}function r(e,t){for(var n=-1,i=e?e.length:0;++n<i&&t(e[n],n,e)!==!1;);return e}function o(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function a(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(!t(e[n],n,e))return!1;return!0}function s(e,t){for(var n=-1,i=e?e.length:0,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}function u(e,t){var n=e?e.length:0;return!!n&&_(e,t,0)>-1}function l(e,t,n){for(var i=-1,r=e?e.length:0;++i<r;)if(n(t,e[i]))return!0;return!1}function c(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function d(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function f(e,t,n,i){var r=-1,o=e?e.length:0;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function h(e,t,n,i){var r=e?e.length:0;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function p(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function g(e){return e.split("")}function m(e){return e.match(wn)||[]}function v(e,t,n){var i;return n(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function y(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function _(e,t,n){if(t!==t)return y(e,T,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function b(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function T(e){return e!==e}function w(e,t){var n=e?e.length:0;return n?A(e,t)/n:Pt}function E(e){return function(t){return null==t?J:t[e]}}function S(e){return function(t){return null==e?J:e[t]}}function C(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function P(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function A(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==J&&(n=n===J?o:n+o)}return n}function I(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function x(e,t){return c(t,function(t){return[t,e[t]]})}function O(e){return function(t){return e(t)}}function M(e,t){return c(t,function(t){return e[t]})}function k(e,t){return e.has(t)}function R(e,t){for(var n=-1,i=e.length;++n<i&&_(t,e[n],0)>-1;);return n}function D(e,t){for(var n=e.length;n--&&_(t,e[n],0)>-1;);return n}function L(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&i++;return i}function N(e,t){return null==e?J:e[t]}function j(e){return _i.test(e)}function F(e){return bi.test(e)}function U(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function B(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function H(e,t){return function(n){return e(t(n))}}function G(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];(a===t||a===it)&&(e[n]=it,o[r++]=n)}return o}function q(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function z(e){return j(e)?$(e):Gi(e)}function Y(e){return j(e)?K(e):g(e)}function $(e){for(var t=vi.lastIndex=0;vi.test(e);)t++;return t}function K(e){return e.match(vi)||[]}function X(e){return e.match(yi)||[]}function Q(g){function S(e){if(Pu(e)&&!Mf(e)&&!(e instanceof wn)){if(e instanceof K)return e;if(jc.call(e,"__wrapped__"))return wa(e)}return new K(e)}function $(){}function K(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=J}function wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function kn(){var e=new wn(this.__wrapped__);return e.__actions__=po(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=po(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=po(this.__views__),e}function Rn(){if(this.__filtered__){var e=new wn(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Dn(){var e=this.__wrapped__.value(),t=this.__dir__,n=Mf(e),i=0>t,r=n?e.length:0,o=Qo(0,r,this.__views__),a=o.start,s=o.end,u=s-a,l=i?s:a-1,c=this.__iteratees__,d=c.length,f=0,h=ld(u,this.__takeCount__);if(!n||et>r||r==u&&h==u)return $r(e,this.__actions__);var p=[];e:for(;u--&&h>f;){l+=t;for(var g=-1,m=e[l];++g<d;){var v=c[g],y=v.iteratee,_=v.type,b=y(m);if(_==Tt)m=b;else if(!b){if(_==bt)continue e;break e}}p[f++]=m}return p}function Ln(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nn(){this.__data__=yd?yd(null):{}}function jn(e){return this.has(e)&&delete this.__data__[e]}function Fn(e){var t=this.__data__;if(yd){var n=t[e];return n===nt?J:n}return jc.call(t,e)?t[e]:J}function Un(e){var t=this.__data__;return yd?t[e]!==J:jc.call(t,e)}function Bn(e,t){var n=this.__data__;return n[e]=yd&&t===J?nt:t,this}function Vn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Hn(){this.__data__=[]}function Gn(e){var t=this.__data__,n=fi(t,e);if(0>n)return!1;var i=t.length-1;return n==i?t.pop():Xc.call(t,n,1),!0}function qn(e){var t=this.__data__,n=fi(t,e);return 0>n?J:t[n][1]}function Wn(e){return fi(this.__data__,e)>-1}function zn(e,t){var n=this.__data__,i=fi(n,e);return 0>i?n.push([e,t]):n[i][1]=t,this}function Yn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function $n(){this.__data__={hash:new Ln,map:new(pd||Vn),string:new Ln}}function Kn(e){return $o(this,e)["delete"](e)}function Xn(e){return $o(this,e).get(e)}function Qn(e){return $o(this,e).has(e)}function Jn(e,t){return $o(this,e).set(e,t),this}function Zn(e){var t=-1,n=e?e.length:0;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function ei(e){return this.__data__.set(e,nt),this}function ti(e){return this.__data__.has(e)}function ni(e){this.__data__=new Vn(e)}function ii(){this.__data__=new Vn}function ri(e){return this.__data__["delete"](e)}function oi(e){return this.__data__.get(e)}function ai(e){return this.__data__.has(e)}function si(e,t){var n=this.__data__;if(n instanceof Vn){var i=n.__data__;if(!pd||i.length<et-1)return i.push([e,t]),this;n=this.__data__=new Yn(i)}return n.set(e,t),this}function ui(e,t){var n=Mf(e)||fu(e)?I(e.length,xc):[],i=n.length,r=!!i;for(var o in e)!t&&!jc.call(e,o)||r&&("length"==o||oa(o,i))||n.push(o);return n}function li(e,t,n,i){return e===J||du(e,Rc[n])&&!jc.call(i,n)?t:e}function ci(e,t,n){(n!==J&&!du(e[t],n)||"number"==typeof t&&n===J&&!(t in e))&&(e[t]=n)}function di(e,t,n){var i=e[t];jc.call(e,t)&&du(i,n)&&(n!==J||t in e)||(e[t]=n)}function fi(e,t){for(var n=e.length;n--;)if(du(e[n][0],t))return n;return-1}function hi(e,t,n,i){return Md(e,function(e,r,o){t(i,e,n(e),o)}),i}function pi(e,t){return e&&go(t,sl(t),e)}function vi(e,t){for(var n=-1,i=null==e,r=t.length,o=wc(r);++n<r;)o[n]=i?J:rl(e,t[n]);return o}function yi(e,t,n){return e===e&&(n!==J&&(e=n>=e?e:n),t!==J&&(e=e>=t?e:t)),e}function _i(e,t,n,i,o,a,s){var u;if(i&&(u=a?i(e,o,a,s):i(e)),u!==J)return u;if(!Cu(e))return e;var l=Mf(e);if(l){if(u=ea(e),!t)return po(e,u)}else{var c=Vd(e),d=c==Nt||c==jt;if(Rf(e))return to(e,t);if(c==Bt||c==Mt||d&&!a){if(U(e))return a?e:{};if(u=ta(d?{}:e),!t)return mo(e,pi(u,e))}else{if(!Ei[c])return a?e:{};u=na(e,c,_i,t)}}s||(s=new ni);var f=s.get(e);if(f)return f;if(s.set(e,u),!l)var h=n?Go(e):sl(e);return r(h||e,function(r,o){h&&(o=r,r=e[o]),di(u,o,_i(r,t,n,i,o,e,s))}),u}function bi(e){var t=sl(e);return function(n){return Si(n,e,t)}}function Si(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ac(e);i--;){var r=n[i],o=t[r],a=e[r];if(a===J&&!(r in e)||!o(a))return!1}return!0}function Ci(e){return Cu(e)?$c(e):{}}function Pi(e,t,n){if("function"!=typeof e)throw new Oc(tt);return qd(function(){e.apply(J,n)},t)}function xi(e,t,n,i){var r=-1,o=u,a=!0,s=e.length,d=[],f=t.length;if(!s)return d;n&&(t=c(t,O(n))),i?(o=l,a=!1):t.length>=et&&(o=k,a=!1,t=new Zn(t));e:for(;++r<s;){var h=e[r],p=n?n(h):h;if(h=i||0!==h?h:0,a&&p===p){for(var g=f;g--;)if(t[g]===p)continue e;d.push(h)}else o(t,p,i)||d.push(h)}return d}function Oi(e,t){var n=!0;return Md(e,function(e,i,r){return n=!!t(e,i,r)}),n}function ki(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(s===J?a===a&&!ju(a):n(a,s)))var s=a,u=o}return u}function Ri(e,t,n,i){var r=e.length;for(n=Gu(n),0>n&&(n=-n>r?0:r+n),i=i===J||i>r?r:Gu(i),0>i&&(i+=r),i=n>i?0:qu(i);i>n;)e[n++]=t;return e}function Li(e,t){var n=[];return Md(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Ni(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=ra),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Ni(s,t-1,n,i,r):d(r,s):i||(r[r.length]=s)}return r}function Gi(e,t){return e&&Rd(e,t,sl)}function $i(e,t){return e&&Dd(e,t,sl)}function Ki(e,t){return s(t,function(t){return wu(e[t])})}function Xi(e,t){t=sa(t,e)?[t]:Zr(t);for(var n=0,i=t.length;null!=e&&i>n;)e=e[_a(t[n++])];return n&&n==i?e:J}function Qi(e,t,n){var i=t(e);return Mf(e)?i:d(i,n(e))}function Ji(e){return Bc.call(e)}function Zi(e,t){return e>t}function er(e,t){return null!=e&&jc.call(e,t)}function tr(e,t){return null!=e&&t in Ac(e)}function nr(e,t,n){return e>=ld(t,n)&&e<ud(t,n)}function ir(e,t,n){for(var i=n?l:u,r=e[0].length,o=e.length,a=o,s=wc(o),d=1/0,f=[];a--;){var h=e[a];a&&t&&(h=c(h,O(t))),d=ld(h.length,d),s[a]=!n&&(t||r>=120&&h.length>=120)?new Zn(a&&h):J}h=e[0];var p=-1,g=s[0];e:for(;++p<r&&f.length<d;){var m=h[p],v=t?t(m):m;if(m=n||0!==m?m:0,!(g?k(g,v):i(f,v,n))){for(a=o;--a;){var y=s[a];if(!(y?k(y,v):i(e[a],v,n)))continue e}g&&g.push(v),f.push(m)}}return f}function rr(e,t,n,i){return Gi(e,function(e,r,o){t(i,n(e),r,o)}),i}function or(e,t,i){sa(t,e)||(t=Zr(t),e=va(e,t),t=Va(t));var r=null==e?e:e[_a(t)];return null==r?J:n(r,e,i)}function ar(e){return Pu(e)&&Bc.call(e)==$t}function sr(e){return Pu(e)&&Bc.call(e)==Dt}function ur(e,t,n,i,r){return e===t?!0:null==e||null==t||!Cu(e)&&!Pu(t)?e!==e&&t!==t:lr(e,t,ur,n,i,r)}function lr(e,t,n,i,r,o){var a=Mf(e),s=Mf(t),u=kt,l=kt;a||(u=Vd(e),u=u==Mt?Bt:u),s||(l=Vd(t),l=l==Mt?Bt:l);var c=u==Bt&&!U(e),d=l==Bt&&!U(t),f=u==l;if(f&&!c)return o||(o=new ni),a||Ff(e)?Bo(e,t,n,i,r,o):Vo(e,t,u,n,i,r,o);if(!(r&gt)){var h=c&&jc.call(e,"__wrapped__"),p=d&&jc.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return o||(o=new ni),n(g,m,i,r,o)}}return f?(o||(o=new ni),Ho(e,t,n,i,r,o)):!1}function cr(e){return Pu(e)&&Vd(e)==Ft}function dr(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=Ac(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){s=n[r];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(l===J&&!(u in e))return!1}else{var d=new ni;if(i)var f=i(l,c,u,e,t,d);if(!(f===J?ur(c,l,i,pt|gt,d):f))return!1}}return!0}function fr(e){if(!Cu(e)||ca(e))return!1;var t=wu(e)||U(e)?Hc:In;return t.test(ba(e))}function hr(e){return Cu(e)&&Bc.call(e)==Ht}function pr(e){return Pu(e)&&Vd(e)==Gt}function gr(e){return Pu(e)&&Su(e.length)&&!!wi[Bc.call(e)]}function mr(e){return"function"==typeof e?e:null==e?Xl:"object"==typeof e?Mf(e)?wr(e[0],e[1]):Tr(e):rc(e)}function vr(e){if(!da(e))return sd(e);var t=[];for(var n in Ac(e))jc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function yr(e){if(!Cu(e))return ma(e);var t=da(e),n=[];for(var i in e)("constructor"!=i||!t&&jc.call(e,i))&&n.push(i);return n}function _r(e,t){return t>e}function br(e,t){var n=-1,i=hu(e)?wc(e.length):[];return Md(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Tr(e){var t=Ko(e);return 1==t.length&&t[0][2]?ha(t[0][0],t[0][1]):function(n){return n===e||dr(n,e,t)}}function wr(e,t){return sa(e)&&fa(t)?ha(_a(e),t):function(n){var i=rl(n,e);return i===J&&i===t?al(n,e):ur(t,i,J,pt|gt)}}function Er(e,t,n,i,o){if(e!==t){if(!Mf(t)&&!Ff(t))var a=yr(t);r(a||t,function(r,s){if(a&&(s=r,r=t[s]),Cu(r))o||(o=new ni),Sr(e,t,s,n,Er,i,o);else{var u=i?i(e[s],r,s+"",e,t,o):J;u===J&&(u=r),ci(e,s,u)}})}}function Sr(e,t,n,i,r,o,a){var s=e[n],u=t[n],l=a.get(u);if(l)return void ci(e,n,l);var c=o?o(s,u,n+"",e,t,a):J,d=c===J;d&&(c=u,Mf(u)||Ff(u)?Mf(s)?c=s:pu(s)?c=po(s):(d=!1,c=_i(u,!0)):Du(u)||fu(u)?fu(s)?c=zu(s):!Cu(s)||i&&wu(s)?(d=!1,c=_i(u,!0)):c=s:d=!1),d&&(a.set(u,c),r(c,u,i,o,a),a["delete"](u)),ci(e,n,c)}function Cr(e,t){var n=e.length;if(n)return t+=0>t?n:0,oa(t,n)?e[t]:J}function Pr(e,t,n){var i=-1;t=c(t.length?t:[Xl],O(Yo()));var r=br(e,function(e){var n=c(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return P(r,function(e,t){return co(e,t,n)})}function Ar(e,t){return e=Ac(e),Ir(e,t,function(t,n){return n in e})}function Ir(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=e[a];n(s,a)&&(o[a]=s)}return o}function xr(e){return function(t){return Xi(t,e)}}function Or(e,t,n,i){var r=i?b:_,o=-1,a=t.length,s=e;for(e===t&&(t=po(t)),n&&(s=c(e,O(n)));++o<a;)for(var u=0,l=t[o],d=n?n(l):l;(u=r(s,d,u,i))>-1;)s!==e&&Xc.call(s,u,1),Xc.call(e,u,1);return e}function Mr(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;if(oa(r))Xc.call(e,r,1);else if(sa(r,e))delete e[_a(r)];else{var a=Zr(r),s=va(e,a);null!=s&&delete s[_a(Va(a))]}}}return e}function kr(e,t){return e+nd(dd()*(t-e+1))}function Rr(e,t,n,i){for(var r=-1,o=ud(td((t-e)/(n||1)),0),a=wc(o);o--;)a[i?o:++r]=e,e+=n;return a}function Dr(e,t){var n="";if(!e||1>t||t>St)return n;do t%2&&(n+=e),t=nd(t/2),t&&(e+=e);while(t);return n}function Lr(e,t){return t=ud(t===J?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=ud(i.length-t,0),a=wc(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=wc(t+1);++r<t;)s[r]=i[r];return s[t]=a,n(e,this,s)}}function Nr(e,t,n,i){if(!Cu(e))return e;t=sa(t,e)?[t]:Zr(t);for(var r=-1,o=t.length,a=o-1,s=e;null!=s&&++r<o;){var u=_a(t[r]),l=n;if(r!=a){var c=s[u];l=i?i(c,u,s):J,l===J&&(l=Cu(c)?c:oa(t[r+1])?[]:{})}di(s,u,l),s=s[u]}return e}function jr(e,t,n){var i=-1,r=e.length;0>t&&(t=-t>r?0:r+t),n=n>r?r:n,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=wc(r);++i<r;)o[i]=e[i+t];return o}function Fr(e,t){var n;return Md(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Ur(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&xt>=r){for(;r>i;){var o=i+r>>>1,a=e[o];null!==a&&!ju(a)&&(n?t>=a:t>a)?i=o+1:r=o}return r}return Br(e,t,Xl,n)}function Br(e,t,n,i){t=n(t);for(var r=0,o=e?e.length:0,a=t!==t,s=null===t,u=ju(t),l=t===J;o>r;){var c=nd((r+o)/2),d=n(e[c]),f=d!==J,h=null===d,p=d===d,g=ju(d);if(a)var m=i||p;else m=l?p&&(i||f):s?p&&f&&(i||!h):u?p&&f&&!h&&(i||!g):h||g?!1:i?t>=d:t>d;m?r=c+1:o=c}return ld(o,It)}function Vr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!du(s,u)){var u=s;o[r++]=0===a?0:a}}return o}function Hr(e){return"number"==typeof e?e:ju(e)?Pt:+e}function Gr(e){if("string"==typeof e)return e;if(ju(e))return Od?Od.call(e):"";var t=e+"";return"0"==t&&1/e==-Et?"-0":t}function qr(e,t,n){var i=-1,r=u,o=e.length,a=!0,s=[],c=s;if(n)a=!1,r=l;else if(o>=et){var d=t?null:jd(e);if(d)return q(d);a=!1,r=k,c=new Zn}else c=t?[]:s;e:for(;++i<o;){var f=e[i],h=t?t(f):f;if(f=n||0!==f?f:0,a&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue e;t&&c.push(h),s.push(f)}else r(c,h,n)||(c!==s&&c.push(h),s.push(f))}return s}function Wr(e,t){t=sa(t,e)?[t]:Zr(t),e=va(e,t);var n=_a(Va(t));return!(null!=e&&jc.call(e,n))||delete e[n]}function zr(e,t,n,i){return Nr(e,t,n(Xi(e,t)),i)}function Yr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?jr(e,i?0:o,i?o+1:r):jr(e,i?o+1:0,i?r:o)}function $r(e,t){var n=e;return n instanceof wn&&(n=n.value()),f(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function Kr(e,t,n){for(var i=-1,r=e.length;++i<r;)var o=o?d(xi(o,e[i],t,n),xi(e[i],o,t,n)):e[i];return o&&o.length?qr(o,t,n):[]}function Xr(e,t,n){for(var i=-1,r=e.length,o=t.length,a={};++i<r;){var s=o>i?t[i]:J;n(a,e[i],s)}return a}function Qr(e){return pu(e)?e:[]}function Jr(e){return"function"==typeof e?e:Xl}function Zr(e){return Mf(e)?e:zd(e)}function eo(e,t,n){var i=e.length;return n=n===J?i:n,!t&&n>=i?e:jr(e,t,n)}function to(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function no(e){var t=new e.constructor(e.byteLength);return new Wc(t).set(new Wc(e)),t}function io(e,t){var n=t?no(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ro(t,n,i){var r=n?i(V(t),!0):V(t);return f(r,e,new t.constructor)}function oo(e){var t=new e.constructor(e.source,Sn.exec(e));return t.lastIndex=e.lastIndex,t}function ao(e,n,i){var r=n?i(q(e),!0):q(e);return f(r,t,new e.constructor)}function so(e){return xd?Ac(xd.call(e)):{}}function uo(e,t){var n=t?no(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function lo(e,t){if(e!==t){var n=e!==J,i=null===e,r=e===e,o=ju(e),a=t!==J,s=null===t,u=t===t,l=ju(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||i&&a&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&t>e||l&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!u)return-1}return 0}function co(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;++i<a;){var u=lo(r[i],o[i]);if(u){if(i>=s)return u;var l=n[i];return u*("desc"==l?-1:1)}}return e.index-t.index}function fo(e,t,n,i){for(var r=-1,o=e.length,a=n.length,s=-1,u=t.length,l=ud(o-a,0),c=wc(u+l),d=!i;++s<u;)c[s]=t[s];for(;++r<a;)(d||o>r)&&(c[n[r]]=e[r]);for(;l--;)c[s++]=e[r++];return c}function ho(e,t,n,i){for(var r=-1,o=e.length,a=-1,s=n.length,u=-1,l=t.length,c=ud(o-s,0),d=wc(c+l),f=!i;++r<c;)d[r]=e[r];for(var h=r;++u<l;)d[h+u]=t[u];for(;++a<s;)(f||o>r)&&(d[h+n[a]]=e[r++]);return d}function po(e,t){var n=-1,i=e.length;for(t||(t=wc(i));++n<i;)t[n]=e[n];return t}function go(e,t,n,i){n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],s=i?i(n[a],e[a],a,n,e):J;di(n,a,s===J?e[a]:s)}return n}function mo(e,t){return go(e,Ud(e),t)}function vo(e,t){return function(n,r){var o=Mf(n)?i:hi,a=t?t():{};return o(n,e,Yo(r,2),a)}}function yo(e){return Lr(function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:J,a=r>2?n[2]:J;for(o=e.length>3&&"function"==typeof o?(r--,o):J,a&&aa(n[0],n[1],a)&&(o=3>r?J:o,r=1),t=Ac(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t})}function _o(e,t){return function(n,i){if(null==n)return n;if(!hu(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=Ac(n);(t?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function bo(e){return function(t,n,i){for(var r=-1,o=Ac(t),a=i(t),s=a.length;s--;){var u=a[e?s:++r];if(n(o[u],u,o)===!1)break}return t}}function To(e,t,n){function i(){var t=this&&this!==Mi&&this instanceof i?o:e;return t.apply(r?n:this,arguments)}var r=t&rt,o=So(e);return i}function wo(e){return function(t){t=$u(t);var n=j(t)?Y(t):J,i=n?n[0]:t.charAt(0),r=n?eo(n,1).join(""):t.slice(1);return i[e]()+r}}function Eo(e){return function(t){return f(Wl(Pl(t).replace(gi,"")),e,"")}}function So(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ci(e.prototype),i=e.apply(n,t);return Cu(i)?i:n}}function Co(e,t,i){function r(){for(var a=arguments.length,s=wc(a),u=a,l=zo(r);u--;)s[u]=arguments[u];var c=3>a&&s[0]!==l&&s[a-1]!==l?[]:G(s,l);if(a-=c.length,i>a)return No(e,t,Io,r.placeholder,J,s,c,J,J,i-a);var d=this&&this!==Mi&&this instanceof r?o:e;return n(d,this,s)}var o=So(e);return r}function Po(e){return function(t,n,i){var r=Ac(t);if(!hu(t)){var o=Yo(n,3);t=sl(t),n=function(e){return o(r[e],e,r)}}var a=e(t,n,i);return a>-1?r[o?t[a]:a]:J}}function Ao(e){return Lr(function(t){t=Ni(t,1);var n=t.length,i=n,r=K.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Oc(tt);if(r&&!a&&"wrapper"==Wo(o))var a=new K([],!0)}for(i=a?i:n;++i<n;){o=t[i];var s=Wo(o),u="wrapper"==s?Fd(o):J;a=u&&la(u[0])&&u[1]==(dt|st|lt|ft)&&!u[4].length&&1==u[9]?a[Wo(u[0])].apply(a,u[3]):1==o.length&&la(o)?a[s]():a.thru(o)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&Mf(i)&&i.length>=et)return a.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}})}function Io(e,t,n,i,r,o,a,s,u,l){function c(){for(var v=arguments.length,y=wc(v),_=v;_--;)y[_]=arguments[_];if(p)var b=zo(c),T=L(y,b);if(i&&(y=fo(y,i,r,p)),o&&(y=ho(y,o,a,p)),v-=T,p&&l>v){var w=G(y,b);return No(e,t,Io,c.placeholder,n,y,w,s,u,l-v)}var E=f?n:this,S=h?E[e]:e;return v=y.length,s?y=ya(y,s):g&&v>1&&y.reverse(),d&&v>u&&(y.length=u),this&&this!==Mi&&this instanceof c&&(S=m||So(S)),S.apply(E,y)}var d=t&dt,f=t&rt,h=t&ot,p=t&(st|ut),g=t&ht,m=h?J:So(e);return c}function xo(e,t){return function(n,i){return rr(n,e,t(i),{})}}function Oo(e,t){return function(n,i){var r;if(n===J&&i===J)return t;if(n!==J&&(r=n),i!==J){if(r===J)return i;"string"==typeof n||"string"==typeof i?(n=Gr(n),i=Gr(i)):(n=Hr(n),i=Hr(i)),r=e(n,i)}return r}}function Mo(e){return Lr(function(t){return t=1==t.length&&Mf(t[0])?c(t[0],O(Yo())):c(Ni(t,1),O(Yo())),Lr(function(i){var r=this;return e(t,function(e){return n(e,r,i)})})})}function ko(e,t){t=t===J?" ":Gr(t);var n=t.length;if(2>n)return n?Dr(t,e):t;var i=Dr(t,td(e/z(t)));return j(t)?eo(Y(i),0,e).join(""):i.slice(0,e)}function Ro(e,t,i,r){function o(){for(var t=-1,u=arguments.length,l=-1,c=r.length,d=wc(c+u),f=this&&this!==Mi&&this instanceof o?s:e;++l<c;)d[l]=r[l];for(;u--;)d[l++]=arguments[++t];return n(f,a?i:this,d)}var a=t&rt,s=So(e);return o}function Do(e){return function(t,n,i){return i&&"number"!=typeof i&&aa(t,n,i)&&(n=i=J),t=Hu(t),n===J?(n=t,t=0):n=Hu(n),i=i===J?n>t?1:-1:Hu(i),Rr(t,n,i,e)}}function Lo(e){return function(t,n){return("string"!=typeof t||"string"!=typeof n)&&(t=Wu(t),n=Wu(n)),e(t,n)}}function No(e,t,n,i,r,o,a,s,u,l){var c=t&st,d=c?a:J,f=c?J:a,h=c?o:J,p=c?J:o;t|=c?lt:ct,t&=~(c?ct:lt),t&at||(t&=~(rt|ot));var g=[e,t,r,h,d,p,f,s,u,l],m=n.apply(J,g);return la(e)&&Gd(m,g),m.placeholder=i,Wd(m,e,t)}function jo(e){var t=Pc[e];return function(e,n){if(e=Wu(e),n=ld(Gu(n),292)){var i=($u(e)+"e").split("e"),r=t(i[0]+"e"+(+i[1]+n));return i=($u(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function Fo(e){return function(t){var n=Vd(t);return n==Ft?V(t):n==Gt?W(t):x(t,e(t))}}function Uo(e,t,n,i,r,o,a,s){var u=t&ot;if(!u&&"function"!=typeof e)throw new Oc(tt);var l=i?i.length:0;if(l||(t&=~(lt|ct),i=r=J),a=a===J?a:ud(Gu(a),0),s=s===J?s:Gu(s),l-=r?r.length:0,t&ct){var c=i,d=r;i=r=J}var f=u?J:Fd(e),h=[e,t,n,i,r,c,d,o,a,s];if(f&&pa(h,f),e=h[0],t=h[1],n=h[2],i=h[3],r=h[4],s=h[9]=null==h[9]?u?0:e.length:ud(h[9]-l,0),!s&&t&(st|ut)&&(t&=~(st|ut)),t&&t!=rt)p=t==st||t==ut?Co(e,t,s):t!=lt&&t!=(rt|lt)||r.length?Io.apply(J,h):Ro(e,t,n,i);else var p=To(e,t,n);var g=f?Ld:Gd;return Wd(g(p,h),e,t)}function Bo(e,t,n,i,r,o){var a=r&gt,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,d=!0,f=r&pt?new Zn:J;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],g=t[c];if(i)var m=a?i(g,h,c,t,e,o):i(h,g,c,e,t,o);if(m!==J){if(m)continue;d=!1;break}if(f){if(!p(t,function(e,t){return f.has(t)||h!==e&&!n(h,e,i,r,o)?void 0:f.add(t)})){d=!1;break}}else if(h!==g&&!n(h,g,i,r,o)){d=!1;break}}return o["delete"](e),o["delete"](t),d}function Vo(e,t,n,i,r,o,a){switch(n){case Kt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $t:return e.byteLength==t.byteLength&&i(new Wc(e),new Wc(t))?!0:!1;case Rt:case Dt:case Ut:return du(+e,+t);case Lt:return e.name==t.name&&e.message==t.message;case Ht:case qt:return e==t+"";case Ft:var s=V;case Gt:var u=o&gt;if(s||(s=q),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;o|=pt,a.set(e,t);var c=Bo(s(e),s(t),i,r,o,a);return a["delete"](e),c;case Wt:if(xd)return xd.call(e)==xd.call(t)}return!1}function Ho(e,t,n,i,r,o){var a=r&gt,s=sl(e),u=s.length,l=sl(t),c=l.length;if(u!=c&&!a)return!1;for(var d=u;d--;){var f=s[d];if(!(a?f in t:jc.call(t,f)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++d<u;){f=s[d];var m=e[f],v=t[f];if(i)var y=a?i(v,m,f,t,e,o):i(m,v,f,e,t,o);if(!(y===J?m===v||n(m,v,i,r,o):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o["delete"](e),o["delete"](t),p}function Go(e){return Qi(e,sl,Ud)}function qo(e){return Qi(e,ul,Bd)}function Wo(e){for(var t=e.name+"",n=wd[t],i=jc.call(wd,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function zo(e){var t=jc.call(S,"placeholder")?S:e;return t.placeholder}function Yo(){var e=S.iteratee||Ql;return e=e===Ql?mr:e,arguments.length?e(arguments[0],arguments[1]):e}function $o(e,t){var n=e.__data__;return ua(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ko(e){for(var t=sl(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,fa(r)]}return t}function Xo(e,t){var n=N(e,t);return fr(n)?n:J}function Qo(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ld(t,e+a);break;case"takeRight":e=ud(e,t-a)}}return{start:e,end:t}}function Jo(e){var t=e.match(bn);return t?t[1].split(Tn):[]}function Zo(e,t,n){t=sa(t,e)?[t]:Zr(t);for(var i,r=-1,o=t.length;++r<o;){var a=_a(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}if(i)return i;var o=e?e.length:0;return!!o&&Su(o)&&oa(a,o)&&(Mf(e)||fu(e))}function ea(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&jc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ta(e){return"function"!=typeof e.constructor||da(e)?{}:Ci(zc(e))}function na(e,t,n,i){var r=e.constructor;switch(t){case $t:return no(e);case Rt:case Dt:return new r(+e);case Kt:return io(e,i);case Xt:case Qt:case Jt:case Zt:case en:case tn:case nn:case rn:case on:return uo(e,i);case Ft:return ro(e,i,n);case Ut:case qt:return new r(e);case Ht:return oo(e);case Gt:return ao(e,i,n);case Wt:return so(e)}}function ia(e,t){var n=t.length,i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(_n,"{\n/* [wrapped with "+t+"] */\n")}function ra(e){return Mf(e)||fu(e)||!!(Qc&&e&&e[Qc])}function oa(e,t){return t=null==t?St:t,!!t&&("number"==typeof e||On.test(e))&&e>-1&&e%1==0&&t>e}function aa(e,t,n){if(!Cu(n))return!1;var i=typeof t;return("number"==i?hu(n)&&oa(t,n.length):"string"==i&&t in n)?du(n[t],e):!1}function sa(e,t){if(Mf(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||ju(e)?!0:dn.test(e)||!cn.test(e)||null!=t&&e in Ac(t)}function ua(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function la(e){var t=Wo(e),n=S[t];if("function"!=typeof n||!(t in wn.prototype))return!1;if(e===n)return!0;var i=Fd(n);return!!i&&e===i[0]}function ca(e){return!!Lc&&Lc in e}function da(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Rc;return e===n}function fa(e){return e===e&&!Cu(e)}function ha(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==J||e in Ac(n))
}}function pa(e,t){var n=e[1],i=t[1],r=n|i,o=(rt|ot|dt)>r,a=i==dt&&n==st||i==dt&&n==ft&&e[7].length<=t[8]||i==(dt|ft)&&t[7].length<=t[8]&&n==st;if(!o&&!a)return e;i&rt&&(e[2]=t[2],r|=n&rt?0:at);var s=t[3];if(s){var u=e[3];e[3]=u?fo(u,s,t[4]):s,e[4]=u?G(e[3],it):t[4]}return s=t[5],s&&(u=e[5],e[5]=u?ho(u,s,t[6]):s,e[6]=u?G(e[5],it):t[6]),s=t[7],s&&(e[7]=s),i&dt&&(e[8]=null==e[8]?t[8]:ld(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function ga(e,t,n,i,r,o){return Cu(e)&&Cu(t)&&(o.set(t,e),Er(e,t,J,ga,o),o["delete"](t)),e}function ma(e){var t=[];if(null!=e)for(var n in Ac(e))t.push(n);return t}function va(e,t){return 1==t.length?e:Xi(e,jr(t,0,-1))}function ya(e,t){for(var n=e.length,i=ld(t.length,n),r=po(e);i--;){var o=t[i];e[i]=oa(o,n)?r[o]:J}return e}function _a(e){if("string"==typeof e||ju(e))return e;var t=e+"";return"0"==t&&1/e==-Et?"-0":t}function ba(e){if(null!=e){try{return Nc.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ta(e,t){return r(Ot,function(n){var i="_."+n[0];t&n[1]&&!u(e,i)&&e.push(i)}),e.sort()}function wa(e){if(e instanceof wn)return e.clone();var t=new K(e.__wrapped__,e.__chain__);return t.__actions__=po(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ea(e,t,n){t=(n?aa(e,t,n):t===J)?1:ud(Gu(t),0);var i=e?e.length:0;if(!i||1>t)return[];for(var r=0,o=0,a=wc(td(i/t));i>r;)a[o++]=jr(e,r,r+=t);return a}function Sa(e){for(var t=-1,n=e?e.length:0,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r}function Ca(){for(var e=arguments.length,t=wc(e?e-1:0),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return e?d(Mf(n)?po(n):[n],Ni(t,1)):[]}function Pa(e,t,n){var i=e?e.length:0;return i?(t=n||t===J?1:Gu(t),jr(e,0>t?0:t,i)):[]}function Aa(e,t,n){var i=e?e.length:0;return i?(t=n||t===J?1:Gu(t),t=i-t,jr(e,0,0>t?0:t)):[]}function Ia(e,t){return e&&e.length?Yr(e,Yo(t,3),!0,!0):[]}function xa(e,t){return e&&e.length?Yr(e,Yo(t,3),!0):[]}function Oa(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&aa(e,t,n)&&(n=0,i=r),Ri(e,t,n,i)):[]}function Ma(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=null==n?0:Gu(n);return 0>r&&(r=ud(i+r,0)),y(e,Yo(t,3),r)}function ka(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i-1;return n!==J&&(r=Gu(n),r=0>n?ud(i+r,0):ld(r,i-1)),y(e,Yo(t,3),r,!0)}function Ra(e){var t=e?e.length:0;return t?Ni(e,1):[]}function Da(e){var t=e?e.length:0;return t?Ni(e,Et):[]}function La(e,t){var n=e?e.length:0;return n?(t=t===J?1:Gu(t),Ni(e,t)):[]}function Na(e){for(var t=-1,n=e?e.length:0,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function ja(e){return e&&e.length?e[0]:J}function Fa(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=null==n?0:Gu(n);return 0>r&&(r=ud(i+r,0)),_(e,t,r)}function Ua(e){var t=e?e.length:0;return t?jr(e,0,-1):[]}function Ba(e,t){return e?ad.call(e,t):""}function Va(e){var t=e?e.length:0;return t?e[t-1]:J}function Ha(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if(n!==J&&(r=Gu(n),r=(0>r?ud(i+r,0):ld(r,i-1))+1),t!==t)return y(e,T,r-1,!0);for(;r--;)if(e[r]===t)return r;return-1}function Ga(e,t){return e&&e.length?Cr(e,Gu(t)):J}function qa(e,t){return e&&e.length&&t&&t.length?Or(e,t):e}function Wa(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,Yo(n,2)):e}function za(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,J,n):e}function Ya(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Yo(t,3);++i<o;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return Mr(e,r),n}function $a(e){return e?fd.call(e):e}function Ka(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&aa(e,t,n)?(t=0,n=i):(t=null==t?0:Gu(t),n=n===J?i:Gu(n)),jr(e,t,n)):[]}function Xa(e,t){return Ur(e,t)}function Qa(e,t,n){return Br(e,t,Yo(n,2))}function Ja(e,t){var n=e?e.length:0;if(n){var i=Ur(e,t);if(n>i&&du(e[i],t))return i}return-1}function Za(e,t){return Ur(e,t,!0)}function es(e,t,n){return Br(e,t,Yo(n,2),!0)}function ts(e,t){var n=e?e.length:0;if(n){var i=Ur(e,t,!0)-1;if(du(e[i],t))return i}return-1}function ns(e){return e&&e.length?Vr(e):[]}function is(e,t){return e&&e.length?Vr(e,Yo(t,2)):[]}function rs(e){var t=e?e.length:0;return t?jr(e,1,t):[]}function os(e,t,n){return e&&e.length?(t=n||t===J?1:Gu(t),jr(e,0,0>t?0:t)):[]}function as(e,t,n){var i=e?e.length:0;return i?(t=n||t===J?1:Gu(t),t=i-t,jr(e,0>t?0:t,i)):[]}function ss(e,t){return e&&e.length?Yr(e,Yo(t,3),!1,!0):[]}function us(e,t){return e&&e.length?Yr(e,Yo(t,3)):[]}function ls(e){return e&&e.length?qr(e):[]}function cs(e,t){return e&&e.length?qr(e,Yo(t,2)):[]}function ds(e,t){return e&&e.length?qr(e,J,t):[]}function fs(e){if(!e||!e.length)return[];var t=0;return e=s(e,function(e){return pu(e)?(t=ud(e.length,t),!0):void 0}),I(t,function(t){return c(e,E(t))})}function hs(e,t){if(!e||!e.length)return[];var i=fs(e);return null==t?i:c(i,function(e){return n(t,J,e)})}function ps(e,t){return Xr(e||[],t||[],di)}function gs(e,t){return Xr(e||[],t||[],Nr)}function ms(e){var t=S(e);return t.__chain__=!0,t}function vs(e,t){return t(e),e}function ys(e,t){return t(e)}function _s(){return ms(this)}function bs(){return new K(this.value(),this.__chain__)}function Ts(){this.__values__===J&&(this.__values__=Vu(this.value()));var e=this.__index__>=this.__values__.length,t=e?J:this.__values__[this.__index__++];return{done:e,value:t}}function ws(){return this}function Es(e){for(var t,n=this;n instanceof $;){var i=wa(n);i.__index__=0,i.__values__=J,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function Ss(){var e=this.__wrapped__;if(e instanceof wn){var t=e;return this.__actions__.length&&(t=new wn(this)),t=t.reverse(),t.__actions__.push({func:ys,args:[$a],thisArg:J}),new K(t,this.__chain__)}return this.thru($a)}function Cs(){return $r(this.__wrapped__,this.__actions__)}function Ps(e,t,n){var i=Mf(e)?a:Oi;return n&&aa(e,t,n)&&(t=J),i(e,Yo(t,3))}function As(e,t){var n=Mf(e)?s:Li;return n(e,Yo(t,3))}function Is(e,t){return Ni(Ds(e,t),1)}function xs(e,t){return Ni(Ds(e,t),Et)}function Os(e,t,n){return n=n===J?1:Gu(n),Ni(Ds(e,t),n)}function Ms(e,t){var n=Mf(e)?r:Md;return n(e,Yo(t,3))}function ks(e,t){var n=Mf(e)?o:kd;return n(e,Yo(t,3))}function Rs(e,t,n,i){e=hu(e)?e:bl(e),n=n&&!i?Gu(n):0;var r=e.length;return 0>n&&(n=ud(r+n,0)),Nu(e)?r>=n&&e.indexOf(t,n)>-1:!!r&&_(e,t,n)>-1}function Ds(e,t){var n=Mf(e)?c:br;return n(e,Yo(t,3))}function Ls(e,t,n,i){return null==e?[]:(Mf(t)||(t=null==t?[]:[t]),n=i?J:n,Mf(n)||(n=null==n?[]:[n]),Pr(e,t,n))}function Ns(e,t,n){var i=Mf(e)?f:C,r=arguments.length<3;return i(e,Yo(t,4),n,r,Md)}function js(e,t,n){var i=Mf(e)?h:C,r=arguments.length<3;return i(e,Yo(t,4),n,r,kd)}function Fs(e,t){var n=Mf(e)?s:Li;return n(e,Js(Yo(t,3)))}function Us(e){var t=hu(e)?e:bl(e),n=t.length;return n>0?t[kr(0,n-1)]:J}function Bs(e,t,n){var i=-1,r=Vu(e),o=r.length,a=o-1;for(t=(n?aa(e,t,n):t===J)?1:yi(Gu(t),0,o);++i<t;){var s=kr(i,a),u=r[s];r[s]=r[i],r[i]=u}return r.length=t,r}function Vs(e){return Bs(e,At)}function Hs(e){if(null==e)return 0;if(hu(e))return Nu(e)?z(e):e.length;var t=Vd(e);return t==Ft||t==Gt?e.size:vr(e).length}function Gs(e,t,n){var i=Mf(e)?p:Fr;return n&&aa(e,t,n)&&(t=J),i(e,Yo(t,3))}function qs(e,t){if("function"!=typeof t)throw new Oc(tt);return e=Gu(e),function(){return--e<1?t.apply(this,arguments):void 0}}function Ws(e,t,n){return t=n?J:t,t=e&&null==t?e.length:t,Uo(e,dt,J,J,J,J,t)}function zs(e,t){var n;if("function"!=typeof t)throw new Oc(tt);return e=Gu(e),function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=J),n}}function Ys(e,t,n){t=n?J:t;var i=Uo(e,st,J,J,J,J,J,t);return i.placeholder=Ys.placeholder,i}function $s(e,t,n){t=n?J:t;var i=Uo(e,ut,J,J,J,J,J,t);return i.placeholder=$s.placeholder,i}function Ks(e,t,n){function i(t){var n=f,i=h;return f=h=J,y=t,g=e.apply(i,n)}function r(e){return y=e,m=qd(s,t),_?i(e):g}function o(e){var n=e-v,i=e-y,r=t-n;return b?ld(r,p-i):r}function a(e){var n=e-v,i=e-y;return v===J||n>=t||0>n||b&&i>=p}function s(){var e=bf();return a(e)?u(e):void(m=qd(s,o(e)))}function u(e){return m=J,T&&f?i(e):(f=h=J,g)}function l(){m!==J&&Nd(m),y=0,f=v=h=m=J}function c(){return m===J?g:u(bf())}function d(){var e=bf(),n=a(e);if(f=arguments,h=this,v=e,n){if(m===J)return r(v);if(b)return m=qd(s,t),i(v)}return m===J&&(m=qd(s,t)),g}var f,h,p,g,m,v,y=0,_=!1,b=!1,T=!0;if("function"!=typeof e)throw new Oc(tt);return t=Wu(t)||0,Cu(n)&&(_=!!n.leading,b="maxWait"in n,p=b?ud(Wu(n.maxWait)||0,t):p,T="trailing"in n?!!n.trailing:T),d.cancel=l,d.flush=c,d}function Xs(e){return Uo(e,ht)}function Qs(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Oc(tt);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(Qs.Cache||Yn),n}function Js(e){if("function"!=typeof e)throw new Oc(tt);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Zs(e){return zs(2,e)}function eu(e,t){if("function"!=typeof e)throw new Oc(tt);return t=t===J?t:Gu(t),Lr(e,t)}function tu(e,t){if("function"!=typeof e)throw new Oc(tt);return t=t===J?0:ud(Gu(t),0),Lr(function(i){var r=i[t],o=eo(i,0,t);return r&&d(o,r),n(e,this,o)})}function nu(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Oc(tt);return Cu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ks(e,t,{leading:i,maxWait:t,trailing:r})}function iu(e){return Ws(e,1)}function ru(e,t){return t=null==t?Xl:t,Pf(t,e)}function ou(){if(!arguments.length)return[];var e=arguments[0];return Mf(e)?e:[e]}function au(e){return _i(e,!1,!0)}function su(e,t){return _i(e,!1,!0,t)}function uu(e){return _i(e,!0,!0)}function lu(e,t){return _i(e,!0,!0,t)}function cu(e,t){return null==t||Si(e,t,sl(t))}function du(e,t){return e===t||e!==e&&t!==t}function fu(e){return pu(e)&&jc.call(e,"callee")&&(!Kc.call(e,"callee")||Bc.call(e)==Mt)}function hu(e){return null!=e&&Su(e.length)&&!wu(e)}function pu(e){return Pu(e)&&hu(e)}function gu(e){return e===!0||e===!1||Pu(e)&&Bc.call(e)==Rt}function mu(e){return!!e&&1===e.nodeType&&Pu(e)&&!Du(e)}function vu(e){if(hu(e)&&(Mf(e)||"string"==typeof e||"function"==typeof e.splice||Rf(e)||fu(e)))return!e.length;var t=Vd(e);if(t==Ft||t==Gt)return!e.size;if(Td||da(e))return!sd(e).length;for(var n in e)if(jc.call(e,n))return!1;return!0}function yu(e,t){return ur(e,t)}function _u(e,t,n){n="function"==typeof n?n:J;var i=n?n(e,t):J;return i===J?ur(e,t,n):!!i}function bu(e){return Pu(e)?Bc.call(e)==Lt||"string"==typeof e.message&&"string"==typeof e.name:!1}function Tu(e){return"number"==typeof e&&od(e)}function wu(e){var t=Cu(e)?Bc.call(e):"";return t==Nt||t==jt}function Eu(e){return"number"==typeof e&&e==Gu(e)}function Su(e){return"number"==typeof e&&e>-1&&e%1==0&&St>=e}function Cu(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Pu(e){return!!e&&"object"==typeof e}function Au(e,t){return e===t||dr(e,t,Ko(t))}function Iu(e,t,n){return n="function"==typeof n?n:J,dr(e,t,Ko(t),n)}function xu(e){return Ru(e)&&e!=+e}function Ou(e){if(Hd(e))throw new Sc("This method is not supported with core-js. Try https://github.com/es-shims.");return fr(e)}function Mu(e){return null===e}function ku(e){return null==e}function Ru(e){return"number"==typeof e||Pu(e)&&Bc.call(e)==Ut}function Du(e){if(!Pu(e)||Bc.call(e)!=Bt||U(e))return!1;var t=zc(e);if(null===t)return!0;var n=jc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Nc.call(n)==Uc}function Lu(e){return Eu(e)&&e>=-St&&St>=e}function Nu(e){return"string"==typeof e||!Mf(e)&&Pu(e)&&Bc.call(e)==qt}function ju(e){return"symbol"==typeof e||Pu(e)&&Bc.call(e)==Wt}function Fu(e){return e===J}function Uu(e){return Pu(e)&&Vd(e)==zt}function Bu(e){return Pu(e)&&Bc.call(e)==Yt}function Vu(e){if(!e)return[];if(hu(e))return Nu(e)?Y(e):po(e);if(Yc&&e[Yc])return B(e[Yc]());var t=Vd(e),n=t==Ft?V:t==Gt?q:bl;return n(e)}function Hu(e){if(!e)return 0===e?e:0;if(e=Wu(e),e===Et||e===-Et){var t=0>e?-1:1;return t*Ct}return e===e?e:0}function Gu(e){var t=Hu(e),n=t%1;return t===t?n?t-n:t:0}function qu(e){return e?yi(Gu(e),0,At):0}function Wu(e){if("number"==typeof e)return e;if(ju(e))return Pt;if(Cu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Cu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mn,"");var n=An.test(e);return n||xn.test(e)?Ii(e.slice(2),n?2:8):Pn.test(e)?Pt:+e}function zu(e){return go(e,ul(e))}function Yu(e){return yi(Gu(e),-St,St)}function $u(e){return null==e?"":Gr(e)}function Ku(e,t){var n=Ci(e);return t?pi(n,t):n}function Xu(e,t){return v(e,Yo(t,3),Gi)}function Qu(e,t){return v(e,Yo(t,3),$i)}function Ju(e,t){return null==e?e:Rd(e,Yo(t,3),ul)}function Zu(e,t){return null==e?e:Dd(e,Yo(t,3),ul)}function el(e,t){return e&&Gi(e,Yo(t,3))}function tl(e,t){return e&&$i(e,Yo(t,3))}function nl(e){return null==e?[]:Ki(e,sl(e))}function il(e){return null==e?[]:Ki(e,ul(e))}function rl(e,t,n){var i=null==e?J:Xi(e,t);return i===J?n:i}function ol(e,t){return null!=e&&Zo(e,t,er)}function al(e,t){return null!=e&&Zo(e,t,tr)}function sl(e){return hu(e)?ui(e):vr(e)}function ul(e){return hu(e)?ui(e,!0):yr(e)}function ll(e,t){var n={};return t=Yo(t,3),Gi(e,function(e,i,r){n[t(e,i,r)]=e}),n}function cl(e,t){var n={};return t=Yo(t,3),Gi(e,function(e,i,r){n[i]=t(e,i,r)}),n}function dl(e,t){return fl(e,Js(Yo(t)))}function fl(e,t){return null==e?{}:Ir(e,qo(e),Yo(t))}function hl(e,t,n){t=sa(t,e)?[t]:Zr(t);var i=-1,r=t.length;for(r||(e=J,r=1);++i<r;){var o=null==e?J:e[_a(t[i])];o===J&&(i=r,o=n),e=wu(o)?o.call(e):o}return e}function pl(e,t,n){return null==e?e:Nr(e,t,n)}function gl(e,t,n,i){return i="function"==typeof i?i:J,null==e?e:Nr(e,t,n,i)}function ml(e,t,n){var i=Mf(e)||Ff(e);if(t=Yo(t,4),null==n)if(i||Cu(e)){var o=e.constructor;n=i?Mf(e)?new o:[]:wu(o)?Ci(zc(e)):{}}else n={};return(i?r:Gi)(e,function(e,i,r){return t(n,e,i,r)}),n}function vl(e,t){return null==e?!0:Wr(e,t)}function yl(e,t,n){return null==e?e:zr(e,t,Jr(n))}function _l(e,t,n,i){return i="function"==typeof i?i:J,null==e?e:zr(e,t,Jr(n),i)}function bl(e){return e?M(e,sl(e)):[]}function Tl(e){return null==e?[]:M(e,ul(e))}function wl(e,t,n){return n===J&&(n=t,t=J),n!==J&&(n=Wu(n),n=n===n?n:0),t!==J&&(t=Wu(t),t=t===t?t:0),yi(Wu(e),t,n)}function El(e,t,n){return t=Hu(t),n===J?(n=t,t=0):n=Hu(n),e=Wu(e),nr(e,t,n)}function Sl(e,t,n){if(n&&"boolean"!=typeof n&&aa(e,t,n)&&(t=n=J),n===J&&("boolean"==typeof t?(n=t,t=J):"boolean"==typeof e&&(n=e,e=J)),e===J&&t===J?(e=0,t=1):(e=Hu(e),t===J?(t=e,e=0):t=Hu(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=dd();return ld(e+r*(t-e+Ai("1e-"+((r+"").length-1))),t)}return kr(e,t)}function Cl(e){return ch($u(e).toLowerCase())}function Pl(e){return e=$u(e),e&&e.replace(Mn,qi).replace(mi,"")}function Al(e,t,n){e=$u(e),t=Gr(t);var i=e.length;n=n===J?i:yi(Gu(n),0,i);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function Il(e){return e=$u(e),e&&ln.test(e)?e.replace(sn,Wi):e}function xl(e){return e=$u(e),e&&gn.test(e)?e.replace(pn,"\\$&"):e}function Ol(e,t,n){e=$u(e),t=Gu(t);var i=t?z(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return ko(nd(r),n)+e+ko(td(r),n)}function Ml(e,t,n){e=$u(e),t=Gu(t);var i=t?z(e):0;return t&&t>i?e+ko(t-i,n):e}function kl(e,t,n){e=$u(e),t=Gu(t);var i=t?z(e):0;return t&&t>i?ko(t-i,n)+e:e}function Rl(e,t,n){return n||null==t?t=0:t&&(t=+t),e=$u(e).replace(mn,""),cd(e,t||(Cn.test(e)?16:10))}function Dl(e,t,n){return t=(n?aa(e,t,n):t===J)?1:Gu(t),Dr($u(e),t)}function Ll(){var e=arguments,t=$u(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function Nl(e,t,n){return n&&"number"!=typeof n&&aa(e,t,n)&&(t=n=J),(n=n===J?At:n>>>0)?(e=$u(e),e&&("string"==typeof t||null!=t&&!Nf(t))&&(t=Gr(t),!t&&j(e))?eo(Y(e),0,n):e.split(t,n)):[]}function jl(e,t,n){return e=$u(e),n=yi(Gu(n),0,e.length),t=Gr(t),e.slice(n,n+t.length)==t}function Fl(e){return $u(e).toLowerCase()}function Ul(e){return $u(e).toUpperCase()}function Bl(e,t,n){if(e=$u(e),e&&(n||t===J))return e.replace(mn,"");if(!e||!(t=Gr(t)))return e;var i=Y(e),r=Y(t),o=R(i,r),a=D(i,r)+1;return eo(i,o,a).join("")}function Vl(e,t,n){if(e=$u(e),e&&(n||t===J))return e.replace(yn,"");if(!e||!(t=Gr(t)))return e;var i=Y(e),r=D(i,Y(t))+1;return eo(i,0,r).join("")}function Hl(e,t,n){if(e=$u(e),e&&(n||t===J))return e.replace(vn,"");if(!e||!(t=Gr(t)))return e;var i=Y(e),r=R(i,Y(t));return eo(i,r).join("")}function Gl(e,t){var n=mt,i=vt;if(Cu(t)){var r="separator"in t?t.separator:r;n="length"in t?Gu(t.length):n,i="omission"in t?Gr(t.omission):i}e=$u(e);var o=e.length;if(j(e)){var a=Y(e);o=a.length}if(n>=o)return e;var s=n-z(i);if(1>s)return i;var u=a?eo(a,0,s).join(""):e.slice(0,s);if(r===J)return u+i;if(a&&(s+=u.length-s),Nf(r)){if(e.slice(s).search(r)){var l,c=u;for(r.global||(r=Ic(r.source,$u(Sn.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===J?s:d)}}else if(e.indexOf(Gr(r),s)!=s){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i}function ql(e){return e=$u(e),e&&un.test(e)?e.replace(an,zi):e}function Wl(e,t,n){return e=$u(e),t=n?J:t,t===J?F(e)?X(e):m(e):e.match(t)||[]}function zl(e){var t=e?e.length:0,i=Yo();return e=t?c(e,function(e){if("function"!=typeof e[1])throw new Oc(tt);return[i(e[0]),e[1]]}):[],Lr(function(i){for(var r=-1;++r<t;){var o=e[r];if(n(o[0],this,i))return n(o[1],this,i)}})}function Yl(e){return bi(_i(e,!0))}function $l(e){return function(){return e}}function Kl(e,t){return null==e||e!==e?t:e}function Xl(e){return e}function Ql(e){return mr("function"==typeof e?e:_i(e,!0))}function Jl(e){return Tr(_i(e,!0))}function Zl(e,t){return wr(e,_i(t,!0))}function ec(e,t,n){var i=sl(t),o=Ki(t,i);null!=n||Cu(t)&&(o.length||!i.length)||(n=t,t=e,e=this,o=Ki(t,sl(t)));var a=!(Cu(n)&&"chain"in n&&!n.chain),s=wu(e);return r(o,function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),r=n.__actions__=po(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,d([this.value()],arguments))})}),e}function tc(){return Mi._===this&&(Mi._=Vc),this}function nc(){}function ic(e){return e=Gu(e),Lr(function(t){return Cr(t,e)})}function rc(e){return sa(e)?E(_a(e)):xr(e)}function oc(e){return function(t){return null==e?J:Xi(e,t)}}function ac(){return[]}function sc(){return!1}function uc(){return{}}function lc(){return""}function cc(){return!0}function dc(e,t){if(e=Gu(e),1>e||e>St)return[];var n=At,i=ld(e,At);t=Yo(t),e-=At;for(var r=I(i,t);++n<e;)t(n);return r}function fc(e){return Mf(e)?c(e,_a):ju(e)?[e]:po(zd(e))}function hc(e){var t=++Fc;return $u(e)+t}function pc(e){return e&&e.length?ki(e,Xl,Zi):J}function gc(e,t){return e&&e.length?ki(e,Yo(t,2),Zi):J}function mc(e){return w(e,Xl)}function vc(e,t){return w(e,Yo(t,2))}function yc(e){return e&&e.length?ki(e,Xl,_r):J}function _c(e,t){return e&&e.length?ki(e,Yo(t,2),_r):J}function bc(e){return e&&e.length?A(e,Xl):0}function Tc(e,t){return e&&e.length?A(e,Yo(t,2)):0}g=g?Yi.defaults(Mi.Object(),g,Yi.pick(Mi,Ti)):Mi;var wc=g.Array,Ec=g.Date,Sc=g.Error,Cc=g.Function,Pc=g.Math,Ac=g.Object,Ic=g.RegExp,xc=g.String,Oc=g.TypeError,Mc=wc.prototype,kc=Cc.prototype,Rc=Ac.prototype,Dc=g["__core-js_shared__"],Lc=function(){var e=/[^.]+$/.exec(Dc&&Dc.keys&&Dc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Nc=kc.toString,jc=Rc.hasOwnProperty,Fc=0,Uc=Nc.call(Ac),Bc=Rc.toString,Vc=Mi._,Hc=Ic("^"+Nc.call(jc).replace(pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gc=Di?g.Buffer:J,qc=g.Symbol,Wc=g.Uint8Array,zc=H(Ac.getPrototypeOf,Ac),Yc=qc?qc.iterator:J,$c=Ac.create,Kc=Rc.propertyIsEnumerable,Xc=Mc.splice,Qc=qc?qc.isConcatSpreadable:J,Jc=g.clearTimeout!==Mi.clearTimeout&&g.clearTimeout,Zc=Ec&&Ec.now!==Mi.Date.now&&Ec.now,ed=g.setTimeout!==Mi.setTimeout&&g.setTimeout,td=Pc.ceil,nd=Pc.floor,id=Ac.getOwnPropertySymbols,rd=Gc?Gc.isBuffer:J,od=g.isFinite,ad=Mc.join,sd=H(Ac.keys,Ac),ud=Pc.max,ld=Pc.min,cd=g.parseInt,dd=Pc.random,fd=Mc.reverse,hd=Xo(g,"DataView"),pd=Xo(g,"Map"),gd=Xo(g,"Promise"),md=Xo(g,"Set"),vd=Xo(g,"WeakMap"),yd=Xo(Ac,"create"),_d=function(){var e=Xo(Ac,"defineProperty"),t=Xo.name;return t&&t.length>2?e:J}(),bd=vd&&new vd,Td=!Kc.call({valueOf:1},"valueOf"),wd={},Ed=ba(hd),Sd=ba(pd),Cd=ba(gd),Pd=ba(md),Ad=ba(vd),Id=qc?qc.prototype:J,xd=Id?Id.valueOf:J,Od=Id?Id.toString:J;S.prototype=$.prototype,S.prototype.constructor=S,K.prototype=Ci($.prototype),K.prototype.constructor=K,wn.prototype=Ci($.prototype),wn.prototype.constructor=wn,Ln.prototype.clear=Nn,Ln.prototype["delete"]=jn,Ln.prototype.get=Fn,Ln.prototype.has=Un,Ln.prototype.set=Bn,Vn.prototype.clear=Hn,Vn.prototype["delete"]=Gn,Vn.prototype.get=qn,Vn.prototype.has=Wn,Vn.prototype.set=zn,Yn.prototype.clear=$n,Yn.prototype["delete"]=Kn,Yn.prototype.get=Xn,Yn.prototype.has=Qn,Yn.prototype.set=Jn,Zn.prototype.add=Zn.prototype.push=ei,Zn.prototype.has=ti,ni.prototype.clear=ii,ni.prototype["delete"]=ri,ni.prototype.get=oi,ni.prototype.has=ai,ni.prototype.set=si;var Md=_o(Gi),kd=_o($i,!0),Rd=bo(),Dd=bo(!0),Ld=bd?function(e,t){return bd.set(e,t),e}:Xl,Nd=Jc||function(e){return Mi.clearTimeout(e)},jd=md&&1/q(new md([,-0]))[1]==Et?function(e){return new md(e)}:nc,Fd=bd?function(e){return bd.get(e)}:nc,Ud=id?H(id,Ac):ac,Bd=id?function(e){for(var t=[];e;)d(t,Ud(e)),e=zc(e);return t}:ac,Vd=Ji;(hd&&Vd(new hd(new ArrayBuffer(1)))!=Kt||pd&&Vd(new pd)!=Ft||gd&&Vd(gd.resolve())!=Vt||md&&Vd(new md)!=Gt||vd&&Vd(new vd)!=zt)&&(Vd=function(e){var t=Bc.call(e),n=t==Bt?e.constructor:J,i=n?ba(n):J;if(i)switch(i){case Ed:return Kt;case Sd:return Ft;case Cd:return Vt;case Pd:return Gt;case Ad:return zt}return t});var Hd=Dc?wu:sc,Gd=function(){var e=0,t=0;return function(n,i){var r=bf(),o=_t-(r-t);if(t=r,o>0){if(++e>=yt)return n}else e=0;return Ld(n,i)}}(),qd=ed||function(e,t){return Mi.setTimeout(e,t)},Wd=_d?function(e,t,n){var i=t+"";return _d(e,"toString",{configurable:!0,enumerable:!1,value:$l(ia(i,Ta(Jo(i),n)))})}:Xl,zd=Qs(function(e){e=$u(e);var t=[];return fn.test(e)&&t.push(""),e.replace(hn,function(e,n,i,r){t.push(i?r.replace(En,"$1"):n||e)}),t}),Yd=Lr(function(e,t){return pu(e)?xi(e,Ni(t,1,pu,!0)):[]}),$d=Lr(function(e,t){var n=Va(t);return pu(n)&&(n=J),pu(e)?xi(e,Ni(t,1,pu,!0),Yo(n,2)):[]}),Kd=Lr(function(e,t){var n=Va(t);return pu(n)&&(n=J),pu(e)?xi(e,Ni(t,1,pu,!0),J,n):[]}),Xd=Lr(function(e){var t=c(e,Qr);return t.length&&t[0]===e[0]?ir(t):[]}),Qd=Lr(function(e){var t=Va(e),n=c(e,Qr);return t===Va(n)?t=J:n.pop(),n.length&&n[0]===e[0]?ir(n,Yo(t,2)):[]}),Jd=Lr(function(e){var t=Va(e),n=c(e,Qr);return t===Va(n)?t=J:n.pop(),n.length&&n[0]===e[0]?ir(n,J,t):[]}),Zd=Lr(qa),ef=Lr(function(e,t){t=Ni(t,1);var n=e?e.length:0,i=vi(e,t);return Mr(e,c(t,function(e){return oa(e,n)?+e:e}).sort(lo)),i}),tf=Lr(function(e){return qr(Ni(e,1,pu,!0))}),nf=Lr(function(e){var t=Va(e);return pu(t)&&(t=J),qr(Ni(e,1,pu,!0),Yo(t,2))}),rf=Lr(function(e){var t=Va(e);return pu(t)&&(t=J),qr(Ni(e,1,pu,!0),J,t)}),of=Lr(function(e,t){return pu(e)?xi(e,t):[]}),af=Lr(function(e){return Kr(s(e,pu))}),sf=Lr(function(e){var t=Va(e);return pu(t)&&(t=J),Kr(s(e,pu),Yo(t,2))}),uf=Lr(function(e){var t=Va(e);return pu(t)&&(t=J),Kr(s(e,pu),J,t)}),lf=Lr(fs),cf=Lr(function(e){var t=e.length,n=t>1?e[t-1]:J;return n="function"==typeof n?(e.pop(),n):J,hs(e,n)}),df=Lr(function(e){e=Ni(e,1);var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return vi(t,e)};return!(t>1||this.__actions__.length)&&i instanceof wn&&oa(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:ys,args:[r],thisArg:J}),new K(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(J),e})):this.thru(r)}),ff=vo(function(e,t,n){jc.call(e,n)?++e[n]:e[n]=1}),hf=Po(Ma),pf=Po(ka),gf=vo(function(e,t,n){jc.call(e,n)?e[n].push(t):e[n]=[t]}),mf=Lr(function(e,t,i){var r=-1,o="function"==typeof t,a=sa(t),s=hu(e)?wc(e.length):[];return Md(e,function(e){var u=o?t:a&&null!=e?e[t]:J;s[++r]=u?n(u,e,i):or(e,t,i)}),s}),vf=vo(function(e,t,n){e[n]=t}),yf=vo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),_f=Lr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&aa(e,t[0],t[1])?t=[]:n>2&&aa(t[0],t[1],t[2])&&(t=[t[0]]),Pr(e,Ni(t,1),[])}),bf=Zc||function(){return Mi.Date.now()},Tf=Lr(function(e,t,n){var i=rt;if(n.length){var r=G(n,zo(Tf));i|=lt}return Uo(e,i,t,n,r)}),wf=Lr(function(e,t,n){var i=rt|ot;if(n.length){var r=G(n,zo(wf));i|=lt}return Uo(t,i,e,n,r)}),Ef=Lr(function(e,t){return Pi(e,1,t)}),Sf=Lr(function(e,t,n){return Pi(e,Wu(t)||0,n)});Qs.Cache=Yn;var Cf=Lr(function(e,t){t=1==t.length&&Mf(t[0])?c(t[0],O(Yo())):c(Ni(t,1),O(Yo()));var i=t.length;return Lr(function(r){for(var o=-1,a=ld(r.length,i);++o<a;)r[o]=t[o].call(this,r[o]);return n(e,this,r)})}),Pf=Lr(function(e,t){var n=G(t,zo(Pf));return Uo(e,lt,J,t,n)}),Af=Lr(function(e,t){var n=G(t,zo(Af));return Uo(e,ct,J,t,n)}),If=Lr(function(e,t){return Uo(e,ft,J,J,J,Ni(t,1))}),xf=Lo(Zi),Of=Lo(function(e,t){return e>=t}),Mf=wc.isArray,kf=ji?O(ji):ar,Rf=rd||sc,Df=Fi?O(Fi):sr,Lf=Ui?O(Ui):cr,Nf=Bi?O(Bi):hr,jf=Vi?O(Vi):pr,Ff=Hi?O(Hi):gr,Uf=Lo(_r),Bf=Lo(function(e,t){return t>=e}),Vf=yo(function(e,t){if(Td||da(t)||hu(t))return void go(t,sl(t),e);for(var n in t)jc.call(t,n)&&di(e,n,t[n])}),Hf=yo(function(e,t){go(t,ul(t),e)}),Gf=yo(function(e,t,n,i){go(t,ul(t),e,i)}),qf=yo(function(e,t,n,i){go(t,sl(t),e,i)}),Wf=Lr(function(e,t){return vi(e,Ni(t,1))}),zf=Lr(function(e){return e.push(J,li),n(Gf,J,e)}),Yf=Lr(function(e){return e.push(J,ga),n(Jf,J,e)}),$f=xo(function(e,t,n){e[t]=n},$l(Xl)),Kf=xo(function(e,t,n){jc.call(e,t)?e[t].push(n):e[t]=[n]},Yo),Xf=Lr(or),Qf=yo(function(e,t,n){Er(e,t,n)}),Jf=yo(function(e,t,n,i){Er(e,t,n,i)}),Zf=Lr(function(e,t){return null==e?{}:(t=c(Ni(t,1),_a),Ar(e,xi(qo(e),t)))}),eh=Lr(function(e,t){return null==e?{}:Ar(e,c(Ni(t,1),_a))}),th=Fo(sl),nh=Fo(ul),ih=Eo(function(e,t,n){return t=t.toLowerCase(),e+(n?Cl(t):t)}),rh=Eo(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),oh=Eo(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ah=wo("toLowerCase"),sh=Eo(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),uh=Eo(function(e,t,n){return e+(n?" ":"")+ch(t)}),lh=Eo(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ch=wo("toUpperCase"),dh=Lr(function(e,t){try{return n(e,J,t)}catch(i){return bu(i)?i:new Sc(i)}}),fh=Lr(function(e,t){return r(Ni(t,1),function(t){t=_a(t),e[t]=Tf(e[t],e)}),e}),hh=Ao(),ph=Ao(!0),gh=Lr(function(e,t){return function(n){return or(n,e,t)}}),mh=Lr(function(e,t){return function(n){return or(e,n,t)}}),vh=Mo(c),yh=Mo(a),_h=Mo(p),bh=Do(),Th=Do(!0),wh=Oo(function(e,t){return e+t},0),Eh=jo("ceil"),Sh=Oo(function(e,t){return e/t},1),Ch=jo("floor"),Ph=Oo(function(e,t){return e*t},1),Ah=jo("round"),Ih=Oo(function(e,t){return e-t},0);return S.after=qs,S.ary=Ws,S.assign=Vf,S.assignIn=Hf,S.assignInWith=Gf,S.assignWith=qf,S.at=Wf,S.before=zs,S.bind=Tf,S.bindAll=fh,S.bindKey=wf,S.castArray=ou,S.chain=ms,S.chunk=Ea,S.compact=Sa,S.concat=Ca,S.cond=zl,S.conforms=Yl,S.constant=$l,S.countBy=ff,S.create=Ku,S.curry=Ys,S.curryRight=$s,S.debounce=Ks,S.defaults=zf,S.defaultsDeep=Yf,S.defer=Ef,S.delay=Sf,S.difference=Yd,S.differenceBy=$d,S.differenceWith=Kd,S.drop=Pa,S.dropRight=Aa,S.dropRightWhile=Ia,S.dropWhile=xa,S.fill=Oa,S.filter=As,S.flatMap=Is,S.flatMapDeep=xs,S.flatMapDepth=Os,S.flatten=Ra,S.flattenDeep=Da,S.flattenDepth=La,S.flip=Xs,S.flow=hh,S.flowRight=ph,S.fromPairs=Na,S.functions=nl,S.functionsIn=il,S.groupBy=gf,S.initial=Ua,S.intersection=Xd,S.intersectionBy=Qd,S.intersectionWith=Jd,S.invert=$f,S.invertBy=Kf,S.invokeMap=mf,S.iteratee=Ql,S.keyBy=vf,S.keys=sl,S.keysIn=ul,S.map=Ds,S.mapKeys=ll,S.mapValues=cl,S.matches=Jl,S.matchesProperty=Zl,S.memoize=Qs,S.merge=Qf,S.mergeWith=Jf,S.method=gh,S.methodOf=mh,S.mixin=ec,S.negate=Js,S.nthArg=ic,S.omit=Zf,S.omitBy=dl,S.once=Zs,S.orderBy=Ls,S.over=vh,S.overArgs=Cf,S.overEvery=yh,S.overSome=_h,S.partial=Pf,S.partialRight=Af,S.partition=yf,S.pick=eh,S.pickBy=fl,S.property=rc,S.propertyOf=oc,S.pull=Zd,S.pullAll=qa,S.pullAllBy=Wa,S.pullAllWith=za,S.pullAt=ef,S.range=bh,S.rangeRight=Th,S.rearg=If,S.reject=Fs,S.remove=Ya,S.rest=eu,S.reverse=$a,S.sampleSize=Bs,S.set=pl,S.setWith=gl,S.shuffle=Vs,S.slice=Ka,S.sortBy=_f,S.sortedUniq=ns,S.sortedUniqBy=is,S.split=Nl,S.spread=tu,S.tail=rs,S.take=os,S.takeRight=as,S.takeRightWhile=ss,S.takeWhile=us,S.tap=vs,S.throttle=nu,S.thru=ys,S.toArray=Vu,S.toPairs=th,S.toPairsIn=nh,S.toPath=fc,S.toPlainObject=zu,S.transform=ml,S.unary=iu,S.union=tf,S.unionBy=nf,S.unionWith=rf,S.uniq=ls,S.uniqBy=cs,S.uniqWith=ds,S.unset=vl,S.unzip=fs,S.unzipWith=hs,S.update=yl,S.updateWith=_l,S.values=bl,S.valuesIn=Tl,S.without=of,S.words=Wl,S.wrap=ru,S.xor=af,S.xorBy=sf,S.xorWith=uf,S.zip=lf,S.zipObject=ps,S.zipObjectDeep=gs,S.zipWith=cf,S.entries=th,S.entriesIn=nh,S.extend=Hf,S.extendWith=Gf,ec(S,S),S.add=wh,S.attempt=dh,S.camelCase=ih,S.capitalize=Cl,S.ceil=Eh,S.clamp=wl,S.clone=au,S.cloneDeep=uu,S.cloneDeepWith=lu,S.cloneWith=su,S.conformsTo=cu,S.deburr=Pl,S.defaultTo=Kl,S.divide=Sh,S.endsWith=Al,S.eq=du,S.escape=Il,S.escapeRegExp=xl,S.every=Ps,S.find=hf,S.findIndex=Ma,S.findKey=Xu,S.findLast=pf,S.findLastIndex=ka,S.findLastKey=Qu,S.floor=Ch,S.forEach=Ms,S.forEachRight=ks,S.forIn=Ju,S.forInRight=Zu,S.forOwn=el,S.forOwnRight=tl,S.get=rl,S.gt=xf,S.gte=Of,S.has=ol,S.hasIn=al,S.head=ja,S.identity=Xl,S.includes=Rs,S.indexOf=Fa,S.inRange=El,S.invoke=Xf,S.isArguments=fu,S.isArray=Mf,S.isArrayBuffer=kf,S.isArrayLike=hu,S.isArrayLikeObject=pu,S.isBoolean=gu,S.isBuffer=Rf,S.isDate=Df,S.isElement=mu,S.isEmpty=vu,S.isEqual=yu,S.isEqualWith=_u,S.isError=bu,S.isFinite=Tu,S.isFunction=wu,S.isInteger=Eu,S.isLength=Su,S.isMap=Lf,S.isMatch=Au,S.isMatchWith=Iu,S.isNaN=xu,S.isNative=Ou,S.isNil=ku,S.isNull=Mu,S.isNumber=Ru,S.isObject=Cu,S.isObjectLike=Pu,S.isPlainObject=Du,S.isRegExp=Nf,S.isSafeInteger=Lu,S.isSet=jf,S.isString=Nu,S.isSymbol=ju,S.isTypedArray=Ff,S.isUndefined=Fu,S.isWeakMap=Uu,S.isWeakSet=Bu,S.join=Ba,S.kebabCase=rh,S.last=Va,S.lastIndexOf=Ha,S.lowerCase=oh,S.lowerFirst=ah,S.lt=Uf,S.lte=Bf,S.max=pc,S.maxBy=gc,S.mean=mc,S.meanBy=vc,S.min=yc,S.minBy=_c,S.stubArray=ac,S.stubFalse=sc,S.stubObject=uc,S.stubString=lc,S.stubTrue=cc,S.multiply=Ph,S.nth=Ga,S.noConflict=tc,S.noop=nc,S.now=bf,S.pad=Ol,S.padEnd=Ml,S.padStart=kl,S.parseInt=Rl,S.random=Sl,S.reduce=Ns,S.reduceRight=js,S.repeat=Dl,S.replace=Ll,S.result=hl,S.round=Ah,S.runInContext=Q,S.sample=Us,S.size=Hs,S.snakeCase=sh,S.some=Gs,S.sortedIndex=Xa,S.sortedIndexBy=Qa,S.sortedIndexOf=Ja,S.sortedLastIndex=Za,S.sortedLastIndexBy=es,S.sortedLastIndexOf=ts,S.startCase=uh,S.startsWith=jl,S.subtract=Ih,S.sum=bc,S.sumBy=Tc,S.times=dc,S.toFinite=Hu,S.toInteger=Gu,S.toLength=qu,S.toLower=Fl,S.toNumber=Wu,S.toSafeInteger=Yu,S.toString=$u,S.toUpper=Ul,S.trim=Bl,S.trimEnd=Vl,S.trimStart=Hl,S.truncate=Gl,S.unescape=ql,S.uniqueId=hc,S.upperCase=lh,S.upperFirst=ch,S.each=Ms,S.eachRight=ks,S.first=ja,ec(S,function(){var e={};return Gi(S,function(t,n){jc.call(S.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),S.VERSION=Z,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){S[e].placeholder=S}),r(["drop","take"],function(e,t){wn.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new wn(this);n=n===J?1:ud(Gu(n),0);var r=this.clone();return i?r.__takeCount__=ld(n,r.__takeCount__):r.__views__.push({size:ld(n,At),type:e+(r.__dir__<0?"Right":"")}),r},wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),r(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==bt||n==wt;wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yo(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),r(["head","last"],function(e,t){var n="take"+(t?"Right":"");wn.prototype[e]=function(){return this[n](1).value()[0]}}),r(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");wn.prototype[e]=function(){return this.__filtered__?new wn(this):this[n](1)}}),wn.prototype.compact=function(){return this.filter(Xl)},wn.prototype.find=function(e){return this.filter(e).head()},wn.prototype.findLast=function(e){return this.reverse().find(e)},wn.prototype.invokeMap=Lr(function(e,t){return"function"==typeof e?new wn(this):this.map(function(n){return or(n,e,t)
})}),wn.prototype.reject=function(e){return this.filter(Js(Yo(e)))},wn.prototype.slice=function(e,t){e=Gu(e);var n=this;return n.__filtered__&&(e>0||0>t)?new wn(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==J&&(t=Gu(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},wn.prototype.toArray=function(){return this.take(At)},Gi(wn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=S[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(S.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,s=t instanceof wn,u=a[0],l=s||Mf(t),c=function(e){var t=r.apply(S,d([e],a));return i&&f?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,g=s&&!h;if(!o&&l){t=g?t:new wn(this);var m=e.apply(t,a);return m.__actions__.push({func:ys,args:[c],thisArg:J}),new K(m,f)}return p&&g?e.apply(this,a):(m=this.thru(c),p?i?m.value()[0]:m.value():m)})}),r(["pop","push","shift","sort","splice","unshift"],function(e){var t=Mc[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);S.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Mf(r)?r:[],e)}return this[n](function(n){return t.apply(Mf(n)?n:[],e)})}}),Gi(wn.prototype,function(e,t){var n=S[t];if(n){var i=n.name+"",r=wd[i]||(wd[i]=[]);r.push({name:t,func:n})}}),wd[Io(J,ot).name]=[{name:"wrapper",func:J}],wn.prototype.clone=kn,wn.prototype.reverse=Rn,wn.prototype.value=Dn,S.prototype.at=df,S.prototype.chain=_s,S.prototype.commit=bs,S.prototype.next=Ts,S.prototype.plant=Es,S.prototype.reverse=Ss,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Cs,S.prototype.first=S.prototype.head,Yc&&(S.prototype[Yc]=ws),S}var J,Z="4.15.0",et=200,tt="Expected a function",nt="__lodash_hash_undefined__",it="__lodash_placeholder__",rt=1,ot=2,at=4,st=8,ut=16,lt=32,ct=64,dt=128,ft=256,ht=512,pt=1,gt=2,mt=30,vt="...",yt=150,_t=16,bt=1,Tt=2,wt=3,Et=1/0,St=9007199254740991,Ct=1.7976931348623157e308,Pt=0/0,At=4294967295,It=At-1,xt=At>>>1,Ot=[["ary",dt],["bind",rt],["bindKey",ot],["curry",st],["curryRight",ut],["flip",ht],["partial",lt],["partialRight",ct],["rearg",ft]],Mt="[object Arguments]",kt="[object Array]",Rt="[object Boolean]",Dt="[object Date]",Lt="[object Error]",Nt="[object Function]",jt="[object GeneratorFunction]",Ft="[object Map]",Ut="[object Number]",Bt="[object Object]",Vt="[object Promise]",Ht="[object RegExp]",Gt="[object Set]",qt="[object String]",Wt="[object Symbol]",zt="[object WeakMap]",Yt="[object WeakSet]",$t="[object ArrayBuffer]",Kt="[object DataView]",Xt="[object Float32Array]",Qt="[object Float64Array]",Jt="[object Int8Array]",Zt="[object Int16Array]",en="[object Int32Array]",tn="[object Uint8Array]",nn="[object Uint8ClampedArray]",rn="[object Uint16Array]",on="[object Uint32Array]",an=/&(?:amp|lt|gt|quot|#39|#96);/g,sn=/[&<>"'`]/g,un=RegExp(an.source),ln=RegExp(sn.source),cn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dn=/^\w*$/,fn=/^\./,hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pn=/[\\^$.*+?()[\]{}|]/g,gn=RegExp(pn.source),mn=/^\s+|\s+$/g,vn=/^\s+/,yn=/\s+$/,_n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bn=/\{\n\/\* \[wrapped with (.+)\] \*/,Tn=/,? & /,wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,En=/\\(\\)?/g,Sn=/\w*$/,Cn=/^0x/i,Pn=/^[-+]0x[0-9a-f]+$/i,An=/^0b[01]+$/i,In=/^\[object .+?Constructor\]$/,xn=/^0o[0-7]+$/i,On=/^(?:0|[1-9]\d*)$/,Mn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kn="\\ud800-\\udfff",Rn="\\u0300-\\u036f\\ufe20-\\ufe23",Dn="\\u20d0-\\u20f0",Ln="\\u2700-\\u27bf",Nn="a-z\\xdf-\\xf6\\xf8-\\xff",jn="\\xac\\xb1\\xd7\\xf7",Fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Un="\\u2000-\\u206f",Bn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vn="A-Z\\xc0-\\xd6\\xd8-\\xde",Hn="\\ufe0e\\ufe0f",Gn=jn+Fn+Un+Bn,qn="['’]",Wn="["+kn+"]",zn="["+Gn+"]",Yn="["+Rn+Dn+"]",$n="\\d+",Kn="["+Ln+"]",Xn="["+Nn+"]",Qn="[^"+kn+Gn+$n+Ln+Nn+Vn+"]",Jn="\\ud83c[\\udffb-\\udfff]",Zn="(?:"+Yn+"|"+Jn+")",ei="[^"+kn+"]",ti="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",ii="["+Vn+"]",ri="\\u200d",oi="(?:"+Xn+"|"+Qn+")",ai="(?:"+ii+"|"+Qn+")",si="(?:"+qn+"(?:d|ll|m|re|s|t|ve))?",ui="(?:"+qn+"(?:D|LL|M|RE|S|T|VE))?",li=Zn+"?",ci="["+Hn+"]?",di="(?:"+ri+"(?:"+[ei,ti,ni].join("|")+")"+ci+li+")*",fi=ci+li+di,hi="(?:"+[Kn,ti,ni].join("|")+")"+fi,pi="(?:"+[ei+Yn+"?",Yn,ti,ni,Wn].join("|")+")",gi=RegExp(qn,"g"),mi=RegExp(Yn,"g"),vi=RegExp(Jn+"(?="+Jn+")|"+pi+fi,"g"),yi=RegExp([ii+"?"+Xn+"+"+si+"(?="+[zn,ii,"$"].join("|")+")",ai+"+"+ui+"(?="+[zn,ii+oi,"$"].join("|")+")",ii+"?"+oi+"+"+si,ii+"+"+ui,$n,hi].join("|"),"g"),_i=RegExp("["+ri+kn+Rn+Dn+Hn+"]"),bi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ti=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wi={};wi[Xt]=wi[Qt]=wi[Jt]=wi[Zt]=wi[en]=wi[tn]=wi[nn]=wi[rn]=wi[on]=!0,wi[Mt]=wi[kt]=wi[$t]=wi[Rt]=wi[Kt]=wi[Dt]=wi[Lt]=wi[Nt]=wi[Ft]=wi[Ut]=wi[Bt]=wi[Ht]=wi[Gt]=wi[qt]=wi[zt]=!1;var Ei={};Ei[Mt]=Ei[kt]=Ei[$t]=Ei[Kt]=Ei[Rt]=Ei[Dt]=Ei[Xt]=Ei[Qt]=Ei[Jt]=Ei[Zt]=Ei[en]=Ei[Ft]=Ei[Ut]=Ei[Bt]=Ei[Ht]=Ei[Gt]=Ei[qt]=Ei[Wt]=Ei[tn]=Ei[nn]=Ei[rn]=Ei[on]=!0,Ei[Lt]=Ei[Nt]=Ei[zt]=!1;var Si={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},Ci={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ai=parseFloat,Ii=parseInt,xi="object"==typeof global&&global&&global.Object===Object&&global,Oi="object"==typeof self&&self&&self.Object===Object&&self,Mi=xi||Oi||Function("return this")(),ki="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ri=ki&&"object"==typeof module&&module&&!module.nodeType&&module,Di=Ri&&Ri.exports===ki,Li=Di&&xi.process,Ni=function(){try{return Li&&Li.binding("util")}catch(e){}}(),ji=Ni&&Ni.isArrayBuffer,Fi=Ni&&Ni.isDate,Ui=Ni&&Ni.isMap,Bi=Ni&&Ni.isRegExp,Vi=Ni&&Ni.isSet,Hi=Ni&&Ni.isTypedArray,Gi=E("length"),qi=S(Si),Wi=S(Ci),zi=S(Pi),Yi=Q();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Mi._=Yi,define("lodash",[],function(){return Yi})):Ri?((Ri.exports=Yi)._=Yi,ki._=Yi):Mi._=Yi}.call(this),define("jqueryajaxie9corsfix",["jquery"],function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,o){if(r.crossDomain&&r.async&&n.test(r.type)&&t.test(r.url)&&i.test(r.url)){var a=null;return{send:function(t,n){var i="",s=(o.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(o.timeout)&&(a.timeout=o.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var t="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,i={code:200,message:"success"},r={text:a.responseText};try{if("html"===s||/text\/html/i.test(a.contentType))r.html=a.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(a.contentType))try{r.json=e.parseJSON(a.responseText)}catch(o){i.code=500,i.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(a.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(a.responseText)}catch(o){u=void 0}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw i.code=500,i.message="parseerror","Invalid XML: "+a.responseText;r.xml=u}}catch(l){throw l}finally{n(i.code,i.message,r,t)}},a.onprogress=function(){},a.onerror=function(){n(500,"error",{text:a.responseText})},o.data&&(i="string"===e.type(o.data)?o.data:e.param(o.data)),a.open(r.type,r.url),a.send(i)},abort:function(){a&&a.abort()}}}}),e}),define("base64",[],function(){!function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var i,r,o=String(t),a=0,s=n,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&i>>8-a%1*8)){if(r=o.charCodeAt(a+=.75),r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|r}return u}),t.atob||(t.atob=function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,s=0,u="";o=i.charAt(s++);~o&&(r=a%4?64*r+o:o,a++%4)?u+=String.fromCharCode(255&r>>(-2*a&6)):0)o=n.indexOf(o);return u})}()}),define("polyfills",["lodash","jqueryajaxie9corsfix","base64"],function(e){!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+i)},i);return e=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){function e(e,t){return this.slice(e,t)}function t(e,t){arguments.length<2&&(t=0);for(var n=0,i=e.length;i>n;++n,++t)this[t]=255&e[n]}function n(n){var i;if("number"==typeof n){i=new Array(n);for(var r=0;n>r;++r)i[r]=0}else i=n.slice(0);return i.subarray=e,i.buffer=i,i.byteLength=i.length,i.set=t,"object"==typeof n&&n.buffer&&(i.buffer=n.buffer),i}try{{new Uint8Array(1)}return}catch(i){}window.Uint8Array=n,window.Uint32Array=n,window.Int32Array=n}(),"undefined"==typeof console&&(window.console={log:function(){},warn:function(){},error:function(){},info:function(){},debug:function(){}}),Math.toRad=function(e){return e*(Math.PI/180)},Math.toDeg=function(e){return e*(180/Math.PI)},Math.format=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},Math.hit=function(e,t,n,i,r,o,a){return a?e>=n-r/2&&n-r/2+r>=e&&t>=i-o/2&&i-o/2+o>=t:e>=n&&n+r>=e&&t>=i&&i+o>=t},Math.boxhit=function(e,t,n,i,r,o,a,s){return(e>=r&&r+a>=e||e+n>=r&&r+a>=e+n)&&(t>=o&&o+s>=t||t+i>=o&&o+s>=t+i)},Math.clamp=function(e,t,n){return t>e?t:e>n?n:e},Math.rotateCoord=function(e,t,n,i,r){var o=e-n,a=t-i;return e=Math.cos(r)*o+Math.sin(r)*a,t=-Math.sin(r)*o+Math.cos(r)*a,e+=n,t+=i,{x:e,y:t}},Math.pointInPoly=function(e,t,n){var i,r,o=!1,a=e.length;for(i=0,r=a-1;a>i;r=i++)e[i].y>n!=e[r].y>n&&t<(e[r].x-e[i].x)*(n-e[i].y)/(e[r].y-e[i].y)+e[i].x&&(o=!o);return o},Object.create||(Object.create=function(e,t){function n(){}if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object: "+e);if(null===e)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if("undefined"!=typeof t)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");return n.prototype=e,new n}),!e.omitBy&&e.omit&&(e.omitBy=e.omit)}),define("easing",["jquery"],function(e){!function(e){e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,i,r,o){return e.easing[e.easing.def](t,n,i,r,o)},easeInQuad:function(e,t,n,i,r){return i*(t/=r)*t+n},easeOutQuad:function(e,t,n,i,r){return-i*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,r){return i*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,i,r){return i*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,r){return i*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,i,r){return-i*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,r){return i*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,r){return i*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,r){return i*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,i,r){return 0==t?n:i*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,i,r){return t==r?n+i:i*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,i,r){return 0==t?n:t==r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a))+n},easeOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*r-o)*Math.PI/a)+i+n},easeInOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(2==(t/=r/2))return n+i;if(a||(a=.3*r*1.5),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a)+n:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*r-o)*Math.PI/a)*.5+i+n},easeInBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*(t/=r)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*((t=t/r-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?i/2*t*t*(((o*=1.525)+1)*t-o)+n:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(t,n,i,r,o){return r-e.easing.easeOutBounce(t,o-n,0,r,o)+i},easeOutBounce:function(e,t,n,i,r){return(t/=r)<1/2.75?7.5625*i*t*t+n:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,i,r,o){return o/2>n?.5*e.easing.easeInBounce(t,2*n,0,r,o)+i:.5*e.easing.easeOutBounce(t,2*n-o,0,r,o)+.5*r+i}})}(e)}),define("browser",[],function(){var e=function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera);return{isMobile:e}}),function(e){if("function"==typeof define&&define.amd)define("cookie",e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,n=window.Cookies=e(window.jQuery);n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(u){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var f=l[d].split("="),h=f[0].replace(c,decodeURIComponent),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=n&&n(p,h)||p.replace(c,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(u){}if(t===h){a=p;break}t||(a[h]=p)}catch(u){}}return a}return i.get=i.set=i,i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t()}),define("libs/device/BrowserDetector",["jquery","lodash"],function(e,t){var n="MSIE",i="Microsoft Edge",r={Mozilla:"mozilla",Webkit:"webkit",Trident:"trident"},o=function(){var e=function(e){var o,a={name:"unknown",version:"unknown",engine:null,isMsie:function(){return n===this.name},isEdge:function(){return i===this.name},msieVersion:function(){return this.isMsie()?Math.floor(this.version):!1},isWebkit:function(){return r.Webkit===this.engine},isMozilla:function(){return r.Mozilla===this.engine},isTrident:function(){return r.Trident===this.engine}};return(o=e.match(/(PhantomJS)\/([0-9.]*)/))?(a.name=o[1],a.version=o[2],a.engine=r.Webkit):(o=e.match(/(Edge)\/([0-9.]*)/))?(a.name=i,a.version=o[2],a.engine=r.Trident):(o=e.match(/(Firefox)\/([0-9.]*)/))?(a.name=o[1],a.version=o[2],a.engine=r.Mozilla):(o=e.match(/(Chrome|CriOS)\/([0-9.]*)/))?(a.name=o[1],a.version=o[2],a.engine=r.Webkit):/Safari/.test(e)?(o=e.match(/(Version)\/([0-9.]*)/))&&(a.name=(/Mobile/.test(e)?"Mobile ":"")+"Safari",a.version=o[2],a.engine=r.Webkit):(o=e.match(/(Silk)\/([0-9.]*)/))?(a.name=o[1],a.version=o[2],a.engine=r.Webkit):(o=e.match(/(MSIE) ([0-9]+)/))?(a.name=o[1],a.version=o[2],a.engine=r.Trident):(o=e.match(/Trident\/[0-9.]+;.*rv:([0-9.]*)/))&&(a.name=n,a.version=o[1],a.engine=r.Trident),t.isNull(a.engine)&&e.match(/(webkit)[ \/]([\w.]+)/i)&&(a.engine=r.Webkit),a};return{browser:e}}();return o}),define("device",["jquery","lodash","modernizr","browser","cookie","libs/device/BrowserDetector"],function(e,t,n,i,r,o){var a="smartphone",s="tablet",u="desktop",l="other",c=5e5,d=60,f=-65,h=-20,p=function(){var e=function(){return n.touch},p=function(){return window.screen.width*window.screen.height<c},g=function(){return window.innerWidth*window.innerHeight<c},m=function(){return i.isMobile},v=function(){return!m()},y=function(){return m()&&p()},_=function(){return m()&&!p()},b=function(){return y()?a:_()?s:v()?u:l},T=function(){var e=1;return void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio),e>=2},w=function(){return S().engine},E=function(){return n.canvas&&n.video},S=t.once(function(){return o.browser(navigator.userAgent)}),C=function(){return/(google web preview|google search console|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(window.navigator.userAgent)},P=function(e){var t,n,i;/Windows/i.test(e)?(t=e.match(/Phone( (OS )?([\d.]+))?/))?(n="Windows Mobile",i=t[3]):(t=e.match(/Windows NT\s([0-9.]+)/))?(n="Windows",i=t[1]):n="Windows":(t=e.match(/(iPad|iPod|iPhone)(.*OS ([\d_]+))?/))?(n="iOS",t[3]&&(i=t[3].replace(/_/g,"."))):(t=e.match(/(Android ?([\d.]+)?)/))?(n="Android",i=t[2]):(t=e.match(/(BlackBerry|PlayBook|BB10)(.*Version\/(\d+\.\d+\.\d+))?/i))?(n="BlackBerry",i=t[3]):(t=e.match(/\(Macintosh(;\D*([\d_.]+)[);])?/))?(n="Mac OS X",t[2]&&(i=t[2].replace(/_/g,"."))):(t=e.match(/Linux\s([0-9._a-z]+)?/))?(n="Linux",i=t[1]):(t=e.match(/CrOS ?(\S+)?/))&&(n="Chrome OS",i=t[1]);var r={};return n&&(r.name=n),i&&(r.version=i),r},A=P(navigator.userAgent),I=function(){return window.navigator.standalone===!0},x=function(){return E()?"html5":"html4"},O=function(){return window.orientation%180===0?"portrait":"landscape"},M=g()?50:200,k=function(){return M},R=t.once(function(){r.set("testcookie",1);var e=r.get("testcookie");return e&&r.remove("testcookie"),e}),D=function(){return window.devicePixelRatio||1},L=S().isMsie(),N=function(){return S().msieVersion()},j=S().isEdge(),F=S().isWebkit(),U=S().isMozilla(),B=S().isTrident(),V=function(){return"landscape"===O()},H=function(){return"portrait"===O()},G=function(){return"onorientationchange"in window},q=function(){return"Mac OS X"===A.name},W=function(){return"Windows"===A.name},z=function(){return"iOS"===A.name},Y=function(){return"Android"===A.name},$=function(){return z()&&S().version.match(/^7\..*/)},K=function(e,t){if(!e)return!1;var n=e.split("."),i=Number(n[0]);return!isNaN(i)&&t>i},X=function(e){return z()?K(A.version,e):!1},Q=function(e){return lt()?K(S().version,e):!1},J=function(e){return et()?K(S().version,e):!1},Z=function(){return m()&&"Mobile Safari"===S().name},et=function(){return!m()&&"Safari"===S().name},tt=function(){return"PhantomJS"===S().name},nt=function(){return/iPhone/i.test(navigator.userAgent)},it=function(){return/iPad/i.test(navigator.userAgent)},rt=function(){return nt()&&!window.navigator.standalone&&Z()},ot=function(){return rt()&&$()},at=function(){return it()&&!window.navigator.standalone&&$()},st=function(){return N()!==!1&&N()<=9},ut=function(){return 11===N()},lt=function(){return"Chrome"===S().name},ct=function(e){if(!ft()&&e<window.screen.width){if(at())return h;if(ot())return f;if(rt())return d}return 0},dt=function(e,t){return rt()&&e===window.screen.height&&t>=window.screen.width},ft=function(){return top!=window};return{touch:e,mobile:m,desktop:v,smartPhone:y,tablet:_,retina:T,renderingEngine:w,msie:L,edge:j,msieVersion:N,webkit:F,mozilla:U,trident:B,html5:E,isBot:C,browser:S,os:A,parseOS:P,standalone:I,smallWindow:g,deviceType:b,playerType:x,orientation:O,portrait:H,landscape:V,supportsOrientationChange:G,getSlackHeight:ct,getRubberBandLimit:k,cookies:R,pixelRatio:D,isIphoneFullscreenMobileSafari:dt,isIframe:ft,isMac:q,isWindows:W,isIos:z,isIosLessThan:X,isBrowserChromeLessThan:Q,isDesktopSafariLessThan:J,isAndroid:Y,isIphone:nt,isIpad:it,isPhantomJS:tt,isIE9OrEarlier:st,isIE11:ut,isBrowserChrome:lt,isDesktopSafari:et,isMobileSafari:Z,DEVICE_TYPE_SMARTPHONE:a,DEVICE_TYPE_TABLET:s,DEVICE_TYPE_DESKTOP:u,DEVICE_TYPE_OTHER:l}}();return p}),define("log",["lodash","device"],function(e,t){var n=function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t]+" ";return e},i={debug:!1,info:!1,warn:!1,error:!1},r=!1,o=!1,a={debug:function(){if(i.debug){var r=n.apply(null,arguments);window.Rollbar&&window.Rollbar.debug.apply(window.Rollbar,arguments),t.msie?e.isFunction(console.log)&&console.log(r):console.debug.apply(console,arguments)}},info:function(){if(i.info){var r=n.apply(null,arguments);window.Rollbar&&window.Rollbar.info.apply(window.Rollbar,arguments),t.msie?e.isFunction(console.info)&&console.info(r):console.info.apply(console,arguments)}},devWarn:function(){return r?a.warn.apply(this,arguments):a.info.apply(this,arguments)},warn:function(){if(i.warn){var r=n.apply(null,arguments);window.Rollbar&&window.Rollbar.warn.apply(window.Rollbar,arguments),t.msie?e.isFunction(console.warn)&&console.warn(r):console.warn.apply(console,arguments)}},error:function(){if(i.error){var r=n.apply(null,arguments);window.Rollbar&&window.Rollbar.error.apply(window.Rollbar,arguments),t.msie?e.isFunction(console.error)&&console.error(r):console.error.apply(console,arguments)}},init:function(t){i=e.defaults(t.modes||{},i),r=t.emitDevWarnings,o=e.reduce(i,function(e,t){return e||t},o)},isEnabled:function(t){return e.isUndefined(t)?o:i[t]}};return a.d=a.debug,a.i=a.info,a.w=a.warn,a.e=a.error,a}),define("cssHooksTransform",["log","jquery","lodash","device"],function(e,t,n,i){var r="transform",o=r.charAt(0).toUpperCase()+r.slice(1),a="Float32Array"in window,s={transformToMatrix:function(e){var i,r,o,s=e.split(")"),u=[],l=s.length-1,c=a?new Float32Array(6):[],d=a?new Float32Array(6):[],f=a?new Float32Array(6):[1,0,0,1,0,0];c[0]=c[3]=f[0]=f[3]=1,c[1]=c[2]=c[4]=c[5]=0;for(var h=0;l>h;++h){switch(i=s[h].split("("),r=t.trim(i[0]),o=i[1],d[0]=d[3]=1,d[1]=d[2]=d[4]=d[5]=0,r){case"translateX":d[4]=parseInt(o,10);break;case"translateY":d[5]=parseInt(o,10);break;case"translate":o=o.split(","),d[4]=parseInt(o[0],10),d[5]=parseInt(o[1]||0,10);break;case"rotate":o=this.toRadian(o),d[0]=Math.cos(o),d[1]=Math.sin(o),d[2]=-Math.sin(o),d[3]=Math.cos(o);break;case"scaleX":d[0]=+o;break;case"scaleY":d[3]=o;break;case"scale":o=o.split(","),d[0]=o[0],d[3]=o.length>1?o[1]:o[0];break;case"skewX":d[2]=Math.tan(this.toRadian(o));break;case"skewY":d[1]=Math.tan(this.toRadian(o));break;default:continue}u.push(r),f[0]=c[0]*d[0]+c[2]*d[1],f[1]=c[1]*d[0]+c[3]*d[1],f[2]=c[0]*d[2]+c[2]*d[3],f[3]=c[1]*d[2]+c[3]*d[3],f[4]=c[0]*d[4]+c[2]*d[5]+c[4],f[5]=c[1]*d[4]+c[3]*d[5]+c[5],c=[f[0],f[1],f[2],f[3],f[4],f[5]]}return!n.isEmpty(e)&&n.isEmpty(u)?!1:f},buildTransformFunctions:function(e,i){var r,o,a,u={start:[],end:[]};if("none"==e&&(e=""),"none"==i&&(i=""),!e&&!i)return u;e&&(e=e.split(")"),r=e.length),i&&(i=i.split(")"),r=i.length),r-=1;for(var l=0;r>l;++l){e[l]&&(o=e[l].split("(")),i[l]&&(a=i[l].split("("));var c=t.trim(o[0]),d=t.trim(a[0]);s.isUnsupportedTransform(c)||s.isUnsupportedTransform(d)||(u.start=n.union(u.start,this.parseTransformFunction(c,o[1])),u.end=n.union(u.end,this.parseTransformFunction(d,a[1])))}return u},isUnsupportedTransform:function(e){return n.indexOf(["perspective","rotateX","rotateY","rotateZ","rotate3d","scale3d","scaleZ","translateZ","translate3d"],e)>-1},parseTransformFunction:function(e,t){var n=1,i=0,r=e.indexOf("scale")>-1?n:i,o=e.replace(/e[XY]/,"e"),a=e.indexOf("scale")>-1?"":"px";switch(e){case"translateY":case"scaleY":t=[r,t?parseFloat(t):r];break;case"translateX":case"translate":t?(t=t.split(","),t=[parseFloat(t[0]),parseFloat(t.length>1?t[1]:r)]):t=[r,r];break;case"scaleX":case"scale":if(t){t=t.split(",");var s="scale"==e?t[0]:r;t=[parseFloat(t[0]),parseFloat(t.length>1?t[1]:s)]}else t=[r,r];break;case"skewX":case"skewY":case"rotate":a=~t.indexOf("deg")?"deg":~t.indexOf("grad")?"grad":"rad",t=t?parseFloat(t):0}return[[o,t,a]]},toRadian:function(e){return~e.indexOf("deg")?parseInt(e,10)*(2*Math.PI/360):~e.indexOf("grad")?parseInt(e,10)*(Math.PI/200):parseFloat(e)}};if(i.webkit||i.mozilla){var u=i.webkit?"Webkit":"Moz";t.cssNumber[r]=!0,t.cssHooks[r]={get:function(e){return t.css(e,u+o)},set:function(e,t){e.style[u+o]=t}}}return s}),define("crypto",[],function(){function e(e){try{}catch(n){t=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",o=e.length,a=0;o>a;a+=3)for(var s=e.charCodeAt(a)<<16|(o>a+1?e.charCodeAt(a+1)<<8:0)|(o>a+2?e.charCodeAt(a+2):0),u=0;4>u;u++)r+=8*a+6*u>8*e.length?t:i.charAt(s>>>6*(3-u)&63);return r}var t="";return{b64_encode:e}}),define("cssHooksGradients",["log","jquery","lodash","device","crypto"],function(e,t,n,i){var r="backgroundImage",o=document.createElement("div"),a=o.style,s=/^(.*?)(:?linear-gradient)(\()([0-9]+)deg,([^,]+) ([0-9]+)%,([^,]+) ([0-9]+)%(\))(.*?)$/i,u=/(^|\s)linear-gradient/;if(a.cssText="background-image: linear-gradient(red, blue);",t.support.linearGradient=u.test(a.backgroundImage)?"linear-gradient":!1,o=a=null,!t.support.linearGradient){t.cssNumber[r]=!0;var l=function(e,t,n,r,o,a,s){var u="";i.webkit?u="-webkit-":i.mozilla&&(u="-moz-"),n=90-parseInt(n,10);var l="linear-gradient("+n+"deg,"+r+" "+o+"%,"+a+" "+s+"%)";return u+l};t.cssHooks[r]={set:function(e,t){var i=s.exec(t);if(n.isEmpty(i))e.style[r]=t;else{var o=i[0],a=i[4],u=i[5],c=i[6],d=i[7],f=i[8];e.style[r]=l(e,o,a,u,c,d,f)}}}}}),function(e){var t="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define("backbone",["lodash","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("lodash");try{n=require("jquery")}catch(r){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.2.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],u(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],u(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},s=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=a(t,r,i))})},u=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},d=/\s+/,f=function(e,t,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)t=f(e,t,a[s],i[a[s]],o)}else if(i&&d.test(i))for(a=i.split(d);s<a.length;s++)t=e(t,a[s],r,o);else t=e(t,i,r,o);return t};c.on=function(e,t,n){return h(this,e,t,n)
};var h=function(e,t,n,i,r){if(e._events=f(p,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};c.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[r];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[r]={obj:e,objId:r,id:s,listeningTo:o,count:0}}return h(e,t,i,this,a),this};var p=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return e};c.off=function(e,t,n){return this._events?(this._events=f(g,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(t,i,this)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var g=function(e,t,i,r){if(e){var o,a=0,s=r.context,u=r.listeners;if(t||i||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){t=l[a];var c=e[t];if(!c)break;for(var d=[],f=0;f<c.length;f++){var h=c[f];i&&i!==h.callback&&i!==h.callback._callback||s&&s!==h.context?d.push(h):(o=h.listening,o&&0===--o.count&&(delete u[o.id],delete o.listeningTo[o.objId]))}d.length?e[t]=d:delete e[t]}return n.size(e)?e:void 0}for(var p=n.keys(u);a<p.length;a++)o=u[p[a]],delete u[o.id],delete o.listeningTo[o.objId]}};c.once=function(e,t,i){var r=f(m,{},e,t,n.bind(this.off,this));return this.on(r,void 0,i)},c.listenToOnce=function(e,t,i){var r=f(m,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var m=function(e,t,i,r){if(i){var o=e[t]=n.once(function(){r(t,o),i.apply(this,arguments)});o._callback=i}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;t>i;i++)n[i]=arguments[i+1];return f(v,this._events,e,void 0,n),this};var v=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&y(r,i),o&&y(o,[t].concat(i))}return e},y=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var _=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,d=this._previousAttributes;for(var f in r)t=r[f],n.isEqual(l[f],t)||s.push(f),n.isEqual(d[f],t)?delete c[f]:c[f]=t,o?delete l[f]:l[f]=t;if(this.id=this.get(this.idAttribute),!a){s.length&&(this._pending=i);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],i)}if(u)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return n.size(i)?i:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;return t.set(r,e)?(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e)):!1},V(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,u=this.attributes;i.success=function(e){a.attributes=u;var t=i.parse?a.parse(e,i):e;return o&&(t=n.extend({},r,t)),t&&!a.set(t,i)?!1:(s&&s.call(i.context,a,e,i),void a.trigger("sync",a,e,i))},V(this,i),r&&o&&(this.attributes=n.extend({},u,r));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=r);var c=this.sync(l,this,i);return this.attributes=u,c},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(V(this,e),a=this.sync("delete",this,e)),r||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||B();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(_,b,"attributes");var T=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1},S=function(e,t,n){n=Math.min(Math.max(n,0),e.length);for(var i=Array(e.length-n),r=t.length,o=0;o<i.length;o++)i[o]=e[o+n];for(o=0;r>o;o++)e[o+n]=t[o];for(o=0;o<i.length;o++)e[o+r+n]=i[o]};n.extend(T.prototype,c,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,E))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:n.clone(e);var r=this._removeModels(e,t);return!t.silent&&r&&this.trigger("update",this,t),i?r[0]:r},set:function(e,t){if(null!=e){t=n.defaults({},t,w),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),0>r&&(r+=this.length+1);for(var o,a=[],s=[],u=[],l={},c=t.add,d=t.merge,f=t.remove,h=!1,p=this.comparator&&null==r&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,m=0;m<e.length;m++){o=e[m];var v=this.get(o);if(v){if(d&&o!==v){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=v.parse(y,t)),v.set(y,t),p&&!h&&(h=v.hasChanged(g))}l[v.cid]||(l[v.cid]=!0,a.push(v)),e[m]=v}else c&&(o=e[m]=this._prepareModel(o,t),o&&(s.push(o),this._addReference(o,t),l[o.cid]=!0,a.push(o)))}if(f){for(m=0;m<this.length;m++)o=this.models[m],l[o.cid]||u.push(o);u.length&&this._removeModels(u,t)}var _=!1,b=!p&&c&&f;if(a.length&&b?(_=this.length!=a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,S(this.models,a,0),this.length=this.models.length):s.length&&(p&&(h=!0),S(this.models,s,null==r?this.length:r),this.length=this.models.length),h&&this.sort({silent:!0}),!t.silent){for(m=0;m<s.length;m++)null!=r&&(t.index=r+m),o=s[m],o.trigger("add",o,this,t);(h||_)&&this.trigger("sort",this,t),(s.length||u.length)&&this.trigger("update",this,t)}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null==e)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},V(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n.length?n:!1},_isModel:function(e){return e instanceof _},_addReference:function(e){this._byId[e.cid]=e;var t=this.modelId(e.attributes);null!=t&&(this._byId[t]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e){delete this._byId[e.cid];var t=this.modelId(e.attributes);null!=t&&delete this._byId[t],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}this.trigger.apply(this,arguments)}}});var C={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};s(T,C,"models");var P=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,I)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];n.extend(P.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(A);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=x[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||B()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var u=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,u&&u.call(r.context,e,t,n)};var l=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,l,r),l};var x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var O=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,R=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(O.prototype,c,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);o.execute(r,a,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),t.history.trigger("route",o,i,a))}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(D,"\\$&").replace(M,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var L=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,F=/#.*$/;L.started=!1,n.extend(L.prototype,c,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(N,"")},start:function(e){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!L.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(F,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new L;var U=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};_.extend=T.extend=O.extend=P.extend=L.extend=U;var B=function(){throw new Error('A "url" property or function must be specified')},V=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}),define("globals",["lodash"],function(e){var t=function(){return{absorb:function(n){e.each(n,function(e,n){t[n]=e})},purge:function(e){delete t[e]}}}();return window.cerosContext&&t.absorb(window.cerosContext),t}),define("domReady",[],function(){function e(e){var t;for(t=0;t<e.length;t+=1)e[t](l)}function t(){var t=c;u&&t.length&&(c=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function i(e){return u?e(l):c.push(e),i}var r,o,a,s="undefined"!=typeof window&&window.document,u=!s,l=s?document:null,c=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{r=null===window.frameElement}catch(d){}o.doScroll&&r&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(e,t,n,r){r.isBuild?n(null):i(n)},i}),define("playerApi",["log","lodash","jquery"],function(e,t,n){var i=1e4,r={},o=[],a={bindToIframe:function(e){return new d(e)},on:function(n,i){return t.isFunction(i)?("*"===n?(o.push(i),t.each(r,function(e){e.push(i)})):(t.has(r,n)||(r[n]=o.slice()),r[n].push(i)),this):void e.warn("handler is not a function")},unbindAll:function(){r={},o=[]},handleRequest:function(n,o){if(!t.has(r,n.name))return void e.warn("No handler for "+n.name);var a=r[n.name].slice(),s={},u=function(){o(s)},l=function(t){e.warn("Error:",t),s={error:"Unable to process request due to an error"},u()},c=function(){try{var e=a.shift();if(!e)return void u();var r=e(n,s);if(r&&t.isFunction(r.done)&&t.isFunction(r.fail)&&t.isFunction(r.always)){var o=!1,d=setTimeout(function(){l(new Error("handler timed out"))},i);r.done(function(){o||c()}).fail(function(){o||u()}).always(function(){clearTimeout(d)})}else r===!1?u():c()}catch(f){l(f)}};c()}},s=function(e){if(t.isUndefined(e.client))throw new Error("No client object given");if(t.isUndefined(e.name))throw new Error("No name given");this.name=e.name,this.client=e.client,this.params=e.params||{}},u=[],l=!1,c=function(){if(!l){if(l=!0,t.isUndefined(window.postMessage))return void e.warn("This browser does not support inter-frame communication");e.debug("listening for iframe messages"),n(window).bind("message",function(n){var i=n.originalEvent.source,r=null;if(t.each(u,function(e){i===e.getWindow()&&(r=e)}),r&&t.isString(n.originalEvent.data)){var o;try{o=JSON.parse(n.originalEvent.data)}catch(l){return void e.warn("Could not parse data: ["+n.originalEvent.data+"]")}if(!o.name)return void e.warn('Data has no "name" property');if(0!==o.name.indexOf("ceros.sdk.player")){var c=o.uuid,d=function(e){var t=JSON.stringify({uuid:c,response:e});i.postMessage(t,"*")},f=new s({name:o.name,params:o.params,client:{type:"iframe",sdkVersion:o.version}});a.handleRequest(f,d)}}})}},d=function(e){u.push(this),this.iframe=e,c()};return d.prototype={getWindow:function(){return this.iframe.contentWindow}},a}),define("urlUtils",["lodash"],function(e){var t=/^(https?|ftp):\/\/[^\s\/$.?#].[^\s]*$/i,n={isValidUrl:function(e){return t.test(e)},beginsWithHttpOrHttps:function(e){var t=/^(http(s?))\:\/\//gi;return t.test(e)},getUrlParams:function(t){var n,i={};if(t=String(t),-1===t.indexOf("?"))return i;var r=t.split("?"),o=r[1];if(e.isEmpty(o))return i;o=o.split("&");for(var a=0;a<o.length;a++)-1===o[a].indexOf("=")?i[decodeURIComponent(o[a])]=void 0:(n=o[a].split("="),i[decodeURIComponent(n[0])]=decodeURIComponent(n[1]));return i},removeEmbedParams:function(e){var t=e.replace(/heightOverride=\d+&?/g,"");return-1!==t.indexOf("?",t.length-1)&&(t=t.substring(0,t.length-1)),t},getBaseUrl:function(e){if(e=String(e),-1===e.indexOf("?"))return e;var t=e.split("?");return t[0]},appendQueryParams:function(t,n){if(e.isEmpty(n))return t;var i="",r=t.lastIndexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var o=this.getUrlParams(t);n=e.extend({},o,n);var a=[];e.each(n,function(e,t){a.push(void 0===e?encodeURIComponent(t):encodeURIComponent(t)+"="+encodeURIComponent(e))});var s=a.join("&");return this.getBaseUrl(t)+"?"+s+i},extractDomain:function(e){var t=e.match(/^https?:\/\/([^\/]+)/);return t?t[1]:""},replaceProtocolIfHttpsRequest:function(e){return"https:"===location.protocol&&(e=n.makeHttps(e)),e},makeHttps:function(e){return e.replace(/^http:/,"https:")},linkifyText:function(e,t){var n=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,i=/(^|[^\/])(www\.[\S]+(\b|$))/gim,r=/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,o=t?' target="_blank"':"";return e.replace(n,'<a href="$&"'+o+">$&</a>").replace(i,'$1<a href="http://$2"'+o+">$2</a>").replace(r,'<a href="mailto:$&"'+o+">$&</a>")},locationIsHtmlFile:function(){return window.location.pathname.match(/\.html$/)?!0:!1},makeUrlAbsolute:function(e){if(this.extractDomain(e))return e;if(!window.cerosBaseUrl)return e;var t="/"===e[0],n=window.cerosBaseUrl.lastIndexOf("/")===window.cerosBaseUrl.length-1;return n&&t?window.cerosBaseUrl+e.slice(1):n||t?window.cerosBaseUrl+e:window.cerosBaseUrl+"/"+e},hasQueryParam:function(t,i){var r=n.getUrlParams(t);return e.some(r,function(e,t){return t.toLowerCase()===i.toLowerCase()?!0:void 0})}};return n}),define("shared/utils/NavigationUtils",["lodash","jquery","log","globals","urlUtils"],function(e,t,n,i,r){var o={page_number:"/p/",page_slug:"/page/"},a={buildUri:function(e,t){return r.locationIsHtmlFile()?this.buildHtmlStyleUri(t):this.buildPathStyleUri(e,t)},buildHtmlStyleUri:function(e){var t,n=window.location.search;return 1===e?(n=n.replace(/page=(\d+)&?/,""),t=window.location.pathname+n):t=r.appendQueryParams(window.location.pathname+n,{page:e}),t=t.replace(/[&|\?]$/,"")},buildPathStyleUri:function(e,t){if(!o[e])return n.warn("Mode is not supported"),null;var i=o[e]+t,r=window.location.pathname;return r=r.replace(/\/$/,""),i=r.replace(/\/(p|page)\/[a-z0-9-]*/,"")+i,i+=window.location.search},buildUriForPageNumber:function(e){return this.buildUri("page_number",e)},parsePageFromLocation:function(){var e=1,t=null;if(r.locationIsHtmlFile()){var n=window.location.search.match(/page=(\d+)/);return t=e,n&&(t=parseInt(n[1],10)),t}var o=location.pathname.match(/\/p\/(\d+)\/?$/);if(o&&(t=parseInt(o[1],10)),!t&&i.usePageSlugsInNavigation){var a=location.pathname.match(/\/page\/([a-z0-9-]+)\/?$/);a&&(t=a[1])}return t||(t=e),t},getLocationWithoutParamsAndPageNumber:function(){return window.location.href.replace(/\?.*$/,"").replace(/\/(page\/[0-9a-z-]+|p\/\d+)\\?$/,"")}};return a}),define("modules/page/utils/TextUtil",["log","lodash","jquery","device","globals"],function(e,t,n,i,r){var o="Roboto",a="regular",s=function(e,t){return e+"-"+t},u=function(t,n){e.warn("Could not find font in the font manifest.",{fontKey:t,defaultKey:n})},l=function(e,t,n,i){if(i&&n[i]){var r=n[i],o=s(e,t);if(r.hasOwnProperty(o))return r[o]}return c(e,t)},c=function(e,t){var n=s(e,t);if(r.fontManifest.hasOwnProperty(n))return r.fontManifest[n];var i=s(o,t);if(r.fontManifest.hasOwnProperty(i))return u(n,i),r.fontManifest[i];if(i=s(o,a),r.fontManifest.hasOwnProperty(i))return u(n,i),r.fontManifest[i];throw new Error("Could not find desired font "+n+" or default font "+i+" in the font manifest.")},d=function(n,i,r,o){var a=n.find(".marker");if(0===a.length)return void e.info("could not find img baseline marker!");if(0===a.position().top)return void t.defer(function(){d(n,i,r,o)});var s=a.position().top+a.height(),u=r/i.unitsPerEm,l=Math.round(u*i.ascent-s),c=n.attr("data-baseline");return t.isUndefined(c)||t.isUndefined(l)||parseInt(c,10)!==l?(n.attr("data-baseline",l),void t.defer(function(){d(n,i,r,o)})):void o.resolve(l)},f=function(e){return'"'+e.replace('"','\\"')+'"'},h=function(e,t,i){var r=new n.Deferred;if(1>=t)return r.resolve(0),r.promise();var o='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////AAAAVcLTfgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" style="position:relative;vertical-align:baseline;" class="marker"/>',a=n("<div>"+o+"<span>Mq</span></div>").css({width:"auto",height:"auto",lineHeight:i+"px",position:"absolute",top:0,left:0,fontSize:t+"px",fontFamily:f(e.getCssFamilyName()),fontWeight:e.getFontWeight(),fontStyle:e.getFontStyle(),opacity:0}).attr("data-baseline",null);return n("body").append(a),d(a,e,t,r),r.done(function(){a.remove()}),r.promise()};return{resolveFont:l,measureFontBaselineOffset:h,formatFamilyNameForCSS:f}}),define("libs/image/AbstractImageResource",["jquery"],function(e){var t=function(t){this.resourceReady=e.Deferred(),this.image=new Image,this.data=this.image,t&&t.useCorsAnonymous&&(this.image.crossOrigin="Anonymous")};return t.prototype={onload:function(){return this.resourceReady.done.apply(this.resourceReady,arguments),this.resourceReady},onerror:function(){return this.resourceReady.fail.apply(this.resourceReady,arguments),this.resourceReady},ready:function(){return"resolved"==this.resourceReady.state()},getPromise:function(){return this.resourceReady.promise()},getImage:function(){return this.image},getWidth:function(){return this.image.width},getHeight:function(){return this.image.height},remove:function(){delete this.image}},t}),define("libs/image/ImageResource",["jquery","lodash","libs/image/AbstractImageResource"],function(e,t,n){var i=function(e,i){return n.call(this,i),this.url=e,i&&i.makeCORSCompatible&&this.image.setAttribute("crossOrigin","anonymous"),this.image.onload=t.bind(function(){this.resourceReady.resolve(this)},this),this.image.onerror=t.bind(function(){this.resourceReady.reject()},this),this.image.src=e,this};return i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i}),define("cssresource",["jquery","lodash"],function(e,t){var n=function(n){return this.url=n,this.deferred=e.Deferred(),this.cssLinkResource=e("<link>",{rel:"stylesheet",type:"text/css",href:n}),this.data=this.cssLinkResource,this.cssLinkResource.on("load",t.bind(function(){this.deferred.resolve()},this)),this.cssLinkResource.appendTo("head"),this};return n.prototype={onload:function(){return this.deferred.done.apply(this.deferred,arguments),this.deferred},ready:function(){return"resolved"==this.deferred.state()},remove:function(){delete this.cssLinkResource}},n}),define("shared/utils/ResourceLoader",["log","jquery","lodash","device"],function(e,t,n,i){var r={},o=0,a=i.desktop()?2:1,s=!1,u={PENDING:1,LOADING:2,LOADED:3,ERROR:4,CANCELED:5},l=function(){this.queue=[],this.finished=t.Deferred()};l.prototype=n.extend(l.prototype,{push:function(e){this.queue.push(e)},getNextItem:function(){if(0===this.length())return null;var e=this.queue.shift();return 0===this.length()&&(this.finished.resolve(),this.finished=t.Deferred()),e},length:function(){return this.queue.length},flush:function(){this.queue=[],this.finished.resolve(),this.finished=t.Deferred()},onFinish:function(e){this.finished.done(e)}});var c=new l,d=new l,f=function(e){d.onFinish(e)},h=function(i,r,o){var a=u.PENDING,s=new t.Deferred;this.getStatus=function(){return a},this.setStatus=function(e){n.includes(n.values(u),e)&&(a=e)},this.getPromise=function(){return s.promise()},this.load=function(){a=u.LOADING;var l=n.isFunction(r)?r():t.noop();return l.promise?(l.then(function(){a=u.LOADED,s.resolve.apply(this,arguments)
},function(){a=u.ERROR,s.reject(),e.devWarn("Resource failed to load",{key:i})}),l.always(function(){n.isFunction(o)&&o()}),this.getPromise()):(s.reject(),e.warn("onLoadBegin must be a function that returns a deferred promise and resolves with necessary resource data",{key:i}),this.getPromise())},this.getKey=function(){return i}};h.prototype.loadNow=function(){return this.getStatus()===u.PENDING&&(d.push(this),b()),this.getPromise()},h.prototype.isLoading=function(){return this.getStatus()===u.LOADING},h.prototype.isLoaded=function(){return this.getStatus()===u.LOADED},h.prototype.isError=function(){return this.getStatus()===u.ERROR},h.prototype.isPending=function(){return this.getStatus()==u.PENDING},h.prototype.isCanceled=function(){return this.getStatus()==u.CANCELED},h.prototype.cancel=function(){this.setStatus(u.CANCELED)};var p=function(e){return r.hasOwnProperty(e)},g=function(t){return n.isNull(t)||n.isUndefined(t)?null:r.hasOwnProperty(t)?r[t].isError()?(e.warn("An error was encountered while trying to load the resource",{key:t}),null):r[t]:(e.warn("No resource exists for the provided key",{key:t}),null)},m=function(){for(d.flush();c.length()>0;){var e=c.getNextItem();e.status=u.CANCELED}},v=function(e,t,i){if(n.isNull(e)||n.isUndefined(e))return null;if(r.hasOwnProperty(e))r[e].isCanceled()&&(r[e].setStatus(u.PENDING),c.push(r[e]));else{var o=new h(e,t,i);r[e]=o,c.push(o)}return b(),r[e]},y=t.Deferred(),_=function(e){y.done(e)},b=function(){if(!(o>=a&&0===d.length())){var e=E();if(n.isNull(e))return void y.resolve();o++,e.load().always(function(){o--,b()})}},T=function(){s=!0},w=function(){s&&(s=!1,b())},E=function(){var e=null;return d.length()>0&&(e=S(d)),s?null:(n.isNull(e)&&(e=S(c)),e)},S=function(e){for(var t=null;e.length()>0&&(t=e.getNextItem(),!t.isPending());)t=null;return t};return{add:v,get:g,has:p,cancelPending:m,pause:T,resume:w,onPriorityQueueCompletion:f,onAllResourcesLoaded:_}}),define("cerosMath",[],function(){var e={};return e.Point=function(e,t){this.x=e,this.y=t,this.getX=function(){return this.x},this.getY=function(){return this.y},this.setX=function(e){this.x=e},this.setY=function(e){this.y=e},this.rotate=function(e,t,n){var i=Math.rotateCoord(this.x,this.y,e,t,n);this.setX(i.x),this.setY(i.y)}},e.Point.diff=function(t,n){return new e.Point(t.getX()-n.getX(),t.getY()-n.getY())},e.Point.sum=function(t,n){return new e.Point(t.getX()+n.getX(),t.getY()+n.getY())},e.Point.ORIGIN=new e.Point(0,0),e.calcRotatedLineIntersect=function(e,t,n){return{startPt:this.calcPointOnRect(e-270,t,n),endPt:this.calcPointOnRect(e-90,t,n)}},e.calcPointOnRect=function(t,n,i){var r={x:n/2,y:i/2};t%=360,0>t&&(t+=360);var o,a,s,u=Math.toRad(t),l=50,c=50,d=Math.tan(u),f=l*d,h=c/d;return Math.abs(f)<=c?(o=n/100*l,a=i/100*f,s=u<=Math.PI/2||u>3*Math.PI/2?{x:o,y:a}:{x:-o,y:-a}):(o=n/100*h,a=i/100*c,s=u<Math.PI?{x:o,y:a}:{x:-o,y:-a}),s.x+=r.x,s.y+=r.y,s.x=Math.round(s.x),s.y=Math.round(s.y),new e.Point(s.x,s.y)},e.scaleBoxToMaxDimension=function(e,t,n){var i=e,r=t;return e>0&&t>0&&(e>t?(i=n,r=Math.round(n/e*t)):(i=Math.round(n/t*e),r=n)),{width:i,height:r}},e.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},e.lineLength=function(t){return e.distance({x:t.x1,y:t.y1},{x:t.x2,y:t.y2})},e.cubicBezierCurveFirstDerivativeRoots=function(t,n,i,r){var o=[],a=3*(-t+3*n-3*i+r),s=6*(t-2*n+i),u=3*(n-t),l=s*s-4*a*u;if(l>=0){var c=(-s+Math.sqrt(l))/(2*a),d=(-s-Math.sqrt(l))/(2*a);c>0&&1>c&&o.push(e.evaluateBezierCurve(t,n,i,r,c)),d>0&&1>d&&o.push(e.evaluateBezierCurve(t,n,i,r,d))}return o},e.evaluateBezierCurve=function(e,t,n,i,r){return e*(1-r)*(1-r)*(1-r)+3*t*r*(1-r)*(1-r)+3*n*r*r*(1-r)+i*r*r*r},window.CerosMath=e,e}),define("VectorImageUtils",["jquery","lodash","cerosMath","device"],function(e,t,n,i){var r="image/svg+xml",o="data:",a=o+r+";base64,",s=["svg","path","rect","circle","ellipse","line","polyline","polygon","text"];return{isVectorBased:function(e){return e===r},getImageAspectRatio:function(e){var t=this.getViewportDimensions(e);if(t&&t.height>0&&t.width>0)return t;var n=this.getViewBoxDimensions(e);return n&&n.height>0&&n.width>0?n:null},getViewBoxDimensions:function(e){var t=e.documentElement,n=(t.getAttribute("viewBox")||"").match(/-?[\d\.]+/g);if(n&&4===n.length){var i=parseInt(n[2],10),r=parseInt(n[3],10);if(i>0&&r>0)return{width:i,height:r}}return null},getViewportDimensions:function(e){var t=e.documentElement,n=parseInt(t.getAttribute("width"),10),i=parseInt(t.getAttribute("height"),10);return n>0&&i>0?{width:n,height:i}:null},setViewportDimensions:function(e,t,n){var i=e.documentElement;i.setAttribute("width",t+"px"),i.setAttribute("height",n+"px")},updateSVGColorStyle:function(e,n){t.each(s,t.bind(function(i){var r=e.getElementsByTagName(i);t.each(r,t.bind(function(e){this.canFillStyleBeUpdated(e)&&this.appendStyle(e,"fill",n),this.canStrokeStyleBeUpdated(e)&&this.appendStyle(e,"stroke",n)},this))},this))},canFillStyleBeUpdated:function(e){var t=this.getStyle(e,"fill");return!t||"none"!==t.trim()},canStrokeStyleBeUpdated:function(e){var t=this.getStyle(e,"stroke");return t&&"none"!==t.trim()},getStyle:function(e,t){var n=this.getStyleValue(e,t);return n||(n=e.getAttribute(t)),n},removeIllegalNodes:function(e){this.removeNodesByNodeName(e,"foreignObject")},removeNodesByNodeName:function(e,t){var n=e.getElementsByTagName(t);if(n)for(var i=n.length-1;i>=0;i--){var r=n[i];r.parentNode.removeChild(r)}},findChildNode:function(e,n){return t.find(e.childNodes,function(e){return e.nodeName===n})},appendNewChildNode:function(e,t,n){var i=this.createSVGNode(e,n);return t.appendChild(i,t.firstChild),i},prependNewChildNode:function(e,t,n){var i=this.createSVGNode(e,n);return t.insertBefore(i,t.firstChild),i},addLinearGradient:function(e,i,r){var o=e.documentElement,a=this.findChildNode(o,"defs");a||(a=this.prependNewChildNode(e,o,"defs"));var s=this.appendNewChildNode(e,a,"linearGradient");s.setAttribute("id",i);var u=n.calcRotatedLineIntersect(r.angle,100,100);s.setAttribute("x1",u.startPt.getX()+"%"),s.setAttribute("y1",u.startPt.getY()+"%"),s.setAttribute("x2",u.endPt.getX()+"%"),s.setAttribute("y2",u.endPt.getY()+"%"),t.each(r.stops,t.bind(function(t,n){var i=0;r.stops.length>1&&(i=100*n/(r.stops.length-1));var o=this.appendNewChildNode(e,s,"stop");o.setAttribute("offset",i+"%"),o.setAttribute("stop-color",t.color)},this))},createSVGNode:function(e,t){return e.createElementNS("http://www.w3.org/2000/svg",t)},supportsObjectURLs:function(){if(i.mozilla)return!1;if(i.isPhantomJS())return!1;var e=this.getDOMURL();return"function"!=typeof e.createObjectURL||"function"!=typeof e.revokeObjectURL?!1:!0},createObjectURL:function(e){var t,n=(new XMLSerializer).serializeToString(e);if(this.supportsObjectURLs()){var i=new Blob([n],{type:r});t=this.getDOMURL().createObjectURL(i)}else t=a+window.btoa(unescape(encodeURIComponent(n)));return t},createBlob:function(e){var t=(new XMLSerializer).serializeToString(e);return new Blob([t],{type:r})},revokeObjectURL:function(e){this.supportsObjectURLs()&&this.getDOMURL().revokeObjectURL(e)},getDOMURL:function(){return window.URL||window.webkitURL||window},isDataURL:function(e){return e&&0===e.indexOf(o)},isVectorDataURL:function(e){return e&&0===e.indexOf(a)},convertToXMLString:function(e){if(!this.isVectorDataURL(e))throw new Error("Expected data url to start with "+a);var t=e.substring(a.length);return window.atob(t)},appendStyle:function(e,t,n){var i=e.getAttribute("style"),r=t+":"+n+";";i&&i.length>0?(";"!==i.substr(i.length-1)&&(i+=";"),i+=r):i=r,e.setAttribute("style",i)},getStyleValue:function(e,t){var n=e.getAttribute("style");if(!n||0===n.length)return null;var i=n.split(";");if(!i)return null;for(var r=null,o=i.length-1;o>=0;o--){var a=i[o].split(":");if(a&&2==a.length){var s=a[0].trim();if(s===t){r=a[1].trim();break}}}return r},createImageElement:function(n,i){var r=e("<img/>");return i&&r.attr(i),r.on("load",t.bind(function(){this.revokeObjectURL(n)},this)),r.on("error",t.bind(function(){this.revokeObjectURL(n)},this)),r.attr("src",n),r}}}),define("libs/image/VectorImageResource",["jquery","lodash","VectorImageUtils","libs/image/AbstractImageResource"],function(e,t,n,i){var r=function(e){i.call(this),e.done(t.bind(function(e){this.initImage(e)},this)).fail(t.bind(function(){this.resourceReady.reject()},this))};return r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.extend(r.prototype,{initImage:function(e){var i=n.createObjectURL(e);this.image.onerror=t.bind(function(){n.revokeObjectURL(i),this.resourceReady.reject()},this),this.image.onload=t.bind(function(){n.revokeObjectURL(i),this.resourceReady.resolve(this)},this),this.image.src=i}}),r}),define("libs/image/VectorImageResourceFactory",["jquery","lodash","libs/image/VectorImageResource","VectorImageUtils"],function(e,t,n,i){var r="CerosGradient_1234",o=function(n){this.url=n,this.xmlString=null,this.resourceReady=e.Deferred(),this.loadImageXML(n).done(t.bind(function(e){this.xmlString=e,this.resourceReady.resolve(this)},this)).fail(t.bind(function(){this.resourceReady.reject()},this))};return t.extend(o.prototype,{getPromise:function(){return this.resourceReady.promise()},createImageResource:function(i){var r=e.Deferred();return this.resourceReady.done(t.bind(function(){var e=this.createXMLDoc(i);e?r.resolve(e):r.reject()},this)),this.resourceReady.fail(r.reject),new n(r)},createObjectURL:function(n){var r=e.Deferred();return this.resourceReady.done(t.bind(function(){var e=this.createXMLDoc(n);if(e){var t=i.createObjectURL(e);r.resolve(t)}else r.reject()},this)),this.resourceReady.fail(r.reject),r},createBlob:function(n){var r=e.Deferred();return this.resourceReady.done(t.bind(function(){var e=this.createXMLDoc(n);if(e){var t=i.createBlob(e);r.resolve(t)}else r.reject()},this)),this.resourceReady.fail(r.reject),r},createImageElement:function(t,n){var r=e.Deferred();return this.createObjectURL(t).done(function(e){var t=i.createImageElement(e,n);r.resolve(t)}).fail(r.reject),r},createXMLDoc:function(t){var n;try{n=e.parseXML(this.xmlString)}catch(o){}if(!n||!e.isXMLDoc(n))return null;t&&(t.color?i.updateSVGColorStyle(n,t.color):t.gradient&&(i.addLinearGradient(n,r,t.gradient),i.updateSVGColorStyle(n,"url(#"+r+")"))),i.removeIllegalNodes(n);var a=i.getImageAspectRatio(n);return a&&a.width>0&&a.height>0&&i.setViewportDimensions(n,a.width,a.height),n},loadImageXML:function(t){var n=e.Deferred();if(i.isDataURL(t))if(i.isVectorDataURL(t)){var r=i.convertToXMLString(t);n.resolve(r)}else n.reject();else e.ajax({type:"GET",url:t,dataType:"text",cache:!0,success:function(e){n.resolve(e)},error:function(){n.reject()}});return n}}),o}),define("shared/utils/CerosResourceLoader",["log","jquery","lodash","device","globals","modules/page/utils/TextUtil","libs/image/ImageResource","cssresource","shared/utils/ResourceLoader","VectorImageUtils","libs/image/VectorImageResourceFactory","webfont"],function(e,t,n,i,r,o,a,s,u,l,c,d){var f=function(e){var t=function(){var t=new a(e);return t.getPromise()};return u.add(e,t)},h=function(e){var t=function(){var t=new c(e);return t.getPromise()};return u.add(e,t)},p=function(e){if(u.has(e))return u.get(e);var t=function(){var t=new s(e);return t.deferred.promise()};return u.add(e,t)},g=function(e,i,r){if(u.has(i))return u.get(i);n.isArray(e)||(e=[e]),n.isArray(i)||(i=[i]);var o={families:e,urls:i};n.isUndefined(r)||(o.testStrings={},n.isObject(r)?n.each(e,function(e){n.isUndefined(r[e])||(o.testStrings[e]=r[e])}):n.each(e,function(e){o.testStrings[e]=r}));var a=function(){var i=[],r={};return n.each(e,function(e){var n=new t.Deferred;i.push(n),r[e]=n}),d.load({custom:o,async:!0,fontactive:function(e){r[e].resolve()},fontinactive:function(e){r[e].reject()}}),t.when.apply(t,i).promise()};return u.add(i,a)},m=function(e){e=e.split(":")[0];var t,n=r.googleFontUrl+"/"+e+".css";return g(e,n,t)},v=function(e){if(r.googleFontUrl)return m(e);if(u.has(e))return u.get(e);var n=function(){var n=new t.Deferred;return d.load({google:{families:[e]},async:!0,fontactive:function(){n.resolve()},fontinactive:function(){n.reject()}}),n.promise()};return u.add(e,n)},y=function(e){return u.get(e)},_=function(e){return u.has(e)},b=function(){return u.cancelPending()};return{get:y,addImage:f,addVectorImage:h,addCss:p,addGoogleWebFont:v,addCustomWebFont:g,has:_,cancelPending:b,pause:u.pause,resume:u.resume,onPriorityQueueCompletion:u.onPriorityQueueCompletion,onAllResourcesLoaded:u.onAllResourcesLoaded}}),define("shared/utils/ModuleEventManager",["lodash","jquery","log","backbone"],function(e,t,n,i){return e.extend({events:{},unregisteredHandlers:{},registerEvents:function(t,n){e.each(t,e.bind(function(t){this.events[t]=n,this.unregisteredHandlers[t]&&(e.each(this.unregisteredHandlers[t],e.bind(function(e){this.on(t,e)},this)),this.unregisteredHandlers[t]=null)},this))}},i.Events)}),define("shared/models/EmbeddedViewportModel",["log","lodash","backbone"],function(e,t,n){var i=null,r=n.Model.extend({defaults:{top:null,bottom:null},setTopAndBottom:function(e,t){this.set({top:e,bottom:t})},getTop:function(){return this.get("top")},getBottom:function(){return this.get("bottom")},getVerticalCenterOfVisibleArea:function(e){var t=Math.max(this.getTop(),0),n=Math.min(this.getBottom(),e),i=n-t;return i/2+t},isActive:function(){return null!==this.get("top")&&null!==this.get("bottom")}},{getInstance:function(){return i||(i=new r),i}});return r}),define("shared/utils/ScrollProxy",["log","lodash","jquery","backbone","shared/models/EmbeddedViewportModel"],function(e,t,n,i,r){var o="ceros-embedded-viewport:",a={PING:"ping",READY:"ready",POSITION:"position",SCROLL_TO:"scroll-to",UPDATE_POSITION:"update-position",GOTO_URL:"goto-url"},s=t.extend({EVENTS:a},i.Events),u=function(e){s.trigger(a.UPDATE_POSITION,e),r.getInstance().setTopAndBottom(e.top,e.bottom)},l=function(e){var t=null;try{t=JSON.parse(e.originalEvent.data)}catch(n){}if(t&&t.event&&t.event.substr(0,o.length)===o)switch(t.event.substr(o.length)){case a.PING:f();break;case a.POSITION:u(t)}},c=function(e,n){var i=JSON.stringify(t.extend({event:o+e},n));window.parent.postMessage(i,"*")},d=null,f=function(){c(a.READY,{issueSlug:d})};return s=t.extend(s,{init:function(e){d=e,f(),n(window).on("message",l)},announceScrollTo:function(e){c(a.SCROLL_TO,e)},announceGotoUrl:function(e,t){var n={url:e,urlOpenInNewWindow:t};c(a.GOTO_URL,n)}})}),define("modules/page/utils/ShareJSConnection",["jquery","lodash","globals"],function(e,t,n){var i=!1,r=function(){if(i!==!1)return i;if("undefined"==typeof sharejs)throw Error("Unable to connect to ShareJS Server");return i=new sharejs.Connection(n.shareJsServer),i.on("error",o._showErrorInternal),e(window).unload(function(){i&&i.disconnect()}),i},o={initialize:function(){r()},getConnection:function(){return i},_showErrorInternal:function(e){if("Unknown session ID"===e)return!1;var t="There was a problem connecting to the server.";return e&&(t=e,t.match(/\bOp apply failed/gi)&&(t="Your changes were unable to be saved.")),this.showError(t)},showError:function(e){return window.onerror(e,null,null),i&&(i.disconnect(),i=!1),!0}};return o}),define("ThumbnailVariantUtils",["lodash"],function(e){return{VARIANTS:{FULL:"full",HALF:"half",QUARTER:"quarter",TENTH:"tenth"},getThumbnailVariant:function(t,n){var i=null;return e.has(t,n)?i=t[n]:e.has(t,this.VARIANTS.FULL)&&(i=t[this.VARIANTS.FULL]),i},getComponentImageThumbnail:function(t,n){var i=[];e.each(t,function(e){i.push(e)}),i.sort(function(e,t){return e.width<t.width?-1:e.width>t.width?1:0});var r=e.find(i,function(e){return e.width>=n.width&&e.height>=n.height});return e.isObject(r)||(r=this.getThumbnailVariant(t,this.VARIANTS.FULL)),r},getLowResThumbnail:function(e,t){var n={width:t.width/4,height:t.height/4};return this.getComponentImageThumbnail(e,n)}}}),define("modules/page/utils/ScalableImage",["jquery","lodash","backbone","urlUtils","ThumbnailVariantUtils"],function(e,t,n,i,r){var o=function(e){if(!e.thumbnails)throw new Error("ScalableImage missing thumbnails.");this.options=e,this.setThumbnails(this.options.thumbnails)};return o.prototype={currentThumbnail:null,thumbnails:null,setThumbnails:function(e){this.thumbnails=e},getCurrentThumbnailSize:function(){return this.currentThumbnail?{width:this.currentThumbnail.width,height:this.currentThumbnail.height}:null},getSrc:function(e){return this.needsToScale(e)&&(this.currentThumbnail=r.getComponentImageThumbnail(this.thumbnails,e)),i.replaceProtocolIfHttpsRequest(this.currentThumbnail.url)},setCurrentThumbnailAndGetSrc:function(e){return this.currentThumbnail=e,i.replaceProtocolIfHttpsRequest(this.currentThumbnail.url)},needsToScale:function(e){var n=this.getCurrentThumbnailSize();return t.isObject(n)?e.width>n.width||e.height>n.height?!0:!1:!0}},o}),define("modules/page/utils/VectorImage",["urlUtils"],function(e){var t=function(e){this.url=e};return t.prototype={getSrc:function(){return e.replaceProtocolIfHttpsRequest(this.url)}},t}),define("modules/page/models/media-loaders/ComponentImageLoader",["lodash","backbone","log","shared/utils/CerosResourceLoader","modules/page/utils/ScalableImage","modules/page/utils/VectorImage","VectorImageUtils","ThumbnailVariantUtils"],function(e,t,n,i,r,o,a,s){var u="image-loaded",l="low-res-image-loaded",c=function(e,t){this.componentWidth=e.width,this.componentHeight=e.height,this.componentId=e.id,this.currentResource=null,a.isVectorBased(t.get("mimetype"))?this.vectorImage=new o(t.get("url")):this.scalableImage=new r(t.toJSON())};return e.extend(c.prototype,t.Events,{loadLowRes:function(t){if(this.scalableImage){var n={width:this.componentWidth*t.adjustedRatio,height:this.componentHeight*t.adjustedRatio},r=s.getLowResThumbnail(this.scalableImage.thumbnails,n);if(r.width>=n.width&&r.height>=n.height)this.load(t);else{var o=s.getThumbnailVariant(this.scalableImage.thumbnails,s.VARIANTS.FULL);r.width>=o.width&&r.height>=o.height?this.load(t):(this.currentResource=i.addImage(this.scalableImage.setCurrentThumbnailAndGetSrc(r)),this.currentResource.getPromise().done(e.bind(function(){this.trigger(l),this.loadNow(t)},this)))}}else this.load(t)},load:function(t){var n=null;if(this.scalableImage){var r={width:this.componentWidth*t.adjustedRatio,height:this.componentHeight*t.adjustedRatio};n=this.scalableImage.getSrc(r)}else{if(!this.vectorImage)throw"Expecting either a Scalable or Vector Image";n=this.vectorImage.getSrc()}n!==this.getSrc()&&(this.currentResource&&this.currentResource.cancel(),this.currentResource=this.vectorImage?i.addVectorImage(n):i.addImage(n),this.currentResource.getPromise().done(e.bind(function(){this.trigger(u)},this)))},loadNow:function(e){this.load(e),this.currentResource&&this.currentResource.loadNow()},loadLowResNow:function(e){this.loadLowRes(e),this.currentResource&&this.currentResource.loadNow()},onImageLoaded:function(e,t){this.currentResource?("resolved"===this.currentResource.getPromise().state()&&e.call(t),this.bind(u,e,t)):n.warn("No resource was ever loaded",{componentId:this.componentId})},onLowResImageLoaded:function(e,t){this.currentResource?("resolved"===this.currentResource.getPromise().state()&&e.call(t),this.bind(l,e,t)):n.warn("No resource was ever loaded",{componentId:this.componentId})},getSrc:function(){return this.currentResource?this.currentResource.getKey():null},getCurrentResource:function(){return this.currentResource},getFullResolutionSrc:function(){if(this.scalableImage){var e=this.scalableImage.thumbnails[s.VARIANTS.FULL];if(e)return e.url}return this.getSrc()}}),c}),define("libs/font/FontVariant",["lodash","jquery"],function(e){var t={REGULAR:"normal",ITALIC:"italic"},n=function(t,n){this.name=t,this.fontFamily=null,this.unitsPerEm=null,this.ascent=null,this.descent=null,this.familyName=null,this.fontWeight=null,this.fontStyle=null,this.underlineThickness=null,this.underlinePosition=null,this.builtIn=!1,this.cssFamilyName=null,this.cssUrl=null,this.metricsUrl=null,this.fileName=null,this.webFontStylesLoaded=!1;var i=["name"];e.each(n,e.bind(function(t,n){e.has(this,n)&&!e.includes(i,n)&&(this[n]=t)},this))};return n.STYLES=t,n.REGULAR_WEIGHT=400,n.prototype={getFontFamily:function(){return this.fontFamily},getName:function(){return this.name},getCssFamilyName:function(){return this.cssFamilyName||this.familyName},getFontStyle:function(){return this.fontStyle||this.parseName(),this.fontStyle},getFontWeight:function(){return this.fontWeight||this.parseName(),this.fontWeight},isItalic:function(){return this.getFontStyle()===t.ITALIC},parseName:function(){var e=t.REGULAR,n=400,i=this.name,r=i.match(/^(regular|italic)$/i);r&&r[1]?"italic"===r[1]&&(e=t.ITALIC):(r=i.match(/^(([1-9]00)(italic)?)$/i),r&&r[2]&&(r[3]&&-1!==r[3].indexOf("italic")&&(e=t.ITALIC),n=r[2])),this.fontWeight=n,this.fontStyle=e},getDisplayName:function(){if(this.isUploaded())return this.name;var e={100:"Thin",200:"Extra-Light",300:"Light",400:"Normal",500:"Medium",600:"Semi-Bold",700:"Bold",800:"Extra-Bold",900:"Ultra-Bold"}[this.getFontWeight()],n=this.getFontStyle()===t.ITALIC?" italic":"";return e+n},isUploaded:function(){return this.fontFamily.isUploaded()},getMetricsFilename:function(){return this.fontFamily.family+"-"+this.getName()},asObject:function(){return{isUploaded:this.isUploaded(),name:this.getName(),displayName:this.getDisplayName(),fontStyle:this.getFontStyle(),fontWeight:this.getFontWeight(),isItalic:this.isItalic(),cssFamilyName:this.getCssFamilyName(),metricsUrl:this.metricsUrl}}},n}),define("libs/font/FontFamily",["lodash","jquery","libs/font/FontVariant"],function(e,t,n){var i=function(t){this.api=null,this.family=null,this.category=null,this.variants=[],this.subsets=[],this.version=null,this.lastModified=null,this.files={},this.webFontLoaded=!1,this.webFontStylesLoaded=!1,t&&t.variants&&(t=e.clone(t),this.setVariants(t.variants),delete t.variants),e.extend(this,t)};return i.prototype={isBuiltInFont:function(){return"built-in"===this.api},getVariants:function(){return this.variants},addVariant:function(t,i){var r=new n(t,e.extend({},i||{},{fontFamily:this}));return this.updateVariant(r),r},updateVariant:function(t){var n=e.findIndex(this.variants,function(e){return t.name===e.name});-1===n?this.variants.push(t):this.variants[n]=t},getVariantsCount:function(){return this.variants.length},isUploaded:function(){return"uploaded"===this.api},getVariantsAsObjects:function(){return e.map(this.variants,function(e){return e.asObject()})},getVariantNames:function(){return e.map(this.variants,function(e){return e.getName()})},getVariantDisplayNames:function(){return e.map(this.variants,function(e){return e.getDisplayName()})},getVariant:function(t){return e.find(this.variants,function(e){return e.getName()===t.toString()})},getVariantByDisplayName:function(t){return e.find(this.variants,function(e){return e.getDisplayName()===t.toString()})},convertVariantNamesToDisplayNames:function(t){return e.map(t,e.bind(function(e){var t=this.getVariant(e);return t?t.getDisplayName():null},this))},setVariants:function(t){this.variants=[],e.each(t,e.bind(function(e){this.variants.push(new n(e,{fontFamily:this}))},this))},getWebFontStylesLoaded:function(){return this.webFontStylesLoaded},setWebFontStylesLoaded:function(e){this.webFontStylesLoaded=e},getWebFontLoaded:function(){return this.webFontLoaded},setWebFontLoaded:function(e){this.webFontLoaded=e},sortVariantsByName:function(){this.variants=e.sortBy(this.variants,["name"])}},i}),define("modules/page/models/media-loaders/ComponentFontLoader",["lodash","backbone","log","shared/utils/CerosResourceLoader","modules/page/utils/TextUtil","libs/font/FontVariant","libs/font/FontFamily"],function(e,t,n,i,r,o,a){var s="variant-loaded",u="variant-failed",l=function(t,n){this.cerosFontManifest=n,this.fontSourceApi=t.fontSourceApi,this.variants=[this.getVariant(t.defaultSpan)],e.each(t.textSpans,e.bind(function(n){var i=e.extend({},t.defaultSpan,n),r=this.getVariant(i);this.variants.push(r)},this)),this.variants=e.uniq(this.variants),this.resources=null};return e.extend(l.prototype,t.Events,{getVariant:function(e){var t=r.resolveFont(e.fontName,e.variant,this.cerosFontManifest,this.fontSourceApi),n=new a({family:e.fontName});t.fontFamily=n;var i=new o(e.variant,t);return i},getAllVariants:function(){return this.variants},load:function(){null===this.resources&&(this.resources={},e.each(this.variants,e.bind(function(t){if(t.builtIn)this.trigger(s,t);else if(this.fontSourceApi&&"google"!==this.fontSourceApi){var n,r=i.addCustomWebFont(t.getCssFamilyName(),t.cssUrl,n);r.getPromise().done(e.bind(function(){this.trigger(s,t)},this)),r.getPromise().fail(e.bind(function(){this.trigger(u,t)},this)),this.resources[t.name]=r}else{var o=t.fontFamily.family+":"+t.name,a=i.addGoogleWebFont(o);a.getPromise().done(e.bind(function(){this.trigger(s,t)},this)),a.getPromise().fail(e.bind(function(){this.trigger(u,t)},this)),this.resources[t.name]=a}},this)))},loadNow:function(){this.load(),e.each(this.resources,function(e){e.loadNow()})},onVariantLoaded:function(t,n){e.each(this.getAllLoadedVariants(),function(e){t.call(n,e)}),this.on(s,t,n)},onLoadFail:function(e,t){this.hasFailedVariant()&&e.call(t),this.on(u,e,t)},getAllLoadedVariants:function(){return null===this.resources?(n.warn("Variants were never loaded"),[]):e.filter(this.variants,e.bind(function(t){return t.builtIn?!0:e.has(this.resources,t.name)&&"resolved"===this.resources[t.name].getPromise().state()},this))},hasFailedVariant:function(){return null===this.resources?(n.warn("Variants were never loaded"),!1):e.some(this.variants,e.bind(function(t){return t.builtIn?!1:e.has(this.resources,t.name)&&"rejected"===this.resources[t.name].getPromise().state()},this))}}),l}),define("shared/utils/ShareJSUtils",["lodash"],function(e){var t="smartgroup_object",n="smartgroup_layer",i="smartgroup_definition",r="object",o="layer";return{isMediaReloadRequiredForComponent:function(n,i){if(i){var o=this.decodePath(n.p);if(e.isUndefined(n.oi)){if(!e.isUndefined(n.li)&&(!e.includes([t,r],o.type)||this.isMediaComponentWithMediaPropertiesSet(i)))return!0}else if(this.isMediaProperty(i,o.property)||"visible"===o.property)return!0}return!1},isMediaReloadRequiredForOp:function(e,t){var n=this.getComponentFromPath(e,t.p);return this.isMediaReloadRequiredForComponent(t,n)},isPageReloadRequiredForComponent:function(t,n){if(!n)return!0;if(e.isUndefined(t.oi))return!0;var i=this.getPropertyNameFromPath(t.p);return"video-widget"===n.type&&e.includes(["height","width"],i)?!0:"smartgroup"===n.type&&e.includes(["x","y","height","width"],i)?!0:"opacity"===i?!0:"fixedPosition"===i?!0:!1},getPropertyNameFromPath:function(e){var t=this.decodePath(e);return t?t.property:null},getComponentFromPath:function(t,n){var i=this.decodePath(n);if(i){var r=i.property?n.length-1:n.length,o=e.slice(n,0,r),a=o.join(".");return e.at(t.snapshot,a)[0]}return null},decodePath:function(a){var s={};if(0===a.length)return null;var u=2;if(a.length>2&&e.isString(e.last(a))&&(s.property=e.last(a),u=3),a.length>=6&&"smartgroups"===a[0]&&"layers"===a[2]&&"objects"===a[a.length-u])s.type=t;else if(a.length>=4&&"smartgroups"===a[0]&&"layers"===a[2])s.type=n;else if(a.length>=2&&"smartgroups"===a[0])s.type=i;else if(a.length>=4&&"layers"===a[0]&&"objects"===a[a.length-u])s.type=r;else{if(!(a.length>=2&&"layers"===a[0]))return null;s.type=o}return s},isMediaProperty:function(t,n){return t&&("image-component"===t.type&&"image"===n||"video-widget"===t.type&&e.includes(["video","poster"],n))},isMediaComponentWithMediaPropertiesSet:function(e){return e&&("image-component"===e.type&&e.image||"video-widget"===e.type&&e.video&&e.poster)}}}),define("modules/page/models/PageModel",["jquery","lodash","backbone","globals","log","urlUtils","modules/page/utils/ShareJSConnection","modules/page/models/media-loaders/ComponentImageLoader","modules/page/models/media-loaders/ComponentFontLoader","shared/utils/ShareJSUtils"],function(e,t,n,i,r,o,a,s,u,l){var c=n.Model.extend({idAttribute:"slug",urlRoot:"{api-version}/account/{scope}/pages",defaults:{sdkTags:[],sdkPayload:""},initialize:function(e,t){n.Model.prototype.initialize.call(this,e,t),this.documentVersion=t.documentVersion,this.pageIndex=t.pageIndex},fetch:function(t){if(t=t||{},i.previewMode)return this._fetchFromShareJS();this._finishLoading();var n=new e.Deferred;return n.resolve(),n.promise()},getSlug:function(){return this.get("slug")},getSdkTags:function(){return this.get("sdkTags")},getSdkPayload:function(){return this.get("sdkPayload")},getDisabled:function(){return this.get("disabled")},getPageWidth:function(e){if(t.isUndefined(e))throw new Error("Document Version Model is required.");return e.getExperienceWidth()},getPageHeight:function(e){if(t.isUndefined(e))throw new Error("Document Version Model is required.");var n=this.getOverHeight(),i=e.getExperienceHeight();return n>i?n:i},getOverHeight:function(){return this.get("overHeight")},_fetchFromShareJS:function(){var n=new e.Deferred,i=a.getConnection();i.openExisting(this._getDocumentName(),t.bind(function(e,i){if(e)throw r.error(e),n.reject(e),Error(e);i.on("remoteop",t.bind(function(e){this._processRemoteOps(i,e)},this));var o=JSON.parse(JSON.stringify(i.snapshot));this.set(o),this.documentVersion.on("resolveMedia",t.bind(this.refetchMedia,this,i)),n.resolve()},this));var o=null,s=this._loadResolvedMedia().done(function(e){o=e});return e.when(n,s).done(t.bind(function(){this.set("media",o),this._finishLoading()},this))},_finishLoading:function(){this.setMediaAsCollection(),this.documentVersion.on("reload",this.resolveSmartgroupsAndMedia,this),this.resolveSmartgroupsAndMedia(),this.trigger("loaded")},_loadResolvedMedia:function(){return e.ajax({url:"/rest/"+n.Model.prototype.url.call(this).replace(/\{api-version\}/,i.apiVersion).replace(/\{scope\}/,i.accountSlug)+"/media",type:"GET",dataType:"json"})},resolveSmartgroupsAndMedia:function(e){var n=e||this.get("layers")||[];t.each(n,t.bind(function(e){return e.smartgroupId?this.resolveSmartgroupReference(e):"folder"===e.type?this.resolveSmartgroupsAndMedia(e.items):t.each(e.objects,t.bind(function(e){this.resolveObjectMedia(e,this.get("media"),this.documentVersion.get("cerosFontManifest"))},this)),e},this)),this.set("layers",n)},refetchMedia:function(e){this._loadResolvedMedia().done(t.bind(function(t){this.set(JSON.parse(JSON.stringify(e.snapshot)),{silent:!0}),this.set("media",t),this.setMediaAsCollection(),this.resolveSmartgroupsAndMedia(),this.trigger("reload")},this))},resolveSmartgroupReference:function(n){var i=this,o=this.documentVersion.getSmartgroupDefinition(n.smartgroupId);o?n.layers=t.map(o.layers,t.bind(function(r){function o(e){e.id=c.buildSmartgroupInstanceObjectId(n.id,e.id),e.parentSmartGroup=n,"folder"===e.type?t.each(e.items,function(e){o(e)}):t.each(e.objects,function(e){i.resolveObjectInSmartgroup(e,n.id)})}return r=e.extend(!0,{},r),o(r),r},this)):r.warn("Smartgroup "+n.smartgroupId+" could not be resolved")},resolveObjectInSmartgroup:function(e,n){e.originalObjectId=e.id,e.id=c.buildSmartgroupInstanceObjectId(n,e.id),e.interactions&&t.each(e.interactions,t.bind(function(e){e.layerTargets&&(e.layerTargets=t.map(e.layerTargets,t.bind(function(e){return c.buildSmartgroupInstanceObjectId(n,e)},this)))},this)),this.resolveObjectMedia(e,this.documentVersion.get("media"),this.documentVersion.get("cerosFontManifest"))},resolveObjectMedia:function(e,t,n){var i=null;switch(e.type){case"image-component":i=t.get(e.image),i&&(e.imageLoader=new s(e,i));break;case"video-widget":i=t.get(e.poster),i&&(e.posterLoader=new s(e,i)),e.videoMedia=t.get(e.video);break;case"text-component":e.cerosFontManifest=n,e.fontLoader=new u(e,n)}},preloadVisibleMediaNow:function(e){var t=!0,n=!0,i=!1,r=!1;this.preloadMediaForLayers(this.get("layers"),e,t,n,i,r)},preloadVisibleMedia:function(e){var t=!1,n=!0,i=!1,r=!1;this.preloadMediaForLayers(this.get("layers"),e,t,n,i,r)},preloadVisibleImages:function(e){var t=!1,n=!0,i=!1,r=!0;this.preloadMediaForLayers(this.get("layers"),e,t,n,i,r)
},preloadHiddenImages:function(e){var t=!1,n=!1,i=!0,r=!0;this.preloadMediaForLayers(this.get("layers"),e,t,n,i,r)},preloadHiddenMedia:function(e){var t=!1,n=!1,i=!0,r=!1;this.preloadMediaForLayers(this.get("layers"),e,t,n,i,r)},preloadMediaForLayers:function(e,n,i,r,o,a){t.each(e,t.bind(function(e){if(e.smartgroupId||"folder"===e.type){var s=!1,u=!1;if(r&&e.visible?s=!0:o&&e.visible?u=!0:o&&!e.visible&&(s=!0,u=!0),s||u){var l=e.smartgroupId?e.layers:e.items;this.preloadMediaForLayers(l,n,i,s,u,a)}}else{var c=e.visible&&r||!e.visible&&o;t.each(e.objects,t.bind(function(e){var r=!e.visible&&o;if(c||r){var s=e.imageLoader||e.posterLoader;if(a||(s=s||e.fontLoader),s){var u=t.isFunction(s.loadLowRes)&&!e.posterLoader&&this.documentVersion.shouldLoadLowRes();i?u?s.loadLowResNow(n):s.loadNow(n):u?s.loadLowRes(n):s.load(n)}}},this))}},this))},_processRemoteOps:function(e,n){for(var i={},r=!1,o=!1,a=0;a<n.length;a++){var s=n[a],u=l.getComponentFromPath(e,s.p);if(l.isMediaReloadRequiredForComponent(s,u)){r=!0;break}!u||l.isPageReloadRequiredForComponent(s,u)?o=!0:i[u.id]=JSON.parse(JSON.stringify(u))}r?this.refetchMedia(e):o?this.triggerPageReload(e):t.each(i,t.bind(function(e,t){this.trigger("remote",{id:t,options:e})},this))},triggerPageReload:function(e){var t=this.get("media");this.set(JSON.parse(JSON.stringify(e.snapshot)),{silent:!0}),this.set("media",t),this.resolveSmartgroupsAndMedia(),this.trigger("reload")},_getDocumentName:function(){var e=n.Model.prototype.url.apply(this,arguments).replace(/\{api-version\}/,i.apiVersion).replace(/\{scope\}/,i.accountSlug);return("/"+e).replace(/\//g,"_")},setMediaAsCollection:function(){var e=new n.Collection(this.get("media"));this.set("media",e)},getPageIndex:function(){return this.pageIndex},getAllSmartgroupInstanceLayerIds:function(e,n){var i=[],r=n||this.get("layers");return t.each(r,t.bind(function(n){if(n.smartgroupId){var r=c.buildSmartgroupInstanceObjectId(n.id,e),o=t.some(n.layers,function(e){return e.id===r});o&&i.push(r)}else"folder"===n.type&&(i=i.concat(this.getAllSmartgroupInstanceLayerIds(e,n.items)))},this)),i},getAllSmartgroupInstanceComponentIds:function(e,n){var i=[],r=n||this.get("layers");return t.each(r,t.bind(function(n){if(n.smartgroupId){var r=c.buildSmartgroupInstanceObjectId(n.id,e),o=function(e){return"folder"===e.type?t.some(e.items,function(e){return o(e)}):t.some(e.objects,function(e){return e.id===r})},a=t.some(n.layers,o);a&&i.push(r)}else"folder"===this.type&&(i=i.concat(this.getAllSmartgroupInstanceComponentIds(e,this.items)))},this)),i}},{buildSmartgroupInstanceObjectId:function(e,t){return e+"|"+t},extractObjectIdFromSmartgroupInstanceId:function(e){var t=e.indexOf("|");return-1!==t&&(e=e.substr(t+1)),e}});return c}),define("modules/viewport/models/DocumentVersionModel",["lodash","jquery","backbone","globals","log","urlUtils","modules/page/utils/ShareJSConnection","modules/page/models/PageModel","shared/utils/ShareJSUtils"],function(e,t,n,i,r,o,a,s,u){var l="updateViewportSize",c="updateScaleExperience",d="updateMediaCollection",f=n.Model.extend({getSlug:function(){return e.last(this.get("uri").split("/"))}}),h=n.Collection.extend({model:f});return n.Model.extend({idAttribute:"slug",urlRoot:"{api-version}/account/{scope}/document-versions",MANIFEST_ADD_PAGE:"manifestAddPage",MANIFEST_REMOVE_PAGE:"manifestRemovePage",MANIFEST_MOVE_PAGE:"manifestMovePage",initialize:function(e,t){if(n.Model.prototype.initialize.call(this,e,t),!i.previewMode&&!t.docVersionRequest)throw new Error("A doc version request must be passed in when not in preview mode");this.docVersionRequest=t.docVersionRequest,this.pages=[]},fetch:function(){if(i.previewMode){var n=t.Deferred();try{var o=a.getConnection();o.openExisting(this._getDocumentName(),e.bind(function(t,i){t?(r.warn(t),n.reject()):i&&(i.on("shout",e.bind(function(t){t=JSON.parse(t),t.name===l||t.name===c?window.location.reload():t.name===d&&this.loadResolvedMedia().done(e.bind(function(e){this.setMediaAsCollection(e),this.trigger("resolveMedia",i)},this))},this)),i.on("remoteop",e.bind(function(e){this.processRemoteOps(i,e)},this)),this.set(JSON.parse(JSON.stringify(i.snapshot))),this.createManifestCollection(),this.bindToManifestChanges(),n.resolve())},this))}catch(s){r.warn(s),n.reject()}var u=this.loadResolvedMedia().done(e.bind(function(e){this.setMediaAsCollection(e)},this)).fail(function(){r.warn("Could not fetch docversion media!")}),f=this.loadCerosFontMetrics().done(e.bind(function(e){this.setCerosFontMetrics(e)},this)).fail(function(){r.warn("Could not fetch uploaded fonts metrics!")});return t.when(n,u,f).pipe(e.bind(this.loadPageModels,this))}return this.docVersionRequest.pipe(e.bind(function(e){return this.set(e),this.createManifestCollection(),this.setMediaAsCollection(this.get("media")),this.loadPageModels()},this))},loadPageModels:function(){var n=this.editorPagesManifest.map(e.bind(function(e,t){var n=this.createPageModel(e,t);return this.pages.push(n),n.fetch()},this));return t.when.apply(t,n)},createPageModel:function(t,n){var r={slug:t.getSlug(),disabled:t.get("initiallyDisabled")};i.previewMode||(r=e.extend(r,this.get("pages")[t.getSlug()]));var o=new s(r,{documentVersion:this,pageIndex:n});return t.on("change:initiallyDisabled",function(){o.set("disabled",t.get("initiallyDisabled"))}),o},processRemoteOps:function(t,n){for(var i=!1,r=!1,o=0;o<n.length;o++){var a=n[o],s=a.p[0];"editorPagesManifest"===s?this.processManifestRemoteOp(a):(this.set(s,JSON.parse(JSON.stringify(t.snapshot[s]))),"smartgroups"===s?(i=i?i:u.isMediaReloadRequiredForOp(t,a),r=!0):"fonts"===s&&this.processFontRemoteOp(a))}i?this.loadResolvedMedia().done(e.bind(function(e){this.setMediaAsCollection(e),this.trigger("reload")},this)):r&&this.trigger("reload")},processFontRemoteOp:function(n){2===n.p.length&&"list"===n.p[1]&&t.when(this.loadFontMetrics(),this.loadCerosFontMetrics()).done(e.bind(function(e,t){i.fontManifest=e[0],this.setCerosFontMetrics(t[0]),this.trigger("reload")},this))},createManifestCollection:function(){this.editorPagesManifest=new h(this.get("editorPagesManifest"))},bindToManifestChanges:function(){this.editorPagesManifest.on("add",e.bind(function(t,n,i){var r=i.at,o=this.createPageModel(t,r);this.pages.splice(r,0,o),o.fetch().done(e.bind(function(){this.trigger(this.MANIFEST_ADD_PAGE,t,i.at)},this))},this)),this.editorPagesManifest.on("remove",e.bind(function(e,t,n){this.pages.splice(n.index,1),this.trigger(this.MANIFEST_REMOVE_PAGE,n.index)},this)),this.editorPagesManifest.on("move",e.bind(function(e,t){this.pages.splice(t,0,this.pages.splice(e,1)[0]),this.trigger(this.MANIFEST_MOVE_PAGE,e,t)},this))},processManifestRemoteOp:function(t){var n,i=t.p[1];if(2===t.p.length)if(e.isUndefined(t.li))if(e.isUndefined(t.ld)){if(!e.isUndefined(t.lm)){var r=t.lm;n=this.editorPagesManifest.at(i),this.editorPagesManifest.remove(n,{silent:!0}),this.editorPagesManifest.add(n,{at:r,silent:!0}),this.editorPagesManifest.trigger("move",i,r)}}else n=this.editorPagesManifest.at(i),this.editorPagesManifest.remove(n);else this.editorPagesManifest.add(t.li,{at:i});else if(3===t.p.length&&!e.isUndefined(t.oi)){var o=t.p[2];this.editorPagesManifest.at(i).set(o,t.oi)}},getPageNumberBySlug:function(t){var n=this.editorPagesManifest;if(e.isEmpty(n))return null;var i=null;return n.find(function(e,n){return e.getSlug()===t?(i=n+1,!0):!1}),i},getPageInfoByNumberOrSlug:function(t){var n=this.editorPagesManifest,i=null,r=null;return e.isString(t)?(i=this.getPageNumberBySlug(t),i?r=t:i=1):(i=parseInt(t,10),(1>i||i>n.length)&&(i=1)),!r&&n.at(i-1)&&(r=n.at(i-1).getSlug()),{number:i,slug:r}},getExperienceWidth:function(){return this.get("viewportWidth")},getExperienceHeight:function(){return this.get("viewportHeight")},getScaleExperience:function(){return this.get("scaleExperience")},getPages:function(){return this.pages},getEnabledPageIndexes:function(){var t=[];return e.each(this.pages,function(e,n){e.get("disabled")||t.push(n)}),t},getNearestEnabledPage:function(e){var t=e-1;if(!this.pages[t].get("disabled"))return e;for(var n=1;t-n>=0||t+n<this.pages.length;n++){if(this.pages[t+n]&&!this.pages[t+n].get("disabled"))return t+n+1;if(this.pages[t-n]&&!this.pages[t-n].get("disabled"))return t-n+1}},isCarousel:function(){var e=this.editorPagesManifest,t=this.get("carousel");return t&&t.enabled&&e.length>1},isAutoTransitioning:function(){var e=this.get("carousel");return this.isCarousel()&&e.autoTransition},shouldLoadLowRes:function(){return this.get("loadLowRes")},getAutoTransitionDelay:function(){var e=this.get("carousel");return e?e.autoTransitionDelay:0},_getDocumentName:function(){return this.get("uri").replace(/\//g,"_")},getSmartgroupDefinition:function(t){return e.find(this.get("smartgroups"),function(e){return e.id===t})},loadResolvedMedia:function(){return t.ajax({url:"/rest/"+n.Model.prototype.url.call(this).replace(/\{api-version\}/,i.apiVersion).replace(/\{scope\}/,i.accountSlug)+"/media",type:"GET",dataType:"json"})},loadFontMetrics:function(){return t.ajax({url:"/rest/"+n.Model.prototype.url.call(this).replace(/\{api-version\}/,i.apiVersion).replace(/\{scope\}/,i.accountSlug)+"/font-metrics",type:"GET",dataType:"json"})},loadCerosFontMetrics:function(){return t.ajax({url:"/rest/"+n.Model.prototype.url.call(this).replace(/\{api-version\}/,i.apiVersion).replace(/\{scope\}/,i.accountSlug)+"/uploaded-font-metrics",type:"GET",dataType:"json"})},setMediaAsCollection:function(e){var t=new n.Collection(e);this.set("media",t)},setCerosFontMetrics:function(e){this.set("cerosFontManifest",e)}})}),define("ceros",["require","lodash","jquery","backbone"],function(e,t,n,i){var r={};return r.Module=function(e){t.extend(this,e),this.status=r.Module.STATUS.PENDING,e.delegate&&this.setDelegate(e.delegate)},t.extend(r.Module.prototype,i.Events,{setDelegate:function(e){if(!t.isObject(e))throw Error("invalid module delegate!");for(var n in e)!this.hasOwnProperty(n)&&e.hasOwnProperty(n)&&t.isFunction(e[n])&&(this[n]=t.bind(e[n],e))},getModule:function(e){return this.application.getModule(e)},setApplication:function(e){this.application=e},getApplication:function(){return this.application},getDependency:function(e){return this.application.getModule(e)},setStatus:function(e){this.status=e},getStatus:function(){return this.status},getDeferredLoadingTimeout:function(){return r.Application.DEFERRED_LOADING_TIMEOUT}}),r.Module.extend=i.View.extend,r.Module.STATUS={PENDING:1,LOADED:2,STARTED:4},r.Application=function(e){this.initCallbacks=new r.Callbacks,this.modules={};var i=this;this.loadedAllModules=(new n.Deferred).progress(function(e){i._loadModule(e),i._allLoaded()&&this.resolve()}),t.extend(this,e)},t.extend(r.Application.prototype,i.Events,{_allLoaded:function(){return t.every(t.values(this.modules),function(e){return e&&e.getStatus()===r.Module.STATUS.LOADED})},_loadModule:function(e){if(t.isUndefined(e)||t.isNull(e))throw Error("invalid module!");this.modules[e.id]=e,e.setApplication(this),e.trigger("load"),e.setStatus(r.Module.STATUS.LOADED),this.addInitializer(function(){e.trigger("start"),e.setStatus(r.Module.STATUS.STARTED)})},use:function(n){t.isString(n)?(this.modules[n]=null,e(["modules/"+n+"/module"],t.bind(function(e){if(!e)throw Error("could not load module: "+n);this.loadedAllModules.notify(e)},this))):this._loadModule(n)},getModule:function(e){return this.modules[e]},addInitializer:function(e){this.initCallbacks.add(e)},start:function(e){var i=t.bind(function(){this.trigger("initialize:before",e),this.initCallbacks.run(e,this),this.trigger("initialize:after",e),this.trigger("start",e)},this);this._allLoaded()?i():n.when(this.loadedAllModules).then(i)}}),r.Application.extend=i.View.extend,r.Application.DEFERRED_LOADING_TIMEOUT=5e3,r.Callbacks=function(){this.deferred=n.Deferred(),this.promise=this.deferred.promise()},t.extend(r.Callbacks.prototype,{add:function(e,t){this.promise.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this.deferred.resolve(t,e)}}),r}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return m.call(e,t)}function a(e){return!o(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function u(t,n){function r(){if(v&&!y)for(;m.length;)delete p[m.pop()];else m=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(b,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(i(e[0])+"\\s*"),u=new RegExp("\\s*"+i(e[1])),f=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var s,u,f,h=[],p=[],m=[],v=!1,y=!1;o(n||e.tags);for(var S,C,P,A,I,x,O=new d(t);!O.eos();){if(S=O.pos,P=O.scanUntil(s))for(var M=0,k=P.length;k>M;++M)A=P.charAt(M),a(A)?m.push(p.length):y=!0,p.push(["text",A,S,S+1]),S+=1,"\n"===A&&r();if(!O.scan(s))break;if(v=!0,C=O.scan(E)||"name",O.scan(_),"="===C?(P=O.scanUntil(T),O.scan(T),O.scanUntil(u)):"{"===C?(P=O.scanUntil(f),O.scan(w),O.scanUntil(u),C="&"):P=O.scanUntil(u),!O.scan(u))throw new Error("Unclosed tag at "+O.pos);if(I=[C,P,S,O.pos],p.push(I),"#"===C||"^"===C)h.push(I);else if("/"===C){if(x=h.pop(),!x)throw new Error('Unopened section "'+P+'" at '+S);if(x[1]!==P)throw new Error('Unclosed section "'+x[1]+'" at '+S)}else"name"===C||"{"===C||"&"===C?y=!0:"="===C&&o(P)}if(x=h.pop())throw new Error('Unclosed section "'+x[1]+'" at '+O.pos);return c(l(p))}function l(e){for(var t,n,i=[],r=0,o=e.length;o>r;++r)t=e[r],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function c(e){for(var t,n,i=[],r=i,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(t)}return i}function d(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===p.call(e)},m=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},_=/\s*/,b=/\s+/,T=/\s*=/,w=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var o,a,s=this,u=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(u=r(n,o[a])),n=n[o[a++]];else n=s.view[e],u=r(s.view,e);if(u)break;s=s.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=u(e,t)),i},h.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof f?t:new f(t);return this.renderTokens(i,r,n,e)},h.prototype.renderTokens=function(e,t,n,i){for(var r,o,a,s="",u=0,l=e.length;l>u;++u)a=void 0,r=e[u],o=r[0],"#"===o?a=this.renderSection(r,t,n,i):"^"===o?a=this.renderInverted(r,t,n,i):">"===o?a=this.renderPartial(r,t,n,i):"&"===o?a=this.unescapedValue(r,t):"name"===o?a=this.escapedValue(r,t):"text"===o&&(a=this.rawValue(r)),void 0!==a&&(s+=a);return s},h.prototype.renderSection=function(e,n,i,r){function o(e){return a.render(e,n,i)}var a=this,s="",u=n.lookup(e[1]);if(u){if(g(u))for(var l=0,c=u.length;c>l;++l)s+=this.renderTokens(e[4],n.push(u[l]),i,r);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],n.push(u),i,r);else if(t(u)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,r.slice(e[3],e[5]),o),null!=u&&(s+=u)}else s+=this.renderTokens(e[4],n,i,r);return s}},h.prototype.renderInverted=function(e,t,n,i){var r=t.lookup(e[1]);return!r||g(r)&&0===r.length?this.renderTokens(e[4],t,n,i):void 0},h.prototype.renderPartial=function(e,n,i){if(i){var r=t(i)?i(e[1]):i[e[1]];return null!=r?this.renderTokens(this.parse(r),n,i,r):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},h.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);return null!=i?e.escape(i):void 0},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var S=new h;e.clearCache=function(){return S.clearCache()},e.parse=function(e,t){return S.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(e,t,i)},e.to_html=function(n,i,r,o){var a=e.render(n,i,r);return t(o)?void o(a):a},e.escape=s,e.Scanner=d,e.Context=f,e.Writer=h}),function(e,t){"undefined"!=typeof exports?t(exports,require("lodash")):"function"==typeof define&&define.amd?define("color",["exports","lodash"],t):t(e,e._)}(this,function(e,t){var n=function(e,n,i,r){var o=parseFloat(r);return(t.isUndefined(r)||t.isNaN(o))&&(o=1),null!==e&&(this.r=parseInt(e,10)),null!==n&&(this.g=parseInt(n,10)),null!==i&&(this.b=parseInt(i,10)),this.a=o,this};return n.prototype={toHex:function(){var e;return null===this.r||null===this.g||null===this.b?"transparent":(e=(this.b|this.g<<8|this.r<<16).toString(16),e="#"+"000000".substr(0,6-e.length)+e,e.toUpperCase())},isTransparent:function(){return!this.a},set:function(e){return t.each(e,t.bind(function(e,t){this[t]=e},this)),this},hsv:function(){var e={h:0,s:0,v:0},t=this.r/255,n=this.g/255,i=this.b/255,r=Math.min(t,Math.min(n,i)),o=Math.max(t,Math.max(n,i));if(r==o)return e.v=r,e;var a=t==r?n-i:i==r?t-n:i-t,s=t==r?3:i==r?1:5;return e.h=60*(s-a/(o-r)),e.s=(o-r)/o,e.v=o,e},rgb:function(){return{r:this.r,g:this.g,b:this.b}},rgba:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}},cmyk:function(){var e={c:0,m:0,y:0,k:0},t=this.r/255,n=this.g/255,i=this.b/255;return e.k=Math.min(1-t,1-n,1-i),e.c=(1-t-e.k)/(1-e.k),e.m=(1-n-e.k)/(1-e.k),e.y=(1-i-e.k)/(1-e.k),isNaN(e.c)&&(e.c=0),isNaN(e.m)&&(e.m=0),isNaN(e.y)&&(e.y=0),e.c=Math.round(100*e.c),e.m=Math.round(100*e.m),e.y=Math.round(100*e.y),e.k=Math.round(100*e.k),e},contrastRatio:function(e){e=n.fromString(e);var t=this.relativeLuminance(),i=e.relativeLuminance();if(i>t){var r=t;t=i,i=r}return(t+.05)/(i+.05)},relativeLuminance:function(){var e=function(e){return.03928>e?e/12.92:Math.pow((e+.055)/1.055,2.4)},t=e(this.r/255),n=e(this.g/255),i=e(this.b/255);return.2126*t+.7152*n+.0722*i},clone:function(){return new n(this.r,this.g,this.b,this.a)},cloneWithAlpha:function(e){var t=this.clone();return t.a=e,t},toString:function(){return null!==this.r&&null!==this.g&&null!==this.b?null!==this.a&&1!==this.a?"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")":this.toHex():"transparent"},toValue:function(){return[this.r,this.g,this.b,this.a]}},n.fromHex=function(e){var t,i,r;return"#"===e[0]&&(e=e.substring(1,7)),3===e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),r=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),t=parseInt(e.substring(4,6),16),new n(r,i,t)},n.fromHSV=function(e,i,r){t.isObject(e)&&(i=e.s,r=e.v,e=e.h);var o,a,s,u,l,c,d,f;if(0===i)return c=d=f=r,new n(255*c,255*d,255*f);switch(e/=60,o=Math.floor(e),a=e-o,s=r*(1-i),u=r*(1-i*a),l=r*(1-i*(1-a)),o){case 0:c=r,d=l,f=s;break;case 1:c=u,d=r,f=s;break;case 2:c=s,d=r,f=l;break;case 3:c=s,d=u,f=r;break;case 4:c=l,d=s,f=r;break;default:c=r,d=s,f=u}return new n(255*c,255*d,255*f)},n.fromCMYK=function(e,i,r,o){t.isObject(e)&&(i=e.m,r=e.y,o=e.k,e=e.c);var a=n.Black();return e/=100,i/=100,r/=100,o/=100,a.r=1-Math.min(1,e*(1-o)+o),a.g=1-Math.min(1,i*(1-o)+o),a.b=1-Math.min(1,r*(1-o)+o),a.r=Math.round(255*a.r),a.g=Math.round(255*a.g),a.b=Math.round(255*a.b),a},n.fromString=function(e){var t,i,r,o,a,s,u;if(e instanceof n)return e;var l=e.match(this.regex);return l?(a=l[1],s=l[2],a?n.fromHex(a):s?(u=s.split(/\s*,\s*/),t=u[0],i=u[1],r=u[2],o=u[3],new n(t,i,r,o)):void 0):null},n.regex=/(?:#([0-9a-f]{3,6})|rgba?\(([^)]+)\))/i,n.buildStops=function(e){return t.map(e,function(e){return n.fromString(e.color)+" "+parseInt(100*e.stop,10)+"%"}).join(",")},n.White=function(e){return new n(255,255,255,e)},n.Black=function(e){return new n(0,0,0,e)},n.Transparent=function(){return new n},n.getMostContrasting=function(e,t,i){e=n.fromString(e),t=n.fromString(t),i=n.fromString(i);var r=e.contrastRatio(t),o=e.contrastRatio(i);return r>o?t:i},e.Color=n,window.Color=n,n}),function(e,t,n,i){function r(e,t,n){return setTimeout(l(e,n),t)}function o(e,t,n){return Array.isArray(e)?(a(e,n[t],n),!0):!1}function a(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(t,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,r,i),t.apply(this,arguments)}}function u(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&dt(i,n)}function l(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==pt?e.apply(t?t[0]||i:i,t):e}function d(e,t){return e===i?t:e}function f(e,t,n){a(m(t),function(t){e.addEventListener(t,n,!1)})}function h(e,t,n){a(m(t),function(t){e.removeEventListener(t,n,!1)})}function p(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];v(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function b(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),a=0;a<ft.length;){if(n=ft[a],r=n?n+o:t,r in e)return r;a++}return i}function T(){return bt++}function w(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function E(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function S(e){var t,n=e.options.inputClass;return new(t=n?n:Et?F:St?V:wt?G:j)(e,C)}function C(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Ot&&i-r===0,a=t&(kt|Rt)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,P(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function P(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=x(t)),r>1&&!n.firstMultiple?n.firstMultiple=x(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=O(i);t.timeStamp=vt(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=D(s,u),t.distance=R(s,u),A(n,t),t.offsetDirection=k(t.deltaX,t.deltaY);var l=M(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=mt(l.x)>mt(l.y)?l.x:l.y,t.scale=a?N(a.pointers,i):1,t.rotation=a?L(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,I(n,t);var c=e.element;p(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function A(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};(t.eventType===Ot||o.eventType===kt)&&(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function I(e,t){var n,r,o,a,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(t.eventType!=Rt&&(u>xt||s.velocity===i)){var l=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,d=M(u,l,c);r=d.x,o=d.y,n=mt(d.x)>mt(d.y)?d.x:d.y,a=k(l,c),e.lastInterval=t}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=a}function x(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:gt(e.pointers[n].clientX),clientY:gt(e.pointers[n].clientY)},n++;return{timeStamp:vt(),pointers:t,center:O(t),deltaX:e.deltaX,deltaY:e.deltaY}}function O(e){var t=e.length;if(1===t)return{x:gt(e[0].clientX),y:gt(e[0].clientY)};for(var n=0,i=0,r=0;t>r;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:gt(n/t),y:gt(i/t)}}function M(e,t,n){return{x:t/e||0,y:n/e||0}}function k(e,t){return e===t?Dt:mt(e)>=mt(t)?0>e?Lt:Nt:0>t?jt:Ft}function R(e,t,n){n||(n=Ht);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function D(e,t,n){n||(n=Ht);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function L(e,t){return D(t[1],t[0],Gt)+D(e[1],e[0],Gt)}function N(e,t){return R(t[0],t[1],Gt)/R(e[0],e[1],Gt)}function j(){this.evEl=Wt,this.evWin=zt,this.pressed=!1,E.apply(this,arguments)}function F(){this.evEl=Kt,this.evWin=Xt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Jt,this.evWin=Zt,this.started=!1,E.apply(this,arguments)}function B(e,t){var n=y(e.touches),i=y(e.changedTouches);return t&(kt|Rt)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function V(){this.evTarget=tn,this.targetIds={},E.apply(this,arguments)}function H(e,t){var n=y(e.touches),i=this.targetIds;if(t&(Ot|Mt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=y(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return p(e.target,u)}),t===Ot)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(kt|Rt)&&delete i[a[r].identifier],r++;return s.length?[_(o.concat(s),"identifier",!0),s]:void 0}function G(){E.apply(this,arguments);var e=l(this.handler,this);this.touch=new V(this.manager,e),this.mouse=new j(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function q(e,t){e&Ot?(this.primaryTouch=t.changedPointers[0].identifier,W.call(this,t)):e&(kt|Rt)&&W.call(this,t)}function W(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,nn)}}function z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(rn>=o&&rn>=a)return!0}return!1}function Y(e,t){this.manager=e,this.set(t)}function $(e){if(g(e,cn))return cn;var t=g(e,dn),n=g(e,fn);return t&&n?cn:t||n?t?dn:fn:g(e,ln)?ln:un}function K(){if(!an)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=n?e.CSS.supports("touch-action",i):!0}),t}function X(e){this.options=dt({},this.defaults,e||{}),this.id=T(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=pn,this.simultaneous={},this.requireFail=[]}function Q(e){return e&_n?"cancel":e&vn?"end":e&mn?"move":e&gn?"start":""}function J(e){return e==Ft?"down":e==jt?"up":e==Lt?"left":e==Nt?"right":""}function Z(e,t){var n=t.manager;return n?n.get(e):e}function et(){X.apply(this,arguments)}function tt(){et.apply(this,arguments),this.pX=null,this.pY=null}function nt(){et.apply(this,arguments)}function it(){X.apply(this,arguments),this._timer=null,this._input=null}function rt(){et.apply(this,arguments)}function ot(){et.apply(this,arguments)}function at(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(e,t){return t=t||{},t.recognizers=d(t.recognizers,st.defaults.preset),new ut(e,t)}function ut(e,t){this.options=dt({},st.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=S(this),this.touchAction=new Y(this,this.options.touchAction),lt(this,!0),a(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function lt(e,t){var n=e.element;if(n.style){var i;a(e.options.cssProps,function(r,o){i=b(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function ct(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var dt,ft=["","webkit","Moz","MS","ms","o"],ht=t.createElement("div"),pt="function",gt=Math.round,mt=Math.abs,vt=Date.now;dt="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var yt=s(function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===i)&&(e[r[o]]=t[r[o]]),o++;return e},"extend","Use `assign`."),_t=s(function(e,t){return yt(e,t,!0)},"merge","Use `assign`."),bt=1,Tt=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in e,Et=b(e,"PointerEvent")!==i,St=wt&&Tt.test(navigator.userAgent),Ct="touch",Pt="pen",At="mouse",It="kinect",xt=25,Ot=1,Mt=2,kt=4,Rt=8,Dt=1,Lt=2,Nt=4,jt=8,Ft=16,Ut=Lt|Nt,Bt=jt|Ft,Vt=Ut|Bt,Ht=["x","y"],Gt=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(w(this.element),this.evWin,this.domHandler)}};var qt={mousedown:Ot,mousemove:Mt,mouseup:kt},Wt="mousedown",zt="mousemove mouseup";u(j,E,{handler:function(e){var t=qt[e.type];t&Ot&&0===e.button&&(this.pressed=!0),t&Mt&&1!==e.which&&(t=kt),this.pressed&&(t&kt&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:At,srcEvent:e}))}});var Yt={pointerdown:Ot,pointermove:Mt,pointerup:kt,pointercancel:Rt,pointerout:Rt},$t={2:Ct,3:Pt,4:At,5:It},Kt="pointerdown",Xt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Kt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),u(F,E,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Yt[i],o=$t[e.pointerType]||e.pointerType,a=o==Ct,s=v(t,e.pointerId,"pointerId");r&Ot&&(0===e.button||a)?0>s&&(t.push(e),s=t.length-1):r&(kt|Rt)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var Qt={touchstart:Ot,touchmove:Mt,touchend:kt,touchcancel:Rt},Jt="touchstart",Zt="touchstart touchmove touchend touchcancel";u(U,E,{handler:function(e){var t=Qt[e.type];if(t===Ot&&(this.started=!0),this.started){var n=B.call(this,e,t);t&(kt|Rt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:e})}}});var en={touchstart:Ot,touchmove:Mt,touchend:kt,touchcancel:Rt},tn="touchstart touchmove touchend touchcancel";
u(V,E,{handler:function(e){var t=en[e.type],n=H.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:e})}});var nn=2500,rn=25;u(G,E,{handler:function(e,t,n){var i=n.pointerType==Ct,r=n.pointerType==At;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)q.call(this,t,n);else if(r&&z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var on=b(ht.style,"touchAction"),an=on!==i,sn="compute",un="auto",ln="manipulation",cn="none",dn="pan-x",fn="pan-y",hn=K();Y.prototype={set:function(e){e==sn&&(e=this.compute()),an&&this.manager.element.style&&hn[e]&&(this.manager.element.style[on]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),$(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=g(i,cn)&&!hn[cn],o=g(i,fn)&&!hn[fn],a=g(i,dn)&&!hn[dn];if(r){var s=1===e.pointers.length,u=e.distance<2,l=e.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:r||o&&n&Ut||a&&n&Bt?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var pn=1,gn=2,mn=4,vn=8,yn=vn,_n=16,bn=32;X.prototype={defaults:{},set:function(e){return dt(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Z(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=Z(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=Z(e,this),-1===v(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=Z(e,this);var t=v(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;vn>i&&t(n.options.event+Q(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=vn&&t(n.options.event+Q(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=bn)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(bn|pn)))return!1;e++}return!0},recognize:function(e){var t=dt({},e);return c(this.options.enable,[this,t])?(this.state&(yn|_n|bn)&&(this.state=pn),this.state=this.process(t),void(this.state&(gn|mn|vn|_n)&&this.tryEmit(t))):(this.reset(),void(this.state=bn))},process:function(){},getTouchAction:function(){},reset:function(){}},u(et,X,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(gn|mn),r=this.attrTest(e);return i&&(n&Rt||!r)?t|_n:i||r?n&kt?t|vn:t&gn?t|mn:gn:bn}}),u(tt,et,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vt},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ut&&t.push(fn),e&Bt&&t.push(dn),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&Ut?(r=0===o?Dt:0>o?Lt:Nt,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?Dt:0>a?jt:Ft,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return et.prototype.attrTest.call(this,e)&&(this.state&gn||!(this.state&gn)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),u(nt,et,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&gn)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),u(it,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[un]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(kt|Rt)&&!o)this.reset();else if(e.eventType&Ot)this.reset(),this._timer=r(function(){this.state=yn,this.tryEmit()},t.time,this);else if(e.eventType&kt)return yn;return bn},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===yn&&(e&&e.eventType&kt?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),u(rt,et,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&gn)}}),u(ot,et,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ut|Bt,pointers:1},getTouchAction:function(){return tt.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Ut|Bt)?t=e.overallVelocity:n&Ut?t=e.overallVelocityX:n&Bt&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&mt(t)>this.options.velocity&&e.eventType&kt},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(at,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ln]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&Ot&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!=kt)return this.failTimeout();var a=this.pTime?e.timeStamp-this.pTime<t.interval:!0,s=!this.pCenter||R(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e;var u=this.count%t.taps;if(0===u)return this.hasRequireFailures()?(this._timer=r(function(){this.state=yn,this.tryEmit()},t.interval,this),gn):yn}return bn},failTimeout:function(){return this._timer=r(function(){this.state=bn},this.options.interval,this),bn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==yn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.8",st.defaults={domEvents:!1,touchAction:sn,enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[nt,{enable:!1},["rotate"]],[ot,{direction:Ut}],[tt,{direction:Ut},["swipe"]],[at],[at,{event:"doubletap",taps:2},["tap"]],[it]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Tn=1,wn=2;ut.prototype={set:function(e){return dt(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?wn:Tn},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&yn)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],t.stopped===wn||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(gn|mn|vn)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof X)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return a(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==i){var n=this.handlers;return a(m(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ct(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(st,{INPUT_START:Ot,INPUT_MOVE:Mt,INPUT_END:kt,INPUT_CANCEL:Rt,STATE_POSSIBLE:pn,STATE_BEGAN:gn,STATE_CHANGED:mn,STATE_ENDED:vn,STATE_RECOGNIZED:yn,STATE_CANCELLED:_n,STATE_FAILED:bn,DIRECTION_NONE:Dt,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:Nt,DIRECTION_UP:jt,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Ut,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:Vt,Manager:ut,Input:E,TouchAction:Y,TouchInput:V,MouseInput:j,PointerEventInput:F,TouchMouseInput:G,SingleTouchInput:U,Recognizer:X,AttrRecognizer:et,Tap:at,Pan:tt,Swipe:ot,Pinch:nt,Rotate:rt,Press:it,on:f,off:h,each:a,merge:_t,extend:yt,assign:dt,inherit:u,bindFn:l,prefixed:b});var En="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};En.Hammer=st,"function"==typeof define&&define.amd?define("hammer",[],function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:e[n]=st}(window,document,"Hammer"),define("shared/views/AbstractView",["log","lodash","jquery","backbone","color","device","hammer"],function(e,t,n,i,r,o,a){return i.View.extend({broadcast:t.clone(i.Events),constructor:function(e){this.options=e||{},i.View.apply(this,arguments)},_broadcast:function(e){if(!t.isUndefined(e)){e.preventDefault(),e.stopPropagation();var i=n(e.currentTarget).attr("data-event-name"),r=n(e.currentTarget).attr("data-event-param");t.isString(i)&&this.broadcast.trigger(i,r)}},_triggerEvent:function(e){if(!t.isUndefined(e)){e.preventDefault();var i=n(e.currentTarget).attr("data-event-name"),r=n(e.currentTarget).attr("data-event-param");this.trigger(i,r)}},bindInteraction:function(e,i){var r;r="function"!=typeof i?n.noop:function(e){o.touch()&&(e=e.srcEvent),e.preventDefault(),i(e)},o.touch()&&t.each(e,function(e){e.swipeAction=new a(e),e.swipeAction.on("tap",r)}),o.desktop()&&e.unbind("click").bind("click",r)},unbindInteraction:function(e){o.touch()&&t.each(e,function(e){e.swipeAction.destroy()}),o.desktop()&&e.unbind("click")},onClose:function(){},beforeClose:function(){},close:function(){this.beforeClose(),this.remove(),this.onClose(),this.trigger("close"),this.unbind()},setModel:function(e){this.model=e,this._bindModel()},setCollection:function(e){this.collection=e,this._bindCollection()},_bindModel:function(){this.model&&(this.model.bind("change",this._change,this),this.model.bind("sync",this._sync,this),this.model.bind("destroy",this._destroy,this),this.model.bind("invalid",this._invalid,this),this.render())},_bindCollection:function(){this.collection&&(this.collection.bind("add",this._add,this),this.collection.bind("remove",this._remove,this),this.collection.bind("reset",this._reset,this),this.render())},initialize:function(){this.options.module&&this._setModule(this.options.module),this._bindModel(),this._bindCollection()},insertAfter:function(e){this.$el.insertAfter(e)},insertBefore:function(e){this.$el.insertBefore(e)},appendTo:function(e){this.$el.appendTo(e)},after:function(e){this.$el.after(e)},before:function(e){this.$el.before(e)},show:function(){this.$el.show()},hide:function(){this.$el.hide()},_setModule:function(e){if(t.isUndefined(e)||null===e)throw Error("attempting to set an invalid module!");this.module=e},getModule:function(){return this.module},_change:function(){this.render()},_sync:function(){this.render()},_destroy:function(){this.render()},_invalid:function(){this.render()},_add:function(){this.render()},_remove:function(){this.render()},_reset:function(){this.render()},getEscapedId:function(){return this.id.replace("|","\\|")}})}),define("text",["module"],function(e){var t,n,i,r,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),d=l&&location.hostname,f=l&&(location.port||void 0),h={},p=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,a,s,u=t.xdRegExp.exec(e);return u?(o=u[2],a=u[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,p.isBuild&&(h[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();p.isBuild=r&&r.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),u=p.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void i():void(!l||u(s,c,d,f)?t.get(s,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(h.hasOwnProperty(n)){var r=t.jsEscape(h[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",u=a.moduleName+s,l=i.toUrl(a.moduleName+s)+".js";t.load(u,i,function(){var n=function(e){return r(l,e)};n.asModule=function(e,t){return r.asModule(e,l,t)},t.write(e,u,n,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");"﻿"===r[0]&&(r=r.substring(1)),t(r)}catch(o){i&&i(o)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,n,i,r){var o,a=t.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);p.onXhr&&p.onXhr(a,e),a.onreadystatechange=function(){var t,r;4===a.readyState&&(t=a.status||0,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=a,i&&i(r)):n(a.responseText),p.onXhrComplete&&p.onXhrComplete(a,e))},a.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),u="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);u=String(n.toString())}finally{s.close()}t(u)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,s,u={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),u),a.close(),n.close(),t(u.value)}catch(l){throw new Error((s&&s.path||"")+": "+l)}}),t}),define("text!modules/splash-screen/templates/loading.html",[],function(){return'<div class="loading-container">\n    <div class="spinner"></div>\n    {{#showCerosBranding}}\n    <div class="branding-logo"></div>\n    {{/showCerosBranding}}\n    {{#showPreviewLabel}}\n    <div class="notice">REAL-TIME PREVIEW</div>\n    {{/showPreviewLabel}}\n</div>\n'}),define("modules/splash-screen/views/LoadingView",["jquery","lodash","backbone","mustache","shared/models/EmbeddedViewportModel","shared/views/AbstractView","device","color","text!modules/splash-screen/templates/loading.html"],function(e,t,n,i,r,o,a,s,u){var l=60,c=100;return o.extend({className:"splash-screen loading",lastAnimationId:null,initialize:function(){o.prototype.initialize.call(this),this.options=t.extend({autoContrastForegroundColor:"#FFFFFF",foregroundColor:"white",backgroundColor:"#161616",previewLabelBackgroundColor:"none",borderRadius:5,revolutionsPerSecond:1.2,fadeOutSpeed:"fast",showCerosBranding:!1,showPreviewLabel:!1},this.options),this.options.degreesPerTick=360/(l*this.options.revolutionsPerSecond)},render:function(){this.$el.empty(),this.$el.html(i.render(u,{showCerosBranding:this.options.showCerosBranding||this.options.showPreviewLabel,showPreviewLabel:this.options.showPreviewLabel})).show(),this.$spinner=this.$el.find(".spinner");var e=this.$el.find(".branding-logo"),t=this.$el.find(".notice");this.options.overlayed&&this.$spinner.addClass("overlayed"),this.$spinner.css({borderRadius:this.options.borderRadius,backgroundColor:this.options.backgroundColor}),this.renderSpinnerCanvas(),e.css({color:this.options.autoContrastForegroundColor}),t.css({backgroundColor:this.options.previewLabelBackgroundColor,color:this.options.foregroundColor}),this.scale(),r.getInstance().on("change",this.repositionForEmbed,this),this.repositionForEmbed()},start:function(){t.isNull(this.lastAnimationId)&&(this.lastAnimationId=requestAnimationFrame(this._draw))},stop:function(){t.isNull(this.lastAnimationId)||(cancelAnimationFrame(this.lastAnimationId),this.lastAnimationId=null)},scale:function(){this.$el.width()<c||this.$el.height()<c?this.$el.find("div.loading-container").addClass("small"):this.$el.find("div.loading-container").removeClass("small")},repositionForEmbed:function(){var t=r.getInstance();if(t.isActive()){var n=Math.max(0,t.getTop()),i=Math.min(e(window).height(),t.getBottom());this.$el.css({top:n+"px",height:i-n+"px"}),this.scale()}},renderSpinnerCanvas:function(){var t=64,n=Math.round(t/12),i=e('<canvas width="'+t+'" height="'+t+'"></canvas>');this.$spinner.append(i);var r=i[0].getContext("2d"),o=0,a=!1,u=this,l=t/2,c=t/2,d=t/2-n-1;this._draw=function(){var e,i,f=-.5*Math.PI;r.save(),r.fillStyle=u.options.backgroundColor,r.fillRect(0,0,t,t),r.lineWidth=n;var h=s.fromHex(u.options.autoContrastForegroundColor);h.a=.1,r.strokeStyle=h.toString(),r.beginPath(),r.arc(l,c,d,0,2*Math.PI,!0),r.stroke(),0===o&&a?(e=f,i=f+2*Math.PI):(e=a?f+Math.PI/180*o:f,i=a?f:f+Math.PI/180*o),r.strokeStyle=u.options.autoContrastForegroundColor,r.beginPath(),r.arc(l,c,d,e,i,!1),r.stroke(),r.restore(),o+=u.options.degreesPerTick,o>359&&(o=0,a=!a),u.lastAnimationId=requestAnimationFrame(u._draw)}},_remove:function(){this.$el.remove()},destroy:function(){this.stop(),this._remove(),r.getInstance().off("change",this.repositionForEmbed,this)}})}),define("text!modules/splash-screen/templates/previewer-unavailable.html",[],function(){return'<div class="warning-modal unavailable overlay">\n    <!-- This is the overlay that will provide a transparent layer over the\n    experience and prevent any clicks. -->\n </div>\n<div class="warning-modal unavailable modal">\n    <div>\n        <div class="branding-logo"></div>\n        <span class="warning-icon alert-icon"></span>\n        <span class="notice important">Your Ceros subscription expired</span>\n        <span class="notice">Get in touch with our helpful team who will rectify this in no time</span>\n        <button class="submit contact">Get in touch</button>\n    <div>\n</div>\n'}),define("text!modules/splash-screen/templates/player-unavailable.html",[],function(){return'<div class="warning-modal unavailable overlay">\n    <!-- This is the overlay that will provide a transparent layer over the\n    experience and prevent any clicks. -->\n </div>\n<div class="warning-modal modal">\n    <div>\n        <div class="branding-logo"></div>\n        <span class="warning-icon no-entry-icon"></span>\n        <span class="notice important">This experience has been removed by the publisher</span>\n    <div>\n</div>\n'}),define("modules/splash-screen/views/UnavailableView",["jquery","lodash","backbone","urlUtils","shared/views/AbstractView","globals","mustache","text!modules/splash-screen/templates/previewer-unavailable.html","text!modules/splash-screen/templates/player-unavailable.html"],function(e,t,n,i,r,o,a,s,u){var l="http://www3.ceros.com/expiredaccount";return r.extend({className:"splash-screen unavailable",events:{"click button.contact":"handleContactClick"},initialize:function(){r.prototype.initialize.call(this),this.render()},render:function(){var e=o.previewMode?s:u;this.$el.html(a.render(e))},handleContactClick:function(e){e.preventDefault();var t=i.appendQueryParams(l,{account:o.accountSlug});window.open(t)}})}),define("text!modules/splash-screen/templates/warning.html",[],function(){return'<div class="warning-modal embedded-previewer overlay">\n    <!-- This is the overlay that will provide a transparent layer over the\n    experience and prevent any clicks. -->\n</div>\n<div class="warning-modal embedded-previewer modal">\n    <div>\n        {{#showBranding}}<div class="branding-logo"></div>{{/showBranding}}\n        <span class="warning-icon alert-icon"></span>\n        <span class="notice important">{{importantText}}</span>\n        <span class="notice">{{descriptiveText}}</span>\n        <button class="submit dismiss">{{buttonText}}</button>\n    </div>\n</div>\n'}),define("modules/splash-screen/views/AbstractWarningView",["jquery","lodash","backbone","shared/views/AbstractView","mustache","text!modules/splash-screen/templates/warning.html"],function(e,t,n,i,r,o){return i.extend({className:"warning",module:null,showBranding:!1,importantText:"",descriptiveText:"",buttonText:"Dismiss",initialize:function(){i.prototype.initialize.call(this),this.module=this.options.module},render:function(){this.$el.html(r.render(o,{showBranding:this.showBranding,importantText:this.importantText,descriptiveText:this.descriptiveText,buttonText:this.buttonText})),this.bindEvents()},bindEvents:function(){this.bindInteraction(this.$el.find("button.dismiss"),t.bind(function(e){e.preventDefault(),this.onDismissHandler()},this))},onDismissHandler:function(){}})}),define("modules/splash-screen/views/EmbeddedPreviewerWarningView",["jquery","lodash","backbone","modules/splash-screen/views/AbstractWarningView"],function(e,t,n,i){return i.extend({className:"embedded-previewer-warning",showBranding:!0,importantText:"This is your preview - and not your published experience.",descriptiveText:"Please use the published experience URL to display this content on your website.",onDismissHandler:function(){this.module.trigger(this.module.publishedEvents.EMBED_WARNING_DISMISSED)}})}),define("modules/splash-screen/views/DeletedPageWarningView",["jquery","lodash","backbone","modules/splash-screen/views/AbstractWarningView"],function(e,t,n,i){return i.extend({className:"deleted-page-warning",importantText:"This page is no longer available",descriptiveText:"Please try reloading",buttonText:"Reload",onDismissHandler:function(){window.location.reload()}})}),define("modules/splash-screen/module",["lodash","ceros","globals","modules/splash-screen/views/LoadingView","modules/splash-screen/views/UnavailableView","modules/splash-screen/views/EmbeddedPreviewerWarningView","modules/splash-screen/views/DeletedPageWarningView","color"],function(e,t,n,i,r,o,a,s){var u=function(e){return s.getMostContrasting(e.backgroundColor,e.menuFgColor,e.menuBgColor).toHex()},l=new t.Module({id:"splashScreen",description:"Loading experience including spinner animation",version:"1.0",publishedEvents:{EMBED_WARNING_DISMISSED:"embed_warning_dismissed"},delegate:{loadingViews:[],showLoading:function(t,r){var o={theme:e.isUndefined(n.themeObj)?{}:n.themeObj},a=e.extend({startImmediately:!0,showCerosBranding:!1,showPreviewLabel:!1,overlayed:!0},o,r),s=u(a.theme),l=a.theme.backgroundColor;a.overlayed&&(s=a.theme.menuFgColor,l=a.theme.menuBgColor);var c=new i({autoContrastForegroundColor:s,foregroundColor:a.theme.menuFgColor,backgroundColor:l,previewLabelBackgroundColor:a.theme.menuBgColor,showCerosBranding:a.showCerosBranding,showPreviewLabel:a.showPreviewLabel,overlayed:a.overlayed});return this.loadingViews.push(c),t.append(c.$el),c.render(),a.startImmediately&&c.start(),{destroy:function(){c.destroy()},start:function(){c.start()},stop:function(){c.stop()}}},scale:function(){e.each(this.loadingViews,function(e){e.scale()})},showUnavailableScreen:function(e){var t=new r;e.append(t.$el)},showEmbeddedPreviewerWarning:function(e){var t=new o({module:l});t.render(),e.append(t.$el)},showDeletedPageWarning:function(e){var t=new a({module:l});t.render(),e.append(t.$el)},hideEmbeddedPreviewerWarning:function(e){e.find(".embedded-previewer-warning").hide()}}});return l}),define("modules/page/views/AbstractPageChildView",["jquery","lodash","backbone","shared/views/AbstractView"],function(e,t,n,i){return i.extend({initiallyVisible:!0,mediaHasBeenLoaded:!0,childViews:null,initialize:function(){i.prototype.initialize.call(this),this.visible=this.options.visible,this.initiallyVisible=this.options.visible,this.mediaHasBeenLoaded=this.options.visible},close:function(){},preloadMedia:function(){},preloadMediaNow:function(){},attachMedia:function(){},scaleComponent:function(){},onAttach:function(){},runInitialEntryAnimations:function(){},pauseAnimations:function(){},resumeAnimations:function(){},deactivate:function(){},reset:function(){},getExtents:function(){},getId:function(){return this.id},isInitiallyVisible:function(){return this.initiallyVisible}})}),define("sequenceBuilder",["log","jquery","lodash"],function(e,t,n){var i="undefined"!=typeof WebKitAnimationEvent?"-webkit-":"undefined"!=typeof AnimationEvent?"":null,r=function(){this.ruleBuffer=[],this.keyframeInc=0,this.keyframeMap={},this.sequenceInc=0,this.sequenceMap={},this.pauseClassCache=[]};n.extend(r.prototype,{reset:function(){this.ruleBuffer=[],this.keyframeInc=0,this.keyframeMap={},this.sequenceInc=0,this.sequenceMap={},this.pauseClassCache=[]},_generateKeyframe:function(e,t,r,o){var a=e+"|"+JSON.stringify(t);if(0!==o&&(a+="|"+r+"|"+o),this.keyframeMap.hasOwnProperty(a))return this.keyframeMap[a];var s="@"+i+"keyframes keyframe"+this.keyframeInc+"{",u=n.sortBy(n.keys(t),function(e){return parseInt(e,10)});if(0===o)n.each(u,function(n){s+=n+"{"+e+":"+t[n]+"}"});else{var l=n.round(o/(o+r)*100,5),c=100-l;s+="0%{"+e+":"+t["0%"]+"}"+l+"%{"+e+":"+t["0%"]+"}",n.each(u,function(n){"0%"!=n&&(s+=Math.round(l+c*(parseInt(n,10)/100))+"%{"+e+":"+t[n]+"}")})}return s+="}",this.ruleBuffer.push(s),this.keyframeMap[a]="keyframe"+this.keyframeInc++,this.keyframeMap[a]},_generatePauseClass:function(e){var t="sequencePause"+e;if(!n.includes(this.pauseClassCache,t)){this.pauseClassCache.push(t);var r=[];n(e).times(function(){r.push("paused")}),this.ruleBuffer.push("."+t+"{"+i+"animation-play-state:"+r.join(",")+" !important;}")}return t},_generateRunClass:function(e,t,r,o){var a="sequenceRun"+this.sequenceInc++;return this.ruleBuffer.push("."+a+"{"+i+"animation-name:"+e.join(",")+";"+i+"animation-duration:"+t.join(",")+";"+i+"animation-timing-function:"+r.join(",")+";"+i+"animation-fill-mode:"+n.map(e,function(){return"both"}).join(",")+";"+i+"animation-play-state:"+n.map(e,function(){return"running"}).join(",")+";"+i+"animation-iteration-count:"+o.join(",")+";}"),a},generate:function(e){var t=n.map(e,function(e){return e.getKey()}).join("&");if(!this.sequenceMap.hasOwnProperty(t)){var r=[],o=[],a=[],s=[],u=this;n.each(e,function(e){var t="transform"==e.property?i+"transform":e.property;r.push(u._generateKeyframe(t,e.frames,e.duration,e.delay)),o.push(e.duration+e.delay+"ms"),a.push(e.easing),s.push(e.iterations)}),this.sequenceMap[t]={runClass:this._generateRunClass(r,o,a,s),pauseClass:this._generatePauseClass(e.length)}}return this.sequenceMap[t]},flush:function(){var e=this.ruleBuffer.length;e>0&&(t("head").append(t("<style></style>").html(this.ruleBuffer.join("\n"))),this.ruleBuffer=[])}});var o=null,a=function(){return null===o&&(o=new r),o};return a()}),define("shared/utils/DelegateUtils",["lodash"],function(e){var t={mergeDelegates:function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(e.isObject(i))for(var r in i)t[r]=e.isFunction(i[r])?e.bind(i[r],t):i[r]}}};return t}),define("shared/utils/AnimationTweenDelegate",["log","jquery","lodash"],function(e,t,n){var i={Tween:function(e,t,n,i,r,o){if(this.property=e,this.frames=t,this.duration=n,this.delay=i||0,this.iterations=r,this.easing=o,!this.frames.hasOwnProperty("0%"))throw Error("Tween must define 0% keyframe!");if(!this.frames.hasOwnProperty("100%"))throw Error("Tween must define 100% keyframe!");this._normalize()}};return i.Tween.prototype={_normalize:function(){n.isUndefined(this.iterations)?this.iterations=1:n.isNumber(this.iterations)?(this.iterations=parseInt(this.iterations,10),this.iterations<0&&(this.iterations=0)):this.iterations="infinite"},getKey:function(){for(var e=n.values(this),t=0;t<e.length;t++)"object"==typeof e[t]&&(e[t]=JSON.stringify(e[t]));return e.join("|")}},i}),define("shared/utils/CssUtils",["lodash"],function(e){return{concatTransform:function(t,n){return(e.isUndefined(t)||"none"===t)&&(t=""),n=t+" "+n,n.trim()}}}),define("shared/utils/WebkitUtils",["shared/utils/CssUtils","device"],function(e,t){return{hardwareAccelerateTransform:function(t){return e.concatTransform(t,"translate3d(0,0,0)")},requiresHardwareAccelerateTransform:function(e,n){return t.isDesktopSafari()||t.isIos()&&(e||n)}}}),define("animation",["log","jquery","lodash","backbone","device","sequenceBuilder","shared/utils/DelegateUtils","shared/utils/AnimationTweenDelegate","shared/utils/WebkitUtils","cssHooksTransform"],function(e,t,n,i,r,o,a,s,u){var l="undefined"!=typeof WebKitAnimationEvent?"webkitAnimationEnd":"undefined"!=typeof AnimationEvent?"animationend":null,c="undefined"!=typeof WebKitAnimationEvent?"webkitAnimationStart":"undefined"!=typeof AnimationEvent?"animationstart":null,d=function(e){var n=t.extend({$el:null,name:"unknown"},e||{});this.$el=n.$el,this.name=n.name,this.compiled=!1,this.tweens=[],this.eventState={},this.runClass=null,this.pauseClass=null,this.initialState={},this.finalState={},this.loop=!1,this.requiresHardwareAcceleration=n.requiresHardwareAcceleration};return d.EASING={EASE:"ease",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out",LINEAR:"linear"},d.RUNNING_STATE="running",d.COMPLETE_STATE="complete",d.START_EVENT="start",d.PAUSE_EVENT="pause",d.RESUME_EVENT="resume",d.END_EVENT="end",a.mergeDelegates(d,s),n.extend(d.prototype,i.Events,{add:function(t){return this.compiled?(e.warn("Animation already compiled!"),this):(this.tweens.push(t),this)},compile:function(){if(this.compiled)return this;
if(n.isEmpty(this.tweens))return this;var e=o.generate(this.tweens);return this.runClass=e.runClass,this.pauseClass=e.pauseClass,this._buildRestingStates(),this.compiled=!0,this},precompile:function(e){if(n.isUndefined(e)||(this.$el=e),!n.isNull(this.$el)){var t={};n.each(["opacity","left","top","transform"],n.bind(function(e){t[e]=this.$el.css(e)},this)),this.initialState=t}},_buildRestingStates:function(){n.each(this.tweens,n.bind(function(e){this.initialState[e.property]=e.frames["0%"],this.finalState[e.property]=e.frames["100%"]},this)),n.has(this.finalState,"transform")&&this.requiresHardwareAcceleration&&(this.finalState.transform=u.hardwareAccelerateTransform(this.finalState.transform))},resetToInitialState:function(){n.isNull(this.$el)||this.$el.css(this.initialState)},setToFinalState:function(){n.isNull(this.$el)||this.$el.css(this.finalState)},isRunning:function(){return n.isNull(this.$el)?!1:this.$el.hasClass(this.runClass)},isPaused:function(){return n.isNull(this.$el)?!1:this.$el.hasClass(this.pauseClass)},play:function(e){return this.compile(),n.isUndefined(e)||(this.$el=e),n.isNull(this.$el)?void 0:(o.flush(),this.eventState={},this.$el.bind(l,n.bind(function(e){e.originalEvent.target===this.$el[0]&&(this.eventState[e.originalEvent.animationName]=!1),n.every(n.values(this.eventState),function(e){return!e})&&this.finish()},this)),this.$el.bind(c,n.bind(function(e){e.originalEvent.target===this.$el[0]&&(this.eventState[e.originalEvent.animationName]=!0)},this)),this.$el[0].offsetWidth,"none"===this.$el.css("display")&&this.$el.show(),this.$el.addClass(this.runClass),this.trigger(d.START_EVENT),this)},pause:function(){this.compiled&&!n.isNull(this.$el)&&this.isRunning()&&!this.isPaused()&&(this.$el.addClass(this.pauseClass),this.trigger(d.PAUSE_EVENT))},resume:function(){this.compiled&&!n.isNull(this.$el)&&this.isPaused()&&(this.$el.removeClass(this.pauseClass),this.trigger(d.RESUME_EVENT))},finish:function(){this.$el.css(this.finalState),"0"===this.$el.css("opacity")&&this.$el.hide(),this.cleanup(),this.trigger(d.END_EVENT)},cleanup:function(){this.compiled&&!n.isNull(this.$el)&&this.$el.unbind(l).unbind(c).removeClass(this.runClass).removeClass(this.pauseClass)},isInProgress:function(){return this.$el.hasClass(this.runClass)},setLoop:function(e){this.loop=e},isLooping:function(){return this.loop}}),d}),define("animationTypes",["lodash","log","animation","device"],function(e,t,n,i){return{compileNewSequence:function(i,r,o){var a=null;if(e.isString(r.type)&&!e.isEmpty(r.type)&&e.isNumber(r.duration)&&r.duration>0){var s={$el:i,name:r.type,requiresHardwareAcceleration:o.get("requiresHardwareAcceleration")};a=new n(s),a.precompile(),(e.isUndefined(r.delay)||!e.isNumber(r.delay))&&(r.delay=0),r.loop===!0&&a.setLoop(!0),e.isFunction(this[r.type])?this[r.type](a,r,o):t.warn("Animation type not supported: "+JSON.stringify(r)),a.compile()}return a},getIterations:function(e){var t=e.iterations?e.iterations:1;return e.loop===!0&&(t="infinite"),t},getDuration:function(e){return 1e3*e.duration},getDelay:function(e){return 1e3*e.delay},getEasing:function(e){return e.easing},buildTween:function(e,t,i){return new n.Tween(t,i,this.getDuration(e),this.getDelay(e),this.getIterations(e),this.getEasing(e))},fadeIn:function(e,t,n){e.add(this.buildTween(t,"opacity",{"0%":0,"100%":n.get("opacity")}))},fadeOut:function(e,t,n){e.add(this.buildTween(t,"opacity",{"0%":n.get("opacity"),"100%":0}))},spinSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale();e.add(this.buildTween(t,"transform",{"0%":"rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"rotate("+(i+r)+"deg) scale("+o.x+","+o.y+")"}))},spinLeft:function(e,t,n){this.spinSequence(e,t,n,-360)},spinRight:function(e,t,n){this.spinSequence(e,t,n,360)},slideInXSequence:function(e,t,n,r){var o=n.get("rotation"),a=n.getScale(),s=n.get("x");e.add(i.mobile()?this.buildTween(t,"left",{"0%":r.x+"px","100%":s+"px"}):this.buildTween(t,"transform",{"0%":"translateX("+(r.x-s)+"px) rotate("+o+"deg) scale("+a.x+","+a.y+")","100%":"translateX(0px) rotate("+o+"deg) scale("+a.x+","+a.y+")"}))},slideInYSequence:function(e,t,n,r){var o=n.get("rotation"),a=n.getScale(),s=n.get("y");e.add(i.mobile()?this.buildTween(t,"top",{"0%":r.y+"px","100%":s+"px"}):this.buildTween(t,"transform",{"0%":"translateY("+(r.y-s)+"px) rotate("+o+"deg) scale("+a.x+","+a.y+")","100%":"translateY(0px) rotate("+o+"deg) scale("+a.x+","+a.y+")"}))},slideLeft:function(e,t,n){this.slideLeftIn(e,t,n)},slideLeftIn:function(e,t,n){var i=n.getOffPageRight();this.slideInXSequence(e,t,n,i)},slideRight:function(e,t,n){this.slideRightIn(e,t,n)},slideRightIn:function(e,t,n){var i=n.getOffPageLeft();this.slideInXSequence(e,t,n,i)},slideDown:function(e,t,n){this.slideDownIn(e,t,n)},slideDownIn:function(e,t,n){var i=n.getOffPageTop();this.slideInYSequence(e,t,n,i)},slideUp:function(e,t,n){this.slideUpIn(e,t,n)},slideUpIn:function(e,t,n){var i=n.getOffPageBottom();this.slideInYSequence(e,t,n,i)},slideOutSequence:function(e,t,n,i){var r=n.get("x"),o=n.get("y");e.add(this.buildTween(t,"left",{"0%":r+"px","100%":i.x+"px"})),e.add(this.buildTween(t,"top",{"0%":o+"px","100%":i.y+"px"}))},slideLeftOut:function(e,t,n){var i=n.getOffPageRight();this.slideOutSequence(e,t,n,i)},slideRightOut:function(e,t,n){var i=n.getOffPageLeft();this.slideOutSequence(e,t,n,i)},slideDownOut:function(e,t,n){var i=n.getOffPageBottom();this.slideOutSequence(e,t,n,i)},slideUpOut:function(e,t,n){var i=n.getOffPageTop();this.slideOutSequence(e,t,n,i)},shiftInSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale();i.x*=o.x,i.y*=o.y,e.add(this.buildTween(t,"transform",{"0%":"translate("+i.x+"px,"+i.y+"px) rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"translate(0,0) rotate("+r+"deg) scale("+o.x+","+o.y+")"}))},shiftLeft:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(i,0);this.shiftInSequence(e,t,n,r)},shiftRight:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(-1*i,0);this.shiftInSequence(e,t,n,r)},shiftDown:function(e,t,n){var i=n.get("allHeight"),r=n.getRelativeRotatedPoint(0,-1*i);this.shiftInSequence(e,t,n,r)},shiftUp:function(e,t,n){var i=n.get("allHeight"),r=n.getRelativeRotatedPoint(0,i);this.shiftInSequence(e,t,n,r)},shiftOutSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale();i.x*=o.x,i.y*=o.y,e.add(this.buildTween(t,"transform",{"0%":"translate(0,0) rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"translate("+i.x+"px,"+i.y+"px) rotate("+r+"deg) scale("+o.x+","+o.y+")"}))},shiftLeftOut:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(-1*i,0);this.shiftOutSequence(e,t,n,r)},shiftRightOut:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(i,0);this.shiftOutSequence(e,t,n,r)},shiftDownOut:function(e,t,n){var i=n.get("allHeight"),r=n.getRelativeRotatedPoint(0,i);this.shiftOutSequence(e,t,n,r)},shiftUpOut:function(e,t,n){var i=n.get("allHeight"),r=n.getRelativeRotatedPoint(0,-1*i);this.shiftOutSequence(e,t,n,r)},flash:function(e,t,n){var i=n.get("opacity");e.add(this.buildTween(t,"opacity",{"0%":i,"50%":0,"100%":i}))},pulse:function(e,t,n){var i=n.get("rotation"),r=n.getScale();e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale("+r.x+","+r.y+")","50%":"rotate("+i+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","100%":"rotate("+i+"deg) scale("+r.x+","+r.y+")"}))},bob:function(e,t,n){var i=n.get("rotation"),r=n.getScale(),o=n.getRelativeRotatedPoint(0,-30),a=n.getRelativeRotatedPoint(0,-15);e.add(this.buildTween(t,"transform",{"0%":"translate(0,0) rotate("+i+"deg) scale("+r.x+","+r.y+")","20%":"translate(0,0) rotate("+i+"deg) scale("+r.x+","+r.y+")","40%":"translate("+o.x+"px,"+o.y+"px) rotate("+i+"deg) scale("+r.x+","+r.y+")","50%":"translate(0,0) rotate("+i+"deg) scale("+r.x+","+r.y+")","60%":"translate("+a.x+"px,"+a.y+"px) rotate("+i+"deg) scale("+r.x+","+r.y+")","80%":"translate(0,0) rotate("+i+"deg) scale("+r.x+","+r.y+")","100%":"translate(0,0) rotate("+i+"deg) scale("+r.x+","+r.y+")"}))},tada:function(e,t,n){var i=n.get("rotation"),r=n.getScale();e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale("+r.x+","+r.y+")","10%":"rotate("+(i-3)+"deg) scale("+(r.x-.1)+","+(r.y-.1)+")","20%":"rotate("+(i-3)+"deg) scale("+(r.x-.1)+","+(r.y-.1)+")","30%":"rotate("+(i+3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","40%":"rotate("+(i-3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","50%":"rotate("+(i+3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","60%":"rotate("+(i-3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","70%":"rotate("+(i+3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","80%":"rotate("+(i-3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","90%":"rotate("+(i+3)+"deg) scale("+(r.x+.1)+","+(r.y+.1)+")","100%":"rotate("+i+"deg) scale("+r.x+","+r.y+")"}))},flip:function(e,t,n){var i=n.get("rotation"),r=n.getOffsetRotation(),o=n.getScale(),a=Math.rotateCoord(0,1,0,0,r);e.add(this.buildTween(t,"transform",{"0%":"perspective(400px) translateZ(0) rotate3d("+a.x+","+a.y+",0,0deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","40%":"perspective(400px) translateZ(150px) rotate3d("+a.x+","+a.y+",0,170deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","50%":"perspective(400px) translateZ(150px) rotate3d("+a.x+","+a.y+",0,190deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","80%":"perspective(400px) translateZ(0) rotate3d("+a.x+","+a.y+",0,360deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","100%":"perspective(400px) translateZ(0) rotate3d("+a.x+","+a.y+",0,360deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")"}))},flipInX:function(e,t,n){var i=n.get("rotation"),r=n.getOffsetRotation(),o=n.getScale(),a=n.get("opacity"),s=Math.rotateCoord(1,0,0,0,r);e.add(this.buildTween(t,"transform",{"0%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,90deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","40%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,-10deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","70%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,10deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","100%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,0deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":a}))},flipInY:function(e,t,n){var i=n.get("rotation"),r=n.getOffsetRotation(),o=n.getScale(),a=n.get("opacity"),s=Math.rotateCoord(0,1,0,0,r);e.add(this.buildTween(t,"transform",{"0%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,-90deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","40%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,-10deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","70%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,10deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","100%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,0deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":a}))},flipOutX:function(e,t,n){var i=n.get("rotation"),r=n.getOffsetRotation(),o=n.getScale(),a=n.get("opacity"),s=Math.rotateCoord(1,0,0,0,r);e.add(this.buildTween(t,"transform",{"0%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,0deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","100%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,90deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":a,"100%":0}))},flipOutY:function(e,t,n){var i=n.get("rotation"),r=n.getOffsetRotation(),o=n.getScale(),a=n.get("opacity"),s=Math.rotateCoord(0,1,0,0,r);e.add(this.buildTween(t,"transform",{"0%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,0deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")","100%":"perspective(400px) rotate3d("+s.x+","+s.y+",0,-90deg) rotateZ("+i+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":a,"100%":0}))},fadeInSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale(),a=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"translate("+i.x+"px,"+i.y+"px) rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"translate(0,0) rotate("+r+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":a}))},fadeUp:function(e,t,n){this.fadeUpIn(e,t,n)},fadeUpIn:function(e,t,n){var i=n.getRelativeRotatedPoint(0,25);this.fadeInSequence(e,t,n,i)},fadeDown:function(e,t,n){this.fadeDownIn(e,t,n)},fadeDownIn:function(e,t,n){var i=n.getRelativeRotatedPoint(0,-25);this.fadeInSequence(e,t,n,i)},fadeRight:function(e,t,n){this.fadeRightIn(e,t,n)},fadeRightIn:function(e,t,n){var i=n.getRelativeRotatedPoint(-25,0);this.fadeInSequence(e,t,n,i)},fadeLeft:function(e,t,n){this.fadeLeftIn(e,t,n)},fadeLeftIn:function(e,t,n){var i=n.getRelativeRotatedPoint(25,0);this.fadeInSequence(e,t,n,i)},fadeOutSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale(),a=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"translate(0,0) rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"translate("+i.x+"px,"+i.y+"px) rotate("+r+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":a,"100%":0}))},fadeUpOut:function(e,t,n){var i=n.getRelativeRotatedPoint(0,-25);this.fadeOutSequence(e,t,n,i)},fadeDownOut:function(e,t,n){var i=n.getRelativeRotatedPoint(0,25);this.fadeOutSequence(e,t,n,i)},fadeRightOut:function(e,t,n){var i=n.getRelativeRotatedPoint(25,0);this.fadeOutSequence(e,t,n,i)},fadeLeftOut:function(e,t,n){var i=n.getRelativeRotatedPoint(-25,0);this.fadeOutSequence(e,t,n,i)},bounceInSequence:function(e,t,n,i,r,o){var a=n.get("x"),s=n.get("y"),u=n.get("opacity");e.add(this.buildTween(t,"left",{"0%":i.x+"px","60%":a+r.x+"px","80%":a+o.x+"px","100%":a+"px"})),e.add(this.buildTween(t,"top",{"0%":i.y+"px","60%":s+r.y+"px","80%":s+o.y+"px","100%":s+"px"})),e.add(this.buildTween(t,"opacity",{"0%":0,"60%":u,"100%":u}))},bounceUp:function(e,t,n){this.bounceUpIn(e,t,n)},bounceUpIn:function(e,t,n){var i=n.getOffPageBottom(),r=n.getRelativeRotatedPoint(0,-30),o=n.getRelativeRotatedPoint(0,10);this.bounceInSequence(e,t,n,i,r,o)},bounceDown:function(e,t,n){this.bounceDownIn(e,t,n)},bounceDownIn:function(e,t,n){var i=n.getOffPageTop(),r=n.getRelativeRotatedPoint(0,30),o=n.getRelativeRotatedPoint(0,-10);this.bounceInSequence(e,t,n,i,r,o)},bounceLeft:function(e,t,n){this.bounceLeftIn(e,t,n)},bounceLeftIn:function(e,t,n){var i=n.getOffPageLeft(),r=n.getRelativeRotatedPoint(30,0),o=n.getRelativeRotatedPoint(-10,0);this.bounceInSequence(e,t,n,i,r,o)},bounceRight:function(e,t,n){this.bounceRightIn(e,t,n)},bounceRightIn:function(e,t,n){var i=n.getOffPageRight(),r=n.getRelativeRotatedPoint(-30,0),o=n.getRelativeRotatedPoint(10,0);this.bounceInSequence(e,t,n,i,r,o)},bounceOutSequence:function(e,t,n,i,r,o){var a=n.get("x"),s=n.get("y"),u=n.get("opacity");e.add(this.buildTween(t,"left",{"0%":a+"px","20%":a+r.x+"px","40%":a+o.x+"px","100%":i.x+"px"})),e.add(this.buildTween(t,"top",{"0%":s+"px","20%":s+r.y+"px","40%":s+o.y+"px","100%":i.y+"px"})),e.add(this.buildTween(t,"opacity",{"0%":u,"60%":u,"100%":0}))},bounceUpOut:function(e,t,n){var i=n.getOffPageTop(),r=n.getRelativeRotatedPoint(0,-10),o=n.getRelativeRotatedPoint(0,30);this.bounceOutSequence(e,t,n,i,r,o)},bounceDownOut:function(e,t,n){var i=n.getOffPageBottom(),r=n.getRelativeRotatedPoint(0,10),o=n.getRelativeRotatedPoint(0,-30);this.bounceOutSequence(e,t,n,i,r,o)},bounceLeftOut:function(e,t,n){var i=n.getOffPageLeft(),r=n.getRelativeRotatedPoint(-10,0),o=n.getRelativeRotatedPoint(30,0);this.bounceOutSequence(e,t,n,i,r,o)},bounceRightOut:function(e,t,n){var i=n.getOffPageRight(),r=n.getRelativeRotatedPoint(10,0),o=n.getRelativeRotatedPoint(-30,0);this.bounceOutSequence(e,t,n,i,r,o)},spinFadeInSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale(),a=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"rotate("+(r+i)+"deg) scale("+o.x+","+o.y+")","100%":"rotate("+r+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":a}))},spinRightFade:function(e,t,n){this.spinRightFadeIn(e,t,n)},spinRightFadeIn:function(e,t,n){this.spinFadeInSequence(e,t,n,-90)},spinLeftFade:function(e,t,n){this.spinLeftFadeIn(e,t,n)},spinLeftFadeIn:function(e,t,n){this.spinFadeInSequence(e,t,n,90)},spinFadeOutSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale(),a=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"rotate("+(r+i)+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":a,"100%":0}))},spinRightFadeOut:function(e,t,n){this.spinFadeOutSequence(e,t,n,90)},spinLeftFadeOut:function(e,t,n){this.spinFadeOutSequence(e,t,n,-90)},lightSpeedInSequence:function(e,t,n,i,r){var o=n.get("rotation"),a=n.getScale(),s=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"translate("+i.x+"px,"+i.y+"px) skewX(-30deg) rotate("+o+"deg) scale("+a.x+","+a.y+")","60%":"translate("+r.x+"px,"+r.y+"px) skewX(30deg) rotate("+o+"deg) scale("+a.x+","+a.y+")","80%":"translate(0,0) skewX(-15deg) rotate("+o+"deg) scale("+a.x+","+a.y+")","100%":"translate(0,0) skewX(0deg) rotate("+o+"deg) scale("+a.x+","+a.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"60%":s,"100%":s}))},lightSpeedRight:function(e,t,n){this.lightSpeedRightIn(e,t,n)},lightSpeedRightIn:function(e,t,n){var i=n.getScale(),r=n.get("width")*i.x,o=n.get("pageWidth"),a=n.getRelativeRotatedPoint(o,0),s=n.getRelativeRotatedPoint(-1*Math.round(.6*r),0);this.lightSpeedInSequence(e,t,n,a,s)},lightSpeedLeft:function(e,t,n){this.lightSpeedLeftIn(e,t,n)},lightSpeedLeftIn:function(e,t,n){var i=n.getScale(),r=n.get("width")*i.x,o=n.get("pageWidth"),a=n.getRelativeRotatedPoint(-1*o,0),s=n.getRelativeRotatedPoint(Math.round(.6*r),0);this.lightSpeedInSequence(e,t,n,a,s)},lightSpeedOutSequence:function(e,t,n,i){var r=n.get("rotation"),o=n.getScale(),a=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"translate(0,0) skewX(0deg) rotate("+r+"deg) scale("+o.x+","+o.y+")","60%":"translate("+i.x+"px,"+i.y+"px) skewX(-30deg) rotate("+r+"deg) scale("+o.x+","+o.y+")","100%":"translate("+i.x+"px,"+i.y+"px) skewX(0deg) rotate("+r+"deg) scale("+o.x+","+o.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":a,"60%":0,"100%":0}))},lightSpeedRightOut:function(e,t,n){var i=n.get("pageWidth"),r=n.getRelativeRotatedPoint(i,0);this.lightSpeedOutSequence(e,t,n,r)},lightSpeedLeftOut:function(e,t,n){var i=n.get("pageWidth"),r=n.getRelativeRotatedPoint(-1*i,0);this.lightSpeedOutSequence(e,t,n,r)},rollInSequence:function(e,t,n,i,r){var o=n.get("rotation"),a=n.getScale(),s=n.get("opacity");i.x*=a.x,i.y*=a.y,e.add(this.buildTween(t,"transform",{"0%":"translate("+i.x+"px,"+i.y+"px) rotate("+(o+r)+"deg) scale("+a.x+","+a.y+")","100%":"translate(0,0) rotate("+o+"deg) scale("+a.x+","+a.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":s}))},rollLeft:function(e,t,n){this.rollLeftIn(e,t,n)},rollLeftIn:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(-1*i,0);this.rollInSequence(e,t,n,r,-120)},rollRight:function(e,t,n){this.rollRightIn(e,t,n)},rollRightIn:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(i,0);this.rollInSequence(e,t,n,r,120)},rollOutSequence:function(e,t,n,i,r){var o=n.get("rotation"),a=n.getScale(),s=n.get("opacity");i.x*=a.x,i.y*=a.y,e.add(this.buildTween(t,"transform",{"0%":"translate(0,0) rotate("+o+"deg) scale("+a.x+","+a.y+")","100%":"translate("+i.x+"px,"+i.y+"px) rotate("+(o+r)+"deg) scale("+a.x+","+a.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":s,"100%":0}))},rollLeftOut:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(-1*i,0);this.rollOutSequence(e,t,n,r,-120)},rollRightOut:function(e,t,n){var i=n.get("allWidth"),r=n.getRelativeRotatedPoint(i,0);this.rollOutSequence(e,t,n,r,120)},enlarge:function(e,t,n){var i=n.get("rotation"),r=n.getScale();e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale(0)","100%":"rotate("+i+"deg) scale("+r.x+","+r.y+")"}))},enlargeFadeIn:function(e,t,n){var i=n.get("rotation"),r=n.getScale(),o=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale(0)","100%":"rotate("+i+"deg) scale("+r.x+","+r.y+")"})),e.add(this.buildTween(t,"opacity",{"0%":0,"100%":o}))},shrink:function(e,t,n){var i=n.get("rotation"),r=n.getScale();e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale("+r.x+","+r.y+")","100%":"rotate("+i+"deg) scale(0)"}))},shrinkFadeOut:function(e,t,n){var i=n.get("rotation"),r=n.getScale(),o=n.get("opacity");e.add(this.buildTween(t,"transform",{"0%":"rotate("+i+"deg) scale("+r.x+","+r.y+")","100%":"rotate("+i+"deg) scale(0)"})),e.add(this.buildTween(t,"opacity",{"0%":o,"100%":0}))}}}),define("shared/models/AnimatedObjectModel",["jquery","lodash","backbone"],function(e,t,n){var i=1;return n.Model.extend({getCenter:function(){return{x:this.get("x")+this.get("width")/2,y:this.get("y")+this.get("height")/2}},getScale:function(){return{x:t.isUndefined(this.get("scaleWidth"))?1:this.get("scaleWidth"),y:t.isUndefined(this.get("scaleHeight"))?1:this.get("scaleHeight")}},getOffsetX:function(){if(!this.get("parentSmartgroup"))return 0;var e=this.get("parentSmartgroup").options.scaleWidth;if(1===e)return this.get("parentSmartgroup").options.x;var t=this.get("parentSmartgroup").options.width/2,n=this.get("parentSmartgroup").options.width*e/2,i=t-n;return this.get("parentSmartgroup").options.x+i},getOffsetY:function(){if(!this.get("parentSmartgroup"))return 0;var e=this.get("parentSmartgroup").options.scaleHeight;if(1===e)return this.get("parentSmartgroup").options.y;var t=this.get("parentSmartgroup").options.height/2,n=this.get("parentSmartgroup").options.height*e/2,i=t-n;return this.get("parentSmartgroup").options.y+i},getOffsetRotation:function(){return this.get("parentSmartgroup")?Math.toRad(this.get("parentSmartgroup").options.rotation):0},getRelativeRotatedPoint:function(e,t){var n=this.getOffsetRotation();if(n){var i=this.get("allWidth")/2,r=this.get("allHeight")/2;e+=i,t+=r;var o=Math.rotateCoord(e,t,i,r,n);e=o.x-i,t=o.y-r}return{x:e,y:t}},getRotatedPoint:function(e,t){var n=this.getOffsetRotation();if(n){var i=this.get("allWidth")/2,r=this.get("allHeight")/2,o=this.getCenter();e+=i,t+=r;var a=Math.rotateCoord(e,t,o.x,o.y,n);e=a.x-i,t=a.y-r}return{x:e,y:t}},getRotatedCenter:function(){var e=this.getOffsetRotation(),t=this.get("parentSmartgroup"),n=this.getCenter();if(t&&e>0){var i=t.options.width/2,r=t.options.height/2;return Math.rotateCoord(n.x,n.y,i,r,-1*e)}return{x:n.x,y:n.y}},getOffPageY:function(e){var t=this.get("x"),n=this.get("parentSmartgroup"),i=this.getOffsetRotation();if(n&&i>0){var r=this.getCenter(),o=this.getRotatedCenter();return e-=o.y-r.y,this.getRotatedPoint(t,e)}return{x:t,y:e}},getOffPageTop:function(){var e=-1*(i+this.getOffsetY());return this.get("parentSmartgroup")&&1!==this.get("parentSmartgroup").options.scaleHeight&&(e/=this.get("parentSmartgroup").options.scaleHeight),e-=this.get("allHeight"),this.getOffPageY(e)},getOffPageBottom:function(){var e=this.get("pageHeight")+i-this.getOffsetY();return this.get("parentSmartgroup")&&1!==this.get("parentSmartgroup").options.scaleHeight&&(e/=this.get("parentSmartgroup").options.scaleHeight),e+=this.get("allHeight")-this.get("height"),this.getOffPageY(e)},getOffPageX:function(e){var t=this.get("y"),n=this.get("parentSmartgroup"),i=this.getOffsetRotation();if(n&&i>0){var r=this.getCenter(),o=this.getRotatedCenter();return e-=o.x-r.x,this.getRotatedPoint(e,t)}return{x:e,y:t}},getOffPageLeft:function(){var e=-1*(i+this.getOffsetX());return this.get("parentSmartgroup")&&1!==this.get("parentSmartgroup").options.scaleWidth&&(e/=this.get("parentSmartgroup").options.scaleWidth),e-=this.get("allWidth"),this.getOffPageX(e)},getOffPageRight:function(){var e=this.get("pageWidth")+i-this.getOffsetX();return this.get("parentSmartgroup")&&1!==this.get("parentSmartgroup").options.scaleWidth&&(e/=this.get("parentSmartgroup").options.scaleWidth),e+=this.get("allWidth")-this.get("width"),this.getOffPageX(e)}})}),define("ExtentsUtils",["backbone","lodash"],function(e,t){var n={getExtentsForModel:function(e){var t=e.get("x"),n=e.get("y"),i=e.getWidth(),r=e.getHeight(),o=Math.toRad(e.get("rotation")),a=e.get("border"),s=a&&a.width?a.width:0;return this.getExtentsFromDimensions(t,n,i,r,o,s)},getExtentsFromDimensions:function(e,t,n,i,r,o){if(e-=o,t-=o,n+=2*o,i+=2*o,0!==r){var a=e+n/2,s=t+i/2,u=Math.rotateCoord(e,t,a,s,r),l=Math.rotateCoord(e+n,t,a,s,r),c=Math.rotateCoord(e+n,t+i,a,s,r),d=Math.rotateCoord(e,t+i,a,s,r);return{x1:Math.round(Math.min(u.x,l.x,c.x,d.x)),y1:Math.round(Math.min(u.y,l.y,c.y,d.y)),x2:Math.round(Math.max(u.x,l.x,c.x,d.x)),y2:Math.round(Math.max(u.y,l.y,c.y,d.y))}}return{x1:e,y1:t,x2:e+n,y2:t+i}},getSmallestContainingRectangle:function(){var n,i,r,o,a;return t.each(arguments,function(s){a=s instanceof e.Model&&t.isFunction(s.getExtents)?s.getExtents():s,void 0===n?(n=a.x1,i=a.y1,r=a.x2,o=a.y2):(n=Math.min(n,a.x1),i=Math.min(i,a.y1),r=Math.max(r,a.x2),o=Math.max(o,a.y2))}),0===arguments.length&&(n=0,i=0,r=0,o=0),{x1:n,y1:i,x2:r,y2:o}},createHoverArea:function(e,t,n){var i,r,o,a,s=[],u=n?1:0;return i=e.y1<t.y1?e:t,s.push({x:i.x1,y:i.y1}),s.push({x:i.x2+u,y:i.y1}),a=e.x2>t.x2?e:t,a!==i&&s.push({x:a.x2+u,y:a.y1}),s.push({x:a.x2+u,y:a.y2+u}),r=e.y2>t.y2?e:t,r!==a&&s.push({x:r.x2+u,y:r.y2+u}),s.push({x:r.x1,y:r.y2+u}),o=e.x1<t.x1?e:t,o!==r&&s.push({x:o.x1,y:o.y2+u}),o!==i&&s.push({x:o.x1,y:o.y1}),s}};return n}),define("InteractionUtils",["lodash"],function(e){return{isInteractionTargetingLayers:function(t){return e.includes(["show-and-stay-visible","hide-and-stay-hidden","show-layers","show-layers-on-hover","hide-layers","toggle-layers"],t.action)},isHoverInteractionShowingLayers:function(t){return"hover"===t.trigger&&e.includes(["show-and-stay-visible","show-layers-on-hover"],t.action)},isShowLayersOnHoverInteraction:function(e){return"show-layers-on-hover"===e.action},isShowLayersInteraction:function(t){return e.includes(["show-layers","show-layers-on-hover"],t.action)},isHideLayersInteraction:function(e){return"hide-layers"===e.action},isTemporaryHoverInteractionShowingOrHidingLayers:function(t){return"hover"===t.trigger&&e.includes(["show-layers-on-hover","hide-layers"],t.action)},shouldCreateHoverArea:function(e){return"show-layers-on-hover"===e.action&&e.createHoverArea}}}),define("rect",["jquery","lodash","cerosMath"],function(e,t,n){var i=function(e,t,i,r,o){if(this.topLeft=new n.Point(e,t),this.topRight=new n.Point(i,t),this.bottomRight=new n.Point(i,r),this.bottomLeft=new n.Point(e,r),o){var a=(e+i)/2,s=(t+r)/2;this.topLeft.rotate(a,s,o),this.topRight.rotate(a,s,o),this.bottomRight.rotate(a,s,o),this.bottomLeft.rotate(a,s,o)}};return t.extend(i.prototype,{getEndpoints:function(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]}}),i}),define("modules/page/views/components/AbstractComponentView",["log","jquery","lodash","device","backbone","color","globals","modules/page/views/AbstractPageChildView","animation","animationTypes","shared/models/AnimatedObjectModel","shared/utils/CerosResourceLoader","shared/utils/CssUtils","shared/utils/WebkitUtils","shared/utils/ModuleEventManager","ExtentsUtils","InteractionUtils","rect"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p,g,m,v){var y=50;return s.extend({COMMERCE_ACTIONS:["product","shopping-cart"],LIGHTBOX_ACTION:"lightbox",className:"component",internalEvents:{ENTRY_ANIMATIONS_START:"entry.animations.start",ENTRY_ANIMATIONS_END:"entry.animations.end",EXIT_ANIMATIONS_START:"exit.animations.start",EXIT_ANIMATIONS_END:"exit.animations.end"},timedTriggersCreatedAtLeastOnce:!1,repeatedTimedTriggersCanBeCreatedAgain:!1,initialize:function(){s.prototype.initialize.call(this),this.$el.addClass("page-object"),this.$el.addClass(this.type),this.$el.css({position:"absolute"}),this.options.rotation||(this.options.rotation=0),this.parentFolderViews=[],this.timedTriggerTimeouts=[],this._activated=!1,this.hiddenByAction=!1,this._hasEntryAnimationsRun=!1,this.validInteractions={},this.options.unfixedX=this.options.x,this.options.unfixedY=this.options.y,this.$window=t(window)},getOpacity:function(){return this.options.opacity},setLayerView:function(e){this.layerView=e},getLayerView:function(){return this.layerView},addFolderView:function(e){this.parentFolderViews.push(e)},areAllParentFoldersVisible:function(){return n.every(this.parentFolderViews,function(e){return e.visible})},allParentLayersAndFoldersVisible:function(){var e=this.areAllParentFoldersVisible();return this.getLayerView()&&(e=e&&this.getLayerView().visible),this.options.parentSmartgroup&&(e=e&&this.options.parentSmartgroup.visible),e},areAllParentFoldersInitiallyVisible:function(){return n.every(this.parentFolderViews,function(e){return e.initiallyVisible})},addContainerId:function(e){var t=this.$el.attr("data-container-id")?this.$el.attr("data-container-id")+",":"";this.$el.attr("data-container-id",t+e)},onClose:function(){},_configureAllWidthAllHeight:function(){if(n.isUndefined(this.options.allWidth)&&n.isUndefined(this.options.allHeight)){var e=this.options.rotation?this.options.rotation:0;this.options.parentSmartgroup&&this.options.parentSmartgroup.options.rotation&&(e+=this.options.parentSmartgroup.options.rotation,e%=360);var t,i;if(e>180&&(e=360-e),e>90&&(e=180-e),e=Math.toRad(e),0!==e){t=Math.cos(e),i=Math.sin(e);var r=g.getExtentsFromDimensions(this.options.x,this.options.y,this.options.width,this.options.height,e,this.options.border.width?this.options.border.width:0);this.options.allWidth=r.x2-r.x1,this.options.allHeight=r.y2-r.y1}else this.options.allWidth=this.options.width,this.options.allHeight=this.options.height;n.isEmpty(this.options.shadow)||""===this.options.shadow||(this.options.allWidth+=n.isNumber(this.options.shadow.x)?Math.abs(this.options.shadow.x):0,this.options.allHeight+=n.isNumber(this.options.shadow.y)?Math.abs(this.options.shadow.y):0,this.options.allWidth+=n.isNumber(this.options.shadow.blur)?Math.abs(this.options.shadow.blur):0,this.options.allHeight+=n.isNumber(this.options.shadow.blur)?Math.abs(this.options.shadow.blur):0,this.options.shadow.blur>Math.abs(this.options.shadow.x)&&(this.options.allWidth+=this.options.shadow.blur-Math.abs(this.options.shadow.x)),this.options.shadow.blur>Math.abs(this.options.shadow.y)&&(this.options.allHeight+=this.options.shadow.blur-Math.abs(this.options.shadow.y))),!n.isEmpty(this.options.border)&&""!==this.options.border&&n.isNumber(this.options.border.width)&&(0!==e?(this.options.allWidth+=2*(this.options.border.width*t+this.options.border.width*i),this.options.allHeight+=2*(this.options.border.width*t+this.options.border.width*i)):(this.options.allWidth+=2*this.options.border.width,this.options.allHeight+=2*this.options.border.width))}},render:function(){return this.$el.css("transform",""),this.updateFixedPosition(),this._configureAllWidthAllHeight(),this._applyPosition(this.options.x,this.options.y,this.options.border),this._applyRotation(this.options.rotation,this.options.width,this.options.height),this._applyDimensions(this.options.width,this.options.height),this._applyOpacity(this.getOpacity()),this._applyVisibility(this.options.visible),this._configureInteractions(),h.requiresHardwareAccelerateTransform(this.options.fixedPosition,"text"===this.type)&&this.$el.css("transform",h.hardwareAccelerateTransform(this.$el.css("transform"))),this._applyAnimations(),this._applyBorder(this.options.border),this._applyBackground(this.options.background),this._applyShadow(this.options.shadow,this.options.rotation),this},scaleComponent:function(){this.updateFixedPosition()},updateFixedPosition:function(){if(this.options.fixedPosition&&!i.desktop()){var e=this.options.pageView.$pageScroll,t=parseFloat(e.css("left")),n=parseFloat(e.css("top"));this.options.x=this.options.unfixedX+t,this.options.y=this.options.unfixedY+n,this._applyPosition(this.options.x,this.options.y,this.options.border)}},onAttach:function(){},attachMedia:function(){return(new t.Deferred).resolve().promise()},applyChanges:function(e){this.options=n.extend(this.options,e),this.render(),this.attachMedia(),this.runEntryAnimations()},getApplyPositionTarget:function(){return this.$el},_applyPosition:function(e,t,i){var r=this.getApplyPositionTarget();
!n.isEmpty(i)&&n.isNumber(i.width)&&(e-=i.width,t-=i.width),r.css("left",e+"px"),r.css("top",t+"px")},getApplyDimensionsTarget:function(){return this.$el},_applyDimensions:function(e,t){var n=this.getApplyDimensionsTarget();n.css("width",e+"px"),n.css("height",t+"px")},setDimensionsAsAttributes:function(e,t,n){e.attr("width",t),e.attr("height",n)},getApplyOpacityTarget:function(){return this.$el},_applyOpacity:function(e){this.options.parentSmartgroup&&this.options.parentSmartgroup.getOpacity()<1&&(e*=this.options.parentSmartgroup.getOpacity());var t=this.getApplyOpacityTarget();1>e?t.css("opacity",e):t.css("opacity","initial"),0===e&&t.css({"background-color":"white"})},getApplyVisibilityTarget:function(){return this.$el},_applyVisibility:function(e){var t=this.getApplyVisibilityTarget();t.css("display",e?"block":"none")},_applyRotation:function(e){if(e&&0!==e){var t="rotate("+e+"deg)";this.$el.css("transform",f.concatTransform(this.$el.css("transform"),t))}},getApplyBorderTarget:function(){return this.$el},_applyBorder:function(e){var t=this.getApplyBorderTarget();if(n.isEmpty(e))t.css("border","none");else if(e.width?(t.css("borderWidth",e.width+"px"),e.color&&""!==e.color&&t.css("borderColor",e.color),e.style&&""!==e.style&&e.style.match(/(solid|dashed|dotted)/)?t.css("borderStyle",e.style):t.css("borderStyle","solid")):t.css("borderWidth","0"),e.radius){var i=(e.radius+"").split(",");if(1==i.length)t.css("borderRadius",parseInt(i[0],10)+"px",10);else{var r=parseInt(i[0],10),o=parseInt(i[1],10),a=parseInt(i[2],10),s=parseInt(i[3],10);t.css("borderRadius",r+"px "+o+"px "+a+"px "+s+"px")}}else t.css("borderRadius","")},hasEntryAnimationsRun:function(){return this._hasEntryAnimationsRun},isActivated:function(){return this._activated},isWithinBoundaries:function(e,t){var n=this.options.x,i=this.options.y,r=this.options.allHeight,o=this.options.allWidth,a=this.options.parentSmartgroup,s=Math.toRad(this.options.rotation);if(s){var u=n+this.options.width/2,l=i+this.options.height/2,c=Math.rotateCoord(n,i,u,l,-s);n=c.x,i=c.y}if(a){n*=a.options.scaleWidth,n+=a.options.originalX,i*=a.options.scaleHeight,i+=a.options.originalY;var d=Math.toRad(a.options.rotation);if(d){var f=a.options.x+a.options.width/2,h=a.options.y+a.options.height/2,p=Math.rotateCoord(n,i,f,h,-d);n=p.x,i=p.y}r*=a.options.scaleHeight}var g=i+r,m=n+o,v=i<e.bottomY&&g>=e.topY;return t&&(v=v&&n<t.rightX&&m>=t.leftX),v},isOutsideOfPage:function(){var e={topY:0,bottomY:this.options.pageHeight},t={leftX:0,rightX:this.options.pageWidth};return this.isWithinBoundaries(e,t)===!1},_hasInteraction:function(e){var t=this.options.interactions;if(!n.isArray(t)||0===t.length)return!1;var i=this.getValidInteractionsByTrigger(e);return i.length>0},hasClickInteraction:function(){return this._hasInteraction(this.getModule().INTERACTION_TRIGGERS.CLICK)},hasHoverInteraction:function(){return i.desktop()&&this._hasInteraction(this.getModule().INTERACTION_TRIGGERS.HOVER)},getResettableHoverInteractions:function(){if(this.hasHoverInteraction()){var e=this.getValidInteractionsByTrigger(this.getModule().INTERACTION_TRIGGERS.HOVER);return n.filter(e,function(e){return e.resetWhenScrolledOffscreen})}return null},hasResettableHoverInteractions:function(){var e=this.getResettableHoverInteractions();return e&&e.length>0},getValidInteractionsByTrigger:function(e){if(!this.validInteractions[e]||a.previewMode){var t=this.options.interactions,i=this;t=n.filter(t,function(t){return i._isValidInteraction(t)?n.isUndefined(e)||t.trigger===e:!1}),t.sort(function(e,t){var n=-1!==["page-goto","page-next","page-prev"].indexOf(e.action),i=-1!==["page-goto","page-next","page-prev"].indexOf(t.action),r="page-enable-disable"==e.action,o="page-enable-disable"==t.action;return r&&i?-1:o&&n?1:0}),this.validInteractions[e]=t}return this.validInteractions[e]},_isValidInteraction:function(e){if(-1!==n.indexOf(this.COMMERCE_ACTIONS,e.action)&&!this.options.allowCommerceIntegration)return!1;if(e.action===this.LIGHTBOX_ACTION&&!this.options.allowLightboxes)return!1;if("url"===e.action&&!e.url)return!1;if("product"===e.action&&!e.productPanelId)return!1;if(m.isInteractionTargetingLayers(e)&&!e.layerTargets)return!1;if("page-goto"===e.action&&!e.pageTarget)return!1;if("scroll-to"===e.action)switch(e.scrollTargetType){case"top":return!0;case"bottom":return!0;case"scranchor":return e.scrollTargetScranchor&&!n.isEmpty(e.scrollTargetScranchor);default:return!1}if("page-enable-disable"===e.action)return!n.isEmpty(e.pageTargets);var t=n.values(e),i=n.some(t,function(e){if(n.isNull(e))return!0;if(n.isArray(e)){if(0===e.length)return!0}else if(""===e)return!0;return!1});return!i},unbindInteractions:function(){this.$el.unbind("click"),this.$el.unbind("mouseover"),this.$el.unbind("mouseout")},assignCursor:function(){this.hasClickInteraction()||this.options.showHoverCursor?this.$el.css("cursor","pointer"):this.$el.css("cursor","inherit")},styleForTouchDevices:function(){i.touch()&&i.trident&&this.$el.css("touch-action","manipulation")},bindClickInteraction:function(){this.hasClickInteraction()?this.$el.bind("click",n.bind(this._handleClickInteraction,this)):this.$el.bind("click",n.bind(this.handleClickWithoutInteraction,this))},bindMouseoverInteraction:function(){this.hasHoverInteraction()&&this.$el.bind("mouseover",n.bind(this._handleMouseOverInteraction,this))},_configureInteractions:function(){this.unbindInteractions(),this.assignCursor(),this.styleForTouchDevices(),this.bindClickInteraction(),this.bindMouseoverInteraction()},createTimedTriggers:function(){var e=this.getModule(),t=this;if(this.canCreateTimedTriggers()){var i=n.groupBy(t.getValidInteractionsByTrigger(e.INTERACTION_TRIGGERS.VIEW),function(e){return e.delay});n.forOwn(i,function(i,r){var o=n.filter(i,function(e){return!t.timedTriggersCreatedAtLeastOnce||t.repeatedTimedTriggersCanBeCreatedAgain&&e.repeat});if(o.length>0){var a=setTimeout(function(){n.each(o,function(n){t.simulateClick(!0,n),p.trigger(e.publishedEvents.TIMED_INTERACTION,t.addComponentAndClickDataToEvent(n))})},1e3*r);t.timedTriggerTimeouts.push(a)}}),this.timedTriggersCreatedAtLeastOnce=!0,this.repeatedTimedTriggersCanBeCreatedAgain=!1}},canCreateTimedTriggers:function(){var e=this.getModule();return this.visible&&this._hasInteraction(e.INTERACTION_TRIGGERS.VIEW)?this.allParentLayersAndFoldersVisible():!1},simulateClick:function(e,n){var i={clientX:-1,clientY:-1,preventDefault:t.noop};this._handleClickInteraction(i,e,n)},_handleClickInteraction:function(e,t,i){var r=this.getModule(),o=!1;e.preventDefault();var a=[];if(t){if(!i)return;a=[i]}else a=this.getValidInteractionsByTrigger(r.INTERACTION_TRIGGERS.CLICK);n.each(a,n.bind(function(n){var i=this._triggerClickAction(e,n,t);i&&(o=!0)},this));var s=this.addComponentAndClickDataToEvent({},e);p.trigger(r.publishedEvents.PAGE_COMPONENT_CLICKED,s),o&&(e.handledByComponent=!0,t||r.trigger(r.publishedEvents.PAGE_COMPONENT_INTERACTION,s))},handleClickWithoutInteraction:function(e){var t=this.getModule(),n=this.addComponentAndClickDataToEvent({},e);p.trigger(t.publishedEvents.PAGE_COMPONENT_CLICKED,n)},_triggerClickAction:function(e,i,r){var o=this.getModule();i=t.extend(!0,{},i),i=this.addComponentAndClickDataToEvent(i,e);var a=!0;switch(i.action){case"scroll-to":p.trigger(o.publishedEvents.PAGE_ACTION_SCROLL_TO,i);break;case"page-prev":p.trigger(o.publishedEvents.PAGE_ACTION_GO_TO_PREV_PAGE,i);break;case"page-next":p.trigger(o.publishedEvents.PAGE_ACTION_GO_TO_NEXT_PAGE,i);break;case"page-goto":n.isString(i.pageTarget)&&(i.pageTarget=parseInt(i.pageTarget.replace(/#/,""),10)),p.trigger(o.publishedEvents.PAGE_ACTION_GO_TO_PAGE,i);break;case"page-enable-disable":p.trigger(o.publishedEvents.PAGE_ACTION_ENABLE_DISABLE_PAGES,i);break;case"url":i.domain=t("<a>",{href:i.url}).hostname,o.trigger(o.publishedEvents.PAGE_ACTION_GO_TO_URL,i);break;case"lightbox":o.trigger(o.publishedEvents.PAGE_ACTION_OPEN_LIGHTBOX,i);break;case"product":o.trigger(o.publishedEvents.PAGE_ACTION_OPEN_PRODUCT_PANEL,i);break;case"shopping-cart":o.trigger(o.publishedEvents.PAGE_ACTION_OPEN_SHOPPING_CART,i);break;case"show-layers":case"show-layers-on-hover":this.options.pageView.invokeChildActions(i.layerTargets,o.INTERACTION_ACTIONS.CHILD_SHOW),p.trigger(o.publishedEvents.PAGE_ACTION_LAYER_VISIBILITY,i);break;case"hide-layers":this.options.pageView.invokeChildActions(i.layerTargets,o.INTERACTION_ACTIONS.CHILD_HIDE,r),p.trigger(o.publishedEvents.PAGE_ACTION_LAYER_VISIBILITY,i);break;case"toggle-layers":this.options.pageView.invokeChildActions(i.layerTargets,o.INTERACTION_ACTIONS.CHILD_TOGGLE,r),p.trigger(o.publishedEvents.PAGE_ACTION_LAYER_VISIBILITY,i);break;case"show-fullscreen":this.showFullScreen();break;case"share-email":case"share-facebook":case"share-twitter":case"share-pinterest":case"share-linkedin":p.trigger(o.publishedEvents.PAGE_ACTION_SHARE_PAGE,i);break;default:a=!1}return a},showFullScreen:function(){var e=document.body;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},addComponentAndClickDataToEvent:function(e,n){return t.extend(e,{clickX:n?n.clientX:-1,clickY:n?n.clientY:-1,componentSlug:this.id,componentName:this.options.title,componentType:this.options.type,pageSlug:this.options.pageView.model.get("slug")})},_handleMouseOverInteraction:function(){var e=this.getValidInteractionsByTrigger(this.getModule().INTERACTION_TRIGGERS.HOVER),t=this;e.length>0&&(this.options.pageView.deactivateNonParentHovers(this),n.each(e,function(e){t._triggerMouseOverAction(e)}))},_triggerMouseOverAction:function(e){var t=this.getModule(),i=e.layerTargets,r=m.isHoverInteractionShowingLayers(e);i=n.filter(i,n.bind(function(e){var t=this.options.pageView.findChildView(e),n=this.options.pageView.isChildVisible(t);return r?!n:n},this)),r?this.options.pageView.invokeChildActions(i,t.INTERACTION_ACTIONS.CHILD_SHOW):this.options.pageView.invokeChildActions(i,t.INTERACTION_ACTIONS.CHILD_HIDE),m.isTemporaryHoverInteractionShowingOrHidingLayers(e)&&this.options.pageView.addActiveHoverAndBindMouseEvents(this,e)},triggerMouseOutAction:function(e){var t=this.getModule();m.isShowLayersOnHoverInteraction(e)?this.options.pageView.invokeChildActions(e.layerTargets,t.INTERACTION_ACTIONS.CHILD_HIDE):m.isHideLayersInteraction(e)&&this.options.pageView.invokeChildActions(e.layerTargets,t.INTERACTION_ACTIONS.CHILD_SHOW)},getApplyAnimationsTarget:function(){return this.$el},_applyAnimations:function(){this.animatedObjectModel=new c({x:this.options.x,y:this.options.y,allWidth:this.options.allWidth,allHeight:this.options.allHeight,width:this.options.width,height:this.options.height,rotation:this.options.rotation,opacity:this.getOpacity(),scaleWidth:this.options.scaleWidth,scaleHeight:this.options.scaleHeight,pageWidth:this.options.pageWidth,pageHeight:this.options.pageHeight,parentSmartgroup:this.options.parentSmartgroup,requiresHardwareAcceleration:h.requiresHardwareAccelerateTransform(this.options.fixedPosition,"text"===this.type)});var e=this.getApplyAnimationsTarget();this.cleanupAnimations(),this.entryAnimations=this.buildAnimationPhases(e,this.options.animations,this.options.animationsRepeatAll,this.animatedObjectModel),this.exitAnimations=this.buildAnimationPhases(e,this.options.exitAnimations,!1,this.animatedObjectModel),this.resetToInitialState()},buildAnimationPhases:function(e,t,i,r){var o=[];if(t&&t.length>0)for(var a=function(e){e.play()},s=0;s<t.length;s++){i&&(t[s].loop=!1);var c=l.compileNewSequence(e,t[s],r);if(n.isNull(c))break;if(o.push(c),o[o.length-2]&&o[o.length-2].on(u.END_EVENT,n.bind(function(){var e=this;n.defer(a,e)},c)),t[s].loop===!0)break}return o},onLayerReset:function(){this._activated=!1,this.deactivate()},onNotVisible:function(){this.hiddenByAction||(this._activated=!1),this.repeatedTimedTriggersCanBeCreatedAgain=!0,this.resetTimers()},deactivate:function(){},reset:function(){this.hiddenByAction=!1,this.resetAnimations(),this.onLayerReset()},resetAnimations:function(){this.cleanupAnimations(),this.resetToInitialState()},resetTimers:function(){n.each(this.timedTriggerTimeouts,function(e){window.clearTimeout(e)})},resetWhenNotVisible:function(){var e=this.getModule(),t=!this.layerView&&!this.initiallyVisible;if(this.options.animationsReplayOnScroll||!t){var i=n.isEmpty(this.getValidInteractionsByTrigger(e.INTERACTION_TRIGGERS.VIEW)),r=this.layerView&&!this.layerView.initiallyVisible;(this.options.animationsReplayOnScroll||!i||!r&&this.areAllParentFoldersInitiallyVisible())&&(this.isOutsideOfPage()||(this.options.animationsReplayOnScroll&&this.hasEntryAnimationsRun()&&(this.resetAnimations(),this.visible&&"none"===this.$el.css("display")&&this.$el.show()),this.onNotVisible()))}},runInitialEntryAnimations:function(e,t,n){(this.isWithinBoundaries(e,t)||this.isOutsideOfPage())&&this.runEntryAnimations(n)},runEntryAnimationsWhenVisible:function(e,t){this.isActivated()||(!this.layerView||!this.layerView.hiddenByAction&&this.layerView.visible)&&!this.hiddenByAction&&this.visible&&this.areAllParentFoldersVisible()&&(e=n.clone(e),t=n.clone(t),e.topY>0&&(e.topY+=y),e.bottomY<this.options.pageHeight&&(e.bottomY-=y),t&&(t.leftX>0&&(t.leftX+=y),t.rightX<this.options.pageWidth&&(t.rightX-=y)),this.isWithinBoundaries(e,t)&&!this.isOutsideOfPage()&&this.runEntryAnimations())},runEntryAnimations:function(e,t){if(!this.hiddenByAction){var i=this.getModule(),r=0;if(e){if(!this.hasLoopingAnimation())return;r=this.entryAnimations.length-1}if(t||(this.trigger(this.internalEvents.ENTRY_ANIMATIONS_START),t=!0),this.entryAnimations&&this.entryAnimations[r]&&!this.hasEntryAnimationsRun()){n.each(this.entryAnimations,function(e){e.cleanup()}),this.entryAnimations[r].resetToInitialState();var o=this,a=function(){n.last(o.entryAnimations).off(u.END_EVENT,a),o.options.animationsRepeatAll?(o._hasEntryAnimationsRun=!1,e=!1,n.defer(n.bind(o.runEntryAnimations,o),e,t)):(o.trigger(o.internalEvents.ENTRY_ANIMATIONS_END),p.trigger(i.publishedEvents.PAGE_COMPONENT_ANIMATION_END,o.id))};n.last(this.entryAnimations).on(u.END_EVENT,a),this.entryAnimations[r].play(),this.entryAnimations.length>0&&p.trigger(i.publishedEvents.PAGE_COMPONENT_ANIMATION_START,this.id)}else this.trigger(this.internalEvents.ENTRY_ANIMATIONS_END);this._activated=!0,this._hasEntryAnimationsRun=!0}},runExitAnimations:function(){var e=this.getModule();this.entryAnimations&&n.each(this.entryAnimations,function(e){e.cleanup()}),this.trigger(this.internalEvents.EXIT_ANIMATIONS_START);var i=new t.Deferred;if(n.isEmpty(this.exitAnimations)||"none"===this.$el.css("display"))this.trigger(this.internalEvents.EXIT_ANIMATIONS_END),p.trigger(e.publishedEvents.PAGE_COMPONENT_ANIMATION_END,this.id),i.resolve();else{var r=this,o=function(){r.trigger(r.internalEvents.EXIT_ANIMATIONS_END),p.trigger(e.publishedEvents.PAGE_COMPONENT_ANIMATION_END,r.id),i.resolve(),n.last(r.exitAnimations).off(u.END_EVENT,o)};n.last(this.exitAnimations).on(u.END_EVENT,o),n.each(this.exitAnimations,function(e){e.cleanup()}),this.exitAnimations[0].resetToInitialState(),this.exitAnimations[0].play(),this.exitAnimations.length>0&&p.trigger(e.publishedEvents.PAGE_COMPONENT_ANIMATION_START,this.id)}return i.promise()},cleanupAnimations:function(){this.entryAnimations&&n.each(this.entryAnimations,function(e){e.cleanup()}),this.exitAnimations&&n.each(this.exitAnimations,function(e){e.cleanup()})},finishAnimations:function(){var e=!1,t=!1;this.entryAnimations&&(e=n.some(this.entryAnimations,function(e){return e.isInProgress()===!0})),this.exitAnimations&&(t=n.some(this.exitAnimations,function(e){return e.isInProgress()===!0})),e&&n.last(this.entryAnimations).finish(),t&&n.last(this.exitAnimations).finish(),this.cleanupAnimations()},hasEntryAnimation:function(){return this.entryAnimations&&n.size(this.entryAnimations)>0},doTriggerOnScroll:function(){return this.hasEntryAnimation()||this._hasInteraction(this.getModule().INTERACTION_TRIGGERS.VIEW)||"html"===this.type},hasLoopingAnimation:function(){return this.hasEntryAnimation()?n.last(this.entryAnimations).isLooping():!1},resetToInitialState:function(){n.isEmpty(this.entryAnimations)?n.isEmpty(this.exitAnimations)||n.first(this.exitAnimations).resetToInitialState():n.first(this.entryAnimations).resetToInitialState(),this._hasEntryAnimationsRun=!1},pauseAnimations:function(){this.entryAnimations&&n.each(this.entryAnimations,function(e){e.pause()}),this.exitAnimations&&n.each(this.exitAnimations,function(e){e.pause()})},resumeAnimations:function(){this.entryAnimations&&n.each(this.entryAnimations,function(e){e.resume()}),this.exitAnimations&&n.each(this.exitAnimations,function(e){e.resume()})},hasShadow:function(e){return!n.isEmpty(e)&&(e.x>0||e.x<0||e.y>0||e.y<0||e.blur>0)},getApplyShadowTarget:function(){return this.$el},_applyShadow:function(e,t){var i=this.getApplyShadowTarget();if(this.hasShadow(e)){var r={x:n.isNumber(e.x)?e.x:0,y:n.isNumber(e.y)?e.y:0};t&&0!==t&&this._rotateShadowCoordinates(r,t);var o="";o+=Math.round(r.x)+"px",o+=" "+Math.round(r.y)+"px",o+=e.blur?" "+e.blur+"px":" 0",o+=e.spread?" "+e.spread+"px":" 0",o+=" "+e.color,i.css("boxShadow",o)}else i.css("boxShadow","none")},_rotateShadowCoordinates:function(e,t){t=Math.toRad(t);var n=e.x*Math.cos(t)+e.y*Math.sin(t),i=-1*e.x*Math.sin(t)+e.y*Math.cos(t);e.x=n,e.y=i},getApplyBackgroundTarget:function(){return this.$el},_applyBackground:function(e){var t=this.getApplyBackgroundTarget();return e?(e.color?t.css("backgroundColor",e.color):t.css("backgroundColor","transparent"),void(e.gradient?t.css("backgroundImage","linear-gradient("+parseInt(e.gradient.angle,10)+"deg,"+o.buildStops(e.gradient.stops)+")"):t.css("backgroundImage","none"))):(t.css("backgroundColor","transparent"),void t.css("backgroundImage","none"))},getExtents:function(){return g.getExtentsFromDimensions(this.options.x,this.options.y,this.options.width,this.options.height,Math.toRad(this.options.rotation),this.options.border.width?this.options.border.width:0)},getHoverArea:function(){var e=this.options.border.width?this.options.border.width:0,t=this.options.x-e,n=this.options.y-e,i=this.options.width+2*e,r=this.options.height+2*e,o=Math.toRad(this.options.rotation),a=new v(t,n,t+i,n+r,o);return a.getEndpoints()}})}),define("modules/page/views/components/video/AbstractVideoComponentView",["lodash","jquery","log","globals","device","color","modules/page/views/components/AbstractComponentView","shared/utils/CerosResourceLoader","urlUtils"],function(e,t,n,i,r,o,a,s,u){var l=i.mediaDomainMap?e.invert(i.mediaDomainMap):null,c=[10,20,30,40,50,60,70,80,90,100];return a.extend({type:"video",tagName:"div",className:null,isVideoReady:!1,playedOnce:!1,videoSlug:null,$playButton:null,$vid:null,videoHandle:null,videoTracker:null,tapToPlay:!0,muted:!1,isAutoPaused:!1,isManuallyPaused:!1,_isEnded:function(){throw new Error("_isEnded() must be defined by child class")},_setCurrentTime:function(){throw new Error("_setCurrentTime() must be defined by child class")},initialize:function(){a.prototype.initialize.apply(this),this.areMediaPropertiesSet()&&(this.id=this.options.id+(new Date).getTime()+Math.floor(1024*Math.random()),this.videoSlug=this.options.video&&this.options.video.substr(this.options.video.lastIndexOf("/")+1),this.isVideoReady=!1,this.posterLoader=this.options.posterLoader,e.isUndefined(this.options.tapToPlay)||(this.tapToPlay=this.options.tapToPlay),e.isUndefined(this.options.muted)||(this.muted=this.options.muted),this._initializeDom(),this.posterLoader&&this.posterLoader.onImageLoaded(this.attachMedia,this))},areMediaPropertiesSet:function(){return this.options.video&&this.options.poster},attachMedia:function(){throw new Error("attachMedia must be implemented")},getPosterFramePreloadPromise:function(){if(!this.posterLoader)return null;var t=this.posterLoader.getCurrentResource();return e.isNull(t)?(n.warn("Poster image should have been added to resource loader during preload"),null):t.getPromise()},doTriggerOnScroll:function(){return!0},_getCurrentPosterSize:function(){var e=this.options.pageView.getScaleContext().adjustedRatio;return{width:this.options.width*e,height:this.options.height*e}},_getPosterFrameSrc:function(){return this.posterLoader?this.posterLoader.getSrc():""},_initializeDom:function(){throw new Error("Device-specific implementation")},_getVideoFormats:function(){throw new Error("Device-specific implementation")},getResolvedVideoUrlForFormat:function(t){var i,r=this.options.videoMedia;if(!e.isUndefined(r)&&!e.isNull(r)){var o=r.get("encodings");if(!o[t])return null;i=r.get("encodings")[t],i=u.makeUrlAbsolute(i),i=u.replaceProtocolIfHttpsRequest(i),l&&(i=this.switchAmazonDomainInUrl(i))}return e.isUndefined(i)&&(n.warn("Resolved video not found!",i),i=this.options.video+"/redirect/"+t),i},switchAmazonDomainInUrl:function(t){var n=t.match(/https?:\/\/(([a-z0-9-]*)\.[^\/]*)/i);if(n){var i=n[1],r=n[2];e.has(l,r)&&(t=t.replace(i,l[r]))}return t},_setVideoSources:function(){var n=this._getVideoFormats();e.each(n,e.bind(function(e){var n=this.getResolvedVideoUrlForFormat(e.format);if(n){var i="video/"+e.type;("hls-playlist"===e.format||"dash-playlist"===e.format)&&(i="application/"+e.type),this.$vid.append(t("<source>",{src:n,type:i}))}},this))},_isLoopForever:function(){return this.options.videoAutoPlay===!0&&this.options.videoLoop===!0},_isShowControls:function(){return this.options.videoAutoPlay===!1||e.isUndefined(this.options.videoHideControls)||this.options.videoHideControls===!1},_hidePlayButton:function(){this.$playButton&&this.$playButton.hide()},_showPlayButton:function(){this._isShowControls()&&this.$playButton&&this.$playButton.show()},deactivate:function(){a.prototype.deactivate.apply(this),this.autoPause(),this._rewindEndedAutoplayingVideo()},onNotVisible:function(){a.prototype.onNotVisible.apply(this),this.videoTracker&&this.videoTracker.disableTracking(),this.options.videoAutoPlay&&(this.autoPause(),this._rewindEndedAutoplayingVideo())},_rewindEndedAutoplayingVideo:function(){this.options.videoAutoPlay&&this._isEnded()&&this._setCurrentTime(0)},_adjustPlayButtonColors:function(){var e=this,t=o.fromString(e.options.theme.menuFgColor).rgba();e.$playButton.css("color",e.options.theme.menuFgColor),e.$playButton.css("background",e.options.theme.menuBgColor),e.$playButton.hover(function(){e.$playButton.css("color","rgba("+t.r+","+t.g+","+t.b+","+e.options.theme.menuHoverOpacity+")")},function(){e.$playButton.css("color",e.options.theme.menuFgColor)})},play:function(){throw"implement in subclasses"},autoPause:function(){this.isVideoReady&&!this.isPaused()&&(this.videoTracker&&this.videoTracker.disableTracking(),this.isAutoPaused=!0,this.videoHandle.pause())},manuallyPause:function(){this.isVideoReady&&!this.isPaused()&&(this.videoTracker&&this.videoTracker.disableTracking(),this.isAutoPaused=!1,this.videoHandle.pause())},isPaused:function(){throw"implement in subclasses"},_configureVideoEvents:function(t){t.on("play",e.bind(function(){this.playedOnce=!0,this._hidePlayButton(),n.debug("Currently playing from src "+t.getCurrentSource())},this)),this.on(this.internalEvents.ENTRY_ANIMATIONS_START,e.bind(function(){this.videoTracker.enableTracking()},this)),this.videoTracker.on(this.videoTracker.EVENTS.PLAY,e.bind(function(e){this.triggerEvent(this.getModule().publishedEvents.PAGE_VIDEO_PLAY,e)},this)),this.options.videoLoop||(this.videoTracker.on(this.videoTracker.EVENTS.PROGRESS_TIME,e.bind(function(e){this.triggerEvent(this.getModule().publishedEvents.PAGE_VIDEO_PROGRESS_TIME,e)},this)),this.videoTracker.on(this.videoTracker.EVENTS.PROGRESS_PERCENT,e.bind(function(t){e.includes(c,t.progressPercent)&&this.triggerEvent(this.getModule().publishedEvents.PAGE_VIDEO_PROGRESS_PERCENT,t)},this)))},bindVideoElementPauseAndPlayForManualPauseDetection:function(){this.$vid.bind("pause",e.bind(function(){this.onVideoPause()},this)),this.$vid.bind("play",e.bind(function(){this.onVideoPlay()},this))},onVideoPause:function(){this.isManuallyPaused=!this.isAutoPaused},onVideoPlay:function(){this.isManuallyPaused=!1,this.isAutoPaused=!1},triggerEvent:function(t,n){var i=e.extend({componentSlug:this.options.id,videoSlug:this.videoSlug,pageSlug:this.options.pageView.model.get("slug")},n);this.getModule().trigger(t,i)},canAutoplay:function(){return this.options.videoAutoPlay?this.tapToPlay?this.playedOnce:!0:!1},_applyRotation:function(){},_applyBackground:function(){},_applyBorder:function(){},_configureAction:function(){}})}),define("modules/page/views/LayerView",["jquery","lodash","backbone","modules/page/views/AbstractPageChildView","ExtentsUtils"],function(e,t,n,i,r){return i.extend({initialize:function(){i.prototype.initialize.call(this),this.childViews={},this.parentFolderViews=[]},getExtents:function(){var e;return this.childViews?t.each(this.childViews,function(t){var n=t.getExtents();e=e?r.getSmallestContainingRectangle(e,n):n}.bind(this)):e={},e},hide:function(){t.each(this.childViews,function(e){e.hide()})},addContainerId:function(e){t.each(this.childViews,function(t){t.addContainerId(e)})},addFolderView:function(e){this.parentFolderViews.push(e),t.each(this.childViews,function(t){t.addFolderView(e)})},areAllParentFoldersVisible:function(){return t.every(this.parentFolderViews,function(e){return e.visible})},allParentLayersAndFoldersVisible:function(){return this.areAllParentFoldersVisible()}})}),define("modules/page/views/FolderView",["jquery","lodash","backbone","modules/page/views/AbstractPageChildView"],function(e,t,n,i){return i.extend({initialize:function(){i.prototype.initialize.call(this),this.childViews={}},hide:function(){t.each(this.childViews,function(e){e.hide()})},addContainerId:function(e){t.each(this.childViews,function(t){t.addContainerId(e)})},addFolderView:function(e){t.each(this.childViews,function(t){t.addFolderView(e)})}})}),define("modules/page/views/SmartgroupView",["jquery","lodash","globals","backbone","modules/page/views/components/AbstractComponentView","device","shared/utils/CssUtils","ExtentsUtils"],function(e,t,n,i,r,o,a,s){return r.extend({initialize:function(){r.prototype.initialize.call(this),this.childViews={},this.setSizeFromExtents()},setSizeFromExtents:function(){function e(n){"folder"===n.type?t.each(n.items,function(t){e(t)}):t.each(n.objects,function(e){var t=s.getExtentsFromDimensions(e.x,e.y,e.width,e.height,Math.toRad(e.rotation),e.border.width?e.border.width:0);i.push(t)})}n.previewMode&&(this.options=t.clone(this.options)),this.options.scaleWidth=this.options.width/100,this.options.scaleHeight=this.options.height/100;var i=[];t.each(this.options.layers,function(t){e(t)});var r=s.getSmallestContainingRectangle.apply(s,i);this.options.width=r.x2-r.x1,this.options.height=r.y2-r.y1;var o=this.options.width/2,a=this.options.height/2,u=this.options.width/2*this.options.scaleWidth,l=this.options.height/2*this.options.scaleHeight;this.options.originalX=this.options.x,this.options.originalY=this.options.y,this.options.x=this.options.x-(o-u),this.options.y=this.options.y-(a-l),this.options.fixedPosition&&(this.options.unfixedX=this.options.x,this.options.unfixedY=this.options.y)},_applyDimensions:function(){var e="scale("+this.options.scaleWidth+","+this.options.scaleHeight+")";this.$el.css("transform",a.concatTransform(this.$el.css("transform"),e));var t=this.options.width/2+"px "+this.options.height/2+"px";this.$el.css("transform-origin",t),this.$el.css("-moz-transform-origin",t),this.$el.css("-webkit-transform-origin",t),this.$el.css("-ms-transform-origin",t)}})}),define("modules/page/views/components/SquareShapeComponentView",["jquery","lodash","backbone","modules/page/views/components/AbstractComponentView"],function(e,t,n,i){return i.extend({type:"shape",tagName:"div",render:function(){return i.prototype.render.call(this),!t.isEmpty(this.options.background)||!t.isEmpty(this.options.border)&&0!==this.options.border.width||t.isEmpty(this.options.action)||this.$el.css({"background-color":"white",opacity:0}),this}})}),define("modules/page/utils/SVGUtil",["log","lodash"],function(e,t){return function(){var n=function(e){e=e.replace(/(\s+)/g,";").split(";");var n="M";return t.each(e,function(e,t){e.length>0&&(n+=(0===t?"":"L")+e)}),n+="z"},i=function(e){var n=e.replace(/([MmZzLlHhVvCcSsQqTtAa])\s/g,"$1").replace(/\s-/g,"-").replace(/\s/g,",").match(/([MmZzLlHhVvCcSsQqTtAa](-?\d+[\.\s]?\d*,?)*)/g),i=[];return t.each(n,function(e,r){var o=e.substr(1).replace(/-/g,",-").replace(/(^,)/,"").split(",");t.each(o,function(e,t){o[t]=parseFloat(e)}),i.push({op:n[r].substr(0,1),coords:o})}),i},r=function(n,r){"string"==typeof r&&(r=i(r)),n.beginPath();var o,a,s,u,l,c,d=0,f=0,h=null,p=null;t.each(r,function(t){var i=t.coords;switch(t.op){case"m":d+=i[0],f+=i[1],n.moveTo(d,f);break;case"M":h=d=i[0],p=f=i[1],n.moveTo(d,f);break;case"c":o=d+i[0],a=f+i[1],s=d+i[2],u=f+i[3],d+=i[4],f+=i[5],l=2*d-s,c=2*f-u,n.bezierCurveTo(o,a,s,u,d,f);break;case"C":o=i[0],a=i[1],s=i[2],u=i[3],d=i[4],f=i[5],l=2*d-s,c=2*f-u,n.bezierCurveTo(o,a,s,u,d,f);break;case"s":s=d+i[0],u=f+i[1],d+=i[2],f+=i[3],n.bezierCurveTo(l,c,s,u,d,f),l=2*d-s,c=2*f-u;break;case"q":o=d+i[0],a=f+i[1],d+=i[2],f+=i[3],l=2*d-o,c=2*f-a,n.quadraticCurveTo(o,a,d,f);break;case"t":d+=i[0],f+=i[1],n.quadraticCurveTo(l,c,d,f),l=2*d-l,c=2*f-c;break;case"l":d+=i[0],f+=i[1],n.lineTo(d,f);break;case"L":d=i[0],f=i[1],n.lineTo(d,f);break;case"h":d+=i[0],n.lineTo(d,f);break;case"H":d=i[0],n.lineTo(d,f);break;case"v":f+=i[0],n.lineTo(d,f);break;case"V":f=i[0],n.lineTo(d,f);break;case"z":case"Z":n.lineTo(h,p);break;default:e.warn("UNKNOWN SVG OP: "+t.op)}})},o=function(e,t,n,i){t&&null!==t&&(r(e,t),i&&e.stroke(),n&&e.fill())};return{pointsToPath:n,parse:i,render:o,stroke:function(e,t){o(e,t,!1,!0)},fill:function(e,t){o(e,t,!0,!1)},trace:r}}()}),define("text!modules/page/templates/shapes.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"\n	 y="0px" width="1000px" height="1000px" viewBox="0 0 1000 1000" xml:space="preserve">\n<g id="single-arrow" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M0,346.2l696.6,0V0L1000,500\n		l-303.4,500V653.9L0,653.9V346.2z"/>\n</g>\n<g id="double-arrow" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M232.8,653.9V1000L0,500\n		L232.8,0v346.1l534.5,0V0L1000,500l-232.8,500V653.9L232.8,653.9z"/>\n</g>\n<g id="rounded-square" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M1000,883.3\n		c0,64.2-52.5,116.7-116.7,116.7H116.7C52.5,1000,0,947.5,0,883.3V116.7C0,52.5,52.5,0,116.7,0h766.7C947.5,0,1000,52.5,1000,116.7\n		V883.3z"/>\n</g>\n<g id="triangle" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M500,0L0,1000h1000L500,0"/>\n</g>\n<g id="right-triangle" display="none">\n	<polygon display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" points="0.1,1000.5\n		1000.5,1000.5 1000.5,0.1 	"/>\n</g>\n<g id="single-arrow-fat" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M454.5,0L1000,500l-545.5,500\n		V700H0V300h454.5V0z"/>\n</g>\n<g id="double-arrow-fat" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M517,680.3L517,680.3l-252,0\n		V1000L0,500L265,0v319.6h218v0h252V0l265,500l-265,500V680.3H517z"/>\n</g>\n<g id="round-bubble" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M650.3,786.5\n		C516.5,972.5,288.8,1000,288.8,1000c75.1-73.8,98.5-146,100.4-204.9C166.4,754.5,0,594.2,0,402.5C0,180.2,223.9,0,500,0\n		s500,180.2,500,402.5C1000,582.6,853,735.1,650.3,786.5z"/>\n</g>\n<g id="square-bubble" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M796.5,800H648.4l-302.2,200\n		l54.9-200H203.5C91.1,800,0,705.2,0,588.3V211.7C0,94.8,91.1,0,203.5,0h592.9C908.9,0,1000,94.8,1000,211.7v376.7\n		C1000,705.2,908.9,800,796.5,800z"/>\n</g>\n<g id="star" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M500,0l154.5,329.2L1000,382\n		L750,638.2l59,361.8L500,829.2L191,1000l59-361.8L0,382l345.5-52.8L500,0z"/>\n</g>\n<g id="star2" display="none">\n	<path display="inline" fill-rule="evenodd" fill="none" stroke="#000000" stroke-miterlimit="10" d="M500.3,0l-98.1,410.7L0,382.3\n		l339.8,225.2L191,999.6l308.1-270.4L808.7,1000L659,607.7l341-225.5l-402.3,28.2L500.3,0z"/>\n</g>\n<g id="pentagon" display="none">\n	<path display="inline" fill="none" stroke="#000000" stroke-miterlimit="10" d="M1000,382l-191,618H191L0,382L500,0L1000,382z"/>\n</g>\n<g id="circle" display="none">\n	<circle display="inline" fill="none" stroke="#000000" stroke-miterlimit="10" cx="500" cy="500" r="500"/>\n</g>\n<g id="square" display="none">\n	<rect x="0" y="0" display="inline" fill="none" stroke="#000000" stroke-miterlimit="10" width="1000" height="1000"/>\n</g>\n</svg>\n'
}),define("modules/page/utils/ShapeLibrary",["jquery","lodash","modules/page/utils/SVGUtil","libs/image/ImageResource","text!modules/page/templates/shapes.svg"],function(e,t,n,i,r){var o=function(){this.shapes=e(r),this.scale={x:parseInt(this.shapes.filter(":first").attr("width"),10),y:parseInt(this.shapes.filter(":first").attr("height"),10)},this.paths={},this.shapes.find("g").each(t.bind(function(t,i){i=e(i);var r=i.attr("id"),o=i.children(),a=this.getScale().x,s=this.getScale().y;this.paths[r]=null;var u;o.length>0&&(o.is("path")?(u=n.parse(o.attr("d")),this.paths[r]=function(e){n.trace(e,u)}):o.is("polygon")?(u=n.pointsToPath(o.attr("points")),this.paths[r]=function(e){n.trace(e,u)}):o.is("circle")?this.paths[r]=function(e){var t=a>s?s/2:a/2;e.translate(a/2,s/2),e.scale(a>s?a/s:1,s>a?s/a:1),e.arc(0,0,t,0,Math.toRad(360),!0)}:o.is("rect")&&(this.paths[r]=function(e){e.rect(0,0,a,s)}))},this))};return t.extend(o.prototype,{getScale:function(){return this.scale},getPathFunc:function(e){return this.paths[e]},getAllShapes:function(){return t.keys(this.paths)},hasShape:function(e){return t.has(this.paths,e)},getImageResource:function(n,r,o,a,s){var u=e('<canvas width="'+r+'" height="'+o+'"></canvas>'),l=u[0].getContext("2d");l.save(),l.clearRect(0,0,r,o),t.isUndefined(a)||(l.fillStyle=a),t.isUndefined(s)||(l.strokeStyle=s);var c=this.getPathFunc(n);null!==c&&(l.scale(r/this.getScale().x,o/this.getScale().y),l.beginPath(),c(l),t.isUndefined(a)||l.fill(),t.isUndefined(s)||l.stroke()),l.restore();var d=new i(u[0].toDataURL());return u.remove(),d}}),new o}),define("modules/page/views/components/ShapeComponentView",["log","jquery","lodash","backbone","modules/page/views/components/AbstractComponentView","modules/page/utils/ShapeLibrary","device","cerosMath"],function(e,t,n,i,r,o,a,s){return r.extend({type:"shape",tagName:"canvas",render:function(){if(!n.isFunction(this.el.getContext))return this;this.scale=o.getScale(),this.startX=0,this.startY=0;var e=this.options.shadow,t=this.options.rotation,i=this.options.border,s=this.options.background,u=this.options.width,l=this.options.height;if("square"==this.options.shape)throw Error("This component view cannot be used for square!");if(!n.isEmpty(e)&&""!==e){if(t&&0!==t){var c=n.isNumber(e.x)?e.x:0,d=n.isNumber(e.y)?e.y:0;t=Math.toRad(t),e.x=c*Math.cos(t)+d*Math.sin(t),e.y=-1*c*Math.sin(t)+d*Math.cos(t)}e.blur=n.isNumber(e.blur)?Math.abs(e.blur):0,e.x=n.isNumber(e.x)?e.x:0,e.y=n.isNumber(e.y)?e.y:0,e.x<0&&(this.options.x-=Math.abs(e.x)+e.blur,this.startX+=Math.abs(e.x)+e.blur),e.y<0&&(this.options.y-=Math.abs(e.y)+e.blur,this.startY+=Math.abs(e.y)+e.blur),u+=Math.abs(e.x)+e.blur,l+=Math.abs(e.y)+e.blur,e.blur>Math.abs(e.x)&&(u+=e.blur-Math.abs(e.x),this.options.x-=e.blur-Math.abs(e.x),this.startX+=e.blur-Math.abs(e.x)),e.blur>Math.abs(e.y)&&(l+=e.blur-Math.abs(e.y),this.options.y-=e.blur-Math.abs(e.y),this.startY+=e.blur-Math.abs(e.y))}!n.isEmpty(i)&&""!==i&&n.isNumber(i.width)&&(u+=2*i.width*this._sizeFactorForPointyShapes()+this._offsetForPointyShapes(i),l+=2*i.width*this._sizeFactorForPointyShapes()+this._offsetForPointyShapes(i),this.options.x-=i.width+this._offsetForPointyShapes(i),this.options.y-=i.width+this._offsetForPointyShapes(i),this.startX+=i.width+this._offsetForPointyShapes(i),this.startY+=i.width+this._offsetForPointyShapes(i)),this.options.allWidth=u,this.options.allHeight=l,r.prototype.render.call(this),!n.isEmpty(s)||!n.isEmpty(i)&&0!==i.width||n.isEmpty(this.options.action)||this.$el.css({"background-color":"white",opacity:0}),this._applyDimensions(u,l),this.el.width=u*(a.retina()?2:1),this.el.height=l*(a.retina()?2:1);var f=this.el.getContext("2d");return f.translate(this.startX,this.startY),a.retina()&&f.scale(2,2),n.isEmpty(i)||""===i||(f.lineWidth=1==i.width?1.0001:i.width,f.strokeStyle=i.color),n.isEmpty(e)||""===e||(f.shadowOffsetX=e.x,f.shadowOffsetY=e.y,f.shadowColor=e.color,f.shadowBlur=e.blur),this.renderBackground(f,i,s,e),this},_applyShadow:function(){},_applyBorder:function(){},_applyBackground:function(){},_sizeFactorForPointyShapes:function(){return"star2"==this.options.shape||"double-arrow"==this.options.shape?2:1},_offsetForPointyShapes:function(e){return"star2"==this.options.shape||"double-arrow"==this.options.shape||"single-arrow"==this.options.shape?e.width:0},renderBackground:function(t,i,r,a){t.save(),(n.isUndefined(this.options.pathData)||n.isNull(this.options.pathData)||""===this.options.pathData)&&(this.path=o.getPathFunc(this.options.shape)),"square"==this.options.shape||(null!==this.path?(t.save(),t.scale(this.options.width/this.scale.x,this.options.height/this.scale.y),t.beginPath(),this.path(t),t.closePath(),t.restore()):e.error("Unsupported shape")),a&&(i&&i.width>0&&t.stroke(),r&&(r.gradient||r.color)&&(t.fillStyle=r.color?r.color:"rgba(0,0,0,1)",t.fill())),t.shadowOffsetX=t.shadowOffsetY=0,t.shadowColor=t.shadowBlur=null,t.save(),t.clip(),r&&r.gradient?this._renderGradient(t,r.gradient):r&&r.color&&(t.fillStyle=r.color,t.fill()),t.restore(),i&&i.width>0&&t.stroke(),t.restore()},_applyPosition:function(e,t,n){var i=this.getApplyPositionTarget();"square"==this.options.shape?r.prototype._applyPosition.call(this,e,t,n):(i.css("left",e+"px"),i.css("top",t+"px"))},_renderGradient:function(e,t){var i=s.calcRotatedLineIntersect(t.angle,this.options.width,this.options.height),r=i.startPt,o=i.endPt,a=e.createLinearGradient(Math.round(r.getX()),Math.round(r.getY()),Math.round(o.getX()),Math.round(o.getY()));n.each(t.stops,n.bind(function(e){a.addColorStop(e.stop,e.color)},this)),e.fillStyle=a,e.fill()}})}),define("modules/page/views/components/HtmlComponentView",["jquery","lodash","backbone","globals","modules/page/views/components/AbstractComponentView"],function(e,t,n,i,r){return r.extend({type:"html",tagName:"div",runEntryAnimations:function(){if(!this.hasCustomHtmlAttached){if(-1!==this.options.customHtml.indexOf("http:")&&"https:"===location.protocol)if(i.previewMode){var t="<p style='background-color:white'>Can't load an insecure resource on a secure page. Please publish your experience or change the embed code to use https.</p>";this.$el.html(t)}else this.$el.html("");else this.$el.empty().html(e.parseHTML(this.options.customHtml,document,!0));this.hasCustomHtmlAttached=!0}r.prototype.runEntryAnimations.call(this)},_applyBorder:function(){},_applyBackground:function(){},_applyShadow:function(){},_applyOpacity:function(){}})}),define("hubspotFormUtils",["lodash","jquery"],function(e,t){var n="data-hubspot-form",i=1e4;return{renderForm:function(r){r.onFormReady=r.onFormReady||e.noop,r.onFormSubmit=r.onFormSubmit||e.noop;var o=null;r.onTimeout&&(o=setTimeout(r.onTimeout,i)),window.hbspt.forms.create({portalId:r.portalId,formId:r.formId,css:r.css,target:"#"+r.domId,onFormReady:function(e,i){o&&clearTimeout(o);var a=t("head style").last();-1!==a.text().indexOf(r.css)&&a.attr(n,r.domId),r.onFormReady(e,i)},onFormSubmit:r.onFormSubmit})},removeStyleTagForDomId:function(e){t("style["+n+"="+e+"]").remove()}}}),define("modules/page/views/components/HubspotFormComponentView",["lodash","jquery","device","hubspotFormUtils","shared/utils/NavigationUtils","modules/page/views/components/AbstractComponentView"],function(e,t,n,i,r,o){return o.extend({type:"hubspot-form",tagName:"div",onAttach:function(){this.renderHubspotForm()},applyChanges:function(e){o.prototype.applyChanges.call(this,e),this.renderHubspotForm()},getContainerDivId:function(){return"hubspot-"+this.options.id.replace("|","_")},getContainerClassName:function(){return"hubspot-"+(this.options.originalObjectId||this.options.id)},renderHubspotForm:function(){this.$el.empty(),i.removeStyleTagForDomId(this.getContainerDivId());var n=t('<div id="'+this.getContainerDivId()+'"></div>');n.addClass(this.getContainerClassName()),this.$el.append(n),i.renderForm({portalId:this.options.hubId,formId:this.options.formId,css:this.options.css,domId:this.getContainerDivId(),onFormSubmit:e.bind(this.handleSubmit,this)})},handleSubmit:function(t){this.doIframeHack(t);var n=this.getModule(),i=this.getValidInteractionsByTrigger(n.INTERACTION_TRIGGERS.SUBMIT);n.trigger(n.publishedEvents.PAGE_COMPONENT_FORM_SUBMITTED,this.addComponentAndClickDataToEvent({formOrigin:"hubspot",formOriginAccountId:this.options.hubId,formOriginFormId:this.options.formId,formOriginFormName:this.options.formName,interactionTriggered:!e.isEmpty(i)})),e.isEmpty(i)||e.each(i,e.bind(function(t){var n="url"===t.action||"page-goto"===t.action||"page-next"===t.action||"page-prev"===t.action;n?e.defer(e.bind(function(){this._triggerClickAction(null,t,!0)},this)):this._triggerClickAction(null,t,!0)},this))},doIframeHack:function(i){if(n.isIos()||n.edge||n.isDesktopSafari()||n.msie){var o=!1,a=null,s=t(i).find("input[name=hs_context]").val();if(!e.isEmpty(s))try{var u=JSON.parse(s),l=r.getLocationWithoutParamsAndPageNumber();u.redirectUrl&&0===u.redirectUrl.indexOf(l)&&(a=u.redirectUrl),o=e.isEmpty(u.redirectUrl)||Boolean(a)}catch(c){}if(o){var d="hubspot-submit";t("#"+d).remove();var f="hubspot-submit",h=t("<iframe></iframe>");h.attr("id",d),h.attr("name",f),h.css({position:"absolute",left:"99999px"}),t(document.body).append(h),t(i).attr("target",f),a&&this.doThankYouMessageHack(i,a)}}},doThankYouMessageHack:function(n,r){var o=window.location.href,a=r+"&submissionGuid=1";window.history.replaceState({},"",a),e.defer(e.bind(function(){t(n).remove(),i.removeStyleTagForDomId(this.getContainerDivId()),i.renderForm({portalId:this.options.hubId,formId:this.options.formId,css:this.options.css,domId:this.getContainerDivId(),onFormReady:function(){window.history.replaceState({},"",o)}})},this))},_isValidInteraction:function(e){var t=["show-fullscreen","share-email","share-facebook","share-twitter","share-pinterest","share-linkedin"];return-1!==t.indexOf(e.action)?!1:"url"===e.action&&e.opensInNewWindow?!1:o.prototype._isValidInteraction.call(this,e)},scaleComponent:function(){var e=this.options.pageView.getScaleContext().ratio,t=this.$("#"+this.getContainerDivId());t.css(this.options.pageView.scaleContext.doBlurryFontFix(e)?{zoom:1/e,transform:"scale("+e+")","transform-origin":"0 0",width:100/e+"%","-moz-transform-origin":"0 0","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0"}:{zoom:"initial",transform:"initial","transform-origin":"initial",width:"initial","-moz-transform-origin":"initial","-webkit-transform-origin":"initial","-ms-transform-origin":"initial"}),o.prototype.scaleComponent.call(this)},_applyBorder:function(){},_applyBackground:function(){},_applyShadow:function(){},_applyOpacity:function(){}})}),define("modules/page/views/components/HotspotComponentView",["jquery","lodash","backbone","modules/page/views/components/AbstractComponentView"],function(e,t,n,i){return i.extend({type:"hotspot",tagName:"div",render:function(){return i.prototype.render.call(this),this.$el.css({"background-color":"white",opacity:0}),this},getOpacity:function(){return 0},_applyBorder:function(){},_applyBackground:function(){},_applyShadow:function(){},_applyOpacity:function(){}})}),define("text!modules/page/templates/hotspot-path.html",[],function(){return'<map name="{{mapName}}">\n    <area shape="poly" coords="{{path}}" />\n</map>\n{{! Setting the src attribute to nothing lets the area map work in Firefox }}\n<img style="width: 100%; height: 100%" usemap="#{{mapName}}" src="#" />'}),define("modules/page/views/components/HotspotPathComponentView",["jquery","lodash","backbone","mustache","cerosMath","modules/page/views/components/AbstractComponentView","text!modules/page/templates/hotspot-path.html"],function(e,t,n,i,r,o,a){var s=100;return o.extend({type:"hotspot-path",tagName:"div",render:function(){var e=this.generateCurveCoords();return this.$el.empty().html(i.render(a,{path:e.join(","),mapName:this.id+"-hotspot-map"})),o.prototype.render.call(this),this.$el.css({"background-color":"white",opacity:0}),this},generateCurveCoords:function(){var e=[],t=this.options.path,n=t[0];e.push(n.x),e.push(n.y);for(var i=1;i<t.length;i++)e=e.concat(this.calculateCoordsForSegment(t[i-1],t[i]));return e=e.concat(this.calculateCoordsForSegment(t[t.length-1],t[0]))},calculateCoordsForSegment:function(e,t){if(this.hasControlPoints(e)||this.hasControlPoints(t)){for(var n=this.getControlPoints(e),i=this.getControlPoints(t),o=[],a=1/s,u=0;1>=u;)o.push(r.evaluateBezierCurve(e.x,n.cx2,i.cx1,t.x,u)),o.push(r.evaluateBezierCurve(e.y,n.cy2,i.cy1,t.y,u)),u=Math.round(1e3*(u+a))/1e3;return o}return[t.x,t.y]},hasControlPoints:function(e){return!(t.isUndefined(e.cx1)||t.isUndefined(e.cy1)||t.isUndefined(e.cx2)||t.isUndefined(e.cy2))},getControlPoints:function(e){return this.hasControlPoints(e)?{cx1:e.cx1,cy1:e.cy1,cx2:e.cx2,cy2:e.cy2}:{cx1:e.x,cy1:e.y,cx2:e.x,cy2:e.y}},_handleClickInteraction:function(t,n,i){(!e(t.currentTarget).is(".hotspot-path")||e(t.target).is("area"))&&o.prototype._handleClickInteraction.call(this,t,n,i)},bindMouseoverInteraction:function(){this.hasHoverInteraction()&&this.$("area").bind("mouseover",t.bind(this._handleMouseOverInteraction,this))},assignCursor:function(){this.hasClickInteraction()||this.options.showHoverCursor?this.$("area").css("cursor","pointer"):this.$("area").css("cursor","inherit")},getOpacity:function(){return 0},_applyBorder:function(){},_applyBackground:function(){},_applyShadow:function(){},_applyOpacity:function(){},_applyRotation:function(){},getHoverArea:function(){var e=t.some(this.options.path,this.hasControlPoints);return e?null:t.map(this.options.path,t.bind(function(e){return{x:e.x+this.options.x,y:e.y+this.options.y}},this))}})}),define("modules/page/views/components/ImageComponentView",["log","jquery","lodash","backbone","device","modules/page/views/components/AbstractComponentView","shared/utils/CerosResourceLoader","shared/utils/WebkitUtils"],function(e,t,n,i,r,o,a,s){return o.extend({type:"image",tagName:"div",image:null,srcOverride:null,dimensionsOverride:!1,initialize:function(){this.$imgEl=null,o.prototype.initialize.call(this),this.imageLoader=this.options.imageLoader},getSrc:function(){return this.srcOverride?this.srcOverride:this.imageLoader?this.imageLoader.getSrc():""},render:function(){return n.isNull(this.$imgEl)&&(this.$imgEl=t("<img/>"),this.$imgEl.css("display","block"),this.hasShadow(this.options.shadow)||(r.isDesktopSafari()&&this.$imgEl.css("transform",s.hardwareAccelerateTransform(this.$el.css("transform"))),r.isIos()&&this.options.fixedPosition&&this.$imgEl.css("transform",s.hardwareAccelerateTransform(this.$el.css("transform")))),this.$el.append(this.$imgEl)),this.dimensionsOverride||this.setDimensionsAsAttributes(this.$imgEl,this.options.width,this.options.height),this.options.altText&&this.$imgEl.attr("alt",this.options.altText),o.prototype.render.call(this),this.imageLoader&&(this.imageLoader.onLowResImageLoaded(this.attachMedia,this),this.imageLoader.onImageLoaded(this.attachMedia,this)),this},_applyShadow:function(e,t){var i=this.getApplyShadowTarget();if(this.hasShadow(e)&&!r.isIE11()){var a={x:n.isNumber(e.x)?e.x:0,y:n.isNumber(e.y)?e.y:0};t&&0!==t&&this._rotateShadowCoordinates(a,t);var s="drop-shadow(";s+=Math.round(a.x)+"px",s+=" "+Math.round(a.y)+"px";var u=r.webkit?4:2;s+=e.blur?" "+Math.round(e.blur/u)+"px":" 0",s+=" "+e.color,s+=")",i.css("-webkit-filter",s),i.css("filter",s);var l="progid:DXImageTransform.Microsoft.Dropshadow(OffX=";l+=Math.round(a.x)+", OffY=",l+=Math.round(a.y)+", Color='",l+=e.color+"')",i.css("filter",l)}else o.prototype._applyShadow.call(this)},getApplyBorderTarget:function(){return this.$imgEl},getApplyShadowTarget:function(){return this.$imgEl},attachMedia:function(){var i=new t.Deferred;if(this.imageLoader){var r=this.imageLoader.getCurrentResource();n.isNull(r)?e.warn("Image should have been added to resource loader during preload"):r.getPromise().done(i.resolve).fail(i.reject)}return this.$imgEl.on("load",i.resolve),this.$imgEl.attr("src",this.getSrc()),i.promise()},_applyBackground:function(){}})}),define("modules/page/views/components/VectorImageComponentView",["log","jquery","lodash","modules/page/views/components/ImageComponentView","VectorImageUtils"],function(e,t,n,i,r){return i.extend({attachMedia:function(){var i=new t.Deferred;if(this.imageLoader){var r=this.imageLoader.getCurrentResource();n.isNull(r)?e.warn("Image should have been added to resource loader during preload"):r.getPromise().done(n.bind(function(e){this.loadImage(e,i,this.$imgEl,this.options.background)},this)).fail(function(){i.reject()})}return i.promise()},loadImage:function(e,t,i,o){e.createObjectURL(o).done(n.bind(function(e){i.on("load",function(){t.resolve(),r.revokeObjectURL(e)}),i.on("error",function(){t.reject(),r.revokeObjectURL(e)}),i.attr("src",e)},this)).fail(function(){t.reject()})}})}),define("modules/page/views/components/LineComponentView",["jquery","lodash","backbone","modules/page/views/components/AbstractComponentView"],function(e,t,n,i){return i.extend({type:"line",tagName:"canvas",render:function(){if(!t.isFunction(this.el.getContext))return this;var e=this.options.shadow,n=0,r=0,o=0,a=0;this.options.x1=this.options.x,this.options.y1=this.options.y,this.options.x=this.options.x1<this.options.x2?this.options.x1:this.options.x2,this.options.y=this.options.y1<this.options.y2?this.options.y1:this.options.y2,this.options.width=Math.abs(this.options.x2-this.options.x1),this.options.height=Math.abs(this.options.y2-this.options.y1),n=this.options.x1-this.options.x,r=this.options.y1-this.options.y,o=this.options.x2-this.options.x,a=this.options.y2-this.options.y,this.options.width<this.options.lineWidth&&(this.options.width+=this.options.lineWidth),this.options.height<this.options.lineWidth&&(this.options.height+=this.options.lineWidth);var s=Math.ceil(this.options.lineWidth/2);e&&this.hasShadow(e)&&(s+=e.blur?e.blur:0,e.x=t.isNumber(e.x)?e.x:0,e.y=t.isNumber(e.y)?e.y:0,e.x<0&&(this.options.x-=Math.abs(e.x),n+=Math.abs(e.x),o+=Math.abs(e.x)),this.options.width+=Math.abs(e.x),e.y<0&&(this.options.y-=Math.abs(e.y),r+=Math.abs(e.y),a+=Math.abs(e.y)),this.options.height+=Math.abs(e.y)),this.options.width+=2*s,this.options.height+=2*s,this.options.x-=s,this.options.y-=s,n+=s,r+=s,o+=s,a+=s,i.prototype.render.call(this),this.setDimensionsAsAttributes(this.$el,this.options.width,this.options.height);var u=this.el.getContext("2d");return u.lineWidth=this.options.lineWidth,u.strokeStyle=this.options.color,e&&this.hasShadow(e)&&(u.shadowOffsetX=e.x,u.shadowOffsetY=e.y,u.shadowColor=e.color,u.shadowBlur=e.blur),u.beginPath(),1===this.options.lineWidth&&u.translate(.5,.5),u.moveTo(n,r),u.lineTo(o,a),u.closePath(),u.stroke(),this},_applyBackground:function(){},_applyRotation:function(){},_applyShadow:function(){}})}),define("modules/page/utils/TextSpanUtil",["log","lodash","jquery"],function(e,t,n){var i=function(e,t,i){var r=[],o=0;if(i&&i.length>0){for(var a=0;a<i.length;a++){var s=i[a];s.index>o&&r.push({underline:t.underline,letterSpacing:t.letterSpacing,index:o,length:s.index-o}),o=s.index+s.length,r.push(n.extend(!0,{underline:t.underline,letterSpacing:t.letterSpacing},s))}return o<e.length&&r.push({underline:t.underline,letterSpacing:t.letterSpacing,index:o,length:e.length-o}),r}return[{underline:t.underline,letterSpacing:t.letterSpacing,index:0,length:e.length}]},r=function(e,t){for(var n=0;n<t.length;n++)if(e>=t[n].index&&e<t[n].index+t[n].length)return n;return-1},o=function(e,t){var n=r(e,t);return-1!=n?t[n]:void 0},a=function(e,i,o){var a=[],s=r(e,o),u=r(e+i-1,o);if(-1!==s&&-1!==u){a=n.extend(!0,[],o.slice(s,u+1));var l=t.first(a),c=t.last(a);e>l.index&&(l.length-=e-l.index,l.index=e),e+i<c.index+c.length&&(c.length=e+i-c.index)}return a};return{padTextSpans:i,findTextSpanForCharIndex:o,findTextSpansForLine:a}}),function(e,t){"undefined"!=typeof exports?t(exports,require("../underscore/underscore")._):"function"==typeof define&&define.amd?define("libs/typesetter/GlyphMetrics",["exports","lodash"],t):t(e,e._)}(this,function(e,t){return e.GlyphMetrics={EMPTY_METRICS:"[]",encode:function(e){if(t.isEmpty(e.glyphMetrics))return this.EMPTY_METRICS;var n="",i=null;return t.each(e.glyphMetrics,function(e){var t=parseFloat(e.x.toFixed(2)),r=parseFloat(e.y.toFixed(2));n+=t+",",r!=i&&(n+=r),n+=",",i=r}),","==n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),"["+n+"]"},decode:function(e,n){var i,r,o,a=JSON.parse(e.replace(/,,/g,",null,").replace(/,]/,",null]")),s=[],u=null,l=a.length/2;for(i=0;l>i;i++){var c=a[2*i],d=a[2*i+1];o={x:c,y:null===d?u:d,ch:n[i]},t.isNumber(d)&&(o.sol=!0),(t.isNumber(a[2*(i+1)+1])||i===l-1)&&(o.eol=!0),s.push(o),null!==d&&(u=d)}var f,h=[];for(i=0;i<s.length;i++)o=s[i],o.sol&&(f=[]),f.push(o),o.eol&&h.push(f);for(i=0;i<h.length;i++){for(r=h[i].length-1;r>0&&(" "===h[i][r].ch||"\n"===h[i][r].ch);)delete h[i][r].eol,r--;h[i][r].eol=!0}return{totalCharacters:s.length,totalLines:h.length,lines:h}}},e.GlyphMetrics}),define("libs/utils/LetterSpacingUtils",[],function(){var e=1e3,t={MIN_LETTER_SPACING_VALUE:-9999,MAX_LETTER_SPACING_VALUE:99999,unitsToEms:function(t){return t/e},unitsToCss:function(e){return t.unitsToEms(e)+"em"},unitsToPixels:function(e,n){return t.unitsToEms(e)*n}};return t}),define("modules/page/views/components/TextComponentView",["log","jquery","lodash","backbone","device","globals","modules/page/views/components/AbstractComponentView","modules/page/utils/TextUtil","modules/page/utils/TextSpanUtil","libs/typesetter/GlyphMetrics","shared/utils/CerosResourceLoader","libs/font/FontVariant","libs/font/FontFamily","modules/page/models/media-loaders/ComponentFontLoader","libs/utils/LetterSpacingUtils"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p){var g=100,m={},v=function(e,t){return e.getCssFamilyName()+":"+t},y=function(e,i){var r=new t.Deferred,o=v(e,i),a=m[o];return n.isUndefined(a)?(r.done(function(e){m[o]=e}),s.measureFontBaselineOffset(e,i,i).then(r.resolve,r.reject),r.promise()):(r.resolve(a),r.promise())};return a.extend({type:"text",tagName:"div",textSpans:null,textContent:null,textUpdatedViaSdk:!1,initialize:function(){a.prototype.initialize.call(this),this.fontLoader=this.options.fontLoader,this.defaultVariant=this._getVariant(this.options.defaultSpan),this.isRerendering=!1},render:function(){return a.prototype.render.call(this),r.webkit&&this.$el.css("-webkit-filter","blur(0px)"),this._applyDimensions(this.options.width,this.options.height),this.setDefaultTextStyle(),this.prepareTextContentAndSpans(),this.allFontsReady=new t.Deferred,this.variantsMeasured=0,this.fontLoader.onVariantLoaded(this.measureBaselineOffsetAndRenderText,this),this.fontLoader.onLoadFail(this.allFontsReady.reject,this.allFontsReady),this},prepareTextContentAndSpans:function(){this.textContent=this._applyTextTransform(this.options.textContent),this.textSpans=u.padTextSpans(this.textContent,this.options.defaultSpan,this.options.textSpans)},setTextFromSDK:function(e){e=e||"",this.textUpdatedViaSdk=!0,this.options.textContent=e;var t,n;this.textSpans&&this.textSpans.length>0&&(this.textSpans[0].fontColor&&(t=this.textSpans[0].fontColor),this.textSpans[0].variant&&(n=this.textSpans[0].variant)),this.options.textSpans=[],this.prepareTextContentAndSpans(),this.textSpans&&this.textSpans.length>0&&(t&&(this.textSpans[0].fontColor=t),n&&(this.textSpans[0].variant=n)),"resolved"===this.allFontsReady.state()&&this._layoutContent(),this.$el.css("columns","unset")},measureBaselineOffsetAndRenderText:function(e){y(e,this.options.defaultSpan.fontSize).done(n.bind(function(){this.variantsMeasured++,this.variantsMeasured===this.fontLoader.getAllVariants().length&&this.allFontsReady.resolve()},this))},_getPadding:function(){return{left:n.isNumber(this.options.paddingLeft)?this.options.paddingLeft:0,right:n.isNumber(this.options.paddingRight)?this.options.paddingRight:0,top:n.isNumber(this.options.paddingTop)?this.options.paddingTop:0,bottom:n.isNumber(this.options.paddingBottom)?this.options.paddingBottom:0}},_getColumnWidth:function(){var e=this._getPadding();return(this.options.width-e.left-e.right-(this.options.columns-1)*this.options.columnGap)/this.options.columns},_getVariant:function(e){var t=s.resolveFont(e.fontName,e.variant,this.options.cerosFontManifest,this.options.fontSourceApi),n=new f({family:e.fontName,api:this.options.fontSourceApi});t.fontFamily=n;var i=new d(e.variant,t);return i},_getDefaultBaselineOffset:function(){var e=0,t=this._getVariant(this.options.defaultSpan),i=v(t,this.options.defaultSpan.fontSize);return t&&n.has(m,i)&&(e=m[i]),e},_layoutContent:function(){var t=this._getDefaultBaselineOffset();this.defaultVariant=this._getVariant(this.options.defaultSpan);var i=this.options.glyphMetrics===l.EMPTY_METRICS&&""!==this.textContent;if(!n.isString(this.options.glyphMetrics)||i)return o.previewMode||this.textUpdatedViaSdk||e.warn("no glyph metrics! using paragraph layout..."),void this._layoutParagraphs(null,t);this.$el.css("lineHeight",this.options.defaultSpan.fontSize+"px"),this.options.showOverflow===!0?this.$el.css("overflow","visible"):this.$el.css("overflow","hidden"),this.$el.empty();var r=l.decode(this.options.glyphMetrics,this.textContent);this.textUpdatedViaSdk&&!this._useParagraphLayout(r)&&(t-=(this.options.leading-this.options.defaultSpan.fontSize)/2),this.textUpdatedViaSdk||this._useParagraphLayout(r)?this._layoutParagraphs(null,t):this._useCharacterLayout(r)?this._layoutGlyphs(r,t):this._layoutLines(r,t)},_useParagraphLayout:function(e){return e.totalLines>=250},_useCharacterLayout:function(e){return e.totalCharacters<=250},_applyTextTransform:function(e){switch(this.options.textTransform){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}return e},_applyStyle:function(e,t){var i=n.pick(e,["position","top","left"]),r=n.extend({},this.options.defaultSpan,t),o=this._getVariant(r);t.fontColor&&(i.color=t.fontColor),n.isUndefined(t.variant)||(o.getFontWeight()!==this.defaultVariant.getFontWeight()&&(i["font-weight"]=o.getFontWeight()),o.getFontStyle()!==this.defaultVariant.getFontStyle()&&(i["font-style"]=o.getFontStyle()),o.isUploaded()&&o.getCssFamilyName()!==this.defaultVariant.getFontStyle()&&(i["font-family"]=o.getCssFamilyName())),t.underline&&(i["text-decoration"]="underline"),t.letterSpacing&&(i["letter-spacing"]=p.unitsToCss(t.letterSpacing));var a="<span";return n.isEmpty(i)||(a+=' style="',n.each(i,function(e,t){a+=t+":"+e+";"}),a+='"'),a+=">"+e.content+"</span>"},_getNumSpaces:function(e){return n.reduce(e,function(e,t){return e+(" "===t.ch||"\n"===t.ch?1:0)},0)},_layoutGlyphsChars:function(e,t,i,r){for(var o=[],a=0;a<e.length;a++){var s=t+a,l=e[a];if("\n"!==l.ch&&!n.isUndefined(l.ch)){var c=u.findTextSpanForCharIndex(s,this.textSpans),d=" "===l.ch?"&nbsp;":l.ch,f=s===c.index+c.length-1,h=a<e.length-1&&n.isUndefined(e[a+1].ch);!c.underline||f||l.eol||h||(d+="&nbsp"),o.push(this._applyStyle({content:d,top:l.y+i+r.top+"px",left:l.x+r.left+"px"},c))}}return o},_layoutGlyphs:function(e,t){for(var i=this._getPadding(),r=0,o=[],a=0;a<e.lines.length;a++){var s=e.lines[a],u=r;if(r+=s.length,0!==s.length&&(1!==s.length||!n.isUndefined(s[0].ch))){var l=this._getNumSpaces(s);l!=s.length&&(o=o.concat(this._layoutGlyphsChars(s,u,t,i)))}}this.$el.append(o.join(""))},_applyTextSpans:function(e,t){return n.map(e,n.bind(function(e){var n=this.textContent.substr(e.index,e.length);n=this._escapeHtmlSpecialCharacters(n);var i={content:n,position:"relative"};return t&&(i.left=t),this._applyStyle(i,e)},this)).join("")},_escapeHtmlSpecialCharacters:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\s/g,"&nbsp;")},_kernLongLines:function(){var e=String.fromCharCode(160),i=this._getColumnWidth();this.$("span.text-line").each(n.bind(function(r,o){o=t(o);var a=o.width();if(a>i){var s=a-i,l=t(o).find("span"),c=n.reduce(l,function(e,n){return e+t(n).text()},""),d=c.trim().split(e),f=s/(d.length-1),h=-1*Math.ceil(s),p=parseInt(t(o).attr("index"),10);o.empty();for(var g,m=c.lastIndexOf(e);m>0;){g=c.lastIndexOf(e,m-1);var v=u.findTextSpansForLine(p+g+1,m-g,this.textSpans),y=0>g?"0px":h+"px",_=this._applyTextSpans(v,y);o.prepend(_),h+=f,m=g}}},this))},_layoutLines:function(e,t){var i=this._getPadding();this.chIndex=0;for(var r=['<div style="width:110%;position:relative">'],o=0;o<e.lines.length;o++){var a=e.lines[o];if(0!==a.length){for(var s="",l=!1,c=this.chIndex,d=0,f=0;f<a.length;f++)n.isUndefined(a[f].ch)||(s+=a[f].ch,l="\n"===a[f].ch,d++);if(s.trim().length>0){var h=u.findTextSpansForLine(c,d,this.textSpans),p=this._applyTextSpans(h),g=a[0].y+t+i.top+"px",m=a[0].x+i.left+"px";r.push('<span class="text-line" index="'+c+'" style="top:'+g+";left:"+m+'">'+p+"</span>")}l&&r.push("<br/>"),this.chIndex+=d}}r.push("</div>"),this.$el.append(r.join("")),this._onReflow(this.$("span:first"),n.bind(function(){this._kernLongLines()},this))},_layoutParagraphs:function(e,t){this.options.textTransform&&this.$el.css("textTransform",this.options.textTransform),this.$el.empty(),n.each(this.textSpans,n.bind(function(e){for(var i=this.textContent.substr(e.index,e.length),r=i.split("\n"),o=[],a=0;a<r.length;a++){var s=n.escape(r[a]);o.push(this._applyStyle({content:s,position:"relative",top:t+"px"},e))}this.$el.append(o.join("<br />"))},this)),this.options.justify&&this.options.justify.match(/(left|right|center|justify)/)&&this.$el.css("textAlign",this.options.justify),this.options.columns&&(this.$el.css("columnCount",this.options.columns),this.$el.css("columnWidth","auto"),this.$el.css("columnFill","auto"),this.options.columnGap?this.$el.css("columnGap",this.options.columnGap+"px"):this.$el.css("columnGap","0px")),this.$el.css("lineHeight",this.options.leading+"px"),this.$el.css("padding",0),n.each(["Top","Right","Bottom","Left"],n.bind(function(e){this.options["padding"+e]&&(this.$el.css("padding"+e,parseInt(this.options["padding"+e],10)+"px"),("Top"==e||"Bottom"==e)&&(this.options.height-=parseInt(this.options["padding"+e],10)),("Left"==e||"Right"==e)&&(this.options.width-=parseInt(this.options["padding"+e],10)))},this)),this._applyDimensions(this.options.width,this.options.height)},_onReflow:function(e,t){if(!n.isEmpty(e)){var i=function(){e.width()>0?t():setTimeout(i,1)};setTimeout(i,1)}},applyChanges:function(e){this.fontLoader=new h(e,this.options.cerosFontManifest),this.fontLoader.load(),a.prototype.applyChanges.call(this,e)},attachMedia:function(){return this.fontLoader.loadNow(),this.allFontsReady.always(n.bind(this._applyDefaultFont,this)),this.allFontsReady.always(n.bind(this._layoutContent,this)),this.allFontsReady.promise()},_applyDefaultFont:function(){var e=this._getVariant(this.options.defaultSpan).getCssFamilyName(),t=s.formatFamilyNameForCSS(e);this.$el.css("fontFamily",t)},setDefaultTextStyle:function(){var e=this.options.defaultSpan,t=this._getVariant(e);this.$el.css("fontSize",e.fontSize+"px"),this.$el.css("textTransform","none"),this.$el.css("color",e.fontColor),this.$el.css("fontWeight",t.getFontWeight()),this.$el.css("fontStyle",t.getFontStyle())},scaleComponent:function(){this.rerenderByTogglingVisibility()},rerenderByTogglingVisibility:n.debounce(function(){if(!this.isRerendering){this.isRerendering=!0;var e=this.$el.css("display");this.$el.css("display","none"),n.delay(n.bind(function(){this.$el.css("display",e),this.isRerendering=!1},this),1)}},g)})}),function(e){define("dashjs",[],function(){return function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var i={};i.encode=function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);
128>i?t.push(i):2048>i?(t.push(192|i>>6),t.push(128|63&i)):65536>i?(t.push(224|i>>12),t.push(128|63&i>>6),t.push(128|63&i)):(t.push(240|i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i))}return t},i.decode=function(e){for(var t=[],n=0;n<e.length;){var i=e[n++];128>i||(224>i?(i=(31&i)<<6,i|=63&e[n++]):240>i?(i=(15&i)<<12,i|=(63&e[n++])<<6,i|=63&e[n++]):(i=(7&i)<<18,i|=(63&e[n++])<<12,i|=(63&e[n++])<<6,i|=63&e[n++])),t.push(String.fromCharCode(i))}return t.join("")};var r={};!function(e){var t=function(t){for(var n=0,i=[],r=0|t.length/3;0<r--;){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,i.push(e.charAt(63&o>>18)),i.push(e.charAt(63&o>>12)),i.push(e.charAt(63&o>>6)),i.push(e.charAt(63&o))}if(2==t.length-n){var o=(t[n]<<16)+(t[n+1]<<8);i.push(e.charAt(63&o>>18)),i.push(e.charAt(63&o>>12)),i.push(e.charAt(63&o>>6)),i.push("=")}else if(1==t.length-n){var o=t[n]<<16;i.push(e.charAt(63&o>>18)),i.push(e.charAt(63&o>>12)),i.push("==")}return i.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,i=[],r=0|e.length/4;0<r--;){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];i.push(255&o>>16),i.push(255&o>>8),i.push(255&o),t+=4}return i&&("="==e.charAt(t-2)?(i.pop(),i.pop()):"="==e.charAt(t-1)&&i.pop()),i},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")},r.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},r.encodeASCII=function(e){var n=u.encode(e);return t(n)},r.decodeASCII=function(e){var t=o(e);return u.decode(t)},r.encode=function(e){var n=i.encode(e);return t(n)},r.decode=function(e){var t=o(e);return i.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),"undefined"!=typeof n&&(n.decode=r.decode,n.decodeArray=r.decodeArray)},{}],2:[function(e,t,n){!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},i=15,r=32,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},d=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,i,r,o){this.uchar=e||" ",this.penState=new f(t,n,i,r,o)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;r>e;e++)this.chars.push(new h);this.pos=0,this.currPenState=new f};p.prototype={equals:function(e){for(var t=!0,n=0;r>n;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;r>t;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;r>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>r&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=r)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;t+1>n;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=r?void c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;r>t;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;r>n;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var g=function(){this.rows=[];for(var e=0;i>e;e++)this.rows.push(new p);this.currRow=i-1,this.nrRollUpRows=null,this.reset()};g.prototype={reset:function(){for(var e=0;i>e;e++)this.rows[e].clear();this.currRow=i-1},equals:function(e){for(var t=!0,n=0;i>n;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;i>t;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;i>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var i=e.indent,r=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void c.log("DEBUG","roll_up but nrRollUpRows not set yet");c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,o=0;i>o;o++){var a=this.rows[o].getTextString();a&&(r=o+1,t.push(e?"Row "+r+': "'+a+'"':a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var m=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new g,this.nonDisplayedMemory=new g,this.lastOutputScreen=new g,this.currRollUpRow=this.displayedMemory.rows[i-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};m.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[i-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var v=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new m(1,t),new m(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};v.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,i,r,o=!1;this.lastTime=e,c.setTime(e);for(var a=0;a<t.length;a+=2)if(i=127&t[a],r=127&t[a+1],0!==i||0!==r){if(c.log("DATA","["+d([t[a],t[a+1]])+"] -> ("+d([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(o=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else c.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+d([i,r])+" orig: "+d([t[a],t[a+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,i=(20===e||28===e)&&t>=32&&47>=t,r=(23===e||31===e)&&t>=33&&35>=t;if(!i&&!r)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+d([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var o=this.channels[n-1];return 20===e||28===e?32===t?o.cc_RCL():33===t?o.cc_BS():34===t?o.cc_AOF():35===t?o.cc_AON():36===t?o.cc_DER():37===t?o.cc_RU(2):38===t?o.cc_RU(3):39===t?o.cc_RU(4):40===t?o.cc_FON():41===t?o.cc_RDC():42===t?o.cc_TR():43===t?o.cc_RTD():44===t?o.cc_EDM():45===t?o.cc_CR():46===t?o.cc_ENM():47===t&&o.cc_EOC():o.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&t>=32&&47>=t){if(n=17===e?1:2,n!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[n-1];return i.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+d([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,i=null,r=(e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t,l=(16===e||24===e)&&t>=64&&95>=t;if(!r&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=23>=e?1:2,i=t>=64&&95>=t?1===n?o[e]:s[e]:1===n?a[e]:u[e];var c=this.interpretPAC(i,t),d=this.channels[n-1];return d.setPAC(c),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1===(1&n),13>=n?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:15>=n?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},parseChars:function(e,t){var i=null,r=null,o=null;if(e>=25?(i=2,o=e-8):(i=1,o=e),o>=17&&19>=o){var a=t;a=17===o?t+80:18===o?t+112:t+144,c.log("INFO","Special char '"+n(a)+"' in channel "+i),r=[a]}else e>=32&&127>=e&&(r=0===t?[e]:[e,t]);if(r){var s=d(r);c.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},parseBackgroundAttributes:function(e,t){var n,i,r,o,a=(16===e||24===e)&&t>=32&&47>=t,s=(23===e||31===e)&&t>=45&&47>=t;return a||s?(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=l[i],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=24>e?1:2,o=this.channels[r-1],o.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0):!1},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var y=function(e,t,n){for(var i=0,r=t,o=0,a=[],s=function(e,t,n,i){if(4!==e||8>t)return null;var r=n.getUint8(i),o=n.getUint16(i+1),a=n.getUint32(i+3),s=n.getUint8(i+7);return 181==r&&49==o&&1195456820==a&&3==s};t+n>r;){if(i=e.getUint32(r),o=31&e.getUint8(r+4),6===o)for(var u=r+5,l=-1;r+4+i-1>u;){l=0;for(var c=255;255===c;)c=e.getUint8(u),l+=c,u++;var d=0;for(c=255;255===c;)c=e.getUint8(u),d+=c,u++;s(l,d,e,u)&&a.push([u,d]),u+=d}r+=i+4}return a},_=function(e,t){var n=t[0],i=[[],[]];n+=8;var r=31&e.getUint8(n);n+=2;for(var o=0;r>o;o++){var a=e.getUint8(n),s=4&a,u=3&a;n++;var l=e.getUint8(n);n++;var c=e.getUint8(n);n++,s&&(127&l)+(127&c)!==0&&(0===u?(i[0].push(l),i[0].push(c)):1===u&&(i[1].push(l),i[1].push(c)))}return i};e.logger=c,e.PenState=f,e.CaptionScreen=g,e.Cea608Parser=v,e.findCea608Nalus=y,e.extractCea608DataFromRange=_}("undefined"==typeof n?{}:n)},{}],3:[function(e,t,n){function i(e){var t,n,i;for(t=[],i=0,n=e.length;n>i;i+=1)t.push(e[i].isRoot?"root":e[i].name);var r=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var i,o,a,s,u;if(null!==e&&0!==e.length)for(i=0,o=e.length;o>i;i+=1)a=e[i],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=n[a.name],"object"==typeof s&&"object"==typeof u?r(s,u):n[a.name]=null!=a.mergeFunction?a.mergeFunction(s,u):s+u):n[a.name]=t[a.name])},a=function u(e,t){var n,i,r,a,s,l,c,d=e;if(null!==d.children&&0!==d.children.length)for(n=0,i=d.children.length;i>n;n+=1)if(l=d.children[n],t.hasOwnProperty(l.name))if(l.isArray)for(s=t[l.name+"_asArray"],r=0,a=s.length;a>r;r+=1)c=s[r],o(d.properties,t,c),u(l,c);else c=t[l.name],o(d.properties,t,c),u(l,c)},s=function l(n){var i,r,o,s,u,c,d;if(null===n)return n;if("object"!=typeof n)return n;for(i=0,r=t.length;r>i;i+=1)"root"===t[i]&&(u=e[i],c=n,a(u,c));for(s in n)if(n.hasOwnProperty(s)&&"__children"!=s){if(o=t.indexOf(s),-1!==o)if(u=e[o],u.isArray)for(d=n[s+"_asArray"],i=0,r=d.length;r>i;i+=1)c=d[i],a(u,c);else c=n[s],a(u,c);l(n[s])}return n};return{run:s}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i,t.exports=n["default"]},{}],4:[function(e,t,n){function i(e){function t(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}function n(){}function i(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function r(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function a(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return r!=e.length}function s(t,n,i){switch(e.arrayAccessForm){case"property":t[n+"_asArray"]=t[n]instanceof Array?t[n]:[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&a(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function u(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";r=0+("-"==o?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function l(t,n,i){if(e.datetimeAccessFormPaths.length>0){var r=i.split(".#")[0];return a(e.datetimeAccessFormPaths,t,n,r)?u(t):t}return t}function c(t,n,i,r){return n==C.ELEMENT_NODE&&e.xmlElementsFilter.length>0?a(e.xmlElementsFilter,t,i,r):!0}function d(t,n){if(t.nodeType==C.DOCUMENT_NODE){for(var o=new Object,a=t.childNodes,u=0;u<a.length;u++){var f=a.item(u);if(f.nodeType==C.ELEMENT_NODE)if(e.ignoreRoot)o=d(f);else{o={};var h=i(f);o[h]=d(f)}}return o}if(t.nodeType==C.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var p=[],a=t.childNodes,u=0;u<a.length;u++){var f=a.item(u),h=i(f);if(f.nodeType!=C.COMMENT_NODE){var g=n+"."+h;if(c(o,f.nodeType,h,g))if(o.__cnt++,null==o[h]){var m=d(f,g);if("#text"!=h||/[^\s]/.test(m)){var v={};v[h]=m,p.push(v)}o[h]=m,s(o,h,g)}else{null!=o[h]&&(o[h]instanceof Array||(o[h]=[o[h]],s(o,h,g)));var m=d(f,g);if("#text"!=h||/[^\s]/.test(m)){var v={};v[h]=m,p.push(v)}o[h][o[h].length]=m}}}o.__children=p;for(var y=i(t),_=0;_<t.attributes.length;_++){var b=t.attributes.item(_);o.__cnt++;for(var T=b.value,w=0,E=e.matchers.length;E>w;w++){var S=e.matchers[w];S.test(b,y)&&(T=S.converter(b.value))}o[e.attributePrefix+b.name]=T}var P=r(t);return null!=P&&""!=P&&(o.__cnt++,o.__prefix=P),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=l(o.__text,h,n+"."+h)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}return t.nodeType==C.TEXT_NODE||t.nodeType==C.CDATA_SECTION_NODE?t.nodeValue:void 0}function f(t,n,i,r){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=t[u];e.escapeMode&&(l=o(l)),a+=" "+u.substr(e.attributePrefix.length)+"=",a+=e.useDoubleQuotes?'"'+l+'"':"'"+l+"'"}return a+=r?"/>":">"}function h(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function p(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(t,n){return"property"==e.arrayAccessForm&&p(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function?!0:!1}function m(e){var t=0;if(e instanceof Object)for(var n in e)g(e,n)||t++;return t}function v(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||a(e.jsonPropertiesFilter,t,n,i)}function y(t){var n=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function _(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(n+=e.escapeMode?o(t.__text):t.__text),n}function b(t){var n="";return t instanceof Object?n+=_(t):null!=t&&(n+=e.escapeMode?o(t):t),n}function T(e,t){return""===e?t:e+"."+t}function w(e,t,n,i){var r="";if(0==e.length)r+=f(e,t,n,!0);else for(var o=0;o<e.length;o++)r+=f(e[o],t,y(e[o]),!1),r+=E(e[o],T(i,t)),r+=h(e[o],t);return r}function E(e,t){var n="",i=m(e);if(i>0)for(var r in e)if(!g(e,r)&&(""==t||v(e,r,T(t,r)))){var o=e[r],a=y(o);if(null==o||void 0==o)n+=f(o,r,a,!0);else if(o instanceof Object)if(o instanceof Array)n+=w(o,r,a,t);else if(o instanceof Date)n+=f(o,r,a,!1),n+=o.toISOString(),n+=h(o,r);else{var s=m(o);s>0||null!=o.__text||null!=o.__cdata?(n+=f(o,r,a,!1),n+=E(o,T(t,r)),n+=h(o,r)):n+=f(o,r,a,!0)}else n+=f(o,r,a,!1),n+=b(o),n+=h(o,r)}return n+=b(e)}var S="1.2.0";e=e||{},t(),n();var C={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var i=new window.DOMParser,r=null;if(!t)try{r=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(o){r=null}try{n=i.parseFromString(e,"text/xml"),null!=r&&n.getElementsByTagNameNS(r,"parsererror").length>0&&(n=null)}catch(o){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?u(e):e},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return E(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return S}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i,t.exports=n["default"]},{}],5:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(52),o=i(r),a=e(107),s=i(a),u=e(76),l=i(u),c=e(54),d=i(c),f=e(11),h="undefined"!=typeof window&&window||t,p=h.dashjs;p||(p=h.dashjs={}),p.MediaPlayer=o["default"],p.Protection=s["default"],p.MetricsReporting=l["default"],p.MediaPlayerFactory=d["default"],p.Version=f.getVersionString(),n["default"]=p,n.MediaPlayer=o["default"],n.Protection=s["default"],n.MetricsReporting=l["default"],n.MediaPlayerFactory=d["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{107:107,11:11,52:52,54:54,76:76}],6:[function(e,t,n){var i={};i.parseBuffer=function(e){return new r(e).parse()},i.addBoxParser=function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxParsers[e]=t)},i.Utils={},i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var i=[],r=0;if("utf-8"===n)for(;r<e.byteLength;){var o=e.getUint8(r++);128>o||(224>o?(o=(31&o)<<6,o|=63&e.getUint8(r++)):240>o?(o=(15&o)<<12,o|=(63&e.getUint8(r++))<<6,o|=63&e.getUint8(r++)):(o=(7&o)<<18,o|=(63&e.getUint8(r++))<<12,o|=(63&e.getUint8(r++))<<6,o|=63&e.getUint8(r++))),i.push(String.fromCharCode(o))}else for(;r<e.byteLength;)i.push(String.fromCharCode(e.getUint8(r++)));return i.join("")},"undefined"!=typeof n&&(n.parseBuffer=i.parseBuffer,n.addBoxParser=i.addBoxParser,n.Utils=i.Utils),i.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var r=function(e){this._raw=new DataView(e),this._cursor=new i.Cursor,this.boxes=[]};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var n=[];return r._sweep.call(this,e,n,t),n},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if("undefined"==typeof e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var i in this.boxes){if(t.length&&n)return;r._sweep.call(this.boxes[i],e,t,n)}};var o=function(){this._cursor=new i.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),i=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t=null;switch(e){case 8:t=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:var n=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset),i=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);t=(n<<8)+i;break;case 32:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),i=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},o.prototype._readString=function(e){for(var t="",n=0;e>n;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0==t)break;e+=String.fromCharCode(t)}return e},o.prototype._readTemplate=function(e){var t=this._readUint(e/2),n=this._readUint(e/2);return t+n/Math.pow(2,e/2)},o.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._boxParsers={},o.prototype._boxParsers.avc1=function(){this.version=this._readUint(16),this.revision_level=this._readUint(16),this.vendor=this._readUint(32),this.temporal_quality=this._readUint(32),this.spatial_quality=this._readUint(32),this.width=this._readUint(16),this.height=this._readUint(16),this.horizontal_resolution=this._readUint(32),this.vertical_resolution=this._readUint(32),this.data_size=this._readUint(32),this.frame_count=this._readUint(16),this.compressor_name=this._readUint(32),this.depth=this._readUint(16),this.color_table_id=this._readUint(16)},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){o.prototype._boxParsers[e]=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))}}),o.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},o.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))
},o.prototype._boxParsers.free=o.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},o.prototype._boxParsers.ftyp=o.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},o.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},o.prototype._boxParsers.mdat=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},o.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode((e>>10&31)+96,(e>>5&31)+96,(31&e)+96),this.pre_defined=this._readUint(16)},o.prototype._boxParsers.mehd=function(){this._parseFullBox(),this.fragment_duration=this._readUint(1==this.version?64:32)},o.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},o.prototype._boxParsers.mfro=function(){this._parseFullBox(),this.mfra_size=this._readUint(32)},o.prototype._boxParsers.mp4a=function(){this.reserved1=[this._readUint(32),this._readUint(32)],this.channelcount=this._readUint(16),this.samplesize=this._readUint(16),this.pre_defined=this._readUint(16),this.reserved2=this._readUint(16),this.sample_rate=this._readUint(32)},o.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.pre_defined=[];for(var e=0;6>e;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},o.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=i.Utils.dataViewToString(e)},o.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0==this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},n=this._readUint(32);t.reference_type=n>>31&1,t.referenced_size=2147483647&n,t.subsegment_duration=this._readUint(32);var i=this._readUint(32);t.starts_with_SAP=i>>31&1,t.SAP_type=i>>28&7,t.SAP_delta_time=268435455&i,this.references.push(t)}},o.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];for(var n=0;n<t.ranges_count;n++){var i={};i.level=this._readUint(8),i.range_size=this._readUint(24),t.ranges.push(i)}this.subsegments.push(t)}},o.prototype._boxParsers.stsd=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++)this.entries.push(o.parse(this))},o.prototype._boxParsers.subs=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.samples_with_subsamples=[];for(var e=0,t=0;t<this.entry_count;t++){var n=this._readUint(32);e+=n;var i=this._readUint(16);if(i>0){for(var r={nr:e,subsamples:[]},o=0;i>o;o++){var a={};a.size=this._readUint(1&this.version?32:16),a.priority=this._readUint(8),a.discardable=this._readUint(8),a.codec_specific_parameters=this._readUint(32),r.subsamples.push(a)}this.samples_with_subsamples.push(r)}}},o.prototype._boxParsers.tfdt=function(){this._parseFullBox(),this.baseMediaDecodeTime=this._readUint(1==this.version?64:32)},o.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},o.prototype._boxParsers.tfra=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this._packed=this._readUint(32),this.reserved=this._packed>>>6,this.length_size_of_traf_num=(this._packed&&0xffff00000000)>>>4,this.length_size_of_trun_num=(this._packed&&4294901760)>>>2,this.length_size_of_sample_num=this._packed&&255,this.number_of_entry=this._readUint(32),this.entries=[];for(var e=0;e<this.number_of_entry;e++){var t={};1==this.version?(t.time=this._readUint(64),t.moof_offset=this._readUint(64)):(t.time=this._readUint(32),t.moof_offset=this._readUint(32)),t.traf_number=this._readUint(8*(this.length_size_of_traf_num+1)),t.trun_number=this._readUint(8*(this.length_size_of_trun_num+1)),t.sample_number=this._readUint(8*(this.length_size_of_sample_num+1)),this.entries.push(t)}},o.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.width=this._readUint(32),this.height=this._readUint(32)},o.prototype._boxParsers.trex=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this.default_sample_description_index=this._readUint(32),this.default_sample_duration=this._readUint(32),this.default_sample_size=this._readUint(32),this.default_sample_flags=this._readUint(32)},o.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(t.sample_composition_time_offset=0==this.version?this._readUint(32):this._readInt(32)),this.samples.push(t)}},o.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=i.Utils.dataViewToString(e)},o.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=i.Utils.dataViewToString(e)},o.prototype._boxParsers.vtte=function(){}},{}],7:[function(e,t,n){var i=n.decimalAdjust=function(e,t,n){return"undefined"==typeof n||0===+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!==0?0/0:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))};t.exports={round10:function(e,t){return i("round",e,t)},floor10:function(e,t){return i("floor",e,t)},ceil10:function(e,t){return i("ceil",e,t)}},t.exports.polyfill=function(){Math.round10||(Math.round10=t.exports.round10),Math.floor10||(Math.floor10=t.exports.floor10),Math.ceil10||(Math.ceil10=t.exports.ceil10)}},{}],8:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){c=!0,d=!0,f=(new Date).getTime()}function t(e){d=e}function n(e){c=e}function i(){return c}function r(){var e="",t=null;d&&(t=(new Date).getTime(),e+="["+(t-f)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),c&&console.log(e),s.trigger(u["default"].LOG,{message:e})}var o=this.context,s=a["default"](o).getInstance(),l=void 0,c=void 0,d=void 0,f=void 0;return l={log:r,setLogTimestampVisible:t,setLogToBrowserConsole:n,getLogToBrowserConsole:i},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="Debug",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,9:9}],9:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?s:arguments[3];if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(i(e,t,n)>=0)){o[e]=o[e]||[];var a={callback:t,scope:n,priority:r},u=o[e].some(function(t,n){return r>t.priority?(o[e].splice(n,0,a),!0):void 0});u||o[e].push(a)}}function t(e,t,n){if(e&&t&&o[e]){var r=i(e,t,n);0>r||o[e].splice(r,1)}}function n(e,t){if(e&&o[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,o[e].forEach(function(e){return e.callback.call(e.scope,t)})}}function i(e,t,n){var i=-1;return o[e]?(o[e].some(function(e,r){return e.callback!==t||n&&n!==e.scope?void 0:(i=r,!0)}),i):i}function r(){o={}}var o={},a={on:e,off:t,trigger:n,reset:r};return a}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=0,u=5e3;r.__dashjs_factory_name="EventBus";var l=a["default"].getSingletonFactory(r);l.EVENT_PRIORITY_LOW=s,l.EVENT_PRIORITY_HIGH=u,n["default"]=l,t.exports=n["default"]},{10:10}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t,n,i){var r=a(i);!r[e]&&t&&(r[e]={instance:t,override:n})}function t(e,t){for(var n in l){var i=l[n];if(i.context===e&&i.name===t)return i.instance}return null}function n(e,t,n){for(var i in l){var r=l[i];if(r.context===e&&r.name===t)return void(l[i].instance=n)}l.push({name:t,context:e,instance:n})}function i(e){return function(t){return void 0===t&&(t={}),{create:function(){return o(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function r(e){return function(n){var i=void 0;return void 0===n&&(n={}),{getInstance:function(){return i||(i=t(n,e.__dashjs_factory_name)),i||(i=o(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:i})),i}}}}function o(e,t,n,i){var r=a(n),o=r[e];if(o){var u=o.instance;if(!o.override)return u.apply({context:n,factory:s},i);u=u.apply({context:n,factory:s,parent:t},i);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function a(e){var t=void 0;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:r,getClassFactory:i}}();n["default"]=i,t.exports=n["default"]},{}],11:[function(e,t,n){function i(){return r}Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=i;var r="2.4.1"},{}],12:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(14),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{14:14}],13:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(12),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{12:12}],14:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=t?t.override:!1,i=t?t.publicOnly:!1;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();n["default"]=o,t.exports=n["default"]},{}],15:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(e){e&&e.dashManifestModel&&(D=e.dashManifestModel)}function t(){L=[],N={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function i(e){return N?N[e.streamInfo.id][e.index]:null}function r(e){for(var t=L.length,n=0;t>n;n++){var i=L[n];if(e.id===i.id)return i}return null}function o(e,t){var n=new s["default"],i=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],r=D.getRepresentationFor(t.index,i);return n.id=t.id,n.quality=t.index,n.bandwidth=D.getBandwidth(r),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:0/0),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=a(e,t.adaptation),n}function a(e,t){var n,i=new l["default"],r=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return i.id=t.id,i.index=t.index,i.type=t.type,i.streamInfo=c(e,t.period),i.representationCount=D.getRepresentationCount(r),i.lang=D.getLanguageForAdaptation(r),n=D.getViewpointForAdaptation(r),i.viewpoint=n?n.value:void 0,i.accessibility=D.getAccessibilityForAdaptation(r).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof _["default"]&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n}),i.audioChannelConfiguration=D.getAudioChannelConfigurationForAdaptation(r).map(function(e){return e.value}),i.roles=D.getRolesForAdaptation(r).map(function(e){return e.value}),i.codec=D.getCodec(r),i.mimeType=D.getMimeType(r),i.contentProtection=D.getContentProtectionData(r),i.bitrateList=D.getBitrateListForAdaptation(r),i.contentProtection&&i.contentProtection.forEach(function(e){e.KID=D.getKID(e)}),i.isText=D.getIsTextTrack(i.mimeType),i}function u(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function c(e,t){var n=new d["default"],i=1;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=f(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<i,n.isFirst=1===e.Period_asArray.length||D.getRegularPeriods(e,D.getMpd(e))[0].id===t.id,n}function f(e,t){var n=new h["default"];return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=D.getDuration(e),n.isDynamic=D.getIsDynamic(e),n}function p(e,t,n){var i=D.getAdaptationForType(e,t.index,n,t);if(!i)return null;var o=r(t),s=o.id,u=D.getIndexForAdaptation(i,e,t.index);return N[s]=N[s]||D.getAdaptationsForPeriod(e,o),a(e,N[s][u])}function m(e,t,n){var i,o,s,l,c,d,f=r(t),h=f.id,p=D.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),g=[];if(!p)return g;for(N[h]=N[h]||D.getAdaptationsForPeriod(e,f),l=0,d=p.length;d>l;l++){if(i=p[l],s=D.getIndexForAdaptation(i,e,t.index),o=a(e,N[h][s]),"embeddedText"===n){var m=o.accessibility.length;for(c=0;m>c;c++)if(o){var v=o.accessibility[c];if(0===v.indexOf("cea-608:")){var y=v.substring(8),_=y.split(";");if("CC"===_[0].substring(0,2))for(c=0;c<_.length;c++)o||(o=a.call(this,e,N[h][s])),u(o,_[c].substring(0,3),_[c].substring(4)),g.push(o),o=null;else for(c=0;c<_.length;c++)o||(o=a.call(this,e,N[h][s])),u(o,"CC"+(c+1),_[c]),g.push(o),o=null}else 0===v.indexOf("cea-608")&&(u(o,"CC1","eng"),g.push(o),o=null)}}o&&"embeddedText"!==n&&g.push(o)}return g}function v(e){if(!e)return null;var t=[],n=D.getMpd(e);L=D.getRegularPeriods(e,n),N={};for(var i=0,r=L.length;r>i;i++)t.push(c(e,L[i]));return t}function y(e){var t=D.getMpd(e);return f(e,t)}function b(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function w(e,t){var i=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(i)}function E(e,t,i,r){var o=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(o,i,r)}function S(e,t,i){var r=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(r,i)}function C(e){return e.getIndexHandler().getCurrentTime()}function P(e,t){return e.getIndexHandler().setCurrentTime(t)}function A(e,t){var n,o,a=r(t.getStreamInfo()),s=t.getMediaInfo(),u=i(s),l=t.getType();n=s.id,o=n?D.getAdaptationForId(n,e,a.index):D.getAdaptationForIndex(s.index,e,a.index),t.getRepresentationController().updateData(o,u,l)}function I(e,t,n){var i=t.getRepresentationForQuality(n);return i?o(e,i):null}function x(e,t){var n=t.getCurrentRepresentation();return n?o(e,n):null}function O(e,t,n){var i=new g["default"],r=e.scheme_id_uri,o=e.value,a=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,c=e.message_data,d=n*a+s;return t[r]?(i.eventStream=t[r],i.eventStream.value=o,i.eventStream.timescale=a,i.duration=u,i.id=l,i.presentationTime=d,i.messageData=c,i.presentationTimeDelta=s,i):null}function M(e,t,o){var a=[];return t instanceof d["default"]?a=D.getEventsForPeriod(e,r(t)):t instanceof l["default"]?a=D.getEventStreamForAdaptationSet(e,i(t)):t instanceof s["default"]&&(a=D.getEventStreamForRepresentation(e,n(t,o.getRepresentationController()))),a}function k(){L=[],N={}}var R=void 0,D=void 0,L=void 0,N=void 0;return R={initialize:t,convertDataToTrack:o,convertDataToMedia:a,convertDataToStream:c,getDataForTrack:n,getDataForMedia:i,getDataForStream:r,getStreamsInfo:v,getManifestInfo:y,getMediaInfoForType:p,getAllMediaInfoForType:m,getCurrentRepresentationInfo:x,getRepresentationInfoForQuality:I,updateData:A,getInitRequest:b,getNextFragmentRequest:w,getFragmentRequestForTime:E,generateFragmentRequestForTime:S,getIndexHandlerTime:C,setIndexHandlerTime:P,getEventsFor:M,getEvent:O,setConfig:e,reset:k,metricsList:T}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(173),s=r(a),u=e(168),l=r(u),c=e(170),d=r(c),f=e(167),h=r(f),p=e(42),g=r(p),m=e(10),v=r(m),y=e(2),_=r(y),b=e(20),T=i(b);o.__dashjs_factory_name="DashAdapter",n["default"]=v["default"].getSingletonFactory(o),t.exports=n["default"]},{10:10,167:167,168:168,170:170,173:173,2:2,20:20,42:42}],16:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){Y=-1,Q=0,J=0/0,U.on(d["default"].INITIALIZATION_LOADED,L,z),U.on(d["default"].SEGMENTS_LOADED,N,z)}function n(t){Z=t,X=Z.getType(),K=Z.isDynamic(),et=S["default"](j).create(e,K)}function i(){return Z}function r(e){Q=e}function o(){return Q}function s(){return Y}function c(){return J}function f(){et=null,Q=0,J=0/0,$=0/0,Y=-1,K=null,X=null,Z=null,U.off(d["default"].INITIALIZATION_LOADED,L,z),U.off(d["default"].SEGMENTS_LOADED,N,z)}function p(e){return e?e.split("$$").join("$"):e}function g(e,t){if(null===t||null===e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function m(e,t,n){var i,r,o=W.resolve(n.path);return o&&t!==o.url&&B.isRelative(t)?(i=o.url,r=o.serviceLocation,t&&(i=B.resolve(t,i))):i=t,B.isRelative(i)?!1:(e.url=i,e.serviceLocation=r,!0)}function y(e,t){var n=new a["default"],i=e.adaptation.period,r=i.start;return n.mediaType=t,n.type=l.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=H.calcAvailabilityStartTimeFromPresentationTime(r,i.mpd,K),n.availabilityEndTime=H.calcAvailabilityEndTimeFromPresentationTime(r+i.duration,i.mpd,K),n.quality=e.index,n.mediaInfo=Z.getMediaInfo(),m(n,e.initialization,e)?n:void 0}function b(e){if(!e)return null;var t=y(e,X);return t}function E(e){var t=!1;if(K||Y!==e.availableSegmentsNumber){var n=w.getSegmentByIndex(Y,e);if(n){var i=n.presentationStartTime-e.adaptation.period.start,r=e.adaptation.period.duration;F(e.segmentInfoType+": "+i+" / "+r),t="SegmentTimeline"===e.segmentInfoType&&K?!1:i>=r}}else t=!0;return t}function P(e){return et.getSegments(e,$,Y,A)}function A(e,t){if(e.segments=t,t&&t.length>0&&(J=isNaN(J)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,J)),K&&isNaN(H.getExpectedLiveEdge())){var n=t[t.length-1],i=n.presentationStartTime,r=q.getMetricsFor("stream");H.setExpectedLiveEdge(i),q.updateManifestUpdateInfo(G.getCurrentManifestUpdate(r),{presentationStartTime:i})}}function I(e){if(!e)throw new u["default"]("no representation");return e.segments=null,P(e),e}function x(e,t){var n,i=T["default"].hasInitialization(e),r=T["default"].hasSegments(e);return e.segmentDuration||e.segments||I(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=H.calcSegmentAvailabilityRange(e,K),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(n=new u["default"](C,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void U.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:n})):(t||(Y=-1),e.segmentDuration&&I(e),i||V.loadInitialization(e),r||V.loadSegments(e,X,e.indexRange),void(i&&r&&U.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:e})))}function O(e,t,n){var i,r,o,a,s,u=t.segments,l=u?u.length:null,c=-1;if(u&&l>0)for(s=0;l>s;s++)if(r=u[s],o=r.presentationStartTime,a=r.duration,i=void 0===n||null===n?a/2:n,e+i>=o&&o+a>e-i){c=r.availabilityIdx;break}return c}function M(e){if(null===e||void 0===e)return null;var t=new a["default"],n=e.representation,i=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,r=e.media;return r=w.replaceTokenForTemplate(r,"Number",e.replacementNumber),r=w.replaceTokenForTemplate(r,"Time",e.replacementTime),r=w.replaceTokenForTemplate(r,"Bandwidth",i),r=g(r,n.id),r=p(r),t.mediaType=X,t.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=Z.getMediaInfo(),t.adaptationIndex=n.adaptation.index,m(t,r,n)?t:void 0}function k(e,t,n){var i,r,o,s=Y,u=n?n.keepIdx:!1,l=n?n.timeThreshold:null,c=n&&n.ignoreIsFinished?!0:!1;return e?($!==t&&($=t,F("Getting the request for "+X+" time : "+t)),P(e),Y=O(t,e,l),0>Y&&(P(e),Y=O(t,e,l)),Y>0&&F("Index for "+X+" time "+t+" is "+Y),o=c?!1:E(e),o?(i=new a["default"],i.action=a["default"].ACTION_COMPLETE,i.index=Y,i.mediaType=X,i.mediaInfo=Z.getMediaInfo(),F("Signal complete.",i)):(r=w.getSegmentByIndex(Y,e),i=M(r)),u&&s>=0&&(Y="SegmentTimeline"===e.segmentInfoType&&K?Y:s),i):null}function R(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},k(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function D(e){var t,n,i;return e&&-1!==Y?($=null,Y++,F("Getting the next request at index: "+Y),i=E(e),i?(t=new a["default"],t.action=a["default"].ACTION_COMPLETE,t.index=Y,t.mediaType=X,t.mediaInfo=Z.getMediaInfo(),F("Signal complete.")):(P(e),n=w.getSegmentByIndex(Y,e),t=M(n),!n&&K&&Y--),t):null}function L(e){var t=e.representation;t.segments&&U.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function N(e){if(!e.error&&X===e.mediaType){var t,n,i,r,o=e.segments,a=e.representation,s=[],u=0;for(t=0,n=o.length;n>t;t++)i=o[t],r=w.getTimeBasedSegment(H,K,a,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,u),s.push(r),r=null,u++;a.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},a.availableSegmentsNumber=n,A(a,s),T["default"].hasInitialization(a)&&U.trigger(d["default"].REPRESENTATION_UPDATED,{sender:this,representation:a})}}var j=this.context,F=v["default"](j).getInstance().log,U=h["default"](j).getInstance(),B=_["default"](j).getInstance(),V=e.segmentBaseLoader,H=e.timelineConverter,G=e.dashMetrics,q=e.metricsModel,W=e.baseURLController,z=void 0,Y=void 0,$=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,et=void 0;return z={initialize:n,getStreamProcessor:i,getInitRequest:b,getSegmentRequestForTime:k,getNextSegmentRequest:D,generateSegmentRequestForTime:R,updateRepresentation:x,setCurrentTime:r,getCurrentTime:o,getCurrentIndex:s,getEarliestTime:c,reset:f},t(),z}Object.defineProperty(n,"__esModule",{value:!0});var o=e(164),a=i(o),s=e(163),u=i(s),l=e(180),c=e(13),d=i(c),f=e(9),h=i(f),p=e(10),g=i(p),m=e(8),v=i(m),y=e(159),_=i(y),b=e(46),T=i(b),w=e(36),E=e(35),S=i(E),C=1;r.__dashjs_factory_name="DashHandler";var P=g["default"].getClassFactory(r);P.SEGMENTS_UNAVAILABLE_ERROR_CODE=C,n["default"]=P,t.exports=n["default"]},{10:10,13:13,159:159,163:163,164:164,180:180,35:35,36:36,46:46,8:8,9:9}],17:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(e,t){var n,i=I.getValue(),r=i.Period_asArray[t];return n=E(r,e),null===n?null:n.bandwidth}function t(e,t){var n,i=I.getValue(),r=i.Period_asArray[t];return n=w(r,e)}function n(e,t){var n,i=I.getValue(),r=i.Period_asArray[t];return n=C(r,e)}function i(e){return f(e,p.TRACK_SWITCH)}function r(e){return f(e,p.BUFFER_LEVEL)}function o(e){var t=r(e);return t?g.round10(t.level/1e3,-3):0}function s(e){return e.RequestsQueue}function l(e){if(null===e)return null;var t,n,i=e.HttpList,r=null;if(null===i||i.length<=0)return null;for(t=i.length,n=t-1;n>=0;){if(i[n].responsecode){r=i[n];break}n--}return r}function d(e){return null===e?[]:e.HttpList?e.HttpList:[]}function f(e,t){if(null===e)return null;var n=e[t];if(null===n)return null;var i=n.length;return 0>=i?null:n[i-1]}function h(e){return f(e,p.DROPPED_FRAMES)}function m(e){return f(e,p.SCHEDULING_INFO)}function v(e){return f(e,p.MANIFEST_UPDATE)}function y(e){return f(e,p.DVR_INFO)}function _(e,t){var n,i,r,o={};if(null===e)return null;for(n=d(e),r=n.length-1;r>=0;r--)if(i=n[r],i.type===a.HTTPRequest.MPD_TYPE){o=T(i._responseHeaders);break}return void 0===o[t]?null:o[t]}function b(e,t){if(null===e)return null;var n,i=l(e);return null===i||null===i._responseHeaders?null:(n=T(i._responseHeaders),void 0===n[t]?null:n[t])}function T(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),i=0,r=n.length;r>i;i++){var o=n[i],a=o.indexOf(": ");a>0&&(t[o.substring(0,a)]=o.substring(a+2))}return t}function w(e,t){var n=E(e,t,!0);return null!==n?n:-1}function E(e,t,n){var i,r,o,a,s,u;for(r=e.AdaptationSet_asArray,s=0;s<r.length;s+=1)for(i=r[s],a=i.Representation_asArray,u=0;u<a.length;u+=1)if(o=a[u],t===o.id)return n?u:o;return null}function S(e,t){return c["default"](A).getInstance().getIsTypeOf(e,t)}function C(e,t){var n,i,r,o;if(!e||!t)return-1;for(i=e.AdaptationSet_asArray,o=0;o<i.length;o+=1)if(n=i[o],r=n.Representation_asArray,S(n,t))return r.length;return-1}var P=void 0,A=this.context,I=u["default"](A).getInstance();return P={getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getCurrentRepresentationSwitch:i,getLatestBufferLevelVO:r,getCurrentBufferLevel:o,getCurrentHttpRequest:l,getHttpRequests:d,getCurrentDroppedFrames:h,getCurrentSchedulingInfo:m,getCurrentDVRInfo:y,getCurrentManifestUpdate:v,getLatestFragmentRequestHeaderValueByID:b,getLatestMPDRequestHeaderValueByID:_,getRequestsQueue:s}
}Object.defineProperty(n,"__esModule",{value:!0});var a=e(180),s=e(101),u=r(s),l=e(22),c=r(l),d=e(10),f=r(d),h=e(20),p=i(h),g=e(7);o.__dashjs_factory_name="DashMetrics",n["default"]=f["default"].getSingletonFactory(o),t.exports=n["default"]},{10:10,101:101,180:180,20:20,22:22,7:7}],18:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){b=f["default"](h).getInstance(),T=y["default"](h).getInstance(),S=a["default"](h).getInstance(),I=A["default"](h).create({errHandler:b,metricsModel:P,requestModifier:S})}function t(e){e.baseURLController&&(x=e.baseURLController),e.metricsModel&&(P=e.metricsModel)}function n(e,t){var i=null,r=null,o=x.resolve(e.path),a=t||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};g("Start searching for initialization.");var u=l(a),c=function(t){a.bytesLoaded=a.range.end,r=T.parse(t),i=s(r),i?(e.range=i,v.trigger(p["default"].INITIALIZATION_LOADED,{representation:e})):(a.range.end=a.bytesLoaded+a.bytesToLoad,n(e,a))},d=function(){v.trigger(p["default"].INITIALIZATION_LOADED,{representation:e})};I.load({request:u,success:c,error:d}),g("Perform init search: "+a.url)}function i(e,t,n,r,a){if(n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}a=a?a:d;var u=null,c=null,f=!!n,h=x.resolve(e.path),p={init:!1,url:h?h.url:void 0,range:f?n:{start:0,end:1500},searching:!f,bytesLoaded:r?r.bytesLoaded:0,bytesToLoad:1500},m=l(p),v=function(n){var r=p.bytesToLoad,s=n.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,u=T.parse(n),c=u.getBox("sidx"),c&&c.isComplete){var l,d,f=c.references;if(null!==f&&void 0!==f&&f.length>0&&(l=1===f[0].reference_type),l){g("Initiate multiple SIDX load."),p.range.end=p.range.start+c.size;var h,m,v,y,_,b=[],w=0,E=(c.offset||p.range.start)+c.size,S=function(n){n?(b=b.concat(n),w++,w>=m&&a(b,e,t)):a(null,e,t)};for(h=0,m=f.length;m>h;h++)v=E,y=E+f[h].referenced_size-1,E+=f[h].referenced_size,_={start:v,end:y},i(e,null,_,p,S)}else g("Parsing segments from SIDX."),d=o(c,p),a(d,e,t)}else{if(c)p.range.start=c.offset||p.range.start,p.range.end=p.range.start+(c.size||r);else{if(s<p.bytesLoaded)return void a(null,e,t);var C=u.getLastBox();C&&C.size?(p.range.start=C.offset+C.size,p.range.end=p.range.start+r):p.range.end+=r}i(e,t,p.range,p,a)}},y=function(){a(null,e,t)};I.load({request:m,success:v,error:y}),g("Perform SIDX load: "+p.url)}function r(){I.abort(),I=null,b=null,T=null,S=null}function o(e,t){for(var n,i,r,o,a=e.references,s=a.length,l=e.timescale,c=e.earliest_presentation_time,d=t.range.start+e.offset+e.first_offset+e.size,f=[],h=0;s>h;h++)r=a[h].subsegment_duration,o=a[h].referenced_size,n=new u["default"],n.duration=r,n.startTime=c,n.timescale=l,i=d+o-1,n.mediaRange=d+"-"+i,f.push(n),c+=r,d+=o;return f}function s(e){var t,n,i=e.getBox("ftyp"),r=e.getBox("moov"),o=null;return g("Searching for initialization."),r&&r.isComplete&&(t=i?i.offset:r.offset,n=r.offset+r.size-1,o=t+"-"+n,g("Found the initialization.  Range: "+o)),o}function l(e){if(e.url){var t=new C["default"];return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function d(e,t,n){e?v.trigger(p["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):v.trigger(p["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new c["default"](null,"error loading segments",null)})}var h=this.context,g=w["default"](h).getInstance().log,v=m["default"](h).getInstance(),_=void 0,b=void 0,T=void 0,S=void 0,P=void 0,I=void 0,x=void 0;return _={setConfig:t,initialize:e,loadInitialization:n,loadSegments:i,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(157),a=i(o),s=e(47),u=i(s),l=e(163),c=i(l),d=e(152),f=i(d),h=e(13),p=i(h),g=e(9),m=i(g),v=e(147),y=i(v),_=e(10),b=i(_),T=e(8),w=i(T),E=e(180),S=e(164),C=i(S),P=e(59),A=i(P);r.__dashjs_factory_name="SegmentBaseLoader",n["default"]=b["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,147:147,152:152,157:157,163:163,164:164,180:180,47:47,59:59,8:8,9:9}],19:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){S={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}function t(){P=m["default"](g).getInstance(),A=y["default"](g).getInstance(),x=C["default"](g).create({errHandler:P,metricsModel:I,requestModifier:A})}function n(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");O=e.baseURLController,I=e.metricsModel}function i(e){var t=[],n=void 0,i=void 0,r=void 0,o=c["default"](g).create({data:e}),a=void 0;for(o.consumeTag(S.Segment.Cues),i=o.getMatroskaCodedNum();o.moreData()&&o.consumeTagAndSize(S.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=o.parseTag(S.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];o.moreData()&&o.consumeTagAndSize(S.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(r={},r.Track=o.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===r.Track)throw new Error("Cue track cannot be 0");r.ClusterPosition=o.parseTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),o.getPos()+4>i||!o.consumeTag(S.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?n.CueTracks.push(r):(a=o.getMatroskaCodedNum(),r.BlockNumber=o.getMatroskaUint(a),n.CueTracks.push(r))}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function r(e,t,n,r){var o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;for(a=i(e),s=[],l=0,c=a.length;c>l;l+=1)u=new b["default"],o=0,o=l<a.length-1?a[l+1].CueTime-a[l].CueTime:r-a[l].CueTime,u.duration=o,u.startTime=a[l].CueTime,u.timescale=1e3,d=a[l].CueTracks[0].ClusterPosition+t,f=l<a.length-1?a[l+1].CueTracks[0].ClusterPosition+t-1:n-1,u.mediaRange=d+"-"+f,s.push(u);return v("Parsed cues: "+s.length+" cues."),s}function o(e,t,n,i){var o=c["default"](g).create({data:e}),a=void 0,s=void 0,u=n.split("-"),l=null,d={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},h=void 0,p=void 0;for(v("Parse EBML header: "+d.url),o.skipOverElement(S.EBML),o.consumeTag(S.Segment),h=o.getMatroskaCodedNum(),h+=o.getPos(),p=o.getPos();o.moreData()&&!o.consumeTagAndSize(S.Segment.Info,!0);)if(!(o.skipOverElement(S.Segment.SeekHead,!0)||o.skipOverElement(S.Segment.Tracks,!0)||o.skipOverElement(S.Segment.Cues,!0)||o.skipOverElement(S.Void,!0)))throw new Error("no valid top level element found");for(;void 0===a;){var m=o.getMatroskaCodedNum(!0),y=o.getMatroskaCodedNum();switch(m){case S.Segment.Info.Duration.tag:a=o[S.Segment.Info.Duration.parse](y);break;default:o.setPos(o.getPos()+y)}}l=f(d);var _=function(e){s=r(e,p,h,a),i(s)},b=function(){v("Download Error: Cues "+d.url),i(null)};x.load({request:l,success:_,error:b}),v("Perform cues load: "+d.url+" bytes="+d.range.start+"-"+d.range.end)}function s(e,t){var n=null,i=O.resolve(e.path),r=i?i.url:void 0,o=e.range.split("-"),s=t||{range:{start:parseFloat(o[0]),end:parseFloat(o[1])},request:n,url:r,init:!0};v("Start loading initialization."),n=f(s);var u=function(){_.trigger(a["default"].INITIALIZATION_LOADED,{representation:e})},l=function(){_.trigger(a["default"].INITIALIZATION_LOADED,{representation:e})};x.load({request:n,success:u,error:l}),v("Perform init load: "+s.url)}function l(e,t,n,i){var r=null,a=O.resolve(e.path),s=a?a.url:void 0,u=8192,l={bytesLoaded:0,bytesToLoad:u,range:{start:0,end:u},request:r,url:s,init:!1};i=i?i:d,r=f(l),v("Parsing ebml header");var c=function(r){o(r,s,n,function(n){i(n,e,t)})},h=function(){i(null,e,t)};x.load({request:r,success:c,error:h})}function d(e,t,n){e?_.trigger(a["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):_.trigger(a["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function f(e){var t=new E["default"];return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function h(){P=null,A=null,v=null}var g=this.context,v=p["default"](g).getInstance().log,_=u["default"](g).getInstance(),w=void 0,S=void 0,P=void 0,A=void 0,I=void 0,x=void 0,O=void 0;return w={setConfig:n,initialize:t,loadInitialization:s,loadSegments:l,reset:h},e(),w}Object.defineProperty(n,"__esModule",{value:!0});var o=e(13),a=i(o),s=e(9),u=i(s),l=e(151),c=i(l),d=e(10),f=i(d),h=e(8),p=i(h),g=e(152),m=i(g),v=e(157),y=i(v),_=e(47),b=i(_),T=e(180),w=e(164),E=i(w),S=e(59),C=i(S);r.__dashjs_factory_name="WebmSegmentBaseLoader",n["default"]=f["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,151:151,152:152,157:157,164:164,180:180,47:47,59:59,8:8,9:9}],20:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="TcpList";n.TCP_CONNECTION=i;var r="HttpList";n.HTTP_REQUEST=r;var o="RepSwitchList";n.TRACK_SWITCH=o;var a="BufferLevel";n.BUFFER_LEVEL=a;var s="BufferState";n.BUFFER_STATE=s;var u="DVRInfo";n.DVR_INFO=u;var l="DroppedFrames";n.DROPPED_FRAMES=l;var c="SchedulingInfo";n.SCHEDULING_INFO=c;var d="RequestsQueue";n.REQUESTS_QUEUE=d;var f="ManifestUpdate";n.MANIFEST_UPDATE=f;var h="ManifestUpdatePeriodInfo";n.MANIFEST_UPDATE_STREAM_INFO=h;var p="ManifestUpdateRepresentationInfo";n.MANIFEST_UPDATE_TRACK_INFO=p;var g="PlayList";n.PLAY_LIST=g;var m="DVBErrors";n.DVB_ERRORS=m},{}],21:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){H=null,G=-1,q=!0,W=[],$=f["default"](U).getInstance(),X=m["default"](U).getInstance(),Q=p["default"](U).getInstance(),J=y["default"](U).getInstance(),Z=b["default"](U).getInstance(),et=S["default"](U).getInstance(),tt=c["default"](U).getInstance(),nt=a["default"](U).getInstance(),it=u["default"](U).getInstance(),rt=w["default"](U).getInstance(),B.on(O["default"].QUALITY_CHANGE_REQUESTED,j,V),B.on(O["default"].REPRESENTATION_UPDATED,R,V),B.on(O["default"].WALLCLOCK_TIME_UPDATED,D,V),B.on(O["default"].BUFFER_LEVEL_UPDATED,L,V)}function t(e){e.abrController&&($=e.abrController)}function n(e){Y=e,K=Y.getIndexHandler()}function i(){return Y}function r(){return H}function o(){return G}function s(){return q}function l(){return z}function d(){B.off(O["default"].QUALITY_CHANGE_REQUESTED,j,V),B.off(O["default"].REPRESENTATION_UPDATED,R,V),B.off(O["default"].WALLCLOCK_TIME_UPDATED,D,V),B.off(O["default"].BUFFER_LEVEL_UPDATED,L,V),H=null,G=-1,q=!0,W=[],$=null,X=null,Q=null,J=null,Z=null,et=null,tt=null,nt=null,it=null,rt=null}function h(e,t,n){var i,r,o=null,a=Y.getStreamInfo(),s=$.getTopQualityIndexFor(n,a.id);if(q=!0,B.trigger(O["default"].DATA_UPDATE_STARTED,{sender:this}),W=C(t),null===H&&"fragmentedText"!==n?(r=$.getAverageThroughput(n),o=r||$.getInitialBitrateFor(n,a),i=$.getQualityForBitrate(Y.getMediaInfo(),o)):i=$.getQualityFor(n,a),i>s&&(i=s),z=_(i),H=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return q=!1,void B.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:z});for(var u=0;u<W.length;u++)K.updateRepresentation(W[u],!0)}function g(){var e=new Date,t=l(),n=1e3*Q.getTime();Z.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function v(){var e=tt.calcSegmentAvailabilityRange(z,Y.isDynamic());Z.addDVRInfo(Y.getType(),Q.getTime(),Y.getStreamInfo().manifestInfo,e)}function _(e){return W[e]}function T(e){return W.indexOf(e)}function E(){for(var e=0,t=W.length;t>e;e++){var n=W[e].segmentInfoType;if(null===W[e].segmentAvailabilityRange||!N["default"].hasInitialization(W[e])||("SegmentBase"===n||"BaseURL"===n)&&!W[e].segments)return!1}return!0}function C(e){var t,n=J.getValue();return G=nt.getIndexForAdaptation(H,n,e.period.index),t=nt.getRepresentationsForAdaptation(n,e)}function A(e){for(var t,n=0,i=W.length;i>n;n++)t=W[n],t.segmentAvailabilityRange=tt.calcSegmentAvailabilityRange(t,e)}function x(){W.forEach(function(e){e.segmentAvailabilityRange=null})}function M(e){var t=e,n=function(){if(!s()){q=!0,B.trigger(O["default"].DATA_UPDATE_STARTED,{sender:V}),x();for(var e=0;e<W.length;e++)K.updateRepresentation(W[e],!0)}};q=!1,B.trigger(k["default"].AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function R(e){if(e.sender.getStreamProcessor()===Y&&s()){var t,n,i,r=e.representation,o=Z.getMetricsFor("stream"),a=Z.getMetricsFor(l().adaptation.type),u=it.getCurrentManifestUpdate(o),c=!1,d=0;if("dynamic"===r.adaptation.period.mpd.manifest.type){var f=r.segmentAvailabilityRange.end-r.segmentAvailabilityRange.start,h=Q.computeLiveDelay(z.segmentDuration,Y.getStreamInfo().manifestInfo.DVRWindowSize);d=1e3*(h-f)}if(d>0)return v(),M(d),n=new P["default"](F,"Segments update failed",null),void B.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:z,error:n});if(u){for(var p=0;p<u.trackInfo.length;p++)if(t=u.trackInfo[p],t.index===r.index&&t.mediaType===Y.getType()){c=!0;break}c||Z.addManifestUpdateRepresentationInfo(u,r.id,r.index,r.adaptation.period.index,Y.getType(),r.presentationTimeOffset,r.startNumber,r.segmentInfoType)}E()&&(q=!1,$.setPlaybackQuality(Y.getType(),Y.getStreamInfo(),T(z)),Z.updateManifestUpdateInfo(u,{latency:z.segmentAvailabilityRange.end-Q.getTime()}),i=it.getCurrentRepresentationSwitch(a),i||g(),B.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:z}))}}function D(e){e.isDynamic&&A(e.isDynamic)}function L(e){e.sender.getStreamProcessor()===Y&&v()}function j(e){e.mediaType===Y.getType()&&Y.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(z=_(e.newQuality),et.setSavedBitrateSettings(e.mediaType,z.bandwidth),g())}var F=1,U=this.context,B=I["default"](U).getInstance(),V=void 0,H=void 0,G=void 0,q=void 0,W=void 0,z=void 0,Y=void 0,$=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0;return V={initialize:n,setConfig:t,getData:r,getDataIndex:o,isUpdating:s,updateData:h,getStreamProcessor:i,getCurrentRepresentation:l,getRepresentationForQuality:_,reset:d},e(),V}Object.defineProperty(n,"__esModule",{value:!0});var o=e(22),a=i(o),s=e(17),u=i(s),l=e(38),c=i(l),d=e(61),f=i(d),h=e(69),p=i(h),g=e(72),m=i(g),v=e(101),y=i(v),_=e(103),b=i(_),T=e(102),w=i(T),E=e(150),S=i(E),C=e(163),P=i(C),A=e(9),I=i(A),x=e(13),O=i(x),M=e(53),k=i(M),R=e(10),D=i(R),L=e(46),N=i(L);r.__dashjs_factory_name="RepresentationController",n["default"]=D["default"].getClassFactory(r),t.exports=n["default"]},{10:10,101:101,102:102,103:103,13:13,150:150,163:163,17:17,22:22,38:38,46:46,53:53,61:61,69:69,72:72,9:9}],22:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n,i,r,o=!1,a=!1,s=e.ContentComponent_asArray,u=new RegExp("text"!==t?t:"(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if(0===l.search("stpp")||0===l.search("wvtt"))return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"===t;s[0]&&s[0].contentType===t&&(o=!0,a=!0)}if(e.hasOwnProperty("mimeType")&&(o=u.test(e.mimeType),a=!0),!a)for(n=0,i=e.Representation_asArray.length;!a&&i>n;)r=e.Representation_asArray[n],r.hasOwnProperty("mimeType")&&(o=u.test(r.mimeType),a=!0),n++;return o}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function i(t){return e(t,"fragmentedText")}function r(t){return e(t,"text")}function o(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function d(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function h(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function g(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function v(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function _(e){return h(e).filter(function(e){return"main"===e.value})[0]}function T(){return function(e,t){return e.bandwidth-t.bandwidth}}function E(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(T()),e}function C(e,t,n){var i,r,o=t.Period_asArray[n].AdaptationSet_asArray;for(i=0,r=o.length;r>i;i++)if(o[i].hasOwnProperty("id")&&o[i].id===e)return o[i];return null}function A(e,t,n){var i=t.Period_asArray[n].AdaptationSet_asArray;return i[e]}function x(e,t,n){var i,r,o=t.Period_asArray[n].AdaptationSet_asArray;for(i=0,r=o.length;r>i;i++)if(o[i]===e)return i;return-1}function O(t,n,i){var r,o,a=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(r=0,o=a.length;o>r;r++)e(a[r],i)&&s.push(E(a[r]));return s}function M(e,t,n,i){var r=O(e,t,n);if(!r||0===r.length)return null;if(r.length>1&&i)for(var o=lt.getCurrentTrackFor(n,i),a=ct.getAllMediaInfoForType(e,i,n),s=0,u=r.length;u>s;s++){if(o&&lt.isTracksEqual(o,a[s]))return r[s];if(_(r[s]))return r[s]}return r[0]}function k(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function R(e){return e.Representation_asArray[0].mimeType}function D(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function L(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function N(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function j(e){var t,n,i=N(e);return t=!isNaN(e.timeShiftBufferDepth),n=i&&t}function F(e,t){var n=!1;return e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function U(e){return F(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function B(e){return F(e,"urn:dvb:dash:profile:dvb-dash:2014")}function V(e){var t;return t=e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function H(e){return e.bandwidth}function G(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=0/0;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function q(e){return e.Representation_asArray.length}function W(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=E(e),n=t.Representation_asArray,i=n.length,r=[],o=0;i>o;o++)r.push({bandwidth:n[o].bandwidth,width:n[o].width||0,height:n[o].height||0});return r}function z(e,t){return t.Representation_asArray[e]}function Y(e,t){for(var n,i,r,o,u,l=E(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),c=[],d=0;d<l.Representation_asArray.length;d++)o=l.Representation_asArray[d],n=new a["default"],n.index=d,n.adaptation=t,o.hasOwnProperty("id")&&(n.id=o.id),o.hasOwnProperty("bandwidth")&&(n.bandwidth=o.bandwidth),o.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=o.maxPlayoutRate),o.hasOwnProperty("SegmentBase")?(r=o.SegmentBase,n.segmentInfoType="SegmentBase"):o.hasOwnProperty("SegmentList")?(r=o.SegmentList,r.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=r.SegmentTimeline.S_asArray[r.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0)):o.hasOwnProperty("SegmentTemplate")?(r=o.SegmentTemplate,r.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=r.SegmentTimeline.S_asArray[r.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",r.hasOwnProperty("initialization")&&(n.initialization=r.initialization.split("$Bandwidth$").join(o.bandwidth).split("$RepresentationID$").join(o.id))):n.segmentInfoType="BaseURL",r&&(r.hasOwnProperty("Initialization")?(i=r.Initialization,i.hasOwnProperty("sourceURL")?n.initialization=i.sourceURL:i.hasOwnProperty("range")&&(n.range=i.range)):o.hasOwnProperty("mimeType")&&s(o.mimeType)&&(n.range=0),r.hasOwnProperty("timescale")&&(n.timescale=r.timescale),r.hasOwnProperty("duration")&&(n.segmentDuration=r.duration/n.timescale),r.hasOwnProperty("startNumber")&&(n.startNumber=r.startNumber),r.hasOwnProperty("indexRange")&&(n.indexRange=r.indexRange),r.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=r.presentationTimeOffset/n.timescale)),n.MSETimeOffset=ut.calcMSETimeOffset(n),n.path=[t.period.index,t.index,d],c.push(n);return c}function $(e,r){for(var a,s,l=e.Period_asArray[r.index],c=[],d=0;d<l.AdaptationSet_asArray.length;d++)s=l.AdaptationSet_asArray[d],a=new u["default"],s.hasOwnProperty("id")&&(a.id=s.id),a.index=d,a.period=r,a.type=o(s)?"muxed":t(s)?"audio":n(s)?"video":i(s)?"fragmentedText":"text",c.push(a);return c}function K(e,t){var n,i,r=N(e),o=[],a=null,s=null,u=null,l=null;for(i=0,n=e.Period_asArray.length;n>i;i++)s=e.Period_asArray[i],s.hasOwnProperty("start")?(l=new c["default"],l.start=s.start):null!==a&&s.hasOwnProperty("duration")&&null!==u?(l=new c["default"],l.start=u.start+u.duration,l.duration=s.duration):0!==i||r||(l=new c["default"],l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=X(s,i)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=i,l.mpd=t,o.push(l),a=s,u=l),s=null,l=null;return 0===o.length?o:(null!==u&&isNaN(u.duration)&&(u.duration=J(e,u)-u.start),o)}function X(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=c["default"].DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(n=e.id),n}function Q(e){var t=new f["default"];return t.manifest=e,t.availabilityStartTime=new Date(e.hasOwnProperty("availabilityStartTime")?e.availabilityStartTime.getTime():e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function J(e,t){var n=N(e),i=void 0;if(e.mediaPresentationDuration)i=e.mediaPresentationDuration;else if(t.duration)i=t.duration;else{if(!n)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");i=Number.POSITIVE_INFINITY}return i}function Z(e,t){var n=e.Period_asArray,i=n[t.index].EventStream_asArray,r=[];if(i)for(var o=0;o<i.length;o++){var a=new P["default"];if(a.period=t,a.timescale=1,!i[o].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=i[o].schemeIdUri,i[o].hasOwnProperty("timescale")&&(a.timescale=i[o].timescale),i[o].hasOwnProperty("value")&&(a.value=i[o].value);for(var s=0;s<i[o].Event_asArray.length;s++){var u=new w["default"];u.presentationTime=0,u.eventStream=a,i[o].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=i[o].Event_asArray[s].presentationTime),i[o].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=i[o].Event_asArray[s].duration),i[o].Event_asArray[s].hasOwnProperty("id")&&(u.id=i[o].Event_asArray[s].id),r.push(u)}}return r}function et(e,t){var n=[];if(!e)return n;for(var i=0;i<e.length;i++){var r=new P["default"];if(r.timescale=1,r.representation=t,!e[i].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");r.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty("timescale")&&(r.timescale=e[i].timescale),e[i].hasOwnProperty("value")&&(r.value=e[i].value),n.push(r)}return n}function tt(e,t){var n=e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray;return et(n,null)}function nt(e,t){var n=e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray;return et(n,t)}function it(e){var t=N(e),n=e.hasOwnProperty("availabilityStartTime"),i=e.UTCTiming_asArray,r=[];return(t||n)&&i&&i.forEach(function(e){var t=new p["default"];e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),r.push(t)))}),r}function rt(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],i=!1;return n.some(function(n){if(n){var r=new S["default"],o=n.__text||n;return dt.isRelative(o)&&(i=!0,e.baseUri&&(o=e.baseUri+o)),r.url=o,r.serviceLocation=n.hasOwnProperty("serviceLocation")&&n.serviceLocation.length?n.serviceLocation:o,n.hasOwnProperty("dvb:priority")&&(r.dvb_priority=n["dvb:priority"]),n.hasOwnProperty("dvb:weight")&&(r.dvb_weight=n["dvb:weight"]),t.push(r),i}}),t}function ot(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}var at=void 0,st=this.context,ut=m["default"](st).getInstance(),lt=y["default"](st).getInstance(),ct=b["default"](st).getInstance(),dt=I["default"](st).getInstance();return at={getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:r,getIsMuxed:o,getIsTextTrack:s,getIsFragmentedText:i,getIsMain:_,getLanguageForAdaptation:l,getViewpointForAdaptation:d,getRolesForAdaptation:h,getAccessibilityForAdaptation:g,getAudioChannelConfigurationForAdaptation:v,processAdaptation:E,getAdaptationForIndex:A,getIndexForAdaptation:x,getAdaptationForId:C,getAdaptationsForType:O,getAdaptationForType:M,getCodec:k,getMimeType:R,getKID:D,getContentProtectionData:L,getIsDynamic:N,getIsDVR:j,getIsOnDemand:U,getIsDVB:B,getDuration:V,getBandwidth:H,getManifestUpdatePeriod:G,getRepresentationCount:q,getBitrateListForAdaptation:W,getRepresentationFor:z,getRepresentationsForAdaptation:Y,getAdaptationsForPeriod:$,getRegularPeriods:K,getMpd:Q,getEventsForPeriod:Z,getEventStreams:et,getEventStreamForAdaptationSet:tt,getEventStreamForRepresentation:nt,getUTCTimingSources:it,getBaseURLsFromElement:rt,getRepresentationSortFunction:T,getLocation:ot}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(46),a=i(o),s=e(40),u=i(s),l=e(45),c=i(l),d=e(44),f=i(d),h=e(48),p=i(h),g=e(38),m=i(g),v=e(67),y=i(v),_=e(15),b=i(_),T=e(42),w=i(T),E=e(41),S=i(E),C=e(43),P=i(C),A=e(159),I=i(A),x=e(10),O=i(x);r.__dashjs_factory_name="DashManifestModel",n["default"]=O["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,15:15,159:159,38:38,40:40,41:41,42:42,43:43,44:44,45:45,46:46,48:48,67:67}],23:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){s=[new y["default"],new b["default"],new w["default"],new m["default"]],u=new p["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:s}),l=new f["default"]([new S["default"],new P["default"]])}function t(e,t){var n;try{var o=window.performance.now();if(n=u.xml_str2json(e),!n)throw new Error("parser error");var a=window.performance.now();l.run(n);var c=window.performance.now();t.setMatchers(s),t.setIron(l),i("Parsing complete: ( xml2json: "+(a-o).toPrecision(3)+"ms, objectiron: "+(c-a).toPrecision(3)+"ms, total: "+((c-o)/1e3).toPrecision(3)+"s)")}catch(d){return r.manifestError("parsing the manifest failed","parse",e,d),null}return n}var n=this.context,i=c["default"](n).getInstance().log,r=a["default"](n).getInstance(),o=void 0,s=void 0,u=void 0,l=void 0;return o={parse:t},e(),o}Object.defineProperty(n,"__esModule",{value:!0});var o=e(152),a=i(o),s=e(10),u=i(s),l=e(8),c=i(l),d=e(3),f=i(d),h=e(4),p=i(h),g=e(32),m=i(g),v=e(30),y=i(v),_=e(29),b=i(_),T=e(31),w=i(T),E=e(26),S=i(E),C=e(27),P=i(C);r.__dashjs_factory_name="DashParser",n["default"]=u["default"].getClassFactory(r),t.exports=n["default"]},{10:10,152:152,26:26,27:27,29:29,3:3,30:30,31:31,32:32,4:4,8:8}],24:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e);var r=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()};this._name=t,this._merge=void 0!==n?n:r(t)}return r(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();n["default"]=o,t.exports=n["default"]},{}],25:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e(24),s=i(a),u=function(){function e(t,n,i,o,a){var u=this;r(this,e),this._name=t||"",this._properties=[],this._children=i||[],this._isRoot=o||!1,this._isArray=a||!0,Array.isArray(n)&&n.forEach(function(e){u._properties.push(new s["default"](e))})}return o(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();n["default"]=u,t.exports=n["default"]},{24:24}],26:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(25),u=i(s),l=function(e){function t(){r(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"AdaptationSet",e,[new u["default"]("Representation",e,[new u["default"]("SubRepresentation",e)])])}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{25:25}],27:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(25),u=i(s),l=function(e){function t(){r(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Period",e,[new u["default"]("AdaptationSet",e,[new u["default"]("Representation",e)])])}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{25:25}],28:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this._test=t,this._converter=n}return r(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();n["default"]=o,t.exports=n["default"]},{}],29:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(28),u=i(s),l=60,c=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return f.test(e.value)},function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*d||0),t[9]&&t[10]){var i=parseInt(t[9],10)*c+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*i*l*d}return new Date(n)})}return o(t,e),t}(u["default"]);n["default"]=h,t.exports=n["default"]},{28:28}],30:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(28),u=i(s),l=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,c=31536e3,d=2592e3,f=86400,h=3600,p=60,g=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,i=0;n>i;i++)if(e.nodeName===t[i])return l.test(e.value);return!1},function(e){var t=l.exec(e),n=parseFloat(t[2]||0)*c+parseFloat(t[4]||0)*d+parseFloat(t[6]||0)*f+parseFloat(t[8]||0)*h+parseFloat(t[10]||0)*p+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return o(t,e),t}(u["default"]);n["default"]=g,t.exports=n["default"]},{28:28}],31:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(28),u=i(s),l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,c=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return l.test(e.value)},function(e){return parseFloat(e)})}return o(t,e),t}(u["default"]);n["default"]=c,t.exports=n["default"]},{28:28}],32:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(28),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(n.hasOwnProperty(t)){var i=n[t];return void 0!==i?i.indexOf(e.name)>=0:!1}return!1},function(e){return String(e)})}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{28:28}],33:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){e&&e.boxParser&&(r=e.boxParser)}function t(e){var t,n,i,o,a,s,u,l,c,d,f,h,p,g=r.parse(e),m=g.getBox("tfhd"),v=g.getBox("tfdt"),y=g.getBox("trun"),_=g.getBox("moof"),b=g.getBox("mfhd"),T=g.getBox("subs");for(f=b.sequence_number,i=y.sample_count,a=v.baseMediaDecodeTime,d=(m.base_data_offset||0)+(y.data_offset||0),s=[],p=0,l=0;i>l;l++){u=y.samples[l],t=void 0!==u.sample_duration?u.sample_duration:m.default_sample_duration,o=void 0!==u.sample_size?u.sample_size:m.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0;var w={dts:a,cts:a+n,duration:t,offset:_.offset+d,size:o,subSizes:[o]};if(T&&p<T.samples_with_subsamples.length&&T.samples_with_subsamples[p].nr==l+1){for(w.subSizes=[],c=0;c<T.samples_with_subsamples[p].subsamples.length;c++){var E=T.samples_with_subsamples[p].subsamples[c].size;w.subSizes.push(E)}p++}s.push(w),d+=o,a+=t}return h=a-v.baseMediaDecodeTime,{sampleList:s,sequenceNumber:f,totalDuration:h}}function n(e){var t=r.parse(e),n=t.getBox("mdhd");return n?n.timescale:0/0}var i=void 0,r=void 0;return i={getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="FragmentedTextBoxParser",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],34:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function n(e,n,r,o){var a,u,l,c,d,f,h,p=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,g=p.SegmentURL_asArray.length,m=[];for(h=e.startNumber,c=s.decideSegmentListRangeForTemplate(i,t,e,n,r,o),d=Math.max(c.start,0),f=Math.min(c.end,p.SegmentURL_asArray.length-1),a=d;f>=a;a++)l=p.SegmentURL_asArray[a],u=s.getIndexBasedSegment(i,t,e,a),u.replacementTime=(h+a-1)*e.segmentDuration,u.media=l.media?l.media:"",u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,m.push(u),u=null;return e.availableSegmentsNumber=g,m}var i=e.timelineConverter,r=void 0;return r={getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(36);r.__dashjs_factory_name="ListSegmentsGetter";var u=a["default"].getClassFactory(r);n["default"]=u,t.exports=n["default"]},{10:10,36:36}],35:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function n(){s=u["default"](o).create(e,t),l=c["default"](o).create(e,t),d=f["default"](o).create(e,t)}function i(e,t,n,i,o){var a,u=e.segmentInfoType;return"SegmentBase"!==u&&"BaseURL"!==u&&r(e,n)?("SegmentTimeline"===u?a=s.getSegments(e,t,n,o):"SegmentTemplate"===u?a=l.getSegments(e,t,n,o):"SegmentList"===u&&(a=d.getSegments(e,t,n,o)),i&&i(e,a)):a=e.segments,a}function r(e,t){var n,i,r=e.segments,o=!1;return r&&0!==r.length?(i=r[0].availabilityIdx,n=r[r.length-1].availabilityIdx,o=i>t||t>n):o=!0,o}var o=this.context,a=void 0,s=void 0,l=void 0,d=void 0;return a={getSegments:i},n(),a}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(39),u=i(s),l=e(37),c=i(l),d=e(34),f=i(d);r.__dashjs_factory_name="SegmentsGetter";var h=a["default"].getClassFactory(r);n["default"]=h,t.exports=n["default"]},{10:10,34:34,37:37,39:39}],36:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){for(;e.length<t;)e="0"+e;return e}function o(e,t){return e.representation.startNumber+t}function a(e,t,n){var i,o,a,s,u,l,c="%0",d=t.length,f=c.length;if(!e)return e;for(;;){if(i=e.indexOf("$"+t),0>i)return e;if(o=e.indexOf("$",i+d),0>o)return e;if(a=e.indexOf(c,i+d),a>i&&o>a)switch(s=e.charAt(o-1),u=parseInt(e.substring(a+f,o-1),10),s){case"d":case"i":case"u":l=r(n.toString(),u);break;case"x":l=r(n.toString(16),u);break;case"X":l=r(n.toString(16),u).toUpperCase();break;case"o":l=r(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(o+1)}}function s(e,t,n,i){var r,a,s,u;return a=n.segmentDuration,isNaN(a)&&(a=n.adaptation.period.duration),s=n.adaptation.period.start+i*a,u=s+a,r=new h["default"],r.representation=n,r.duration=a,r.presentationStartTime=s,r.mediaStartTime=e.calcMediaTimeFromPresentationTime(r.presentationStartTime,n),r.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(r.presentationStartTime,n.adaptation.period.mpd,t),r.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,n.adaptation.period.mpd,t),r.wallStartTime=e.calcWallTimeForSegment(r,t),r.replacementNumber=o(r,i),r.availabilityIdx=i,r}function u(e,t,n,i,r,s,u,l,c){var d,f,p,g=i/s,m=Math.min(r/s,n.adaptation.period.mpd.maxSegmentDuration);return d=e.calcPresentationTimeFromMediaTime(g,n),f=d+m,p=new h["default"],p.representation=n,p.duration=m,p.mediaStartTime=g,p.presentationStartTime=d,p.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(f,n.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=i,p.replacementNumber=o(p,c),u=a(u,"Number",p.replacementNumber),u=a(u,"Time",p.replacementTime),p.media=u,p.mediaRange=l,p.availabilityIdx=c,p}function l(e,t){if(!t||!t.segments)return null;var n,i,r=t.segments.length;if(r>e&&(n=t.segments[e],n&&n.availabilityIdx===e))return n;for(i=0;r>i;i++)if(n=t.segments[i],n&&n.availabilityIdx===e)return n;return null}function c(e,t,n,i,r){var o,a,s,u=2,l=r||10,c=0,d=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?s={start:c,end:d}:!t&&n||0>i?null:(o=Math.max(i-u,c),a=Math.min(i+l,d),s={start:o,end:a})}function d(e,t,n,i,r,o){var a,s,u,c=n.segmentDuration,d=n.adaptation.period.mpd.manifest.minBufferTime,f=n.segmentAvailabilityRange,h={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.end)},p=n.segments,g=2*c,m=o||Math.max(2*d,10*c),v=0/0,y=null;return h.start=Math.max(h.start,0),t&&!e.isTimeSyncCompleted()?(a=Math.floor(h.start/c),s=Math.floor(h.end/c),u={start:a,end:s}):(p&&p.length>0?(y=l(r,n),v=y?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,y.presentationStartTime):r>0?r*c:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,i)):v=r>0?r*c:t?h.end:h.start,a=Math.floor(Math.max(v-g,h.start)/c),s=Math.floor(Math.min(a+m/c,h.end/c)),u={start:a,end:s})}Object.defineProperty(n,"__esModule",{value:!0}),n.replaceTokenForTemplate=a,n.getIndexBasedSegment=s,n.getTimeBasedSegment=u,n.getSegmentByIndex=l,n.decideSegmentListRangeForTimeline=c,n.decideSegmentListRangeForTemplate=d;var f=e(47),h=i(f)},{47:47}],37:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function n(e,n,r,o){var a,u,l,c,d,f=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,h=e.segmentDuration,p=e.segmentAvailabilityRange,g=[],m=null,v=null;for(d=e.startNumber,a=isNaN(h)&&!t?{start:d,end:d}:s.decideSegmentListRangeForTemplate(i,t,e,n,r,o),l=a.start,c=a.end,u=l;c>=u;u++)v=s.getIndexBasedSegment(i,t,e,u),v.replacementTime=(d+u-1)*e.segmentDuration,m=f.media,m=s.replaceTokenForTemplate(m,"Number",v.replacementNumber),m=s.replaceTokenForTemplate(m,"Time",v.replacementTime),v.media=m,g.push(v),v=null;return e.availableSegmentsNumber=isNaN(h)?1:Math.ceil((p.end-p.start)/h),g}var i=e.timelineConverter,r=void 0;return r={getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(36);r.__dashjs_factory_name="TemplateSegmentsGetter";var u=a["default"].getClassFactory(r);n["default"]=u,t.exports=n["default"]},{10:10,36:36}],38:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){C=0,P=!1,A=0/0,E.on(u["default"].TIME_SYNCHRONIZATION_COMPLETED,_,this)}function t(){return P}function n(e){P=e}function i(){return C}function r(e){C=e}function o(){return A}function s(e){A=e}function l(e,t,n,i){var r=0/0;return r=i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-C)):t.availabilityStartTime}function c(e,t,n){return l.call(this,e,t,n)}function d(e,t,n){return l.call(this,e,t,n,!0)}function f(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*C)/1e3}function h(e,t){var n=t.adaptation.period.start,i=t.presentationTimeOffset;return e+(n-i)}function p(e,t){var n=t.adaptation.period.start,i=t.presentationTimeOffset;return e-n+i}function g(e,t){var n,i,r;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,i=e.presentationStartTime+n,r=new Date(e.availabilityStartTime.getTime()+1e3*i)),r}function m(e,t){var n=e.adaptation.period,i={start:n.start,end:n.start+n.duration};if(!t)return i;if(!P&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=f(new Date,n),a=n.start+n.duration;return i.start=Math.max(o-n.mpd.timeShiftBufferDepth,n.start),i.end=o>=a&&a>o-r?a-r:o-r,i}function v(e,t){var n=e.adaptation.period.start;return t-n}function y(e,t){var n=e.adaptation.period.start;return t+n}function _(e){P||void 0!==e.offset&&(r(e.offset/1e3),P=!0)}function b(e){var t=e.presentationTimeOffset,n=e.adaptation.period.start;return n-t}function T(){E.off(u["default"].TIME_SYNCHRONIZATION_COMPLETED,_,this),C=0,P=!1,A=0/0}var w=this.context,E=a["default"](w).getInstance(),S=void 0,C=void 0,P=void 0,A=void 0;return S={initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:i,setClientTimeOffset:r,getExpectedLiveEdge:o,setExpectedLiveEdge:s,calcAvailabilityStartTimeFromPresentationTime:c,calcAvailabilityEndTimeFromPresentationTime:d,calcPresentationTimeFromWallTime:f,calcPresentationTimeFromMediaTime:h,calcPeriodRelativeTimeFromMpdRelativeTime:v,calcMpdRelativeTimeFromPeriodRelativeTime:y,calcMediaTimeFromPresentationTime:p,calcSegmentAvailabilityRange:m,calcWallTimeForSegment:g,calcMSETimeOffset:b,reset:T}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="TimelineConverter",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,9:9}],39:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function n(e,n,r,o){var a,u,l,c,d,f,h,p,g,m,v,y,_,b,T=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,w=T.SegmentTimeline,E=T.SegmentURL_asArray,S=e.availableSegmentsNumber>0,C=10,P=0,A=0,I=-1,x=[],O=!1,M=function(n,r){var o=T.media,a=n.mediaRange;return E&&(o=E[r].media||"",a=E[r].mediaRange),s.getTimeBasedSegment(i,t,e,P,n.d,b,o,a,I)};for(b=e.timescale,a=w.S_asArray,g=s.decideSegmentListRangeForTimeline(i,t,n,r,o),g?(y=g.start,_=g.end):v=i.calcMediaTimeFromPresentationTime(n||0,e),l=0,c=a.length;c>l;l++){if(u=a[l],f=0,u.hasOwnProperty("r")&&(f=u.r),u.hasOwnProperty("t")&&(P=u.t,A=P/b),0>f){if(p=a[l+1],p&&p.hasOwnProperty("t"))h=p.t/b;else{var k=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:i.calcSegmentAvailabilityRange(e,t).end;h=i.calcMediaTimeFromPresentationTime(k,e),e.segmentDuration=u.d/b}f=Math.ceil((h-A)/(u.d/b))-1}if(m){if(S)break;I+=f+1}else for(d=0;f>=d;d++){if(I++,g){if(I>_){if(m=!0,S)break;continue}I>=y&&x.push(M(u,I))}else{if(x.length>C){if(m=!0,S)break;continue}O?x.push(M(u,I)):A>=v-u.d/b*1.5&&(O=!0,x.push(M(u,I)))}P+=u.d,A=P/b}}return S||(e.availableSegmentsNumber=I+1),x}var i=e.timelineConverter,r=void 0;return r={getSegments:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(36);r.__dashjs_factory_name="TimelineSegmentsGetter";var u=a["default"].getClassFactory(r);n["default"]=u,t.exports=n["default"]},{10:10,36:36}],40:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.period=null,this.index=-1,this.type=null};n["default"]=r,t.exports=n["default"]},{}],41:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=1,o=1,a=function s(e,t,n,a){i(this,s),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||r,this.dvb_weight=a||o};a.DEFAULT_DVB_PRIORITY=r,a.DEFAULT_DVB_WEIGHT=o,n["default"]=a,t.exports=n["default"]},{}],42:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.duration=0/0,this.presentationTime=0/0,this.id=0/0,this.messageData="",this.eventStream=null,this.presentationTimeDelta=0/0};n["default"]=r,t.exports=n["default"]},{}],43:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};n["default"]=r,t.exports=n["default"]},{}],44:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=0/0,this.mediaPresentationDuration=0/0};n["default"]=r,t.exports=n["default"]},{}],45:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.id=null,this.index=-1,this.duration=0/0,this.start=0/0,this.mpd=null};r.DEFAULT_ID="defaultId",n["default"]=r,t.exports=n["default"]},{}],46:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=0/0,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=0/0,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=0/0,this.maxPlayoutRate=0/0}return r(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();n["default"]=o,t.exports=n["default"]},{}],47:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=0/0,this.replacementTime=null,this.replacementNumber=0/0,this.mediaStartTime=0/0,this.presentationStartTime=0/0,this.availabilityStartTime=0/0,this.availabilityEndTime=0/0,this.availabilityIdx=0/0,this.wallStartTime=0/0,this.representation=null};n["default"]=r,t.exports=n["default"]},{}],48:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.schemeIdUri="",this.value=""};n["default"]=r,t.exports=n["default"]},{}],49:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){h=a["default"](s).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){var t=function(t){l.trigger(p["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new u["default"](e.url);h.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function i(e){var t=function(t,n){l.trigger(p["default"].LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:d})};e?h.load({request:e,progress:function(){l.trigger(p["default"].LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,i){t(void 0,new c["default"](v,i,n))}}):t(void 0,new c["default"](y,_))}function r(){h&&h.abort()}function o(){h&&(h.abort(),h=null)}var s=this.context,l=f["default"](s).getInstance(),d=void 0,h=void 0;return d={checkForExistence:n,load:i,abort:r,reset:o},t(),d}Object.defineProperty(n,"__esModule",{value:!0});var o=e(59),a=i(o),s=e(165),u=i(s),l=e(163),c=i(l),d=e(9),f=i(d),h=e(13),p=i(h),g=e(10),m=i(g),v=1,y=2,_="request is null";r.__dashjs_factory_name="FragmentLoader";var b=m["default"].getClassFactory(r);b.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=v,b.FRAGMENT_LOADER_ERROR_NULL_REQUEST=y,n["default"]=b,t.exports=n["default"]},{10:10,13:13,163:163,165:165,59:59,9:9}],50:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){s.on(_["default"].XLINK_READY,n,h),m=u["default"](o).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),y=a["default"](o).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){s.trigger(_["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function i(e){var t=new f["default"](e,g.HTTPRequest.MPD_TYPE);m.load({request:t,success:function(t,n,i){var r,o;i.responseURL&&i.responseURL!==e?(o=l.parseBaseUrl(i.responseURL),r=i.responseURL):(l.isRelative(e)&&(e=l.resolve(e,window.location.href)),o=l.parseBaseUrl(e));var a=d.parse(t,y);a?(a.url=r||e,a.originalUrl||(a.originalUrl=a.url),a.baseUri=o,a.loadedTime=new Date,y.resolveManifestOnLoad(a)):s.trigger(_["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p["default"](w,S)})},error:function(t,n,i){s.trigger(_["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p["default"](E,"Failed loading manifest: "+e+", "+i)})}})}function r(){s.off(_["default"].XLINK_READY,n,h),y&&(y.reset(),y=null),m&&(m.abort(),m=null)}var o=this.context,s=v["default"](o).getInstance(),l=c["default"](o).getInstance(),d=e.parser,h=void 0,m=void 0,y=void 0;return h={load:i,reset:r},t(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(75),a=i(o),s=e(59),u=i(s),l=e(159),c=i(l),d=e(171),f=i(d),h=e(163),p=i(h),g=e(180),m=e(9),v=i(m),y=e(13),_=i(y),b=e(10),T=i(b),w=1,E=2,S="parsing failed";r.__dashjs_factory_name="ManifestLoader";var C=T["default"].getClassFactory(r);C.MANIFEST_LOADER_ERROR_PARSING_FAILURE=w,C.MANIFEST_LOADER_ERROR_LOADING_FAILURE=E,n["default"]=C,t.exports=n["default"]},{10:10,13:13,159:159,163:163,171:171,180:180,59:59,75:75,9:9}],51:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){e&&(e.manifestModel&&(A=e.manifestModel),e.dashManifestModel&&(I=e.dashManifestModel))}function t(e){P=e,w=0/0,E=null,C=!1,S=!0,x=f["default"](y).getInstance(),b.on(u["default"].STREAMS_COMPOSED,v,this),b.on(u["default"].PLAYBACK_STARTED,g,this),b.on(u["default"].PLAYBACK_PAUSED,m,this),b.on(u["default"].INTERNAL_MANIFEST_LOADED,h,this)}function n(e){c(e)}function i(){return P}function r(){b.off(u["default"].PLAYBACK_STARTED,g,this),b.off(u["default"].PLAYBACK_PAUSED,m,this),b.off(u["default"].STREAMS_COMPOSED,v,this),b.off(u["default"].INTERNAL_MANIFEST_LOADED,h,this),o(),S=!0,C=!1,w=0/0,x=null}function o(){null!==E&&(clearInterval(E),E=null)}function s(){o(),isNaN(w)||(_("Refresh manifest in "+w+" seconds."),E=setTimeout(d,1e3*w))}function l(){C=!0;var e=A.getValue(),t=e.url,n=I.getLocation(e);n&&(t=n),P.load(t)}function c(e){A.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;w=I.getManifestUpdatePeriod(e,n),b.trigger(u["default"].MANIFEST_UPDATED,{manifest:e}),_("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),S||s()}function d(){S&&!x.getScheduleWhilePaused()||C||l()}function h(e){e.error||c(e.manifest)}function g(){S=!1,s()}function m(){S=!0,o()}function v(){C=!1}var y=this.context,_=p["default"](y).getInstance().log,b=a["default"](y).getInstance(),T=void 0,w=void 0,E=void 0,S=void 0,C=void 0,P=void 0,A=void 0,I=void 0,x=void 0;return T={initialize:t,setManifest:n,getManifestLoader:i,refreshManifest:l,setConfig:e,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l),d=e(102),f=i(d),h=e(8),p=i(h);r.__dashjs_factory_name="ManifestUpdater",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,102:102,13:13,8:8,9:9}],52:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){oi=!1,ai=!1,si=!0,ci=null,ri=null,fi=null,nt["default"].extend(rt["default"]),pi=D["default"](Jn).getInstance()}function t(e,t,n){return mi=b["default"](Jn).getInstance(),gi=y["default"](Jn).getInstance(),mi.supportsMediaSource()?void(oi||(oi=!0,ui=F["default"](Jn).getInstance(),_i=u["default"](Jn).getInstance(),li=f["default"](Jn).getInstance(),li.initialize(),Ti=ht["default"](Jn).getInstance(),bi=gt["default"](Jn).getInstance(),hi=N["default"](Jn).getInstance(),hi.setConfig({adapter:Vn()}),sn(),yt(void 0!==n?n:!0),e&&Mn(e),t&&Ln(t),ti("[dash.js "+W()+"] MediaPlayer has been initialized"))):void gi.capabilityError("mediasource")}function n(){return!!wi&&!!ii}function i(){if(!ai)throw $n;(!si||o()&&ai)&&_i.play()}function r(){if(!ai)throw $n;_i.pause()}function o(){if(!ai)throw $n;return _i.isPaused()}function s(){if(!ai)throw $n;return _i.isSeeking()}function l(){if(!ai)throw $n;return _i.getIsDynamic()}function d(e){if(!wi)throw Kn;On().muted=e}function h(){if(!wi)throw Kn;return On().muted}function g(e){if(!wi)throw Kn;On().volume=e}function v(){if(!wi)throw Kn;return On().volume}function _(e){var t=["video","audio","fragmentedText"];if(e){if(-1!==t.indexOf(e)){var n=wt().getCurrentBufferLevel(Et(e));return n?n:0/0}return ti("Warning  - getBufferLength requested for invalid type"),0/0}return t.map(function(e){return Ut(e).length>0?wt().getCurrentBufferLevel(Et(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})}function T(){var e=qn();return e?e.manifestInfo.DVRWindowSize:0}function E(e){var t=qn();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function C(e){if(!ai)throw $n;var t=_i.getIsDynamic()?E(e):e;_i.seek(t)}function A(e){if(!ai)throw $n;var t=On().currentTime;if(void 0!==e)t=vi.getTimeRelativeToStreamId(t,e);else if(_i.getIsDynamic()){var n=qn();t=null===n?0:x()-(n.range.end-n.time)}return t}function x(){if(!ai)throw $n;var e=On().duration;if(_i.getIsDynamic()){var t,n=qn();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function M(){if(!ai)throw $n;return A()<0?0/0:Wn(A())}function R(){if(!ai)throw $n;return Wn(x())}function L(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],r=new Date(1e3*e),o=r.toLocaleDateString(t),a=r.toLocaleTimeString(t,{hour12:n});return i?a+" "+o:a}function j(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);
return(0===t?"":10>t?"0"+t.toString()+":":t.toString()+":")+(10>n?"0"+n.toString():n.toString())+":"+(10>i?"0"+i.toString():i.toString())}function U(e,t,n){at["default"].extend(e,t,n,Jn)}function V(e,t,n){Zn.on(e,t,n)}function G(e,t,n){Zn.off(e,t,n)}function W(){return st.getVersionString()}function Y(){return ei}function K(){if(!wi)throw Kn;return wi}function Q(e){pi.setLiveDelayFragmentCount(e)}function Z(e){pi.setLiveDelay(e)}function tt(){return pi.getLiveDelay()}function it(e){pi.setUseSuggestedPresentationDelay(e)}function ot(e,t){pi.setLastBitrateCachingInfo(e,t)}function ut(e,t){pi.setLastMediaSettingsCachingInfo(e,t)}function ct(e,t){ui.setMaxAllowedBitrateFor(e,t)}function ft(e){return ui.getMaxAllowedBitrateFor(e)}function pt(e,t){ui.setMaxAllowedRepresentationRatioFor(e,t)}function mt(e){return ui.getMaxAllowedRepresentationRatioFor(e)}function yt(e){si=e}function _t(){return si}function bt(e){pi.setScheduleWhilePaused(e)}function Tt(){return pi.getScheduleWhilePaused()}function wt(){return bi}function Et(e){return hi.getReadOnlyMetricsFor(e)}function St(e){if(!ai)throw $n;return ui.getQualityFor(e,vi.getActiveStreamInfo())}function Ct(e,t){if(!ai)throw $n;ui.setPlaybackQuality(e,vi.getActiveStreamInfo(),t)}function Pt(){ui.setElementSize(),ui.setWindowResizeEventCalled(!0)}function At(){return ui.getLimitBitrateByPortal()}function It(e){ui.setLimitBitrateByPortal(e)}function xt(){return ui.getUsePixelRatioInLimitBitrateByPortal()}function Ot(e){ui.setUsePixelRatioInLimitBitrateByPortal(e)}function Mt(e){if(!ai)throw $n;void 0===Ei&&(Ei=I["default"](Jn).getInstance());for(var t=On().textTracks,n=t.length,i=0;n>i;i++){var r=t[i],o=e===i?"showing":"hidden";r.mode!==o&&(r.mode=o)}Ei.setTextTrack()}function kt(){var e=0/0;return Ei&&(e=Ei.getCurrentTrackIdx()),e}function Rt(e){if(!ai)throw $n;var t=zn();return t?t.getBitrateListFor(e):[]}function Dt(e,t){ui.setInitialBitrateFor(e,t)}function Lt(e){if(!ai)throw $n;return ui.getInitialBitrateFor(e)}function Nt(e,t){ui.setInitialRepresentationRatioFor(e,t)}function jt(e){return ui.getInitialRepresentationRatioFor(e)}function Ft(e){if(!ai)throw $n;return fi.getStreamsInfo(e)}function Ut(e){if(!ai)throw $n;var t=vi.getActiveStreamInfo();return t?li.getTracksFor(e,t):[]}function Bt(e,t,n){if(!ai)throw $n;return n=n||fi.getStreamsInfo(t)[0],n?fi.getAllMediaInfoForType(t,n,e):[]}function Vt(e){if(!ai)throw $n;var t=vi.getActiveStreamInfo();return t?li.getCurrentTrackFor(e,t):null}function Ht(e,t){li.setInitialSettings(e,t)}function Gt(e){return li.getInitialSettings(e)}function qt(e){if(!ai)throw $n;li.setTrack(e)}function Wt(e){return li.getSwitchMode(e)}function zt(e,t){li.setSwitchMode(e,t)}function Yt(e){li.setSelectionModeForInitialTrack(e)}function $t(){return li.getSelectionModeForInitialTrack()}function Kt(){return ui.getAutoSwitchBitrateFor("video")||ui.getAutoSwitchBitrateFor("audio")}function Xt(e){ui.setAutoSwitchBitrateFor("video",e),ui.setAutoSwitchBitrateFor("audio",e)}function Qt(e){return ui.getAutoSwitchBitrateFor(e)}function Jt(e,t){ui.setAutoSwitchBitrateFor(e,t)}function Zt(e){pi.setFastSwitchEnabled(e)}function en(){return pi.getFastSwitchEnabled()}function tn(e){pi.setBufferOccupancyABREnabled(e)}function nn(e,t){var n=Un(),i=this,r=function a(e){e.error?t(null,e.error):t(e.manifest),Zn.off(nt["default"].INTERNAL_MANIFEST_LOADED,a,i),n.reset()};Zn.on(nt["default"].INTERNAL_MANIFEST_LOADED,r,i);var o=O["default"](Jn).getInstance();o.initialize(),n.load(o.parseURI(e))}function rn(e,t){on(e,t);var n=new a["default"];n.schemeIdUri=e,n.value=t,pi.getUTCTimingSources().push(n)}function on(e,t){var n=pi.getUTCTimingSources();n.forEach(function(i,r){i.schemeIdUri===e&&i.value===t&&n.splice(r,1)})}function an(){pi.setUTCTimingSources([])}function sn(){rn(D["default"].DEFAULT_UTC_TIMING_SOURCE.scheme,D["default"].DEFAULT_UTC_TIMING_SOURCE.value)}function un(e){pi.setUseManifestDateHeaderTimeSource(e)}function ln(e){pi.setBufferToKeep(e)}function cn(e){pi.setBufferPruningInterval(e)}function dn(e){pi.setStableBufferTime(e)}function fn(e){pi.setBufferTimeAtTopQuality(e)}function hn(e){pi.setBufferTimeAtTopQualityLongForm(e)}function pn(e){pi.setLongFormContentDurationThreshold(e)}function gn(e){pi.setRichBufferThreshold(e)}function mn(e){pi.setBandwidthSafetyFactor(e)}function vn(){return pi.getBandwidthSafetyFactor()}function yn(e){pi.setAbandonLoadTimeout(e)}function _n(e){pi.setFragmentRetryAttempts(e)}function bn(e){pi.setFragmentRetryInterval(e)}function Tn(e){wn(void 0,e)}function wn(e,t){pi.setXHRWithCredentialsForType(e,t)}function En(e){return pi.getXHRWithCredentialsForType(e)}function Sn(){return Hn()}function Cn(e){ci=e}function Pn(e){ri=e}function An(e){var t=w["default"](Jn).getInstance();t.setConfig({videoModel:wi}),t.initialize(),t.displayCConTop(e)}function In(){return wi?wi.getVideoContainer():null}function xn(e){if(!wi)throw Kn;wi.setVideoContainer(e)}function On(){if(!wi)throw Kn;return wi.getElement()}function Mn(e){if(!oi)throw Qn;wi=null,e&&(wi=q["default"](Jn).getInstance(),wi.initialize(),wi.setElement(e),Hn(),Gn()),jn()}function kn(){return wi?wi.getTTMLRenderingDiv():null}function Rn(e){if(!wi)throw Kn;wi.setTTMLRenderingDiv(e)}function Dn(){if(!ii)throw Xn;return ii}function Ln(e){if(!oi)throw Qn;if("string"==typeof e){var t=O["default"](Jn).getInstance();t.initialize(),ii=t.parseURI(e)}else ii=e;jn()}function Nn(){Ln(null),Mn(null),ri=null,ci=null}function jn(){ai?(ai=!1,fi.reset(),vi.reset(),_i.reset(),ui.reset(),yi.reset(),li.reset(),vi=null,di=null,n()&&Yn()):n()&&Yn()}function Fn(){var e=H["default"](Jn).getInstance();e.initialize();var t=S["default"](Jn).getInstance();t.setConfig({dashManifestModel:Ti}),li.initialize(),li.setConfig({errHandler:gi}),yi=z["default"](Jn).getInstance(),yi.initialize(),yi.setConfig({abrRulesCollection:e}),vi=c["default"](Jn).getInstance(),vi.setConfig({capabilities:mi,manifestLoader:Un(),manifestModel:k["default"](Jn).getInstance(),dashManifestModel:Ti,protectionController:ci,adapter:fi,metricsModel:hi,dashMetrics:bi,liveEdgeFinder:m["default"](Jn).getInstance(),mediaSourceController:$["default"](Jn).getInstance(),timeSyncController:B["default"](Jn).getInstance(),baseURLController:X["default"](Jn).getInstance(),errHandler:gi,timelineConverter:vt["default"](Jn).getInstance()}),vi.initialize(si,ri),ui.setConfig({abrRulesCollection:e,rulesController:yi,streamController:vi})}function Un(){return p["default"](Jn).create({errHandler:gi,parser:Bn(),metricsModel:hi,requestModifier:P["default"](Jn).getInstance()})}function Bn(){return dt["default"](Jn).create()}function Vn(){return fi=lt["default"](Jn).getInstance(),fi.initialize(),fi.setConfig({dashManifestModel:Ti}),fi}function Hn(){if(ci)return ci;var e=dashjs.Protection;if("function"==typeof e){var t=e(Jn).create();return nt["default"].extend(e.events),rt["default"].extend(e.events,{publicOnly:!0}),ci=t.createProtectionSystem({log:ti,videoModel:wi,capabilities:mi,eventBus:Zn,adapter:fi})}return null}function Gn(){if(di)return di;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Jn).create();return di=t.createMetricsReporting({log:ti,eventBus:Zn,mediaElement:On(),dashManifestModel:Ti,metricsModel:hi})}return null}function qn(){var e=hi.getReadOnlyMetricsFor("video")||hi.getReadOnlyMetricsFor("audio");return bi.getCurrentDVRInfo(e)}function Wn(e){var t,n,i=qn();return i?(t=i.manifestInfo.availableFrom.getTime()/1e3,n=e+(t+i.range.start)):0}function zn(){if(!ai)throw $n;var e=vi.getActiveStreamInfo();return e?vi.getStreamById(e.id):null}function Yn(){ai||(ai=!0,ti("Playback Initialized"),Fn(),"string"==typeof ii?vi.load(ii):vi.loadWithManifest(ii))}var $n="You must first call play() to init playback before calling this method",Kn="You must first call attachView() to set the video element before calling this method",Xn="You must first call attachSource() with a valid source before calling this method",Qn="MediaPlayer not initialized!",Jn=this.context,Zn=et["default"](Jn).getInstance(),ei=J["default"](Jn).getInstance(),ti=ei.log,ni=void 0,ii=void 0,ri=void 0,oi=void 0,ai=void 0,si=void 0,ui=void 0,li=void 0,ci=void 0,di=void 0,fi=void 0,hi=void 0,pi=void 0,gi=void 0,mi=void 0,vi=void 0,yi=void 0,_i=void 0,bi=void 0,Ti=void 0,wi=void 0,Ei=void 0;return ni={initialize:t,on:V,off:G,extend:U,attachView:Mn,attachSource:Ln,isReady:n,play:i,isPaused:o,pause:r,isSeeking:s,isDynamic:l,seek:C,setMute:d,isMuted:h,setVolume:g,getVolume:v,time:A,duration:x,timeAsUTC:M,durationAsUTC:R,getActiveStream:zn,getDVRWindowSize:T,getDVRSeekOffset:E,convertToTimeCode:j,formatUTC:L,getVersion:W,getDebug:Y,getBufferLength:_,getVideoModel:K,getVideoContainer:In,getTTMLRenderingDiv:kn,getVideoElement:On,getSource:Dn,setLiveDelayFragmentCount:Q,setLiveDelay:Z,getLiveDelay:tt,useSuggestedPresentationDelay:it,enableLastBitrateCaching:ot,enableLastMediaSettingsCaching:ut,setMaxAllowedBitrateFor:ct,getMaxAllowedBitrateFor:ft,setMaxAllowedRepresentationRatioFor:pt,getMaxAllowedRepresentationRatioFor:mt,setAutoPlay:yt,getAutoPlay:_t,setScheduleWhilePaused:bt,getScheduleWhilePaused:Tt,getDashMetrics:wt,getMetricsFor:Et,getQualityFor:St,setQualityFor:Ct,updatePortalSize:Pt,getLimitBitrateByPortal:At,setLimitBitrateByPortal:It,getUsePixelRatioInLimitBitrateByPortal:xt,setUsePixelRatioInLimitBitrateByPortal:Ot,setTextTrack:Mt,getBitrateInfoListFor:Rt,setInitialBitrateFor:Dt,getInitialBitrateFor:Lt,setInitialRepresentationRatioFor:Nt,getInitialRepresentationRatioFor:jt,getStreamsFromManifest:Ft,getTracksFor:Ut,getTracksForTypeFromManifest:Bt,getCurrentTrackFor:Vt,setInitialMediaSettingsFor:Ht,getInitialMediaSettingsFor:Gt,setCurrentTrack:qt,getTrackSwitchModeFor:Wt,setTrackSwitchModeFor:zt,setSelectionModeForInitialTrack:Yt,getSelectionModeForInitialTrack:$t,getAutoSwitchQuality:Kt,setAutoSwitchQuality:Xt,setFastSwitchEnabled:Zt,getFastSwitchEnabled:en,getAutoSwitchQualityFor:Qt,setAutoSwitchQualityFor:Jt,enableBufferOccupancyABR:tn,setBandwidthSafetyFactor:mn,getBandwidthSafetyFactor:vn,setAbandonLoadTimeout:yn,retrieveManifest:nn,addUTCTimingSource:rn,removeUTCTimingSource:on,clearDefaultUTCTimingSources:an,restoreDefaultUTCTimingSources:sn,setBufferToKeep:ln,setBufferPruningInterval:cn,setStableBufferTime:dn,setBufferTimeAtTopQuality:fn,setFragmentLoaderRetryAttempts:_n,setFragmentLoaderRetryInterval:bn,setXHRWithCredentials:Tn,setXHRWithCredentialsForType:wn,getXHRWithCredentialsForType:En,setBufferTimeAtTopQualityLongForm:hn,setLongFormContentDurationThreshold:pn,setRichBufferThreshold:gn,getProtectionController:Sn,attachProtectionController:Cn,setProtectionData:Pn,enableManifestDateHeaderTimeSource:un,displayCaptionsOnTop:An,attachVideoContainer:xn,attachTTMLRenderingDiv:Rn,getCurrentTextTrackIndex:kt,reset:Nn},e(),ni}Object.defineProperty(n,"__esModule",{value:!0});var o=e(48),a=i(o),s=e(69),u=i(s),l=e(72),c=i(l),d=e(67),f=i(d),h=e(50),p=i(h),g=e(155),m=i(g),v=e(152),y=i(v),_=e(148),b=i(_),T=e(58),w=i(T),E=e(71),S=i(E),C=e(157),P=i(C),A=e(57),I=i(A),x=e(104),O=i(x),M=e(101),k=i(M),R=e(102),D=i(R),L=e(103),N=i(L),j=e(61),F=i(j),U=e(74),B=i(U),V=e(134),H=i(V),G=e(105),q=i(G),W=e(131),z=i(W),Y=e(68),$=i(Y),K=e(62),X=i(K),Q=e(8),J=i(Q),Z=e(9),et=i(Z),tt=e(13),nt=i(tt),it=e(53),rt=i(it),ot=e(10),at=i(ot),st=e(11),ut=e(15),lt=i(ut),ct=e(23),dt=i(ct),ft=e(22),ht=i(ft),pt=e(17),gt=i(pt),mt=e(38),vt=i(mt);r.__dashjs_factory_name="MediaPlayer";var yt=at["default"].getClassFactory(r);yt.events=rt["default"],n["default"]=yt,t.exports=n["default"]},{10:10,101:101,102:102,103:103,104:104,105:105,11:11,13:13,131:131,134:134,148:148,15:15,152:152,155:155,157:157,17:17,22:22,23:23,38:38,48:48,50:50,53:53,57:57,58:58,61:61,62:62,67:67,68:68,69:69,71:71,72:72,74:74,8:8,9:9}],53:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(14),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{14:14}],54:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var r,o=e.id||e.name||"video element";if(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==i})[0],!t&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},r=u["default"](n).create(),r.initialize(e,t.src,e.autoplay),r.getDebug().log("Converted "+o+" to dash.js player and added content: "+t.src),e._dashjs_player=r,r}function t(t,r){var o=[];t=t||"[data-dashjs-player]",r=r||document;for(var a=r.querySelectorAll(t),s=0;s<a.length;s++){var u=e(a[s],null);o.push(u)}for(var l=r.querySelectorAll('source[type="'+i+'"]'),s=0;s<l.length;s++){var c=n(l[s]),u=e(c,null);o.push(u)}return o}function n(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}var i="application/dash+xml";return{create:e,createAll:t}}function o(){window.removeEventListener("load",o),l.createAll()}function a(){window.dashjs&&(window.clearInterval(c),l.createAll())}Object.defineProperty(n,"__esModule",{value:!0});var s=e(52),u=i(s),l=r(),c=void 0,d="undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!d&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?l.createAll():c=window.setInterval(a,500):window.addEventListener("load",o)),n["default"]=l,t.exports=n["default"]},{52:52}],55:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){lt=[],ct=!1,dt=!1,ft=null,ht={},pt=!1,gt=!1,vt=a["default"](J).getInstance(),yt=w["default"](J).getInstance(),wt=m["default"](J).getInstance(),_t=c["default"](J).getInstance(),bt=p["default"](J).create(),Et=B["default"](J).getInstance(),et.on(D["default"].BUFFERING_COMPLETED,z,ut),et.on(D["default"].DATA_UPDATE_COMPLETED,Y,ut)}function n(e,t){ft=e,mt=t,mt&&(et.on(D["default"].KEY_ERROR,x,ut),et.on(D["default"].SERVER_CERTIFICATE_UPDATED,x,ut),et.on(D["default"].LICENSE_REQUEST_COMPLETE,x,ut),et.on(D["default"].KEY_SYSTEM_SELECTED,x,ut),et.on(D["default"].KEY_SESSION_CREATED,x,ut))}function i(e){ct||(et.on(D["default"].CURRENT_TRACK_CHANGED,L,ut),H(e),ct=!0)}function r(){for(var e=lt.length,t=0;e>t;t++)lt[t].reset();lt=[],ct=!1,dt=!1,E(),et.off(D["default"].CURRENT_TRACK_CHANGED,L,ut)}function o(){yt&&(yt.pause(),yt=null),bt&&(bt.reset(),bt=null),r(),_t=null,wt=null,nt=null,tt=null,it=null,rt=null,Z=null,ot=null,pt=!1,gt=!1,ht={},et.off(D["default"].DATA_UPDATE_COMPLETED,Y,ut),et.off(D["default"].BUFFERING_COMPLETED,z,ut),et.off(D["default"].KEY_ERROR,x,ut),et.off(D["default"].SERVER_CERTIFICATE_UPDATED,x,ut),et.off(D["default"].LICENSE_REQUEST_COMPLETE,x,ut),et.off(D["default"].KEY_SYSTEM_SELECTED,x,ut),et.off(D["default"].KEY_SESSION_CREATED,x,ut)}function s(){return ft.duration}function l(){return ft.start}function d(){return ft.index}function h(){return ft.id}function g(){return ft}function v(e){return null!==q(e)}function _(e){var t=q(e);return wt.getBitrateList(t)}function T(){Tt&&Tt.start()}function E(){Tt&&Tt.clear()}function C(){return ct}function A(){return gt}function x(e){e.error&&(ot.mediaKeySessionError(e.error),Z(e.error),o())}function M(e){return"text"===e.type?e.mimeType:e.type}function R(e,t,n){var i,r,o=e.type;if("muxed"===o&&e)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z(r),ot.manifestError(r,"multiplexedrep",tt.getValue()),!1;if("text"===o||"fragmentedText"===o||"embeddedText"===o)return!0;if(i=e.codec,Z(o+" codec: "+i),e.contentProtection&&!rt.supportsEncryptedMedia())ot.capabilityError("encryptedmedia");else if(!rt.supportsCodec(y["default"](J).getInstance().getElement(),i))return r=o+"Codec ("+i+") is not supported.",ot.manifestError(r,"codec",n),Z(r),!1;return!0}function L(e){if(e.newMediaInfo.streamInfo.id===ft.id){var t=$(e.oldMediaInfo);if(t){var n=yt.getTime(),i=t.getBuffer(),r=e.newMediaInfo,o=tt.getValue(),a=lt.indexOf(t),s=t.getMediaSource();"fragmentedText"!==r.type?(t.reset(!0),U(r,o,s,{buffer:i,replaceIdx:a,currentTime:n}),yt.seek(yt.getTime())):t.updateMediaInfo(o,r)}}}function j(e){var t=e.split("/")[1];return"webm"===t.toLowerCase()}function F(e){var t=j(e.mimeType)?I["default"](J).getInstance():P["default"](J).getInstance();t.setConfig({baseURLController:st,metricsModel:b["default"](J).getInstance()}),t.initialize();var n=S["default"](J).create({segmentBaseLoader:t,timelineConverter:at,dashMetrics:O["default"](J).getInstance(),metricsModel:b["default"](J).getInstance(),baseURLController:st});return n}function U(e,t,n,i){var r=u["default"](J).create({indexHandler:F(e),timelineConverter:at,adapter:it,manifestModel:tt}),o=it.getAllMediaInfoForType(t,ft,e.type);if(r.initialize(M(e),bt,n,ut,Tt),wt.updateTopQualityIndex(e),i?(r.setBuffer(i.buffer),r.getIndexHandler().setCurrentTime(i.currentTime),lt[i.replaceIdx]=r):lt.push(r),"text"===e.type||"fragmentedText"===e.type){for(var a,s=0;s<o.length;s++)o[s].index===e.index&&(a=s),r.updateMediaInfo(t,o[s]);"fragmentedText"===e.type&&r.updateMediaInfo(t,o[a])}else r.updateMediaInfo(t,e);return r}function V(e,t){var n,i=tt.getValue(),r=it.getAllMediaInfoForType(i,ft,e),o=null;if(!r||0===r.length)return void Z("No "+e+" data.");for(var a=0,s=r.length;s>a;a++)if(o=r[a],"embeddedText"===e)Et.addEmbeddedTrack(o);else{if(!R(o,t,i))continue;_t.isMultiTrackSupportedByType(o.type)&&_t.addTrack(o,ft)}"embeddedText"!==e&&0!==_t.getTracksFor(e,ft).length&&(_t.checkInitialMediaSettingsForType(e,ft),n=_t.getCurrentTrackFor(e,ft),U(n,i,t))}function H(e){var t,n=tt.getValue();if(Tt=f["default"](J).getInstance(),Tt.initialize(),Tt.setConfig({manifestModel:tt,manifestUpdater:nt}),t=it.getEventsFor(n,ft),Tt.addInlineEvents(t),pt=!0,V("video",e),V("audio",e),V("text",e),V("fragmentedText",e),V("embeddedText",e),V("muxed",e),W(),dt=!0,pt=!1,0===lt.length){var i="No streams to play.";ot.manifestError(i,"nostreams",n),Z(i)}else vt.initialize(at,lt[0]),G()}function G(){var e=lt.length,t=!!ht.audio||!!ht.video,n=t?new Error(Q,"Data update failed",null):null,i=0;for(i;e>i;i++)if(lt[i].isUpdating()||pt)return;gt=!0,dt&&(mt&&mt.initialize(tt.getValue(),q("audio"),q("video")),et.trigger(D["default"].STREAM_INITIALIZED,{streamInfo:ft,error:n}))}function q(e){for(var t=lt.length,n=null,i=0;t>i;i++)if(n=lt[i],n.getType()===e)return n.getMediaInfo();return null}function W(){for(var e=0,t=lt.length;t>e;e++)lt[e].createBuffer()}function z(e){if(e.streamInfo===ft){var t=K(),n=t.length,i=0;for(i;n>i;i++)if(!t[i].isBufferingCompleted())return;et.trigger(D["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:ft})}}function Y(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===ft&&(ht[t.getType()]=e.error,G())}function $(e){if(!e)return!1;var t=K();return t.filter(function(t){return t.getType()===e.type})[0]}function K(){var e,t,n=lt.length,i=[],r=0;for(r;n>r;r++)t=lt[r],e=t.getType(),("audio"===e||"video"===e||"fragmentedText"===e)&&i.push(t);return i}function X(e){Z("Manifest updated... updating data system wide.");var t=tt.getValue();if(ct=!1,pt=!0,gt=!1,ft=e,Tt){var n=it.getEventsFor(t,ft);Tt.addInlineEvents(n)}for(var i=0,r=lt.length;r>i;i++){var o=lt[i],a=it.getMediaInfoForType(t,ft,o.getType());wt.updateTopQualityIndex(a),o.updateMediaInfo(t,a)}pt=!1,G()}var Q=1,J=this.context,Z=N["default"](J).getInstance().log,et=k["default"](J).getInstance(),tt=e.manifestModel,nt=e.manifestUpdater,it=e.adapter,rt=e.capabilities,ot=e.errHandler,at=e.timelineConverter,st=e.baseURLController,ut=void 0,lt=void 0,ct=void 0,dt=void 0,ft=void 0,ht=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Tt=void 0,wt=void 0,Et=void 0;return ut={initialize:n,activate:i,deactivate:r,getDuration:s,getStartTime:l,getStreamIndex:d,getId:h,getStreamInfo:g,hasMedia:v,getBitrateListFor:_,startEventController:T,isActivated:C,isInitialized:A,updateData:X,reset:o,getProcessors:K},t(),ut}Object.defineProperty(n,"__esModule",{value:!0});var o=e(155),a=i(o),s=e(56),u=i(s),l=e(67),c=i(l),d=e(65),f=i(d),h=e(66),p=i(h),g=e(61),m=i(g),v=e(105),y=i(v),_=e(103),b=i(_),T=e(69),w=i(T),E=e(16),S=i(E),C=e(18),P=i(C),A=e(19),I=i(A),x=e(17),O=i(x),M=e(9),k=i(M),R=e(13),D=i(R),L=e(8),N=i(L),j=e(10),F=i(j),U=e(57),B=i(U);r.__dashjs_factory_name="Stream",n["default"]=F["default"].getClassFactory(r),t.exports=n["default"]},{10:10,103:103,105:105,13:13,155:155,16:16,17:17,18:18,19:19,56:56,57:57,61:61,65:65,66:66,67:67,69:69,8:8,9:9}],56:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){nt=[]}function n(e,t,n,i,r){tt=e,it=i,rt=r,lt=t,Z=it.getStreamInfo().manifestInfo.isDynamic,$.initialize(this),ot=a["default"](Y).getInstance(),ot.initialize(tt,this),at=z(e),st=m["default"](Y).create({metricsModel:w["default"](Y).getInstance(),manifestModel:Q,adapter:X,dashMetrics:D["default"](Y).getInstance(),dashManifestModel:k["default"](Y).getInstance(),timelineConverter:K,rulesController:y["default"](Y).getInstance(),mediaPlayerModel:b["default"](Y).getInstance()}),at.initialize(tt,n,this),st.initialize(tt,this),ct=S["default"](Y).create({metricsModel:w["default"](Y).getInstance(),errHandler:F["default"](Y).getInstance(),requestModifier:P["default"](Y).getInstance()}),dt=st.getFragmentModel(),dt.setLoader(ct),ut=N["default"](Y).create(),ut.initialize(this)}function i(e){$.reset(),at&&(at.reset(e),at=null),st&&(st.reset(),st=null),ut&&(ut.reset(),ut=null),lt=null,ct=null,rt=null,it=null,Z=null,et=null,nt=[],tt=null}function r(){return ut.isUpdating()}function o(){return tt}function s(){return ot}function l(){return ut}function d(){return ct}function h(){return $}function g(){return lt}function v(){return at.getBuffer()}function _(e){at.setBuffer(e)}function T(){return at}function E(){return dt}function C(){return it?it.getStreamInfo():null}function A(e,t){t===et||t&&et&&t.type!==et.type||(et=t),-1===nt.indexOf(t)&&nt.push(t),X.updateData(e,this)}function x(){return nt}function M(){return et}function R(){return at.getMediaSource()}function L(){return st}function j(){return rt}function U(){st.start()}function B(){st.stop()}function V(){return X.getCurrentRepresentationInfo(Q.getValue(),ut)}function H(e){return X.getRepresentationInfoForQuality(Q.getValue(),ut,e)}function G(){return at.getIsBufferingCompleted()}function q(){return at.getBuffer()||at.createBuffer(et)}function W(){return Z}function z(e){var t=null;return t="video"===e||"audio"===e||"fragmentedText"===e?u["default"](Y).create({metricsModel:w["default"](Y).getInstance(),manifestModel:Q,sourceBufferController:I["default"](Y).getInstance(),errHandler:F["default"](Y).getInstance(),streamController:c["default"](Y).getInstance(),mediaController:f["default"](Y).getInstance(),adapter:X,textSourceBuffer:O["default"](Y).getInstance()}):p["default"](Y).create({errHandler:F["default"](Y).getInstance(),sourceBufferController:I["default"](Y).getInstance()})}var Y=this.context,$=e.indexHandler,K=e.timelineConverter,X=e.adapter,Q=e.manifestModel,J=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0,st=void 0,ut=void 0,lt=void 0,ct=void 0,dt=void 0;return J={initialize:n,isUpdating:r,getType:o,getBufferController:T,getABRController:s,getFragmentLoader:d,getFragmentModel:E,getScheduleController:L,getEventController:j,getFragmentController:g,getRepresentationController:l,getIndexHandler:h,getCurrentRepresentationInfo:V,getRepresentationInfoForQuality:H,isBufferingCompleted:G,createBuffer:q,getStreamInfo:C,updateMediaInfo:A,getMediaInfoArr:x,getMediaInfo:M,getMediaSource:R,getBuffer:v,setBuffer:_,start:U,stop:B,isDynamic:W,reset:i},t(),J}Object.defineProperty(n,"__esModule",{value:!0});var o=e(61),a=i(o),s=e(64),u=i(s),l=e(72),c=i(l),d=e(67),f=i(d),h=e(73),p=i(h),g=e(70),m=i(g),v=e(131),y=i(v),_=e(102),b=i(_),T=e(103),w=i(T),E=e(49),S=i(E),C=e(157),P=i(C),A=e(71),I=i(A),x=e(57),O=i(x),M=e(22),k=i(M),R=e(17),D=i(R),L=e(21),N=i(L),j=e(152),F=i(j),U=e(10),B=i(U);r.__dashjs_factory_name="StreamProcessor",n["default"]=B["default"].getClassFactory(r),t.exports=n["default"]},{10:10,102:102,103:103,131:131,152:152,157:157,17:17,21:21,22:22,49:49,57:57,61:61,64:64,67:67,70:70,71:71,72:72,73:73}],57:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,n){F=!1,U=null,z=null,Y=!1,$=0/0,K=[],J=null,M||t();var i=n.getStreamProcessor();if(G=i.getMediaInfoArr(),q.setConfig({videoModel:X}),q.initialize(),W=!N.getIsTextTrack(e),D=c["default"](x).getInstance(),H=u["default"](x).getInstance(),H.setConfig({boxParser:D}),W){z=i.getFragmentModel(),this.buffered=f["default"](x).create(),K=j.getTracksFor("fragmentedText",Q.getActiveStreamInfo());for(var r=j.getCurrentTrackFor("fragmentedText",Q.getActiveStreamInfo()),o=0;o<K.length;o++)if(K[o]===r){Z=o;break}}}function t(){et=[],G=[],X=y["default"](x).getInstance(),q=b["default"](x).getInstance(),q.setConfig({videoModel:X}),q.initialize(),D=c["default"](x).getInstance(),H=u["default"](x).getInstance(),H.setConfig({boxParser:D}),W=!1,Z=null,tt=!1,nt=0,ot=[],rt=[],it=null,M=!0}function n(e,t){function n(e,t){var n=new a["default"],i={subtitle:"subtitles",caption:"captions"},r=function(){var e=t.roles.length>0?i[t.roles[0]]:i.caption;return e=e===i.caption||e===i.subtitle?e:i.caption},o=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=o(),n.video=X.getElement(),n.defaultTrack=P(t),n.isFragmented=W,n.isEmbedded=t.isEmbedded?!0:!1,n.kind=r();var s=(G?G.length:0)+et.length;q.addTextTrack(n,s)}var r,o,s,u,l,c,d,f=t.mediaInfo,h=f.type,g=f.mimeType,m=f.codec||g;if(!m)return void O("No text type defined");if("fragmentedText"===h)if(Y)if(c=H.getSamplesInfo(e),o=c.sampleList,!J&&o.length>0&&(J=o[0].cts-t.start*$),m.search("stpp")>=0)for(U=null!==U?U:A(m),s=0;s<o.length;s++){var v=o[s],y=v.cts,_=y-J;this.buffered.add(_/$,(_+v.duration)/$);var b=new DataView(e,v.offset,v.subSizes[0]);d=w["default"].Utils.dataViewToString(b,"utf-8");var T=[],E=v.offset+v.subSizes[0];for(u=1;u<v.subSizes.length;u++){var C=new Uint8Array(e,E,v.subSizes[u]),I=String.fromCharCode.apply(null,C);T.push(I),E+=v.subSizes[u]}try{r=U.parse(d,y/$,(y+v.duration)/$,T),q.addCaptions(Z,J/$,r)}catch(x){O("TTML parser error: "+x.message)}}else{var M=[];for(s=0;s<o.length;s++){var k=o[s];k.cts-=J,this.buffered.add(k.cts/$,(k.cts+k.duration)/$);var R=e.slice(k.offset,k.offset+k.size),D=w["default"].parseBuffer(R);for(u=0;u<D.boxes.length;u++){var N=D.boxes[u];if(O("VTT box1: "+N.type),"vtte"!==N.type&&"vttc"===N.type)for(O("VTT vttc boxes.length = "+N.boxes.length),l=0;l<N.boxes.length;l++){var j=N.boxes[l];if(O("VTT box2: "+j.type),"payl"===j.type){var F=j.cue_text;O("VTT cue_text = "+F);var B=k.cts/$,V=(k.cts+k.duration)/$;M.push({start:B,end:V,data:F,styles:{}}),O("VTT "+B+"-"+V+" : "+F)}}}}M.length>0&&q.addCaptions(Z,0,M)}else{for(Y=!0,s=0;s<G.length;s++)n(null,G[s]);$=H.getMediaTimescaleFromMoov(e)}else if("text"===h){var b=new DataView(e,0,e.byteLength);d=w["default"].Utils.dataViewToString(b,"utf-8");try{r=A(m).parse(d),n(r,f)}catch(x){L.timedTextError(x,"parse",d)}}else if("video"===h)if("InitializationSegment"===t.segmentType){if(0===nt)for(nt=H.getMediaTimescaleFromMoov(e),s=0;s<et.length;s++)n(null,et[s])}else{if(0===nt)return void O("CEA-608: No timescale for embeddedTextTrack yet");var z=function(e,t){function n(e,n,i){var r=null;if(X.getTTMLRenderingDiv())r=p(X.getElement(),e,n,i);else{var o=i.getDisplayText();r=[{start:e,end:n,data:o,styles:{}}]}r&&q.addCaptions(t,0,r)}return n};c=H.getSamplesInfo(e);var K=c.sequenceNumber;if(!ot[0]&&!ot[1]){var Q=void 0,tt=void 0,at=void 0;for(s=0;s<et.length;s++){if("CC1"===et[s].id?(Q=0,at=q.getTrackIdxForId("CC1")):"CC3"===et[s].id&&(Q=1,at=q.getTrackIdxForId("CC3")),-1===at)return void O("CEA-608: data before track is ready.");tt=z(this,at),ot[s]=new S["default"].Cea608Parser(s,{newCue:tt},null)}}if(nt&&-1==rt.indexOf(K)){if(null!==it&&K!==it+1)for(s=0;s<ot.length;s++)ot[s]&&ot[s].reset();for(var st=i(e),ut=0;ut<ot.length;ut++){var lt=st.fields[ut],ct=ot[ut];if(ct){for(s=0;s<lt.length;s++)ct.addData(lt[s][0]/nt,lt[s][1]);st.endTime&&ct.cueSplitAtTime(st.endTime/nt)}}it=K,rt.push(K)}}}function i(e){var t=function(e,t,n){var i=e.length;if(i>0){if(t>=e[i-1][0])e.push([t,n]);else for(var r=i-1;r>=0;r--)if(t<e[r][0]){e.splice(r,0,[t,n]);break}}else e.push([t,n])},n=D.parse(e),i=n.getBox("moof"),r=n.getBox("tfdt"),o=n.getBox("tfhd"),a=n.getBoxes("trun"),s=null;if(0===a.length)return null;s=a[0],a.length>1&&O("Warning: Too many truns");for(var u=i.offset+s.data_offset,l=s.sample_count,c=u,d=r.baseMediaDecodeTime,f=new DataView(e),h={startTime:null,endTime:null,fields:[[],[]]},p=0,g=0;l>g;g++){var m=s.samples[g];void 0===m.sample_duration&&(m.sample_duration=o.default_sample_duration),void 0===m.sample_size&&(m.sample_size=o.default_sample_size),void 0===m.sample_composition_time_offset&&(m.sample_composition_time_offset=0);for(var v=d+p+m.sample_composition_time_offset,y=S["default"].findCea608Nalus(f,c,m.sample_size),_=0;_<y.length;_++)for(var b=S["default"].extractCea608DataFromRange(f,y[_]),T=0;2>T;T++)b[T].length>0&&t(h.fields[T],v,b[T]);p+=m.sample_duration,c+=m.sample_size}var w=d+p;return h.startTime=d,h.endTime=w,h}function r(e){for(var t="",n=0;n<e.length;++n){var i=e[n];t+=i.uchar}var r=t.length,o=t.replace(/^\s+/,"").length;return r-o}function o(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"
}function s(e){return"red"==e?"rgb(255, 0, 0)":"green"==e?"rgb(0, 255, 0)":"blue"==e?"rgb(0, 0, 255)":"cyan"==e?"rgb(0, 255, 255)":"magenta"==e?"rgb(255, 0, 255)":"yellow"==e?"rgb(255, 255, 0)":"white"==e?"rgb(255, 255, 255)":"black"==e?"rgb(0, 0, 0)":e}function l(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?s(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?s(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function d(e){var t=e.replace(/^\s+/g,"");return t}function h(e){var t=e.replace(/\s+$/g,"");return t}function p(e,t,n,i){var a=null,s=null,u=!1,c=-1,f={start:t,end:n,spans:[]},p="style_cea608_white_black",g={},m={},v=[],y=void 0,_=void 0;for(y=0;15>y;++y){var b=i.rows[y],T="",w=null;if(!1===b.isEmpty()){var E=r(b.chars);null===a&&(a={x:E,y1:y,y2:y+1,p:[]}),E!==c&&u&&(a.p.push(f),f={start:t,end:n,spans:[]},a.y2=y,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(v.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a={x:E,y1:y,y2:y+1,p:[]});for(var S=0;S<b.chars.length;++S){var C=b.chars[S],P=C.penState;if(null===w||!P.equals(w)){T.trim().length>0&&(f.spans.push({name:p,line:T,row:y}),T="");var A="style_cea608_"+P.foreground+"_"+P.background;P.underline&&(A+="_underline"),P.italics&&(A+="_italics"),m.hasOwnProperty(A)||(m[A]=JSON.parse(JSON.stringify(P))),w=P,p=A}T+=C.uchar}T.trim().length>0&&f.spans.push({name:p,line:T,row:y}),u=!0,c=E}else u=!1,c=-1,a&&(a.p.push(f),f={start:t,end:n,spans:[]},a.y2=y,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(v.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a=null)}a&&(a.p.push(f),a.y2=y+1,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(v.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a=null);var I=[];for(y=0;y<v.length;++y){var x=v[y],O="sub_cea608_"+k++,M=document.createElement("div");M.id=O;var R=o(x);M.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+R;var D=document.createElement("div");D.className="paragraph bodyStyle",D.style.cssText=l(e);var L=document.createElement("div");L.className="cueUniWrapper",L.style.cssText="unicode-bidi: normal; direction: ltr;";for(var N=0;N<x.p.length;++N){var j=x.p[N],F=0;for(_=0;_<j.spans.length;++_){var U=j.spans[_];if(U.line.length>0){if(0!==_&&F!=U.row){var B=document.createElement("br");B.className="lineBreak",L.appendChild(B)}var V=!1;F===U.row&&(V=!0),F=U.row;var H=m[U.name],G=document.createElement("span");G.className="spanPadding "+U.name+" customSpanColor",G.style.cssText=l(e,H),G.textContent=0!==_&&V?_===j.spans.length-1?h(U.line):U.line:0===_&&j.spans.length>1&&U.row===j.spans[1].row?d(U.line):U.line.trim(),L.appendChild(G)}}}D.appendChild(L),M.appendChild(D);var q={bodyStyle:["%",90]};for(_ in m)m.hasOwnProperty(_)&&(q[_]=["%",90]);I.push({type:"html",start:t,end:n,cueHTMLElement:M,cueID:O,cellResolution:[32,15],isFromCEA608:!0,regions:v,regionID:x.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:q,lineHeight:{},linePadding:{}})}return I}function g(){q.deleteAllTextTracks(),F=!1,U=null,H=null,G=null,q=null,W=!1,z=null,Y=!1,$=0/0,K=[],X=null,Q=null,M=!1,et=null}function v(e){M||t(),"CC1"===e.id||"CC3"===e.id?et.push(e):O("Warning: Embedded track "+e.id+" not supported!")}function _(){M=!1,et=[],ot=[null,null],rt=[],it=null}function T(){return F}function E(e){e&&(e.errHandler&&(L=e.errHandler),e.dashManifestModel&&(N=e.dashManifestModel),e.mediaController&&(j=e.mediaController),e.videoModel&&(X=e.videoModel),e.streamController&&(Q=e.streamController),e.textTracks&&(q=e.textTracks),e.VTTParser&&(B=e.VTTParser),e.TTMLParser&&(V=e.TTMLParser))}function C(){for(var e=X.getElement(),t=e.textTracks,n=t.length,i=n-et.length,r=q.getCurrentTrackIdx(),o=0;n>o;o++){var a=t[o];if(F="showing"!==a.mode,"showing"===a.mode){if(r!==o&&(q.setCurrentTrackIdx(o),q.addCaptions(o,0,null),W&&i>o)){var s=j.getCurrentTrackFor("fragmentedText",Q.getActiveStreamInfo()),u=K[o];u!==s&&(z.abortRequests(),q.deleteTrackCues(s),j.setTrack(u),Z=o)}break}}F&&q.setCurrentTrackIdx(-1)}function P(e){var t=!1;return et.length>1&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===et.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===et.length&&(t=e.index===G[0].index),t}function A(e){var t;return e.search("vtt")>=0?t=B:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=V,t.setConfig({videoModel:X})),t}function I(){return q.getCurrentTrackIdx()}var x=this.context,O=m["default"](x).getInstance().log,M=!1,k=0,R=void 0,D=void 0,L=void 0,N=void 0,j=void 0,F=void 0,U=void 0,B=void 0,V=void 0,H=void 0,G=void 0,q=void 0,W=void 0,z=void 0,Y=void 0,$=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0;return R={initialize:e,append:n,abort:g,getCurrentTrackIdx:I,getAllTracksAreDisabled:T,setTextTrack:C,setConfig:E,addEmbeddedTrack:v,resetEmbedded:_}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(172),a=i(o),s=e(33),u=i(s),l=e(147),c=i(l),d=e(149),f=i(d),h=e(10),p=i(h),g=e(8),m=i(g),v=e(105),y=i(v),_=e(58),b=i(_),T=e(6),w=i(T),E=e(2),S=i(E);r.__dashjs_factory_name="TextSourceBuffer",n["default"]=p["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,105:105,147:147,149:149,172:172,2:2,33:33,58:58,6:6,8:8}],58:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){x=window.VTTCue||window.TextTrackCue,k=[],R=[],D=-1,L=0,N=0,j=0,F=0,U=null,B=null,G=!1,q=2147483647,V=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?H="fullscreenElement":void 0!==document.webkitIsFullScreen?H="webkitIsFullScreen":document.msFullscreenElement?H="msFullscreenElement":document.mozFullScreen&&(H="mozFullScreen")}function t(e){var t=k[e].kind,n=void 0!==k[e].label?k[e].label:k[e].lang,i=k[e].lang,r=V?document.createElement("track"):M.addTextTrack(t,n,i);return V&&(r.kind=t,r.label=n,r.srclang=i),r}function n(e){G=e,U&&!document[H]&&(U.style.zIndex=e?q:null)}function i(e,n){if(k.length===n)return void A("Trying to add too many tracks.");if(k.push(e),void 0===M&&(M=e.video),k.length===n){k.sort(function(e,t){return e.index-t.index}),U=O.getTTMLRenderingDiv();for(var i=-1,r=0;r<k.length;r++){var o=t.call(this,r);R.push(o),k[r].defaultTrack&&(o["default"]=!0,i=r),V&&M.appendChild(o);var a=M.textTracks[r];a.nonAddedCues=[],a.renderingType=U&&(k[r].isTTML||k[r].isEmbedded)?"html":"default",this.addCaptions(r,0,k[r].captionData),P.trigger(u["default"].TEXT_TRACK_ADDED)}if(m.call(this,i),i>=0){for(var s=0;s<M.textTracks.length;s++)M.textTracks[s].mode=s===i?"showing":"hidden";this.addCaptions(i,0,null)}P.trigger(u["default"].TEXT_TRACKS_ADDED,{index:D,tracks:k})}}function r(e,t,n,i,r,o){var a=e/t,s=n/i,u=0,l=0;a>s?(l=t,u=l/i*n):(u=e,l=u/n*i);var c=0,d=0,f=0,h=0,p=u/l;return p>r?(h=l,f=l/(1/r),c=(e-f)/2,d=0):(f=u,h=u/r,c=0,d=(t-h)/2),o?{x:c+.1*f,y:d+.1*h,w:.8*f,h:.8*h}:{x:c,y:d,w:f,h:h}}function o(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=M.clientWidth/M.clientHeight,n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var i=r.call(this,M.clientWidth,M.clientHeight,M.videoWidth,M.videoHeight,t,n),o=i.w,a=i.h;if(o!=j||a!=F){L=i.x,N=i.y,j=o,F=a,U.style.left=L+"px",U.style.top=N+"px",U.style.width=j+"px",U.style.height=F+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}U.style.zIndex=H&&document[H]||G?q:null}}}function s(e,t){var n=Math.round(.01*e*t).toString()+"px";return n}function l(e){var t=j,n=F;if(t*n!==0&&e.layout){var i=e.layout,r=s(i.left,t),o=s(i.top,n),a=s(i.width,t),u=s(i.height,n);U.style.left=r,U.style.top=o,U.style.width=a,U.style.height=u;var l=U.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=a,l.style.height=u)}}function c(e){var t,n,i,r,o,a=j,s=F,u=[a/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var l=e.linePadding[t];n=(l*u[0]).toString();for(var c=document.getElementsByClassName("spanPadding"),d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),c[d].style.cssText=c[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?i=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.fontSize[t][1]),n=(i*u[1]).toString(),o=document.getElementsByClassName("defaultFontSize"!==t?t:"paragraph");for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?r=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.lineHeight[t][1]),n=(r*u[1]).toString(),o=document.getElementsByClassName(t);for(var h=0;h<o.length;h++)o[h].style.cssText=o[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function d(e,t,n){var i=e>=0?M.textTracks[e]:null,r=this;if(i){if("showing"!==i.mode)return void(n&&n.length>0&&(i.nonAddedCues=i.nonAddedCues.concat(n)));if(n||(n=i.nonAddedCues,i.nonAddedCues=[]),n&&0!==n.length)for(var a in n){var s,u=n[a];i.cellResolution=u.cellResolution,i.isFromCEA608=u.isFromCEA608,B||"html"!==u.type&&"image"!==u.type||(B=setInterval(o.bind(this),500)),"image"===u.type?(s=new x(u.start-t,u.end-t,""),s.image=u.data,s.id=u.id,s.size=0,s.type="image",s.layout=u.layout,s.scaleCue=l.bind(r),s.onenter=function(){if(U&&"showing"===i.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="z-index: 2147483648; pointer-events: none; display: block; visibility: visible !important; position: relative !important;",U.appendChild(e),l.call(r,this)}},s.onexit=function(){if(U)for(var e=U.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&U.removeChild(e[t])}):"html"===u.type?(s=new x(u.start-t,u.end-t,""),s.cueHTMLElement=u.cueHTMLElement,s.regions=u.regions,s.regionID=u.regionID,s.cueID=u.cueID,s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight,s.cellResolution=u.cellResolution,s.fontSize=u.fontSize,s.lineHeight=u.lineHeight,s.linePadding=u.linePadding,s.scaleCue=c.bind(r),U.style.left=L+"px",U.style.top=N+"px",U.style.width=j+"px",U.style.height=F+"px",s.onenter=function(){"showing"===i.mode&&(A("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),U.appendChild(this.cueHTMLElement),c.call(r,this))},s.onexit=function(){for(var e=U.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&U.removeChild(e[t])}):(s=new x(u.start-t,u.end-t,u.data),u.styles&&(void 0!==u.styles.align&&s.hasOwnProperty("align")&&(s.align=u.styles.align),void 0!==u.styles.line&&s.hasOwnProperty("line")&&(s.line=u.styles.line),void 0!==u.styles.position&&s.hasOwnProperty("position")&&(s.position=u.styles.position),void 0!==u.styles.size&&s.hasOwnProperty("size")&&(s.size=u.styles.size))),i.addCue(s)}}}function h(){return D>=0?M.textTracks[D]:null}function p(){return D}function g(e){for(var t=-1,n=0;n<M.textTracks.length;n++)if(M.textTracks[n].label===e){t=n;break}return t}function m(e){if(D=e,E.call(this),e>=0){var t=M.textTracks[e];"html"===t.renderingType?T.call(this):w.call(this)}else w.call(this)}function v(e){return M.textTracks[e]}function y(e){if(e.cues){for(var t=e.cues,n=t.length-1,i=n;i>=0;i--)e.removeCue(t[i]);e.mode="disabled"}}function _(){for(var e=R.length,t=0;e>t;t++)if(V)M.removeChild(R[t]);else{var n=v.call(this,t);n.nonAddedCues=[],y.call(this,n)}R=[],k=[],B&&(clearInterval(B),B=null),E.call(this)}function b(e){M.removeChild(R[e]),R.splice(e,1)}function T(){if(V){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;M.id?t.insertRule("#"+M.id+"::cue {background: transparent}",0):0!==M.classList.length?t.insertRule("."+M.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function w(){if(V){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function E(){if(U)for(;U.firstChild;)U.removeChild(U.firstChild)}function S(e){e&&e.videoModel&&(O=e.videoModel)}var C=this.context,P=a["default"](C).getInstance(),A=f["default"](C).getInstance().log,I=void 0,x=void 0,O=void 0,M=void 0,k=void 0,R=void 0,D=void 0,L=void 0,N=void 0,j=void 0,F=void 0,U=void 0,B=void 0,V=void 0,H=void 0,G=void 0,q=void 0;return I={initialize:e,displayCConTop:n,addTextTrack:i,addCaptions:d,getTextTrack:v,getCurrentTextTrack:h,getCurrentTrackIdx:p,setCurrentTrackIdx:m,getTrackIdxForId:g,deleteTrackCues:y,deleteAllTextTracks:_,deleteTextTrack:b,setConfig:S}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l),d=e(8),f=i(d);r.__dashjs_factory_name="TextTracks",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,8:8,9:9}],59:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){function t(){var e;g=[],m=[],v=[],e={},r(e,a.HTTPRequest.MPD_TYPE,f["default"].DOWNLOAD_ERROR_ID_MANIFEST),r(e,a.HTTPRequest.XLINK_EXPANSION_TYPE,f["default"].DOWNLOAD_ERROR_ID_XLINK),r(e,a.HTTPRequest.INIT_SEGMENT_TYPE,f["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),r(e,a.HTTPRequest.MEDIA_SEGMENT_TYPE,f["default"].DOWNLOAD_ERROR_ID_CONTENT),r(e,a.HTTPRequest.INDEX_SEGMENT_TYPE,f["default"].DOWNLOAD_ERROR_ID_CONTENT),r(e,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,f["default"].DOWNLOAD_ERROR_ID_CONTENT),r(e,a.HTTPRequest.OTHER_TYPE,f["default"].DOWNLOAD_ERROR_ID_CONTENT),y=e}function n(e,t){var i=e.request,r=new XMLHttpRequest,o=[],a=!0,s=!0,c=new Date,f=c,p=0,_=function(e){s=!1,i.requestStartDate=c,i.requestEndDate=new Date,i.firstByteDate=i.firstByteDate||c,i.checkExistenceOnly||d.addHttpRequest(i.mediaType,null,i.type,i.url,r.responseURL||null,i.serviceLocation||null,i.range||null,i.requestStartDate,i.firstByteDate,i.requestEndDate,r.status,i.duration,r.getAllResponseHeaders(),e?o:null)},b=function(){-1!==g.indexOf(r)&&(g.splice(g.indexOf(r),1),s&&(_(!1),t>0?(t--,v.push(setTimeout(function(){n(e,t)},u.getRetryIntervalForType(i.type)))):(l.downloadError(y[i.type],i.url,i),e.error&&e.error(i,"error",r.statusText),e.complete&&e.complete(i,r.statusText))))},T=function(t){var n=new Date;a&&(a=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(i.firstByteDate=n)),t.lengthComputable&&(i.bytesLoaded=t.loaded,i.bytesTotal=t.total),o.push({s:f,d:n.getTime()-f.getTime(),b:[t.loaded?t.loaded-p:0]}),f=n,p=t.loaded,e.progress&&e.progress()},w=function(){r.status>=200&&r.status<=299&&(_(!0),e.success&&e.success(r.response,r.statusText,r),e.complete&&e.complete(i,r.statusText))};try{var E=h.modifyRequestURL(i.url),S=i.checkExistenceOnly?"HEAD":"GET";r.open(S,E,!0),i.responseType&&(r.responseType=i.responseType),i.range&&r.setRequestHeader("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=c),r=h.modifyRequestHeader(r),r.withCredentials=u.getXHRWithCredentialsForType(i.type),r.onload=w,r.onloadend=b,r.onerror=b,r.onprogress=T;var C=(new Date).getTime();isNaN(i.delayLoadingTime)||C>=i.delayLoadingTime?(g.push(r),r.send()):!function(){var e={xhr:r};m.push(e),e.delayTimeout=setTimeout(function(){if(-1!==m.indexOf(e)){m.splice(m.indexOf(e),1);try{g.push(e.xhr),e.xhr.send()}catch(t){e.xhr.onerror()}}},i.delayLoadingTime-C)}()}catch(P){r.onerror()}}function i(e){e.request&&n(e,u.getRetryAttemptsForType(e.request.type))}function o(){v.forEach(function(e){return clearTimeout(e)}),v=[],m.forEach(function(e){return clearTimeout(e.delayTimeout)}),m=[],g.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),g=[]}var s=this.context,u=c["default"](s).getInstance(),l=e.errHandler,d=e.metricsModel,h=e.requestModifier,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;return p={load:i,abort:o},t(),p}Object.defineProperty(n,"__esModule",{value:!0});var a=e(180),s=e(10),u=i(s),l=e(102),c=i(l),d=e(152),f=i(d);o.__dashjs_factory_name="XHRLoader";var h=u["default"].getClassFactory(o);n["default"]=h,t.exports=n["default"]},{10:10,102:102,152:152,180:180}],60:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,n){var r=function(i,r){t.resolved=!0,t.resolvedContent=i?i:null,o.trigger(g["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:i||r?null:new a["default"](y,"Failed loading Xlink element: "+e)})};if(e===i)r(null,!0);else{var u=new d["default"](e,l.HTTPRequest.XLINK_TYPE);s.load({request:u,success:function(e){r(e)},error:function(){r(null)}})}}function n(){s&&(s.abort(),s=null)}var i="urn:mpeg:dash:resolve-to-zero:2013",r=this.context,o=h["default"](r).getInstance(),s=u["default"](r).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),c=void 0;return c={load:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(163),a=i(o),s=e(59),u=i(s),l=e(180),c=e(171),d=i(c),f=e(9),h=i(f),p=e(13),g=i(p),m=e(10),v=i(m),y=1;r.__dashjs_factory_name="XlinkLoader";var _=v["default"].getClassFactory(r);_.XLINK_LOADER_ERROR_LOADING_FAILURE=y,n["default"]=_,t.exports=n["default"]},{10:10,13:13,163:163,171:171,180:180,59:59,9:9}],61:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){mt={video:!0,audio:!0},vt={},yt={},_t={},bt={},Tt={},Et={},wt={},Nt={},Ct=!1,Pt=!1,void 0===At&&(At=!1),Dt=u["default"](lt).getInstance(),Rt=c["default"](lt).getInstance(),Ot=w["default"](lt).getInstance(),Mt=S["default"](lt).getInstance(),kt=P["default"](lt).getInstance(),Ft=N["default"](lt).getInstance(),Ut=F["default"](lt).getInstance(),Bt=(new Date).getTime()/1e3}function t(e,t){Nt[e]=k["default"](lt).create(),wt[e]=t,Et[e]=Et[e]||{},Et[e].state=H,ft.on(m["default"].LOADING_PROGRESS,ut,this),"video"==e&&(ft.on(y["default"].QUALITY_CHANGE_RENDERED,r,this),jt=D["default"](lt).create(),at())}function n(){ft.off(m["default"].LOADING_PROGRESS,ut,this),ft.off(y["default"].QUALITY_CHANGE_RENDERED,r,this),Lt=void 0,jt=void 0,clearTimeout(St),St=null,e()}function i(e){e&&(e.abrRulesCollection&&(pt=e.abrRulesCollection),e.streamController&&(gt=e.streamController))}function r(e){"video"===e.mediaType&&(Lt=e.newQuality,jt.push(Lt,kt.getPlaybackQuality()))}function o(e,t){var n;return vt[t]=vt[t]||{},vt[t].hasOwnProperty(e)||(vt[t][e]=0),n=it(vt[t][e],e),n=rt(n,e,vt[t][e]),n=st(n,e)}function s(e){var t=Dt.getSavedBitrateSettings(e);if(!_t.hasOwnProperty(e))if(bt.hasOwnProperty(e)){var n=Ot.getValue(),i=Mt.getAdaptationForType(n,0,e).Representation;if(Array.isArray(i)){var r=Math.max(Math.round(i.length*bt[e])-1,0);_t[e]=i[r].bandwidth}else _t[e]=0}else _t[e]=isNaN(t)?"video"===e?G:q:t;return _t[e]}function l(e,t){_t[e]=t}function d(e){return bt.hasOwnProperty(e)?bt[e]:null}function h(e,t){bt[e]=t}function g(e){return _t.hasOwnProperty("max")&&_t.max.hasOwnProperty(e)?_t.max[e]:0/0}function v(e,t){_t.max=_t.max||{},_t.max[e]=t}function _(e){return bt.hasOwnProperty("max")&&bt.max.hasOwnProperty(e)?bt.max[e]:1}function b(e,t){bt.max=bt.max||{},bt.max[e]=t}function T(e){return mt[e]}function E(e,t){mt[e]=t}function C(){return Ct}function A(e){Ct=e}function x(){return Pt}function M(e){Pt=e}function R(e){var t=e.getType(),n=e.getStreamInfo(),i=n.id,r=et(t,n),a=I["default"](lt).create({streamProcessor:e,currentValue:r,playbackIndex:Lt,switchHistory:Nt[t],droppedFramesHistory:jt,hasRichBuffer:K(t)});if(jt&&jt.push(Lt,kt.getPlaybackQuality()),T(t)){var s=o(t,i),u=pt.getMaxQuality(a),l=u.value;if(l>s&&(l=s),Nt[t].push({oldValue:r,newValue:l}),l>O["default"].NO_CHANGE&&l!=r)(Et[t].state===H||l>r)&&j(t,n,r,l,s,u.reason);else if(ct.getLogToBrowserConsole()){var c=Ut.getCurrentBufferLevel(Ft.getReadOnlyMetricsFor(t));dt("AbrController ("+t+") stay on "+r+"/"+s+" (buffer: "+c+")")}}}function L(e,t,n,i){var r=t.id,a=et(e,t),s=null!==n&&!isNaN(n)&&n%1===0;if(!s)throw new Error("argument is not an integer");var u=o(e,r);n!==a&&n>=0&&u>=n&&j(e,t,a,n,u,i)}function j(e,t,n,i,r,o){if(ct.getLogToBrowserConsole()){var a=Ut.getCurrentBufferLevel(Ft.getReadOnlyMetricsFor(e));dt("AbrController ("+e+") switch from "+n+" to "+i+"/"+r+" (buffer: "+a+")\n"+JSON.stringify(o))}tt(e,t.id,i),ft.trigger(m["default"].QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:n,newQuality:i,reason:o})}function U(e,t){Et[e].state=t}function z(e){return Et[e].state}function Y(e,t,n){if(n&&wt[e.type].getCurrentRepresentationInfo()&&wt[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var i=wt[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>i)return 0;var r=n/i;t*=1-r}var o=$(e);if(!o||0===o.length)return W;for(var a=o.length-1;a>=0;a--){var s=o[a];if(1e3*t>=s.bitrate)return a}return 0}function $(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,i=e.type,r=[],o=0,s=n.length;s>o;o++)t=new a["default"],t.mediaType=i,t.qualityIndex=o,t.bitrate=n[o].bandwidth,t.width=n[o].width,t.height=n[o].height,r.push(t);return r}function K(e){var t=Ft.getReadOnlyMetricsFor(e),n=Ut.getCurrentBufferLevel(t),i=t.BufferState.length>0?t.BufferState[t.BufferState.length-1]:null,r=!1;return i&&n>i.target&&(r=n>i.target+Rt.getRichBufferThreshold()),r}function X(e,t){Tt[e]=t}function Q(e){return Tt[e]}function J(e){var t=e.type,n=e.streamInfo.id,i=e.representationCount-1;return nt(t,n,i),i}function Z(e){var t,n=e.id,i=et("audio",e),r=et("video",e);return t=i===o("audio",n)&&r===o("video",n)}function et(e,t){var n,i=t.id;return yt[i]=yt[i]||{},yt[i].hasOwnProperty(e)||(yt[i][e]=W),n=yt[i][e]}function tt(e,t,n){yt[t]=yt[t]||{},yt[t][e]=n}function nt(e,t,n){vt[t]=vt[t]||{},vt[t][e]=n}function it(e,t){var n=g(t);if(isNaN(n)||!wt[t])return e;var i=Y(wt[t].getMediaInfo(),n);return Math.min(e,i)}function rt(e,t,n){var i=_(t);return isNaN(i)||i>=1||0>i?e:Math.min(e,Math.round(n*i))}function ot(e){At=e}function at(){var e=kt.getElement();if(void 0!==e){var t=Pt&&window.hasOwnProperty("devicePixelRatio"),n=t?window.devicePixelRatio:1;It=e.clientWidth*n,xt=e.clientHeight*n}}function st(e,t){if("video"!==t||!Ct||!wt[t])return e;At||at();var n=Ot.getValue(),i=Mt.getAdaptationForType(n,0,t).Representation,r=e;if(It>0&&xt>0){for(;r>0&&i[r]&&It<i[r].width&&It-i[r-1].width<i[r].width-It;)r-=1;i.length-2>=r&&i[r].width===i[r+1].width&&(r=Math.min(e,r+1))}return r}function ut(e){var t=e.request.mediaType;if(T(t)){var n=wt[t].getScheduleController();if(!n)return;var i=I["default"](lt).create({streamProcessor:wt[t],currentRequest:e.request,currentValue:et(t,gt.getActiveStreamInfo()),hasRichBuffer:K(t)}),r=pt.shouldAbandonFragment(i);if(r.value>O["default"].NO_CHANGE){var o=n.getFragmentModel(),a=o.getRequests({state:f["default"].FRAGMENT_MODEL_LOADING,index:e.request.index})[0];a&&(o.abortRequests(),U(t,V),Nt[t].reset(),Nt[t].push({oldValue:et(t,gt.getActiveStreamInfo()),newValue:r.value,confidence:1,reason:r.reason}),L(t,gt.getActiveStreamInfo(),r.value,r.reason),ft.trigger(m["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:wt[t],request:a,mediaType:t}),clearTimeout(St),St=setTimeout(function(){U(t,H),St=null},Rt.getAbandonLoadTimeout()))}}}var lt=this.context,ct=B["default"](lt).getInstance(),dt=ct.log,ft=p["default"](lt).getInstance(),ht=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Tt=void 0,wt=void 0,Et=void 0,St=void 0,Ct=void 0,Pt=void 0,At=void 0,It=void 0,xt=void 0,Ot=void 0,Mt=void 0,kt=void 0,Rt=void 0,Dt=void 0,Lt=void 0,Nt=void 0,jt=void 0,Ft=void 0,Ut=void 0,Bt=void 0;return ht={isPlayingAtTopQuality:Z,updateTopQualityIndex:J,getAverageThroughput:Q,getBitrateList:$,getQualityForBitrate:Y,getMaxAllowedBitrateFor:g,setMaxAllowedBitrateFor:v,getMaxAllowedRepresentationRatioFor:_,setMaxAllowedRepresentationRatioFor:b,getInitialBitrateFor:s,setInitialBitrateFor:l,getInitialRepresentationRatioFor:d,setInitialRepresentationRatioFor:h,setAutoSwitchBitrateFor:E,getAutoSwitchBitrateFor:T,setLimitBitrateByPortal:A,getLimitBitrateByPortal:C,getUsePixelRatioInLimitBitrateByPortal:x,setUsePixelRatioInLimitBitrateByPortal:M,getQualityFor:et,getAbandonmentStateFor:z,setAbandonmentStateFor:U,setPlaybackQuality:L,getPlaybackQuality:R,setAverageThroughput:X,getTopQualityIndexFor:o,setElementSize:at,setWindowResizeEventCalled:ot,initialize:t,setConfig:i,reset:n},e(),ht}Object.defineProperty(n,"__esModule",{value:!0});var o=e(161),a=i(o),s=e(150),u=i(s),l=e(102),c=i(l),d=e(100),f=i(d),h=e(9),p=i(h),g=e(13),m=i(g),v=e(53),y=i(v),_=e(10),b=i(_),T=e(101),w=i(T),E=e(22),S=i(E),C=e(105),P=i(C),A=e(130),I=i(A),x=e(132),O=i(x),M=e(133),k=i(M),R=e(129),D=i(R),L=e(103),N=i(L),j=e(17),F=i(j),U=e(8),B=i(U),V="abandonload",H="allowload",G=1e3,q=100,W=0;r.__dashjs_factory_name="AbrController";var z=b["default"].getSingletonFactory(r);z.ABANDON_LOAD=V,z.QUALITY_DEFAULT=W,n["default"]=z,t.exports=n["default"]},{10:10,100:100,101:101,102:102,103:103,105:105,129:129,13:13,130:130,132:132,133:133,150:150,161:161,17:17,22:22,53:53,8:8,9:9}],62:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){g.invalidateSelectedIndexes(e.entry)}function t(){g=a["default"](d).create(),v=u["default"](d).create(),h.on(y["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,e,l)}function n(e){e.baseURLTreeModel&&(g=e.baseURLTreeModel),e.baseURLSelector&&(v=e.baseURLSelector)}function i(e){g.update(e),v.chooseSelectorFromManifest(e)}function r(e){var t=g.getForPath(e),n=t.reduce(function(e,t){var n=v.select(t);return n?(p.isRelative(n.url)?e.url=p.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new f["default"]},new f["default"]);return p.isRelative(n.url)?void 0:n}function o(){g.reset(),v.reset()}function s(e){i(e)}var l=void 0,d=this.context,h=m["default"](d).getInstance(),p=c["default"](d).getInstance(),g=void 0,v=void 0;return l={reset:o,initialize:s,resolve:r,setConfig:n},t(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e(99),a=i(o),s=e(146),u=i(s),l=e(159),c=i(l),d=e(41),f=i(d),h=e(10),p=i(h),g=e(9),m=i(g),v=e(13),y=i(v);r.__dashjs_factory_name="BaseURLController",n["default"]=p["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,146:146,159:159,41:41,9:9,99:99}],63:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){return a.length&&e&&e.length?-1!==a.indexOf(e):!1}function n(e){-1===a.indexOf(e)&&(a.push(e),s.trigger(l,{entry:e}))}function i(e){e.error&&n(e.request.serviceLocation)}function r(){c&&s.on(c,i,this)}function o(){a=[]}var a=[],s=u["default"](this.context).getInstance(),l=e.updateEventName,c=e.loadFailedEventName;return r(),{add:n,contains:t,reset:o}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(9),u=i(s);r.__dashjs_factory_name="BlackListController",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,9:9}],64:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){pt=f["default"].QUALITY_DEFAULT,gt=!1,mt=0,vt=Number.POSITIVE_INFINITY,_t=0,bt=Number.POSITIVE_INFINITY,wt=null,Et=O,Ct=0,Pt=!1,At=!1,It=!1,xt=!1}function n(e,t,n){Tt=e,J(t),Mt=n,Dt=u["default"](nt).getInstance(),Ot=p["default"](nt).getInstance(),kt=f["default"](nt).getInstance(),Lt=I["default"](nt).getInstance(),Rt=Mt.getScheduleController(),pt=kt.getQualityFor(Tt,Mt.getStreamInfo()),rt.on(b["default"].DATA_UPDATE_COMPLETED,B,this),rt.on(b["default"].INIT_FRAGMENT_LOADED,o,this),rt.on(b["default"].MEDIA_FRAGMENT_LOADED,l,this),rt.on(b["default"].QUALITY_CHANGE_REQUESTED,g,this),rt.on(b["default"].STREAM_COMPLETED,V,this),rt.on(b["default"].PLAYBACK_PROGRESS,_,this),rt.on(b["default"].PLAYBACK_TIME_UPDATED,_,this),rt.on(b["default"].PLAYBACK_RATE_CHANGED,q,this),rt.on(b["default"].PLAYBACK_SEEKING,v,this),rt.on(b["default"].WALLCLOCK_TIME_UPDATED,G,this),rt.on(b["default"].CURRENT_TRACK_CHANGED,H,this,y["default"].EVENT_PRIORITY_HIGH),rt.on(b["default"].SOURCEBUFFER_APPEND_COMPLETED,h,this),rt.on(b["default"].SOURCEBUFFER_REMOVE_COMPLETED,F,this)}function i(e){if(!e||!yt||!Mt)return null;var t=null;try{t=st.createSourceBuffer(yt,e),t&&t.hasOwnProperty("initialize")&&t.initialize(Tt,this)}catch(n){ut.mediaSourceError("Error creating "+Tt+" source buffer.")}return K(t),U(Mt.getRepresentationInfoForQuality(pt).MSETimeOffset),t}function r(){return Mt.getStreamInfo().id===lt.getActiveStreamInfo().id}function o(e){e.fragmentModel===Mt.getFragmentModel()&&(it("Init fragment finished loading saving to",Tt+"'s init cache"),Lt.save(e.chunk),d(e.chunk))}function s(e,t){var n=Lt.extract(e,Tt,t);n?d(n):rt.trigger(b["default"].INIT_REQUESTED,{sender:ht})}function l(e){if(e.fragmentModel===Mt.getFragmentModel()){var t=e.chunk,n=t.bytes,i=t.quality,r=Mt.getRepresentationInfoForQuality(i),o=at.getValue(),s=dt.getEventsFor(o,r.mediaInfo,Mt),u=dt.getEventsFor(o,r,Mt);if(s&&s.length>0||u&&u.length>0){var l=Mt.getFragmentModel().getRequests({state:a["default"].FRAGMENT_MODEL_EXECUTED,quality:i,index:t.index})[0],c=k(n,l,s,u);Mt.getEventController().addInbandEvents(c)}t.bytes=R(n),d(t)}}function d(e){At=!0,St=e,st.append(wt,e),"video"===e.mediaInfo.type&&e.mediaInfo.embeddedCaptions&&ft.append(e.bytes,e)}function h(e){if(wt===e.buffer){if(e.error||!D())return e.error.code===c["default"].QUOTA_EXCEEDED_ERROR_CODE&&(vt=.8*st.getTotalBufferedTime(wt)),void(e.error.code!==c["default"].QUOTA_EXCEEDED_ERROR_CODE&&D()||(rt.trigger(b["default"].QUOTA_EXCEEDED,{sender:ht,criticalBufferLevel:vt}),j(N())));isNaN(St.index)||(_t=Math.max(St.index,_t),S());var t=st.getAllRanges(wt);if(t&&t.length>0)for(var n=0,i=t.length;i>n;n++)it("Buffered Range for type:",Tt,":",t.start(n)," - ",t.end(n));_(),At=!1,rt.trigger(b["default"].BYTES_APPENDED,{sender:ht,quality:St.quality,startTime:St.start,index:St.index,bufferedRanges:t})}}function g(e){pt!==e.newQuality&&Tt===e.mediaType&&Mt.getStreamInfo().id===e.streamInfo.id&&(U(Mt.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),pt=e.newQuality)}function v(){bt=Number.POSITIVE_INFINITY,gt=!1,_()}function _(){T(),E()}function T(){mt=st.getBufferLength(wt,Ot.getTime()),rt.trigger(b["default"].BUFFER_LEVEL_UPDATED,{sender:ht,bufferLevel:mt}),C()}function E(){r()&&(ot.addBufferState(Tt,Et,Rt.getBufferTarget()),ot.addBufferLevel(Tt,new Date,1e3*mt))}function S(){var e=_t>=bt-1;e&&!gt&&(gt=!0,rt.trigger(b["default"].BUFFERING_COMPLETED,{sender:ht,streamInfo:Mt.getStreamInfo()}))}function C(){A(M>mt&&!gt?O:x)}function A(e){Et===e||"fragmentedText"===Tt&&ft.getAllTracksAreDisabled()||(Et=e,E(),rt.trigger(b["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:ht,state:e,mediaType:Tt,streamInfo:Mt.getStreamInfo()}),rt.trigger(e===x?b["default"].BUFFER_LOADED:b["default"].BUFFER_EMPTY,{mediaType:Tt}),it(e===x?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function k(e,t,n,i){var r=Math.max(isNaN(t.startTime)?0:t.startTime,0),o=[],a=[];xt=!1;for(var s=n.concat(i),u=0,l=s.length;l>u;u++)o[s[u].schemeIdUri]=s[u];for(var c=w["default"](nt).getInstance().parse(e),d=c.getBoxes("emsg"),u=0,l=d.length;l>u;u++){var f=dt.getEvent(d[u],o,r);f&&a.push(f)}return a}function R(e){if(!xt)return e;for(var t=e.length,n=Math.pow(256,2),i=Math.pow(256,3),r=new Uint8Array(e.length),o=0,a=0;t>o;){var s=String.fromCharCode(e[o+4],e[o+5],e[o+6],e[o+7]),u=e[o]*i+e[o+1]*n+256*e[o+2]+1*e[o+3];
if("emsg"!=s)for(var l=o;o+u>l;l++)r[a]=e[l],a++;o+=u}return r.subarray(0,a)}function D(){var e=st.getTotalBufferedTime(wt);return vt>e}function L(){if(wt&&"fragmentedText"!==Tt){var e=wt.buffered.length?wt.buffered.start(0):0,t=Ot.getTime()-e-Dt.getBufferToKeep();t>0&&(it("pruning buffer: "+t+" seconds."),It=!0,st.remove(wt,0,Math.round(e+t),yt))}}function N(){if(!wt)return null;var e=Ot.getTime(),t=Mt.getFragmentModel().getRequests({state:a["default"].FRAGMENT_MODEL_EXECUTED,time:e})[0],n=st.getBufferRange(wt,e),i=t&&!isNaN(t.startTime)?t.startTime:Math.floor(e);return null===n&&wt.buffered.length>0&&(i=wt.buffered.end(wt.buffered.length-1)),{start:wt.buffered.start(0),end:i}}function j(e){e&&wt&&st.remove(wt,e.start,e.end,yt)}function F(e){wt===e.buffer&&(It&&(It=!1),T(),rt.trigger(b["default"].BUFFER_CLEARED,{sender:ht,from:e.from,to:e.to,hasEnoughSpaceToAppend:D()}))}function U(e){wt&&wt.timestampOffset!==e&&!isNaN(e)&&(wt.timestampOffset=e)}function B(e){e.sender.getStreamProcessor()!==Mt||e.error||U(e.currentRepresentation.MSETimeOffset)}function V(e){e.fragmentModel===Mt.getFragmentModel()&&(bt=e.request.index,S())}function H(e){wt&&e.newMediaInfo.type===Tt&&e.newMediaInfo.streamInfo.id===Mt.getStreamInfo().id&&ct.getSwitchMode(Tt)===m["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&j(N())}function G(){Ct++;var e=Ct*(Dt.getWallclockTimeUpdateInterval()/1e3);e>=Dt.getBufferPruningInterval()&&!At&&(Ct=0,L())}function q(){C()}function W(){return Tt}function z(){return Mt}function Y(e){Mt=e}function $(){return wt}function K(e){wt=e}function X(){return mt}function Q(){return vt}function J(e){yt=e}function Z(){return yt}function et(){return gt}function tt(e){rt.off(b["default"].DATA_UPDATE_COMPLETED,B,this),rt.off(b["default"].QUALITY_CHANGE_REQUESTED,g,this),rt.off(b["default"].INIT_FRAGMENT_LOADED,o,this),rt.off(b["default"].MEDIA_FRAGMENT_LOADED,l,this),rt.off(b["default"].STREAM_COMPLETED,V,this),rt.off(b["default"].CURRENT_TRACK_CHANGED,H,this),rt.off(b["default"].PLAYBACK_PROGRESS,_,this),rt.off(b["default"].PLAYBACK_TIME_UPDATED,_,this),rt.off(b["default"].PLAYBACK_RATE_CHANGED,q,this),rt.off(b["default"].PLAYBACK_SEEKING,v,this),rt.off(b["default"].WALLCLOCK_TIME_UPDATED,G,this),rt.off(b["default"].SOURCEBUFFER_APPEND_COMPLETED,h,this),rt.off(b["default"].SOURCEBUFFER_REMOVE_COMPLETED,F,this),vt=Number.POSITIVE_INFINITY,Et=O,pt=f["default"].QUALITY_DEFAULT,bt=Number.POSITIVE_INFINITY,_t=0,St=null,Pt=!1,gt=!1,At=!1,It=!1,Ot=null,Mt=null,kt=null,Rt=null,e||(st.abort(yt,wt),st.removeSourceBuffer(yt,wt)),wt=null}var nt=this.context,it=P["default"](nt).getInstance().log,rt=y["default"](nt).getInstance(),ot=e.metricsModel,at=e.manifestModel,st=e.sourceBufferController,ut=e.errHandler,lt=e.streamController,ct=e.mediaController,dt=e.adapter,ft=e.textSourceBuffer,ht=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Tt=void 0,wt=void 0,Et=void 0,St=void 0,Ct=void 0,Pt=void 0,At=void 0,It=void 0,xt=void 0,Ot=void 0,Mt=void 0,kt=void 0,Rt=void 0,Dt=void 0,Lt=void 0;return ht={initialize:n,createBuffer:i,getType:W,getStreamProcessor:z,setStreamProcessor:Y,getBuffer:$,setBuffer:K,getBufferLevel:X,getCriticalBufferLevel:Q,setMediaSource:J,getMediaSource:Z,getIsBufferingCompleted:et,switchInitData:s,reset:tt},t(),ht}Object.defineProperty(n,"__esModule",{value:!0});var o=e(100),a=i(o),s=e(102),u=i(s),l=e(71),c=i(l),d=e(61),f=i(d),h=e(69),p=i(h),g=e(67),m=i(g),v=e(9),y=i(v),_=e(13),b=i(_),T=e(147),w=i(T),E=e(10),S=i(E),C=e(8),P=i(C),A=e(153),I=i(A),x="bufferLoaded",O="bufferStalled",M=.5;r.__dashjs_factory_name="BufferController";var k=S["default"].getClassFactory(r);k.BUFFER_LOADED=x,k.BUFFER_EMPTY=O,n["default"]=k,t.exports=n["default"]},{10:10,100:100,102:102,13:13,147:147,153:153,61:61,67:67,69:69,71:71,8:8,9:9}],65:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){x=!1,b={},T={},w={},E=null,S=100,C=S/1e3,I=a["default"](m).getInstance()}function t(){null!==E&&x&&(clearInterval(E),E=null,x=!1)}function n(){v("Start Event Controller"),x||isNaN(S)||(x=!0,E=setInterval(s,S))}function i(e){if(b={},e)for(var t=0;t<e.length;t++){var n=e[t];b[n.id]=n,v("Add inline event with id "+n.id)}v("Added "+e.length+" inline events")}function r(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in T?v("Repeated event with id "+n.id):(T[n.id]=n,v("Add inband event with id "+n.id))}}function o(){if(w)for(var e=I.getTime(),t=Object.keys(w),n=0;n<t.length;n++){var i=t[n],r=w[i];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(v("Remove Event "+i+" at time "+e),r=null,delete w[i])}}function s(){l(T),l(b),o()}function u(){var e=P.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),v("Refresh manifest @ "+t),A.getManifestLoader().load(t)}function l(e){var t,n=I.getTime();if(e)for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],a=e[o];void 0!==a&&(t=a.presentationTime/a.eventStream.timescale,(0===t||n>=t&&t+C>n)&&(v("Start Event "+o+" at "+n),a.duration>0&&(w[o]=a),a.eventStream.schemeIdUri==p&&a.eventStream.value==g?u():y.trigger(a.eventStream.schemeIdUri,{event:a}),delete e[o]))}}function d(e){e&&(e.manifestModel&&(P=e.manifestModel),e.manifestUpdater&&(A=e.manifestUpdater))}function h(){t(),b=null,T=null,w=null,I=null}var p="urn:mpeg:dash:event:2012",g=1,m=this.context,v=c["default"](m).getInstance().log,y=f["default"](m).getInstance(),_=void 0,b=void 0,T=void 0,w=void 0,E=void 0,S=void 0,C=void 0,P=void 0,A=void 0,I=void 0,x=void 0;return _={initialize:e,addInlineEvents:i,addInbandEvents:r,clear:t,start:n,setConfig:d,reset:h}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(69),a=i(o),s=e(10),u=i(s),l=e(8),c=i(l),d=e(9),f=i(d);r.__dashjs_factory_name="EventController",n["default"]=u["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,69:69,8:8,9:9}],66:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){m={},f.on(g["default"].FRAGMENT_LOADING_COMPLETED,a,p)}function t(e){var t=m[e];return t||(t=l["default"](u).create({metricsModel:d["default"](u).getInstance()}),m[e]=t),t}function n(e){return e&&e.type&&e.type===o.HTTPRequest.INIT_SEGMENT_TYPE}function i(){f.off(g["default"].FRAGMENT_LOADING_COMPLETED,a,this);for(var e in m)m[e].reset();m={}}function r(e,t,n){var i=new s["default"];return i.streamId=n,i.mediaInfo=t.mediaInfo,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.quality=t.quality,i}function a(e){if(m[e.request.mediaType]===e.sender){var t=e.sender.getScheduleController(),i=e.request,o=e.response,a=n(i),s=t.getStreamProcessor().getStreamInfo();if(!o||!s)return void c("No "+i.mediaType+" bytes to push or stream is inactive.");var u=r(o,i,s.id);f.trigger(a?g["default"].INIT_FRAGMENT_LOADED:g["default"].MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}}var u=this.context,c=_["default"](u).getInstance().log,f=h["default"](u).getInstance(),p=void 0,m=void 0;return p={getModel:t,isInitializationRequest:n,reset:i},e(),p}Object.defineProperty(n,"__esModule",{value:!0});var o=e(180),a=e(162),s=i(a),u=e(100),l=i(u),c=e(103),d=i(c),f=e(9),h=i(f),p=e(13),g=i(p),m=e(10),v=i(m),y=e(8),_=i(y);r.__dashjs_factory_name="FragmentController",n["default"]=v["default"].getClassFactory(r),t.exports=n["default"]},{10:10,100:100,103:103,13:13,162:162,180:180,8:8,9:9}],67:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){U={},O(),x()}function t(e,t){var n=c(e),r=i(e,t),o=[];return"fragmentedText"===e?void s(r[0]):(n||(n=j.getSavedMediaSettings(e),l(e,n)),void(r&&0!==r.length&&(n&&r.forEach(function(e){I(n,e)&&o.push(e)}),s(0===o.length?M(r):o.length>1?M(o):o[0]))))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,i=c(t);return e&&E(t)?(U[n]=U[n]||k(),U[n][t].list.indexOf(e)>=0?!1:(U[n][t].list.push(e),i&&I(i,e)&&!r(t,e.streamInfo)&&s(e),!0)):!1}function i(e,t){if(!e||!t)return[];var n=t.id;return U[n]&&U[n][e]?U[n][e].list:[]}function r(e,t){return!e||!t||t&&!U[t.id]?null:U[t.id][e].current}function o(e){var t=e.type,n=e.streamInfo.id;return U[n]&&U[n][t]&&S(U[n][t].current,e)}function s(e){if(e){var t=e.type,n=e.streamInfo,i=n.id,o=r(t,n);if(U[i]&&U[i][t]&&(!o||!S(e,o))){U[i][t].current=e,o&&L.trigger(a["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:o,newMediaInfo:e,switchMode:H[t]});var s=A(e);s&&U[i][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),j.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(B[e]=t)}function c(e){return e?B[e]:null}function d(e,t){var n=-1!==q.indexOf(t);return n?void(H[e]=t):void D("track switch mode is not supported: "+t)}function h(e){return H[e]}function g(e){var t=-1!==W.indexOf(e);return t?void(V=e):void D("track selection mode is not supported: "+e)}function w(){return V||T}function E(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function S(e,t){var n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),a=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&i&&r&&o&&a&&s}function C(e){e&&e.errHandler&&(G=e.errHandler)}function P(){e(),N.resetEmbedded()}function A(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},n=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return n?t:null}function I(e,t){var n=!e.lang||e.lang===t.lang,i=!e.viewpoint||e.viewpoint===t.viewpoint,r=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],o=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],a=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&i&&r&&o&&a}function x(){H={audio:y,video:v}}function O(){B={audio:null,video:null}}function M(e){var t=w(),n=[],i=function(e){var t,n=0,i=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,i=[e]):t===n&&i.push(e)}),i},r=function(e){var t,n=0,i=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,i=[e]):t===n&&i.push(e)}),i};switch(t){case _:n=i(e),n.length>1&&(n=r(n));break;case b:n=r(e),n.length>1&&(n=i(e));break;default:D("track selection mode is not supported: "+t)}return n[0]}function k(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var R=this.context,D=f["default"](R).getInstance().log,L=u["default"](R).getInstance(),N=p["default"](R).getInstance(),j=m["default"](R).getInstance(),F=void 0,U=void 0,B=void 0,V=void 0,H=void 0,G=void 0,q=[y,v],W=[_,b];return F={initialize:e,checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:i,getCurrentTrackFor:r,isCurrentTrack:o,setTrack:s,setInitialSettings:l,getInitialSettings:c,setSwitchMode:d,getSwitchMode:h,setSelectionModeForInitialTrack:g,getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:E,isTracksEqual:S,setConfig:C,reset:P}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(13),a=i(o),s=e(9),u=i(s),l=e(10),c=i(l),d=e(8),f=i(d),h=e(57),p=i(h),g=e(150),m=i(g),v="neverReplace",y="alwaysReplace",_="highestBitrate",b="widestRange",T=_;r.__dashjs_factory_name="MediaController";var w=c["default"].getSingletonFactory(r);w.TRACK_SWITCH_MODE_NEVER_REPLACE=v,w.TRACK_SWITCH_MODE_ALWAYS_REPLACE=y,w.TRACK_SELECTION_MODE_HIGHEST_BITRATE=_,w.TRACK_SELECTION_MODE_WIDEST_RANGE=b,w.DEFAULT_INIT_TRACK_SELECTION_MODE=T,n["default"]=w,t.exports=n["default"]},{10:10,13:13,150:150,57:57,8:8,9:9}],68:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function i(e,t){return e.duration!=t&&(e.duration=t),e.duration}function r(e){var t=e.sourceBuffers,n=t.length,i=0;if("open"===e.readyState){for(i;n>i;i++){if(t[i].updating)return;if(0===t[i].buffered.length)return}e.endOfStream()}}var o=void 0;return o={createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:i,signalEndOfStream:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="MediaSourceController",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],69:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){ct=0,dt=0/0,ft=null,gt=null,vt=!1,ht={},mt=c["default"](Q).getInstance()}function t(e){pt=e,tt=lt.getElement(),K(),gt=pt.manifestInfo.isDynamic,dt=pt.start,Z.on(p["default"].DATA_UPDATE_COMPLETED,R,this),Z.on(p["default"].BYTES_APPENDED,Y,this),Z.on(p["default"].BUFFER_LEVEL_STATE_CHANGED,$,this),Z.on(p["default"].PERIOD_SWITCH_STARTED,n,this),vt&&(vt=!1,s())}function n(e){!gt&&e.fromStreamInfo&&ht[e.fromStreamInfo.id]&&delete ht[e.fromStreamInfo.id]}function i(){var e=A(!0),t=gt?e-pt.start:0;return e+(pt.duration-t)-m()}function r(){return m()>0}function o(){return pt.id}function s(){if(tt){tt.autoplay=!0;var e=tt.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e["catch"](function(e){"NotAllowedError"===e.name&&Z.trigger(p["default"].PLAYBACK_NOT_ALLOWED),J("Caught pending play exception - continuing ("+e+")")})}else vt=!0}function l(){return tt?tt.paused:void 0}function d(){tt&&(tt.pause(),tt.autoplay=!1)}function h(){return tt?tt.seeking:void 0}function g(e){lt&&(J("Requesting seek to time: "+e),lt.setCurrentTime(e))}function m(){return tt?tt.currentTime:void 0}function v(){return tt?tt.playbackRate:void 0}function _(){return tt?tt.played:void 0}function b(){return tt?tt.ended:void 0}function T(){return gt}function w(e){dt=e}function E(){return dt}function S(e,t){var n=st.getMpd(at.getValue()),i=void 0,r=10;i=mt.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:mt.getLiveDelay()?mt.getLiveDelay():isNaN(e)?2*pt.manifestInfo.minBufferTime:e*mt.getLiveDelayFragmentCount();var o=Math.max(t-r,t/2);return Math.min(i,o)}function C(){lt&&tt&&(Z.off(p["default"].DATA_UPDATE_COMPLETED,R,this),Z.off(p["default"].BUFFER_LEVEL_STATE_CHANGED,$,this),Z.off(p["default"].BYTES_APPENDED,Y,this),O(),X()),lt=null,pt=null,tt=null,gt=null,e()}function P(e){e&&(e.streamController&&(nt=e.streamController),e.timelineConverter&&(it=e.timelineConverter),e.metricsModel&&(rt=e.metricsModel),e.dashMetrics&&(ot=e.dashMetrics),e.manifestModel&&(at=e.manifestModel),e.dashManifestModel&&(st=e.dashManifestModel),e.adapter&&(ut=e.adapter),e.videoModel&&(lt=e.videoModel))}function A(e){var t=void 0,n=u["default"](Q).getInstance().getURIFragmentData(),i=parseInt(n.s,10),r=parseInt(n.t,10),o=0/0;if(e||(o=isNaN(i)?r:i),gt)!isNaN(o)&&o>1262304e3&&(t=o-pt.manifestInfo.availableFrom.getTime()/1e3,(t>dt||t<dt-pt.manifestInfo.DVRWindowSize)&&(t=null)),t=t||dt;else if(!isNaN(o)&&o<Math.max(pt.manifestInfo.duration,pt.duration)&&o>=0)t=o;else{var a=ht[pt.id];void 0===a&&(a=nt.getActiveStreamCommonEarliestTime()),t=Math.max(a,pt.start)}return t}function I(e){var t,n=rt.getReadOnlyMetricsFor("video")||rt.getReadOnlyMetricsFor("audio"),i=ot.getCurrentDVRInfo(n),r=i?i.range:null;if(!r)return 0/0;if(e>r.end)t=Math.max(r.end-2*pt.manifestInfo.minBufferTime,r.start);else{if(!(e<r.start))return e;t=r.start}return t}function x(){if(null===ft){var e=function(){z()};ft=setInterval(e,mt.getWallclockTimeUpdateInterval())}}function O(){clearInterval(ft),ft=null}function M(){var e=A(!1);e>0&&(g(e),J("Starting playback at offset: "+e))}function k(){if(!l()&&gt&&0!==tt.readyState){var e=m(),t=I(e),n=!isNaN(t)&&t!==e;n&&g(t)}}function R(e){if(!e.error){var t=ut.convertDataToTrack(at.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;pt.id===n.id&&(pt=n,k())}}function D(){Z.trigger(p["default"].CAN_PLAY)}function L(){J("Native video element event: play"),k(),x(),Z.trigger(p["default"].PLAYBACK_STARTED,{startTime:m()})}function N(){J("Native video element event: playing"),Z.trigger(p["default"].PLAYBACK_PLAYING,{playingTime:m()})}function j(){J("Native video element event: pause"),Z.trigger(p["default"].PLAYBACK_PAUSED,{ended:b()})}function F(){var e=m();J("Seeking to: "+e),x(),Z.trigger(p["default"].PLAYBACK_SEEKING,{seekTime:e})}function U(){J("Native video element event: seeked"),Z.trigger(p["default"].PLAYBACK_SEEKED)}function B(){var e=m();e!==ct&&(ct=e,Z.trigger(p["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:i(),time:e}))}function V(){Z.trigger(p["default"].PLAYBACK_PROGRESS)}function H(){var e=v();J("Native video element event: ratechange: ",e),Z.trigger(p["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function G(){J("Native video element event: loadedmetadata"),(!gt&&pt.isFirst||it.isTimeSyncCompleted())&&M(),Z.trigger(p["default"].PLAYBACK_METADATA_LOADED),x()}function q(){J("Native video element event: ended"),d(),O(),Z.trigger(p["default"].PLAYBACK_ENDED)}function W(e){var t=e.target||e.srcElement;Z.trigger(p["default"].PLAYBACK_ERROR,{error:t.error})}function z(){Z.trigger(p["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:gt,time:new Date})}function Y(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),pt.start),i=void 0===ht[pt.id]?n:Math.max(ht[pt.id],n);i!==ht[pt.id]&&(!gt&&A(!0)<i&&m()<i&&g(i),ht[pt.id]=i)}}function $(e){e.streamInfo.id===pt.id&&lt.setStallState(e.mediaType,e.state===a["default"].BUFFER_EMPTY)}function K(){tt.addEventListener("canplay",D),tt.addEventListener("play",L),tt.addEventListener("playing",N),tt.addEventListener("pause",j),tt.addEventListener("error",W),tt.addEventListener("seeking",F),tt.addEventListener("seeked",U),tt.addEventListener("timeupdate",B),tt.addEventListener("progress",V),tt.addEventListener("ratechange",H),tt.addEventListener("loadedmetadata",G),tt.addEventListener("ended",q)}function X(){tt.removeEventListener("canplay",D),tt.removeEventListener("play",L),tt.removeEventListener("playing",N),tt.removeEventListener("pause",j),tt.removeEventListener("error",W),tt.removeEventListener("seeking",F),tt.removeEventListener("seeked",U),tt.removeEventListener("timeupdate",B),tt.removeEventListener("progress",V),tt.removeEventListener("ratechange",H),tt.removeEventListener("loadedmetadata",G),tt.removeEventListener("ended",q)}var Q=this.context,J=y["default"](Q).getInstance().log,Z=f["default"](Q).getInstance(),et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0,st=void 0,ut=void 0,lt=void 0,ct=void 0,dt=void 0,ft=void 0,ht=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0;return et={initialize:t,setConfig:P,getStreamStartTime:A,getTimeToStreamEnd:i,isPlaybackStarted:r,getStreamId:o,getTime:m,getPlaybackRate:v,getPlayedRanges:_,getEnded:b,getIsDynamic:T,setLiveStartTime:w,getLiveStartTime:E,computeLiveDelay:S,play:s,isPaused:l,pause:d,isSeeking:h,seek:g,reset:C},e(),et}Object.defineProperty(n,"__esModule",{value:!0});var o=e(64),a=i(o),s=e(104),u=i(s),l=e(102),c=i(l),d=e(9),f=i(d),h=e(13),p=i(h),g=e(10),m=i(g),v=e(8),y=i(v);r.__dashjs_factory_name="PlaybackController",n["default"]=m["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,102:102,104:104,13:13,64:64,8:8,9:9}],70:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){wt=!0,Gt=0/0,Vt=0/0,Ht={},qt=[],Et=!1,St=null,Ct=null,Pt=!0,At=!1,It=0,Ot=0/0}function n(e,t){yt=e,Dt=t,Mt=s["default"](st).getInstance(),kt=h["default"](st).getInstance(),Rt=l["default"](st).getInstance(),Lt=U["default"](st).getInstance(),Nt=Dt.getFragmentController(),jt=Dt.getBufferController(),_t=Nt.getModel(yt),_t.setScheduleController(this),bt=Dt.isDynamic(),Bt=mt.getScheduleWhilePaused(),Ft=g["default"](st).create({dashMetrics:C["default"](st).getInstance(),metricsModel:T["default"](st).getInstance(),textSourceBuffer:_["default"](st).getInstance()}),Ut=v["default"](st).create({adapter:A["default"](st).getInstance(),sourceBufferController:x["default"](st).getInstance(),textSourceBuffer:_["default"](st).getInstance()}),pt.getIsTextTrack(yt)&&lt.on(L["default"].TIMED_TEXT_REQUESTED,W,this),lt.on(L["default"].QUALITY_CHANGE_REQUESTED,b,this),lt.on(L["default"].DATA_UPDATE_STARTED,F,this),lt.on(L["default"].DATA_UPDATE_COMPLETED,S,this),lt.on(L["default"].FRAGMENT_LOADING_COMPLETED,k,this),lt.on(L["default"].STREAM_COMPLETED,O,this),lt.on(L["default"].STREAM_INITIALIZED,P,this),lt.on(L["default"].BUFFER_LEVEL_STATE_CHANGED,H,this),lt.on(L["default"].BUFFER_CLEARED,B,this),lt.on(L["default"].BYTES_APPENDED,N,this),lt.on(L["default"].INIT_REQUESTED,p,this),lt.on(L["default"].QUOTA_EXCEEDED,G,this),lt.on(L["default"].BUFFER_LEVEL_STATE_CHANGED,H,this),lt.on(L["default"].PLAYBACK_SEEKING,Y,this),lt.on(L["default"].PLAYBACK_STARTED,z,this),lt.on(L["default"].PLAYBACK_RATE_CHANGED,$,this),lt.on(L["default"].PLAYBACK_TIME_UPDATED,D,this),lt.on(L["default"].URL_RESOLUTION_FAILED,q,this),lt.on(L["default"].FRAGMENT_LOADING_ABANDONED,j,this)}function i(){Tt&&!jt.getIsBufferingCompleted()&&(ot(),Et=!1,wt?(wt=!1,m(Tt.quality)):f(0),ut("Schedule controller starting for "+yt))}function r(){Et||(Et=!0,clearTimeout(xt),ut("Schedule controller stopping for "+yt))}function a(e,t){Ht[t]=Ht[t]||{};var n=Rt.getTopQualityIndexFor(e,t);return Ht[t][e]!=n?(ut("Top quality"+e+" index has changed from "+Ht[t][e]+" to "+n),Ht[t][e]=n,!0):!1}function u(){if(!(Et||At||!jt||Mt.isPaused()&&!Bt)){c();var e=qt.length>0;if(e||a(Tt.mediaInfo.type,Dt.getStreamInfo().id)||Ft.execute(Dt,yt,Lt.isVideoTrackPresent())){var t=function(){if(Tt.quality!==Gt)Gt=Tt.quality,jt.switchInitData(Dt.getStreamInfo().id,Tt.quality);else{var e=qt.shift();if(Nt.isInitializationRequest(e))m(e.quality);else{var t=Ut.execute(Dt,e);t?_t.executeRequest(t):(At=!1,f(500))}}};At=!0,e?t():(Rt.getPlaybackQuality(Dt),t())}else f(500)}}function c(){var e=1.5*Tt.fragmentDuration,t=_t.getRequests({state:E["default"].FRAGMENT_MODEL_EXECUTED,time:Mt.getTime()+e,threshold:0})[0];t&&-1===qt.indexOf(t)&&!pt.getIsTextTrack(yt)&&(!kt.isCurrentTrack(t.mediaInfo)||mt.getFastSwitchEnabled()&&t.quality<Tt.quality&&jt.getBufferLevel()>=e&&Rt.getAbandonmentStateFor(yt)!==l["default"].ABANDON_LOAD?(y(t),ut("Reloading outdated fragment at index: ",t.index)):t.quality>Tt.quality&&X(Mt.getTime()+jt.getBufferLevel()))}function f(e){clearTimeout(xt),xt=setTimeout(u,e)}function p(e){e.sender.getStreamProcessor()===Dt&&m(Tt.quality)}function m(e){Gt=e;var t=ft.getInitRequest(Dt,e);t&&(At=!0,_t.executeRequest(t))}function y(e){qt.push(e)}function b(e){if(yt===e.mediaType&&Dt.getStreamInfo().id===e.streamInfo.id){if(Tt=Dt.getRepresentationInfoForQuality(e.newQuality),null===Tt||void 0===Tt)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");rt(new Date,o.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ot()}}function w(e){var t=_t.getRequests({state:E["default"].FRAGMENT_MODEL_EXECUTED,time:Mt.getTime(),threshold:0})[0];t&&Mt.getTime()>=t.startTime&&(t.quality!==Vt&&e&&lt.trigger(L["default"].QUALITY_CHANGE_RENDERED,{mediaType:yt,oldQuality:Vt,newQuality:t.quality}),Vt=t.quality)}function S(e){e.error||e.sender.getStreamProcessor()!==Dt||(Tt=ft.convertDataToTrack(dt.getValue(),e.currentRepresentation))}function P(e){e.error||Dt.getStreamInfo().id!==e.streamInfo.id||(Tt=Dt.getCurrentRepresentationInfo(),bt&&wt&&(gt.setTimeSyncCompleted(!0),I()),Et&&i())}function I(){var e=M["default"](st).getInstance().getLiveEdge(),t=Tt.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=e-Mt.computeLiveDelay(Tt.fragmentDuration,t),i=ft.getFragmentRequestForTime(Dt,Tt,n,{ignoreIsFinished:!0});Ot=Mt.getLiveStartTime(),(isNaN(Ot)||i.startTime>Ot)&&(Mt.setLiveStartTime(i.startTime),Ot=i.startTime);var r=ht.getCurrentManifestUpdate(ct.getMetricsFor("stream"));ct.updateManifestUpdateInfo(r,{currentTime:Ot,presentationStartTime:e,latency:e-Ot,clientTimeOffset:gt.getClientTimeOffset()})}function O(e){e.fragmentModel===_t&&(r(),At=!1,ut("Stream is complete"))}function k(e){e.sender===_t&&(pt.getIsTextTrack(yt)&&(At=!1),e.error&&e.request.serviceLocation&&!Et&&(y(e.request),At=!1,f(0)))}function D(){w(!0)}function N(e){e.sender.getStreamProcessor()===Dt&&(At=!1,f(0))}function j(e){e.streamProcessor===Dt&&(y(e.request),At=!1,f(0))}function F(e){e.sender.getStreamProcessor()===Dt&&r()}function B(e){e.sender.getStreamProcessor()===Dt&&(_t.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&Et&&i())}function H(e){e.sender.getStreamProcessor()!==Dt||e.state!==d["default"].BUFFER_EMPTY||Mt.isSeeking()||(ut("Buffer is empty! Stalling!"),rt(new Date,o.PlayListTrace.REBUFFERING_REASON))}function G(e){e.sender.getStreamProcessor()===Dt&&r()}function q(){_t.abortRequests(),r()}function W(e){e.sender.getStreamProcessor()===Dt&&m(e.index)}function z(){(Et||!Bt)&&i()}function Y(e){Ot=e.seekTime,J(0),Et&&i();var t=ht.getCurrentManifestUpdate(ct.getMetricsFor("stream")),n=Tt.DVRWindow?Tt.DVRWindow.end-Mt.getTime():0/0;ct.updateManifestUpdateInfo(t,{latency:n})}function $(e){Ct&&(Ct.playbackspeed=e.playbackRate.toString())}function K(){return Ot}function X(e){Ot=e}function Q(){return _t}function J(e){It=e}function Z(){return It}function et(){return Dt}function tt(){return Ft.getBufferTarget(Dt,yt,Lt.isVideoTrackPresent())}function nt(e){St=e}function it(e,t){rt(e,t),St=null}function rt(e,t){if(St&&Pt===!1){var n=Ct.start,i=e.getTime()-n.getTime();Ct.duration=i,Ct.stopreason=t,St.trace.push(Ct),Pt=!0}}function ot(){St&&Pt===!0&&Tt&&(Pt=!1,Ct=new o.PlayListTrace,Ct.representationid=Tt.id,Ct.start=new Date,Ct.mstart=1e3*Mt.getTime(),Ct.playbackspeed=Mt.getPlaybackRate().toString())}function at(){lt.off(L["default"].DATA_UPDATE_STARTED,F,this),lt.off(L["default"].DATA_UPDATE_COMPLETED,S,this),lt.off(L["default"].BUFFER_LEVEL_STATE_CHANGED,H,this),lt.off(L["default"].QUALITY_CHANGE_REQUESTED,b,this),lt.off(L["default"].FRAGMENT_LOADING_COMPLETED,k,this),lt.off(L["default"].STREAM_COMPLETED,O,this),lt.off(L["default"].STREAM_INITIALIZED,P,this),lt.off(L["default"].QUOTA_EXCEEDED,G,this),lt.off(L["default"].BYTES_APPENDED,N,this),lt.off(L["default"].BUFFER_CLEARED,B,this),lt.off(L["default"].INIT_REQUESTED,p,this),lt.off(L["default"].PLAYBACK_RATE_CHANGED,$,this),lt.off(L["default"].PLAYBACK_SEEKING,Y,this),lt.off(L["default"].PLAYBACK_STARTED,z,this),lt.off(L["default"].PLAYBACK_TIME_UPDATED,D,this),lt.off(L["default"].URL_RESOLUTION_FAILED,q,this),lt.off(L["default"].FRAGMENT_LOADING_ABANDONED,j,this),pt.getIsTextTrack(yt)&&lt.off(L["default"].TIMED_TEXT_REQUESTED,W,this),r(),w(!1),At=!1,It=0,Ot=0/0,Mt=null,St=null}var st=this.context,ut=V["default"](st).getInstance().log,lt=R["default"](st).getInstance(),ct=e.metricsModel,dt=e.manifestModel,ft=e.adapter,ht=e.dashMetrics,pt=e.dashManifestModel,gt=e.timelineConverter,mt=e.mediaPlayerModel,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Tt=void 0,wt=void 0,Et=void 0,St=void 0,Ct=void 0,Pt=void 0,At=void 0,It=void 0,xt=void 0,Ot=void 0,Mt=void 0,kt=void 0,Rt=void 0,Dt=void 0,Lt=void 0,Nt=void 0,jt=void 0,Ft=void 0,Ut=void 0,Bt=void 0,Vt=void 0,Ht=void 0,Gt=void 0,qt=void 0;return vt={initialize:n,getStreamProcessor:et,getSeekTarget:K,setSeekTarget:X,getFragmentModel:Q,setTimeToLoadDelay:J,getTimeToLoadDelay:Z,replaceRequest:y,start:i,stop:r,reset:at,setPlayList:nt,getBufferTarget:tt,finalisePlayList:it},t(),vt}Object.defineProperty(n,"__esModule",{value:!0});var o=e(182),a=e(69),s=i(a),u=e(61),l=i(u),c=e(64),d=i(c),f=e(67),h=i(f),p=e(144),g=i(p),m=e(145),v=i(m),y=e(57),_=i(y),b=e(103),T=i(b),w=e(100),E=i(w),S=e(17),C=i(S),P=e(15),A=i(P),I=e(71),x=i(I),O=e(155),M=i(O),k=e(9),R=i(k),D=e(13),L=i(D),N=e(10),j=i(N),F=e(72),U=i(F),B=e(8),V=i(B);r.__dashjs_factory_name="ScheduleController",n["default"]=j["default"].getClassFactory(r),t.exports=n["default"]},{10:10,100:100,103:103,13:13,144:144,145:145,15:15,155:155,17:17,182:182,57:57,61:61,64:64,67:67,69:69,71:71,72:72,8:8,9:9}],71:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n=t.codec,i=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new S["default"]("not really supported");i=e.addSourceBuffer(n)}catch(r){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw r;i=a["default"](_).getInstance(),i.setConfig({errHandler:f["default"](_).getInstance(),adapter:c["default"](_).getInstance(),dashManifestModel:C,mediaController:u["default"](_).getInstance(),videoModel:w["default"](_).getInstance(),streamController:p["default"](_).getInstance(),textTracks:m["default"](_).getInstance(),VTTParser:y["default"](_).getInstance(),TTMLParser:b["default"](_).getInstance()})}return i}function t(e,t){try{e.removeSourceBuffer(t)}catch(n){}}function n(e,t,n){var i,r,o=null,a=0,s=0,u=null,l=null,c=0,d=n||.15;try{o=e.buffered}catch(f){return null}if(null!==o&&void 0!==o){for(r=0,i=o.length;i>r;r++)if(a=o.start(r),s=o.end(r),null===u)c=Math.abs(a-t),t>=a&&s>t?(u=a,l=s):d>=c&&(u=a,l=s);else{if(c=a-l,!(d>=c))break;l=s}if(null!==u)return{start:u,end:l}}return null}function i(e){var t=null;try{return t=e.buffered}catch(n){return null}}function r(e){var t,n,r=i(e),o=0;if(!r)return o;for(n=0,t=r.length;t>n;n++)o+=r.end(n)-r.start(n);return o}function o(e,t,i){var r,o;return r=n(e,t,i),o=null===r?0:r.end-t}function s(e,t){if(!t)return null;var n,r,o,a,s,u,l,c,d,f=i(t);if(!f)return null;for(var h=0,p=f.length;p>h;h++){if(c=e.length>h,s=c?{start:e.start(h),end:e.end(h)}:null,n=f.start(h),r=f.end(h),!s)return d={start:n,end:r};if(o=s.start===n,a=s.end===r,!o||!a){if(o)d={start:s.end,end:r};else{if(!a)return d={start:n,end:r};d={start:n,end:s.start}}return u=e.length>h+1?{start:e.start(h+1),end:e.end(h+1)}:null,l=p>h+1?{start:f.start(h+1),end:f.end(h+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(d.end=u.start),d}}return null}function l(e,t){var n=t.bytes,i="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,r="Object"===Object.prototype.toString.call(e).slice(8,-1);if(i)try{v(e,function(){r?e[i](n,t):e[i](n),v(e,function(){T.trigger(I["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})})}catch(o){T.trigger(I["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new S["default"](o.code,o.message,null)})}}function d(e,t,n,i){try{v(e,function(){t>=0&&n>t&&"ended"!==i.readyState&&e.remove(t,n),v(e,function(){T.trigger(I["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})})}catch(r){T.trigger(I["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new S["default"](r.code,r.message,null)})}}function h(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(n){}}function g(e){e&&e.dashManifestModel&&(C=e.dashManifestModel)}function v(e,t){var n,i=50,r=function(){e.updating||(clearInterval(n),t())},o=function s(){e.updating||(e.removeEventListener("updateend",s,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",o,!1)}catch(a){n=setInterval(r,i)}else n=setInterval(r,i)}var _=this.context,T=P["default"](_).getInstance(),E=void 0,C=void 0;return E={append:l,remove:d,abort:h,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:i,getTotalBufferedTime:r,getBufferLength:o,getRangeDifference:s,setConfig:g}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(57),a=i(o),s=e(67),u=i(s),l=e(15),c=i(l),d=e(152),f=i(d),h=e(72),p=i(h),g=e(58),m=i(g),v=e(160),y=i(v),_=e(158),b=i(_),T=e(105),w=i(T),E=e(163),S=i(E),C=e(9),P=i(C),A=e(13),I=i(A),x=e(10),O=i(x),M=22;
r.__dashjs_factory_name="SourceBufferController";var k=O["default"].getSingletonFactory(r);k.QUOTA_EXCEEDED_ERROR_CODE=M,n["default"]=k,t.exports=n["default"]},{10:10,105:105,13:13,15:15,152:152,158:158,160:160,163:163,57:57,58:58,67:67,72:72,9:9}],72:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){ft=null,ct=[],wt=b["default"](W).getInstance(),pt=!0,gt=!1,mt=!1,Et=!1,St=!0,Ct=null,vt=!1,yt=!1}function t(e,t){pt=e,ht=t,lt.initialize(),st=A["default"](W).getInstance(),X=c["default"](W).getInstance(),X.setConfig({log:z,manifestModel:J,dashManifestModel:Z}),X.initialize(Q),bt=y["default"](W).getInstance(),Tt=a["default"](W).getInstance(),Tt.setConfig({streamController:$,timelineConverter:lt,metricsModel:tt,dashMetrics:nt,manifestModel:J,dashManifestModel:Z,adapter:et,videoModel:bt}),Y.on(p["default"].TIME_SYNCHRONIZATION_COMPLETED,x,this),Y.on(p["default"].PLAYBACK_SEEKING,i,this),Y.on(p["default"].PLAYBACK_TIME_UPDATED,n,this),Y.on(p["default"].PLAYBACK_ENDED,g,this),Y.on(p["default"].PLAYBACK_ERROR,L,this),Y.on(p["default"].PLAYBACK_STARTED,r,this),Y.on(p["default"].PLAYBACK_PAUSED,o,this),Y.on(p["default"].MANIFEST_UPDATED,O,this),Y.on(p["default"].STREAM_BUFFERING_COMPLETED,s,this)}function n(e){if(M()){var t=bt.getPlaybackQuality();t&&tt.addDroppedFrames("video",t)}Tt.isSeeking()||e.timeToEnd<=q&&g()}function i(e){var t=l(e.seekTime);t&&t!==dt?(R(E.PlayListTrace.END_OF_PERIOD_STOP_REASON),_(dt,t,e.seekTime)):R(E.PlayListTrace.USER_REQUEST_STOP_REASON),D(E.PlayList.SEEK_START_REASON)}function r(){St?(St=!1,D(E.PlayList.INITIAL_PLAYOUT_START_REASON)):Et&&(Et=!1,D(E.PlayList.RESUME_FROM_PAUSE_START_REASON))}function o(e){e.ended||(Et=!0,R(E.PlayListTrace.USER_REQUEST_STOP_REASON))}function s(){var e=j().isLast;_t&&e&&rt.signalEndOfStream(_t)}function l(e){var t=0,n=null,i=ct.length;i>0&&(t+=ct[0].getStartTime());for(var r=0;i>r;r++)if(n=ct[r],t+=n.getDuration(),t>e)return n;return null}function d(e,t){for(var n=null,i=0,r=0,o=null,a=ct.length,s=0;a>s;s++){if(n=ct[s],r=n.getStartTime(),o=n.getDuration(),Number.isFinite(r)&&(i=r),n.getId()===t)return e-i;Number.isFinite(o)&&(i+=o)}return null}function h(){var e=[];return dt.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function g(){var e=v();e&&_(dt,e,0/0),R(e?E.PlayListTrace.END_OF_PERIOD_STOP_REASON:E.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function v(){if(dt){var e=function(){var e=dt.getStreamInfo().start,t=dt.getStreamInfo().duration;return{v:ct.filter(function(n){return n.getStreamInfo().start===e+t})[0]}}();if("object"==typeof e)return e.v}}function _(e,t,n){!gt&&t&&e!==t&&(gt=!0,Y.trigger(p["default"].PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),dt=t,Tt.initialize(dt.getStreamInfo()),Pt=k(),T(n))}function T(e){function t(){z("MediaSource is open!"),window.URL.revokeObjectURL(n),_t.removeEventListener("sourceopen",t),_t.removeEventListener("webkitsourceopen",t),S(),w(e)}var n=void 0;_t?rt.detachMediaSource(bt):_t=rt.createMediaSource(),_t.addEventListener("sourceopen",t,!1),_t.addEventListener("webkitsourceopen",t,!1),n=rt.attachMediaSource(_t,bt),z("MediaSource attached to element.  Waiting on open...")}function w(e){dt.activate(_t),St||(isNaN(e)?!function(){var e=Tt.getStreamStartTime(!0);dt.getProcessors().forEach(function(t){et.setIndexHandlerTime(t,e)}),Tt.seek(e)}():Tt.seek(e)),dt.startEventController(),(pt||!St)&&Tt.play(),gt=!1,Y.trigger(p["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:dt.getStreamInfo()})}function S(){var e=dt.getStreamInfo().manifestInfo.duration,t=rt.setDuration(_t,e);z("Duration successfully set to: "+t)}function P(e){for(var t=0,n=ct.length;n>t;t++)if(ct[t].getId()===e.id)return ct[t];return null}function I(e){try{var t=et.getStreamsInfo(e);if(0===t.length)throw new Error("There are no streams");var n=nt.getCurrentManifestUpdate(tt.getMetricsFor("stream"));tt.updateManifestUpdateInfo(n,{currentTime:Tt.getTime(),buffered:bt.getElement().buffered,presentationStartTime:t[0].start,clientTimeOffset:lt.getClientTimeOffset()});for(var i=0,r=t.length;r>i;i++){var o=t[i],a=P(o);a?a.updateData(o):(a=u["default"](W).create({manifestModel:J,manifestUpdater:X,adapter:et,timelineConverter:lt,capabilities:K,errHandler:ut,baseURLController:at}),ct.push(a),a.initialize(o,ft)),tt.addManifestUpdateStreamInfo(n,o.id,o.index,o.start,o.duration)}dt||_(null,ct[0],0/0),Y.trigger(p["default"].STREAMS_COMPOSED)}catch(s){ut.manifestError(s.message,"nostreamscomposed",e),yt=!0,G()}}function x(){var e=J.getValue();ft&&(Y.trigger(p["default"].PROTECTION_CREATED,{controller:ft,manifest:e}),ft.setMediaElement(bt.getElement()),ht&&ft.setProtectionData(ht)),I(e)}function O(e){if(e.error)yt=!0,G();else{var t,n,i=e.manifest,r=et.getStreamsInfo(i)[0],o=et.getMediaInfoForType(i,r,"video")||et.getMediaInfoForType(i,r,"audio");o&&(t=et.getDataForMedia(o),n=Z.getRepresentationsForAdaptation(i,t)[0].useCalculatedLiveEdgeTime,n&&(z("SegmentTimeline detected using calculated Live Edge Time"),wt.setUseManifestDateHeaderTimeSource(!1)));var a=Z.getUTCTimingSources(e.manifest),s=!Z.getIsDynamic(i)||n?a:a.concat(wt.getUTCTimingSources()),u=m["default"](W).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===b["default"].DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(new RegExp(u?/^(http:)?\/\//i:/^(https:)?\/\//i),u?"https://":"http://"),z("Matching default timing source protocol to manifest protocol: ",e.value))}),at.initialize(i),ot.setConfig({metricsModel:tt,dashMetrics:nt}),ot.initialize(s,wt.getUseManifestDateHeaderTimeSource())}}function M(){return void 0===Pt&&(Pt=k()),Pt}function k(){var e=!1;return dt.getProcessors().forEach(function(t){"video"===t.getMediaInfo().type&&(e=!0)}),e}function R(e,t){t=t||new Date,Ct&&(dt&&dt.getProcessors().forEach(function(n){var i=n.getScheduleController();i&&i.finalisePlayList(t,e)}),tt.addPlayList(Ct),Ct=null)}function D(e){Ct=new E.PlayList,Ct.start=new Date,Ct.mstart=1e3*Tt.getTime(),Ct.starttype=e,dt&&dt.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Ct)})}function L(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}vt=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),z("Video Element Error: "+t),e.error&&z(e.error),ut.mediaSourceError(t),G()}}function N(){return pt}function j(){return dt?dt.getStreamInfo():null}function F(e){return dt.getId()===e.id}function U(e){return ct.filter(function(t){return t.getId()===e})[0]}function B(e){Q.load(e)}function V(e){X.setManifest(e)}function H(e){e&&(e.capabilities&&(K=e.capabilities),e.manifestLoader&&(Q=e.manifestLoader),e.manifestModel&&(J=e.manifestModel),e.dashManifestModel&&(Z=e.dashManifestModel),e.protectionController&&(ft=e.protectionController),e.adapter&&(et=e.adapter),e.metricsModel&&(tt=e.metricsModel),e.dashMetrics&&(nt=e.dashMetrics),e.liveEdgeFinder&&(it=e.liveEdgeFinder),e.mediaSourceController&&(rt=e.mediaSourceController),e.timeSyncController&&(ot=e.timeSyncController),e.baseURLController&&(at=e.baseURLController),e.errHandler&&(ut=e.errHandler),e.timelineConverter&&(lt=e.timelineConverter))}function G(){ot.reset(),R(vt||yt?E.PlayListTrace.FAILURE_STOP_REASON:E.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=ct.length;t>e;e++){var a=ct[e];a.reset(vt)}ct=[],Y.off(p["default"].PLAYBACK_TIME_UPDATED,n,this),Y.off(p["default"].PLAYBACK_SEEKING,i,this),Y.off(p["default"].PLAYBACK_ERROR,L,this),Y.off(p["default"].PLAYBACK_STARTED,r,this),Y.off(p["default"].PLAYBACK_PAUSED,o,this),Y.off(p["default"].PLAYBACK_ENDED,g,this),Y.off(p["default"].MANIFEST_UPDATED,O,this),Y.off(p["default"].STREAM_BUFFERING_COMPLETED,s,this),at.reset(),X.reset(),tt.clearAllCurrentMetrics(),J.setValue(null),Q.reset(),lt.reset(),it.reset(),et.reset(),st.reset(),gt=!1,mt=!1,dt=null,vt=!1,yt=!1,Pt=void 0,St=!0,Et=!1,_t&&(rt.detachMediaSource(bt),_t=null),bt=null,ft&&(ft.setMediaElement(null),ft=null,ht=null,J.getValue()&&Y.trigger(p["default"].PROTECTION_DESTROYED,{data:J.getValue().url})),Y.trigger(p["default"].STREAM_TEARDOWN_COMPLETE)}var q=.1,W=this.context,z=C["default"](W).getInstance().log,Y=f["default"](W).getInstance(),$=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0,st=void 0,ut=void 0,lt=void 0,ct=void 0,dt=void 0,ft=void 0,ht=void 0,pt=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,_t=void 0,bt=void 0,Tt=void 0,wt=void 0,Et=void 0,St=void 0,Ct=void 0,Pt=void 0;return $={initialize:t,getAutoPlay:N,getActiveStreamInfo:j,isStreamActive:F,isVideoTrackPresent:M,getStreamById:U,getTimeRelativeToStreamId:d,load:B,loadWithManifest:V,getActiveStreamCommonEarliestTime:h,setConfig:H,reset:G},e(),$}Object.defineProperty(n,"__esModule",{value:!0});var o=e(69),a=i(o),s=e(55),u=i(s),l=e(51),c=i(l),d=e(9),f=i(d),h=e(13),p=i(h),g=e(104),m=i(g),v=e(105),y=i(v),_=e(102),b=i(_),T=e(10),w=i(T),E=e(182),S=e(8),C=i(S),P=e(153),A=i(P);r.__dashjs_factory_name="StreamController",n["default"]=w["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,102:102,104:104,105:105,13:13,153:153,182:182,51:51,55:55,69:69,8:8,9:9}],73:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){b=!1,T=null,w=null,E=null,S=null,C=null,_=!1,g.on(u["default"].DATA_UPDATE_COMPLETED,d,this),g.on(u["default"].INIT_FRAGMENT_LOADED,f,this)}function n(e,t,n){E=e,s(t),S=n,C=S.getRepresentationController()}function i(e){try{w=m.createSourceBuffer(T,e),b||(w.hasOwnProperty("initialize")&&w.initialize(E,this),b=!0)}catch(t){v.mediaSourceError("Error creating "+E+" source buffer.")}return w}function r(){return w}function o(e){w=e}function s(e){T=e}function l(){return S}function c(e){g.off(u["default"].DATA_UPDATE_COMPLETED,d,this),g.off(u["default"].INIT_FRAGMENT_LOADED,f,this),e||(m.abort(T,w),m.removeSourceBuffer(T,w))}function d(e){e.sender.getStreamProcessor()===S&&g.trigger(u["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function f(e){e.fragmentModel===S.getFragmentModel()&&e.chunk.bytes&&m.append(w,e.chunk)}function h(){return _}var p=this.context,g=a["default"](p).getInstance(),m=e.sourceBufferController,v=e.errHandler,y=void 0,_=void 0,b=void 0,T=void 0,w=void 0,E=void 0,S=void 0,C=void 0;return y={initialize:n,createBuffer:i,getBuffer:r,setBuffer:o,getStreamProcessor:l,getIsBufferingCompleted:h,setMediaSource:s,reset:c},t(),y}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="TextController",n["default"]=c["default"].getClassFactory(r),t.exports=n["default"]},{10:10,13:13,9:9}],74:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){R=t,O=0,M=!1,k=!1,D={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":b.bind(null,f),"urn:mpeg:dash:utc:http-iso:2014":b.bind(null,h),"urn:mpeg:dash:utc:direct:2014":_,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":b.bind(null,f),"urn:mpeg:dash:utc:http-iso:2012":b.bind(null,h),"urn:mpeg:dash:utc:direct:2012":_,"urn:mpeg:dash:utc:http-ntp:2014":y,"urn:mpeg:dash:utc:ntp:2014":y,"urn:mpeg:dash:utc:sntp:2014":y},r()||(S(e),o(!0))}function t(e){e&&(e.metricsModel&&(L=e.metricsModel),e.dashMetrics&&(N=e.dashMetrics))}function n(){return l()}function i(e){M=e}function r(){return M}function o(e){k=e}function s(e){O=e}function l(){return O}function d(e){var t,n,i=60,r=60,o=1e3,a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,s=a.exec(e);return t=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*o||0),s[9]&&s[10]&&(n=parseInt(s[9],10)*r+parseInt(s[10],10),t+=("+"===s[8]?-1:1)*n*i*o),new Date(t).getTime()}function f(e){var t=Date.parse(e);return isNaN(t)&&(t=d(e)),t}function h(e){return Date.parse(e)}function v(e){return Date.parse(e)}function y(e,t,n){n()}function _(e,t,n){var i=f(e);return isNaN(i)?void n():void t(i)}function b(e,t,n,i,r){var o,a,s=!1,u=new XMLHttpRequest,l=r?"HEAD":"GET",c=t.match(/\S+/g);t=c.shift(),o=function(){s||(s=!0,c.length?b(e,c.join(" "),n,i,r):i())},a=function(){var t,i;200===u.status&&(t=r?u.getResponseHeader("Date"):u.response,i=e(t),isNaN(i)||(n(i),s=!0))},u.open(l,t),u.timeout=m||0,u.onload=a,u.onloadend=o,u.send()}function T(e,t,n){b(v,e,t,n,!0)}function w(){var e=L.getReadOnlyMetricsFor("stream"),t=N.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?E(!0):(s(n-(new Date).getTime()),E(!1,n/1e3,O))}function E(e,t,n){i(!1),I.trigger(c["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new a["default"](g):null})}function S(e,t){var n=t||0,r=e[n],o=function(e,t){var n=!e||!t;n&&R?w():E(n,e,t)};i(!0),r?D.hasOwnProperty(r.schemeIdUri)?D[r.schemeIdUri](r.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),A("Local time:      "+new Date(t)),A("Server time:     "+new Date(e)),A("Difference (ms): "+n),o(e,n)},function(){S(e,n+1)}):S(e,n+1):(s(0),o())}function C(){o(!1),i(!1)}var P=this.context,A=p["default"](P).getInstance().log,I=u["default"](P).getInstance(),x=void 0,O=void 0,M=void 0,k=void 0,R=void 0,D=void 0,L=void 0,N=void 0;return x={initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:C}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(163),a=i(o),s=e(9),u=i(s),l=e(13),c=i(l),d=e(10),f=i(d),h=e(8),p=i(h),g=1,m=5e3;r.__dashjs_factory_name="TimeSyncController";var v=f["default"].getSingletonFactory(r);v.TIME_SYNC_FAILED_ERROR_CODE=g,v.HTTP_TIMEOUT_MS=m,n["default"]=v,t.exports=n["default"]},{10:10,13:13,163:163,8:8,9:9}],75:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){P.on(c["default"].XLINK_ELEMENT_LOADED,l,I),R=a["default"](C).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){x=e}function i(e){O=e}function r(e){var t;k=new p["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:x}),M=e,t=f(M.Period_asArray,M,_,v),s(t,_,v)}function o(){P.off(c["default"].XLINK_ELEMENT_LOADED,l,I),R&&(R.reset(),R=null)}function s(e,t,n){var i,r,o,a={};for(a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&d(a),o=0;o<a.elements.length;o++)i=a.elements[o],r=A.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,R.load(r,i,a)}function l(e){var t,n,i,r="<response>",o="</response>",a="";t=e.element,n=e.resolveObject,t.resolvedContent&&(i=t.resolvedContent.indexOf(">")+1,a=t.resolvedContent.substr(0,i)+r+t.resolvedContent.substr(i)+o,t.resolvedContent=k.xml_str2json(a)),E(n)&&d(n)}function d(e){var t,n,i=[];if(h(e),e.resolveType===y&&P.trigger(c["default"].XLINK_READY,{manifest:M}),e.resolveType===v)switch(e.type){case _:for(t=0;t<M[_+"_asArray"].length;t++)n=M[_+"_asArray"][t],n.hasOwnProperty(b+"_asArray")&&(i=i.concat(f(n[b+"_asArray"],n,b,v))),n.hasOwnProperty(T+"_asArray")&&(i=i.concat(f(n[T+"_asArray"],n,T,v)));s(i,b,v);break;case b:P.trigger(c["default"].XLINK_READY,{manifest:M})}}function f(e,t,n,i){var r,o,a,s=[];for(o=e.length-1;o>=0;o--)r=e[o],r.hasOwnProperty("xlink:href")&&r["xlink:href"]===w&&e.splice(o,1);for(o=0;o<e.length;o++)r=e[o],r.hasOwnProperty("xlink:href")&&r.hasOwnProperty("xlink:actuate")&&r["xlink:actuate"]===i&&(a=g(r["xlink:href"],t,n,o,i,r),s.push(a));return s}function h(e){var t,n,i,r,o,a,s=[];for(r=e.elements.length-1;r>=0;r--){if(t=e.elements[r],n=t.type+"_asArray",!t.resolvedContent||S())delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);else if(t.resolvedContent)for(o=0;o<t.resolvedContent[n].length;o++)i=t.resolvedContent[n][o],s.push(i);for(t.parentElement[n].splice(t.index,1),a=0;a<s.length;a++)t.parentElement[n].splice(t.index+a,0,s[a]);s=[]}e.elements.length>0&&O.run(M)}function g(e,t,n,i,r,o){return{url:e,parentElement:t,type:n,index:i,resolveType:r,originalContent:o,resolvedContent:null,resolved:!1}}function E(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],n.resolved===!1)return!1;return!0}function S(){return!1}var C=this.context,P=u["default"](C).getInstance(),A=m["default"](C).getInstance(),I=void 0,x=void 0,O=void 0,M=void 0,k=void 0,R=void 0;return I={resolveManifestOnLoad:r,setMatchers:n,setIron:i,reset:o},t(),I}Object.defineProperty(n,"__esModule",{value:!0});var o=e(60),a=i(o),s=e(9),u=i(s),l=e(13),c=i(l),d=e(10),f=i(d),h=e(4),p=i(h),g=e(159),m=i(g),v="onLoad",y="onActuate",_="Period",b="AdaptationSet",T="EventStream",w="urn:mpeg:dash:resolve-to-zero:2013";r.__dashjs_factory_name="XlinkController",n["default"]=f["default"].getClassFactory(r),t.exports=n["default"]},{10:10,13:13,159:159,4:4,60:60,9:9}],76:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return o=a["default"](i).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),c["default"](i).create(e)}function t(){return p["default"](i).getInstance()}function n(){return f["default"](i).getInstance()}var i=this.context,r=void 0,o=void 0;return r={createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(90),a=i(o),s=e(77),u=i(s),l=e(78),c=i(l),d=e(83),f=i(d),h=e(88),p=i(h),g=e(10),m=i(g);r.__dashjs_factory_name="MetricsReporting";var v=m["default"].getClassFactory(r);v.events=u["default"],n["default"]=v,t.exports=n["default"]},{10:10,77:77,78:78,83:83,88:88,90:90}],77:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(14),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{14:14}],78:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(t){if(!t.error){var n=Object.keys(r),i=u["default"](o).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest);i.forEach(function(t){var i=JSON.stringify(t);if(r.hasOwnProperty(i))n.splice(i,1);else try{var s=a["default"](o).create(e);s.initialize(t),r[i]=s}catch(u){}}),n.forEach(function(e){r[e].reset(),delete r[e]}),s.trigger(f["default"].METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}function i(){s.on(p["default"].MANIFEST_UPDATED,t),s.on(p["default"].STREAM_TEARDOWN_COMPLETE,n)}var r={},o=this.context,s=e.eventBus;return i(),{}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(79),a=i(o),s=e(92),u=i(s),l=e(10),c=i(l),d=e(77),f=i(d),h=e(13),p=i(h);r.__dashjs_factory_name="MetricsCollectionController",n["default"]=c["default"].getClassFactory(r),t.exports=n["default"]},{10:10,13:13,77:77,79:79,92:92}],79:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(t){try{o=u["default"](s).create({mediaElement:e.mediaElement}),o.initialize(t.Range),r=c["default"](s).create({log:e.log}),r.initialize(t.Reporting,o),i=f["default"](s).create({log:e.log,eventBus:e.eventBus}),i.initialize(t.metrics,r)}catch(a){throw n(),a}}function n(){i&&i.reset(),r&&r.reset(),o&&o.reset()}var i=void 0,r=void 0,o=void 0,a=void 0,s=this.context;return a={initialize:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(81),u=i(s),l=e(82),c=i(l),d=e(80),f=i(d);r.__dashjs_factory_name="MetricsController",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,80:80,81:81,82:82}],80:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){r.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,i){var o;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var a=i[t+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete i[t+1])}o=l.create(e,n),o&&r.push(o)}),u.on(c["default"].METRIC_ADDED,t,o),u.on(c["default"].METRIC_UPDATED,t,o)}function i(){u.off(c["default"].METRIC_ADDED,t,o),u.off(c["default"].METRIC_UPDATED,t,o),r.forEach(function(e){return e.reset()}),r=[]}var r=[],o=void 0,s=this.context,u=e.eventBus,l=a["default"](s).getInstance({log:e.log,eventBus:e.eventBus});return o={initialize:n,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(83),a=i(o),s=e(10),u=i(s),l=e(53),c=i(l);r.__dashjs_factory_name="MetricsHandlersController",n["default"]=u["default"].getClassFactory(r),t.exports=n["default"]},{10:10,53:53,83:83}],81:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;l.add(t,n)}),o=!!e[0]._useWallClockTime)}function n(){l.clear()}function i(){l=u["default"](a).create()}function r(){var e,t=l.length;if(!t)return!0;e=o?(new Date).getTime()/1e3:c.currentTime;for(var n=0;t>n;n+=1){var i=l.start(n),r=l.end(n);if(e>=i&&r>e)return!0}return!1}var o=!1,a=this.context,s=void 0,l=void 0,c=e.mediaElement;return s={initialize:t,reset:n,isEnabled:r},i(),s}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(149),u=i(s);r.__dashjs_factory_name="RangeController",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,149:149}],82:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){e.some(function(e){var n=a.create(e,t);return n?(r.push(n),!0):void 0})}function n(){r.forEach(function(e){return e.reset()}),r=[]}function i(e,t){r.forEach(function(n){return n.report(e,t)})}var r=[],o=void 0,a=u["default"](this.context).getInstance({log:e.log});return o={initialize:t,reset:n,report:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(88),u=i(s);r.__dashjs_factory_name="ReportingController",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,88:88}],83:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(t,n){var i,r=t.match(a);if(r){try{i=l[r[1]](s).create({eventBus:e.eventBus}),i.initialize(r[1],n,r[3],r[5])}catch(u){i=null,o("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+u.message+")")}return i}}function n(e,t){l[e]=t}function i(e){delete l[e]}var r=void 0,o=e.log,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,l={BufferLevel:u["default"],DVBErrors:c["default"],HttpList:f["default"],PlayList:p["default"],RepSwitchList:p["default"],TcpList:p["default"]};return r={create:t,register:n,unregister:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(84),u=i(s),l=e(85),c=i(l),d=e(87),f=i(d),h=e(86),p=i(h);r.__dashjs_factory_name="MetricsHandlerFactory",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,84:84,85:85,86:86,87:87}],84:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){try{return Object.keys(p).map(function(e){return p[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&d!==t.t&&(d=t.t,a.report(l,t))}function n(e,n,i){n&&(s=h.validateN(i),a=n,l=h.reconstructFullMetricName(e,i),c=setInterval(t,s))}function i(){clearInterval(c),c=null,s=0,a=null,d=null}function r(e,t,n){"BufferLevel"===e&&(p[n]=t)}var o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=this.context,h=u["default"](f).getInstance(),p=[];return o={initialize:n,reset:i,handleNewMetric:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(91),u=i(s);r.__dashjs_factory_name="BufferLevelHandler",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,91:91}],85:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){s.off(u["default"].METRICS_INITIALISATION_COMPLETE,t,this),s.trigger(u["default"].BECAME_REPORTING_PLAYER)}function n(e,n){n&&(a=n,s.on(u["default"].METRICS_INITIALISATION_COMPLETE,t,this))}function i(){a=null}function r(e,t){"DVBErrors"===e&&a&&a.report(e,t)}var o=void 0,a=void 0,s=e.eventBus;return o={initialize:n,reset:i,handleNewMetric:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(77),u=i(s);n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,77:77}],86:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){r=e,o=t}function t(){o=null,r=void 0}function n(e,t){e===r&&o&&o.report(r,t)}var i=void 0,r=void 0,o=void 0;return i={initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="GenericMetricHandler",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10}],87:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){var e=d;e.length&&o&&o.report(l,e),d=[]}function t(t,n,i,r){n&&(a=f.validateN(i),o=n,r&&r.length&&(s=r),l=f.reconstructFullMetricName(t,i,r),c=setInterval(e,a))}function n(){clearInterval(c),c=null,a=null,s=null,d=[],o=null}function i(e,t){"HttpList"===e&&(s&&s!==t.type||d.push(t))}var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=[],f=u["default"](this.context).getInstance();return r={initialize:t,reset:n,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(91),u=i(s);r.__dashjs_factory_name="HttpListHandler",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,91:91}],88:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){var n;try{n=r[e.schemeIdUri](o).create(),n.initialize(e,t)}catch(i){n=null,a("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+i.message+")")}return n}function n(e,t){r[e]=t}function i(e){delete r[e]}var r={"urn:dvb:dash:reporting:2014":u["default"]},o=this.context,a=e.log,s=void 0;return s={create:t,register:n,unregister:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(89),u=i(s);r.__dashjs_factory_name="ReportingFactory",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,89:89}],89:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t,n){var i=new XMLHttpRequest,r=function(){var e=m.indexOf(i);-1!==e&&(m.splice(e,1),i.status>=200&&i.status<300?t&&t():n&&n())};m.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(o){i.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),d&&p.isEnabled()&&n.forEach(function(n){var i=a.serialise(n);l&&"DVBErrors"!==t&&(i="metricname="+t+"&"+i),i=h+"?"+i,e(i,null,function(){d=!1})})}function n(e,t){var n;if(p=t,h=e["dvb:reportingUrl"],!h)throw new Error("required parameter missing (dvb:reportingUrl)");f||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=s.random())&&(d=!0),f=!0)}function i(){g||(m.forEach(function(e){return e.abort()}),m=[]),f=!1,d=!1,h=null,p=null}var r=void 0,o=this.context,a=u["default"](o).getInstance(),s=c["default"](o).getInstance(),l=!0,d=!1,f=!1,h=null,p=null,g=!0,m=[];return r={report:t,initialize:n,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(93),u=i(s),l=e(94),c=i(l);r.__dashjs_factory_name="DVBReporting",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,93:93,94:94}],90:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t=new a["default"];if(v){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=v.originalUrl||v.url),t.terror||(t.terror=new Date),m.addDVBErrors(t)}}function n(e){e.error||(v=e.manifest)}function i(e){t({errorcode:a["default"].BASE_URL_CHANGED,servicelocation:e.entry})}function r(){t({errorcode:a["default"].BECAME_REPORTER})}function o(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||a["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":o(e.value)}}function l(e){var n,i=e.error?e.error.code:0;switch(i){case MediaError.MEDIA_ERR_NETWORK:n=a["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=a["default"].CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function d(){g.on(u["default"].MANIFEST_UPDATED,n,p),g.on(u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,i,p),g.on(c["default"].METRIC_ADDED,s,p),g.on(c["default"].METRIC_UPDATED,s,p),g.on(c["default"].PLAYBACK_ERROR,l,p),g.on(f["default"].BECAME_REPORTING_PLAYER,r,p)}function h(){g.off(u["default"].MANIFEST_UPDATED,n,p),g.off(u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,i,p),g.off(c["default"].METRIC_ADDED,s,p),g.off(c["default"].METRIC_UPDATED,s,p),g.off(c["default"].PLAYBACK_ERROR,l,p),g.off(f["default"].BECAME_REPORTING_PLAYER,r,p)}var p=void 0,g=e.eventBus,m=e.metricsModel,v=void 0;return p={initialise:d,reset:h},d(),p}Object.defineProperty(n,"__esModule",{value:!0});var o=e(95),a=i(o),s=e(13),u=i(s),l=e(53),c=i(l),d=e(77),f=i(d),h=e(10),p=i(h);r.__dashjs_factory_name="DVBErrorsTranslator",n["default"]=p["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,53:53,77:77,95:95}],91:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){return{reconstructFullMetricName:function(e,t,n){var i=e;return t&&(i+="("+t,n&&n.length&&(i+=","+n),i+=")"),i},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(0>e)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="HandlerHelpers",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],92:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t,n){var i,o,a=r.getMpd(e),s=0;return t?s=a.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(e,a),i.length&&(s=i[0].start)),o=s,n&&n.hasOwnProperty("starttime")&&(o+=n.starttime),o}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(i){var o=new a["default"],s=r.getIsDynamic(e);i.hasOwnProperty("metrics")&&(o.metrics=i.metrics,i.Range_asArray&&i.Range_asArray.forEach(function(n){var i=new u["default"];i.starttime=t(e,s,n),i.duration=n.hasOwnProperty("duration")?n.duration:r.getDuration(e),i._useWallClockTime=s,o.Range.push(i)}),i.Reporting_asArray&&(i.Reporting_asArray.forEach(function(e){var t=new c["default"];
if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);o.Reporting.push(t)}}),n.push(o)))}),n}var i=void 0,r=e.dashManifestModel;return i={getMetrics:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(96),a=i(o),s=e(97),u=i(s),l=e(98),c=i(l),d=e(10),f=i(d);r.__dashjs_factory_name="ManifestParsing",n["default"]=f["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,96:96,97:97,98:98}],93:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(t){var n,i,r=[],o=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(i=t[n],(void 0===i||null===i)&&(i=""),Array.isArray(i)){if(!i.length)continue;o=[],i.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);o.push(n?t:e(t))}),i=o.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));r.push(n+"="+i)}return r.join("&")}return{serialise:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="MetricSerialiser",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],94:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){n&&(a||(a=new i(o)),n.getRandomValues(a),s=0)}function t(t,i){var o;return t||(t=0),i||(i=1),n?(s===a.length&&e(),o=a[s]/r,s+=1):o=Math.random(),o*(i-t)+t}var n=window.crypto||window.msCrypto,i=Uint32Array,r=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1,o=10,a=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="RNG",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],95:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n["default"]=r,t.exports=n["default"]},{}],96:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.metrics="",this.Range=[],this.Reporting=[]};n["default"]=r,t.exports=n["default"]},{}],97:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};n["default"]=r,t.exports=n["default"]},{}],98:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.schemeIdUri="",this.value=""};n["default"]=r,t.exports=n["default"]},{}],99:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){function e(){d=new h}function t(e,t,n){var i=g.getBaseURLsFromElement(n);e[t]?m.areSimpleEquivalent(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=f):e[t]=new h(i)}function n(e){var n=g.getBaseURLsFromElement(e);m.areSimpleEquivalent(n,d.data.baseUrls)||(d.data.baseUrls=n,d.data.selectedIdx=f),e.Period_asArray&&e.Period_asArray.forEach(function(e,n){t(d.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,i){t(d.children[n].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(g.getRepresentationSortFunction()).forEach(function(e,r){t(d.children[n].children[i].children,r,e)})})})}function i(e,t){var n=t||d;e(n.data),n.children&&n.children.forEach(function(t){return i(e,t)})}function r(e){i(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=f)})}function o(e){n(e)}function a(){d=new h}function u(e){var t=d,n=[t.data];return e.forEach(function(e){t=t.children[e],t&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var c=void 0,d=void 0,p=this.context,g=s["default"](p).getInstance(),m=l["default"](p).getInstance();return c={reset:a,update:o,getForPath:u,invalidateSelectedIndexes:r},e(),c}Object.defineProperty(n,"__esModule",{value:!0});var a=e(22),s=i(a),u=e(156),l=i(u),c=e(10),d=i(c),f=0/0,h=function p(e,t){r(this,p),this.data={baseUrls:e||null,selectedIdx:t||f},this.children=[]};o.__dashjs_factory_name="BaseURLTreeModel",n["default"]=d["default"].getClassFactory(o),t.exports=n["default"]},{10:10,156:156,22:22}],100:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){x=null,k=null,O=[],M=[],P.on(u["default"].LOADING_COMPLETED,w,I)}function n(e){k=e}function i(e){x=e}function r(){return x}function o(e){var t=function(e,t){return e.action===f["default"].ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},i=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},r=function(r){var o=!1;return r.some(function(r){return n(e,r)||i(e,r)||t(e,r)?o=!0:void 0}),o};return r(O)}function s(e){var t=e.state instanceof Array?e.state:[e.state],n=[];return t.forEach(function(t){var i=b(t);n=n.concat(_(i,e))}),n}function l(e){O=O.filter(function(t){return isNaN(t.startTime)||t.startTime>=e})}function c(){k.abort(),M=[]}function d(e){switch(e.action){case f["default"].ACTION_COMPLETE:O.push(e),T(e,m),P.trigger(u["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case f["default"].ACTION_DOWNLOAD:T(e,g),M.push(e),h(e);break;default:C("Unknown request action.")}}function h(e){P.trigger(u["default"].FRAGMENT_LOADING_STARTED,{sender:I,request:e}),k.load(e)}function v(e,t,n){for(var i=e.length-1,r=i;r>=0;r--){var o=e[r],a=o.startTime,s=a+o.duration;if(n=void 0!==n?n:o.duration/2,!isNaN(a)&&!isNaN(s)&&t+n>=a&&s>t-n||isNaN(a)&&isNaN(t))return o}return null}function _(e,t){return t.hasOwnProperty("time")?[v(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function b(e){var t=void 0;switch(e){case g:t=M;break;case m:t=O;break;default:t=[]}return t}function T(e,t){A.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),A.addRequestsQueue(e.mediaType,M,O)}function w(e){e.sender===k&&(M.splice(M.indexOf(e.request),1),e.response&&!e.error&&O.push(e.request),T(e.request,e.error?y:m),P.trigger(u["default"].FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function E(){P.off(u["default"].LOADING_COMPLETED,w,this),k&&(k.reset(),k=null),O=[],M=[]}var S=this.context,C=p["default"](S).getInstance().log,P=a["default"](S).getInstance(),A=e.metricsModel,I=void 0,x=void 0,O=void 0,M=void 0,k=void 0;return I={setLoader:n,setScheduleController:i,getScheduleController:r,getRequests:s,isFragmentLoaded:o,removeExecutedRequestsBeforeTime:l,abortRequests:c,executeRequest:d,reset:E},t(),I}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l),d=e(164),f=i(d),h=e(8),p=i(h),g="loading",m="executed",v="canceled",y="failed";r.__dashjs_factory_name="FragmentModel";var _=c["default"].getClassFactory(r);_.FRAGMENT_MODEL_LOADING=g,_.FRAGMENT_MODEL_EXECUTED=m,_.FRAGMENT_MODEL_CANCELED=v,_.FRAGMENT_MODEL_FAILED=y,n["default"]=_,t.exports=n["default"]},{10:10,13:13,164:164,8:8,9:9}],101:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){return o}function t(e){o=e,e&&i.trigger(u["default"].MANIFEST_LOADED,{data:e})}var n=this.context,i=a["default"](n).getInstance(),r=void 0,o=void 0;return r={getValue:e,setValue:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="ManifestModel",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,9:9}],102:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){function e(){var e,t;St=[],Et=!1,wt=!0,At=!0,Ht=!1,qt=!1,Ot={enabled:!0,ttl:d},Mt={enabled:!0,ttl:f},Ct=c,Pt=void 0,It=g,xt=m,kt=0/0,Rt=_,Dt=b,Lt=T,Nt=w,jt=h,Ft=p,Vt=x,Gt={"default":O},e={},r(e,u.HTTPRequest.MPD_TYPE,C),r(e,u.HTTPRequest.XLINK_EXPANSION_TYPE,A),r(e,u.HTTPRequest.MEDIA_SEGMENT_TYPE,E),r(e,u.HTTPRequest.INIT_SEGMENT_TYPE,E),r(e,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,E),r(e,u.HTTPRequest.INDEX_SEGMENT_TYPE,E),r(e,u.HTTPRequest.OTHER_TYPE,E),Ut=e,t={},r(t,u.HTTPRequest.MPD_TYPE,P),r(t,u.HTTPRequest.XLINK_EXPANSION_TYPE,I),r(t,u.HTTPRequest.MEDIA_SEGMENT_TYPE,S),r(t,u.HTTPRequest.INIT_SEGMENT_TYPE,S),r(t,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,S),r(t,u.HTTPRequest.INDEX_SEGMENT_TYPE,S),r(t,u.HTTPRequest.OTHER_TYPE,S),Bt=t}function t(e){Ht=e}function n(){return Ht}function i(e){jt=e}function o(){return jt}function a(e){Ft=e}function s(){return Ft}function l(e){kt=e}function M(){return isNaN(kt)?qt?y:v:kt}function k(e){Rt=e}function R(){return Rt}function D(e){Dt=e}function L(){return Dt}function N(e){Lt=e}function j(){return Lt}function F(e){Nt=e}function U(){return Nt}function B(e){It=e}function V(){return It}function H(e,t){Ot.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Ot.ttl=t)}function G(){return Ot}function q(e,t){Mt.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Mt.ttl=t)}function W(){return Mt}function z(e){xt=e}function Y(){return xt}function $(e){Ut[u.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function K(e,t){Ut[e]=t}function X(){return Ut[u.HTTPRequest.MEDIA_SEGMENT_TYPE]}function Q(e){return Ut[e]}function J(e){Bt[u.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Z(e,t){Bt[e]=t}function et(){return Bt[u.HTTPRequest.MEDIA_SEGMENT_TYPE]}function tt(e){return Bt[e]}function nt(e){Vt=e}function it(){return Vt}function rt(e){At=e}function ot(){return At}function at(e){Ct=e}function st(e){Pt=e}function ut(){return Ct}function lt(){return Pt}function ct(e){wt=e}function dt(){return wt}function ft(e){Et=e}function ht(){return Et}function pt(e){St=e}function gt(){return St}function mt(e,t){e?Gt[e]=!!t:Object.keys(Gt).forEach(function(e){mt(e,t)})}function vt(e){var t=Gt[e];return void 0===t?Gt["default"]:t}function yt(){return qt}function _t(e){qt=e}function bt(){}var Tt=void 0,wt=void 0,Et=void 0,St=void 0,Ct=void 0,Pt=void 0,At=void 0,It=void 0,xt=void 0,Ot=void 0,Mt=void 0,kt=void 0,Rt=void 0,Dt=void 0,Lt=void 0,Nt=void 0,jt=void 0,Ft=void 0,Ut=void 0,Bt=void 0,Vt=void 0,Ht=void 0,Gt=void 0,qt=void 0;return Tt={setBufferOccupancyABREnabled:t,getBufferOccupancyABREnabled:n,setBandwidthSafetyFactor:i,getBandwidthSafetyFactor:o,setAbandonLoadTimeout:a,getAbandonLoadTimeout:s,setLastBitrateCachingInfo:H,getLastBitrateCachingInfo:G,setLastMediaSettingsCachingInfo:q,getLastMediaSettingsCachingInfo:W,setStableBufferTime:l,getStableBufferTime:M,setBufferTimeAtTopQuality:k,getBufferTimeAtTopQuality:R,setBufferTimeAtTopQualityLongForm:D,getBufferTimeAtTopQualityLongForm:L,setLongFormContentDurationThreshold:N,getLongFormContentDurationThreshold:j,setRichBufferThreshold:F,getRichBufferThreshold:U,setBufferToKeep:B,getBufferToKeep:V,setBufferPruningInterval:z,getBufferPruningInterval:Y,setFragmentRetryAttempts:$,getFragmentRetryAttempts:X,setRetryAttemptsForType:K,getRetryAttemptsForType:Q,setFragmentRetryInterval:J,getFragmentRetryInterval:et,setRetryIntervalForType:Z,getRetryIntervalForType:tt,setWallclockTimeUpdateInterval:nt,getWallclockTimeUpdateInterval:it,setScheduleWhilePaused:rt,getScheduleWhilePaused:ot,getUseSuggestedPresentationDelay:ht,setUseSuggestedPresentationDelay:ft,setLiveDelayFragmentCount:at,getLiveDelayFragmentCount:ut,getLiveDelay:lt,setLiveDelay:st,setUseManifestDateHeaderTimeSource:ct,getUseManifestDateHeaderTimeSource:dt,setUTCTimingSources:pt,getUTCTimingSources:gt,setXHRWithCredentialsForType:mt,getXHRWithCredentialsForType:vt,setFastSwitchEnabled:_t,getFastSwitchEnabled:yt,reset:bt},e(),Tt}Object.defineProperty(n,"__esModule",{value:!0});var a=e(10),s=i(a),u=e(180),l={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},c=4,d=36e4,f=36e4,h=.9,p=1e4,g=30,m=30,v=12,y=20,_=30,b=60,T=600,w=20,E=3,S=1e3,C=3,P=500,A=1,I=500,x=50,O=!1;o.__dashjs_factory_name="MediaPlayerModel";var M=s["default"].getSingletonFactory(o);M.DEFAULT_UTC_TIMING_SOURCE=l,n["default"]=M,t.exports=n["default"]},{10:10,180:180}],103:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){W={}}function t(e){e&&e.adapter&&(q=e.adapter)}function n(){H.trigger(I["default"].METRICS_CHANGED)}function i(e){H.trigger(I["default"].METRIC_CHANGED,{mediaType:e}),n()}function r(e,t,n){H.trigger(I["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:n}),i(e)}function o(e,t,n){H.trigger(I["default"].METRIC_ADDED,{mediaType:e,metric:t,value:n}),i(e)}function s(e){delete W[e],i(e)}function c(){W={},n()}function f(e){return W.hasOwnProperty(e)?W[e]:null}function p(e){var t;return W.hasOwnProperty(e)?t=W[e]:(t=new a["default"],W[e]=t),t}function m(e,t,n,i,r,a){var s=new u["default"];return s.tcpid=t,s.dest=n,s.topen=i,s.tclose=r,s.tconnect=a,p(e).TcpList.push(s),o(e,q.metricsList.TCP_CONNECTION,s),s}function y(e,t,n,i){var r=new l.HTTPRequestTrace;return r.s=t,r.d=n,r.b=i,e.trace.push(r),e.interval||(e.interval=0),e.interval+=n,r}function T(e,t,n,i,r,a,s,u,c,d,f,h,g,m){var v=new l.HTTPRequest;return r&&r!==i&&(T(e,null,n,i,null,null,s,u,null,null,null,h,null,null),v.actualurl=r),v.tcpid=t,v.type=n,v.url=i,v.range=s,v.trequest=u,v.tresponse=c,v.responsecode=f,v._tfinish=d,v._stream=e,v._mediaduration=h,v._responseHeaders=g,v._serviceLocation=a,m?m.forEach(function(e){y(v,e.s,e.d,e.b)}):(delete v.interval,delete v.trace),p(e).HttpList.push(v),o(e,q.metricsList.HTTP_REQUEST,v),v}function E(e,t,n,i,r){var a=new d["default"];return a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,p(e).RepSwitchList.push(a),o(e,q.metricsList.TRACK_SWITCH,a),a}function C(e,t,n){var i=new h["default"];return i.t=t,i.level=n,p(e).BufferLevel.push(i),o(e,q.metricsList.BUFFER_LEVEL,i),i}function A(e,t,n){var i=new g["default"];return i.target=n,i.state=t,p(e).BufferState.push(i),o(e,q.metricsList.BUFFER_STATE,i),i}function x(e,t,n,i){var r=new v["default"];return r.time=t,r.range=i,r.manifestInfo=n,p(e).DVRInfo.push(r),o(e,q.metricsList.DVR_INFO,r),r}function O(e,t){var n=new _["default"],i=p(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,i.length>0&&i[i.length-1]==n?i[i.length-1]:(i.push(n),o(e,q.metricsList.DROPPED_FRAMES,n),n)}function M(e,t,n,i,r,a,s,u,l){var c=new w["default"];return c.mediaType=e,c.t=t,c.type=n,c.startTime=i,c.availabilityStartTime=r,c.duration=a,c.quality=s,c.range=u,c.state=l,p(e).SchedulingInfo.push(c),o(e,q.metricsList.SCHEDULING_INFO,c),c}function R(e,t,n){var i=new P["default"];i.loadingRequests=t,i.executedRequests=n,p(e).RequestsQueue=i,o(e,q.metricsList.REQUESTS_QUEUE,i)}function D(e,t,n,i,r,a,s,u,l,c){var d=new b.ManifestUpdate,f=p("stream");return d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=i,d.availabilityStartTime=r,d.presentationStartTime=a,d.clientTimeOffset=s,d.currentTime=u,d.buffered=l,d.latency=c,f.ManifestUpdate.push(d),o(e,q.metricsList.MANIFEST_UPDATE,d),d}function L(e,t){if(e){for(var n in t)e[n]=t[n];r(e.mediaType,q.metricsList.MANIFEST_UPDATE,e)}}function N(e,t,n,i,o){if(e){var a=new b.ManifestUpdateStreamInfo;return a.id=t,a.index=n,a.start=i,a.duration=o,e.streamInfo.push(a),r(e.mediaType,q.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),a}return null}function j(e,t,n,i,o,a,s,u){if(e){var l=new b.ManifestUpdateTrackInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=o,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=a,e.trackInfo.push(l),r(e.mediaType,q.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function F(e){var t="stream";return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,p(t).PlayList.push(e),o(t,q.metricsList.PLAY_LIST,e),e}function U(e){var t="stream";return p(t).DVBErrors.push(e),o(t,q.metricsList.DVB_ERRORS,e),e}function B(e,t){var n=new k["default"];return n._s=t,p(e).BolaState=[n],o(e,"BolaState",n),n}var V=this.context,H=S["default"](V).getInstance(),G=void 0,q=void 0,W=void 0;return G={metricsChanged:n,metricChanged:i,metricUpdated:r,metricAdded:o,clearCurrentMetricsForType:s,clearAllCurrentMetrics:c,getReadOnlyMetricsFor:f,getMetricsFor:p,addTcpConnection:m,addHttpRequest:T,addRepresentationSwitch:E,addBufferLevel:C,addBufferState:A,addDVRInfo:x,addDroppedFrames:O,addSchedulingInfo:M,addRequestsQueue:R,addManifestUpdate:D,updateManifestUpdateInfo:L,addManifestUpdateStreamInfo:N,addManifestUpdateRepresentationInfo:j,addPlayList:F,addDVBErrors:U,updateBolaState:B,setConfig:t},e(),G}Object.defineProperty(n,"__esModule",{value:!0});var o=e(169),a=i(o),s=e(186),u=i(s),l=e(180),c=e(183),d=i(c),f=e(176),h=i(f),p=e(177),g=i(p),m=e(178),v=i(m),y=e(179),_=i(y),b=e(181),T=e(185),w=i(T),E=e(9),S=i(E),C=e(184),P=i(C),A=e(13),I=i(A),x=e(10),O=i(x),M=e(175),k=i(M);r.__dashjs_factory_name="MetricsModel",n["default"]=O["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,13:13,169:169,175:175,176:176,177:177,178:178,179:179,180:180,181:181,183:183,184:184,185:185,186:186,9:9}],104:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){s=new a["default"],u=[],l=!1}function t(){return s}function n(){return u}function i(){return l}function r(e){function t(e,t,n,i){var r=i[0].split(/[=]/);return i.push({key:r[0],value:r[1]}),i.shift(),i}function n(e,t,n){return t>0&&(d&&0===u.length?u=n[t].split(/[&]/):f&&(r=n[t].split(/[&]/))),n}if(!e)return null;var i,r=[],o=new RegExp(/[?]/),a=new RegExp(/[#]/),c=new RegExp(/^(https:)?\/\//i),d=o.test(e),f=a.test(e);return l=c.test(e),i=e.split(/[?#]/).map(n),u.length>0&&(u=u.reduce(t,null)),r.length>0&&(r=r.reduce(t,null),r.forEach(function(e){s[e.key]=e.value})),e}var o=void 0,s=void 0,u=void 0,l=void 0;return o={initialize:e,parseURI:r,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(174),a=i(o),s=e(10),u=i(s);r.__dashjs_factory_name="URIQueryAndFragmentModel",n["default"]=u["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,174:174}],105:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){w=[]}function t(){_.playbackRate=E||1,_.removeEventListener("canplay",t)}function n(e){_&&(_.readyState<=2&&e>0?_.addEventListener("canplay",t):_.playbackRate=e)}function i(e){if(_.currentTime!=e)try{_.currentTime=e}catch(t){0===_.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){_.currentTime=e},400)}}function r(){return _}function o(e){_=e,_.preload="auto"}function a(e){e?_.src=e:(_.removeAttribute("src"),_.load())}function s(){return _.src}function u(){return T}function l(e){T=e}function c(){return b}function d(e){b=e,b.style.position="absolute",b.style.display="flex",b.style.overflow="hidden",b.style.pointerEvents="none",b.style.top=0,b.style.left=0}function f(e,t){m(e,t)}function h(){return w.length>0}function p(e){var t=void 0;null===e||_.seeking||-1!==w.indexOf(e)||(w.push(e),1===w.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),E=_.playbackRate,n(0),_.dispatchEvent(t)))}function g(e){var t=w.indexOf(e),i=void 0;null!==e&&(-1!==t&&w.splice(t,1),h()===!1&&0===_.playbackRate&&(n(E||1),_.paused||(i=document.createEvent("Event"),i.initEvent("playing",!0,!1),_.dispatchEvent(i))))}function m(e,t){t?p(e):g(e)}function v(){var e="webkitDroppedFrameCount"in _&&"webkitDecodedFrameCount"in _,t="getVideoPlaybackQuality"in _,n=null;return t?n=_.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:_.webkitDroppedFrameCount,totalVideoFrames:_.webkitDroppedFrameCount+_.webkitDecodedFrameCount,creationTime:new Date}),n}var y=void 0,_=void 0,b=void 0,T=void 0,w=void 0,E=void 0;return y={initialize:e,setCurrentTime:i,setStallState:f,getElement:r,setElement:o,setSource:a,getSource:s,getVideoContainer:u,setVideoContainer:l,getTTMLRenderingDiv:c,setTTMLRenderingDiv:d,getPlaybackQuality:v}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="VideoModel",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],106:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e(1),s=i(a),u=function(){function e(){r(this,e)}return o(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"===i.schemeIdUri.toLowerCase()&&"cenc"===i.value.toLowerCase()&&(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,i>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var i=e.parsePSSHList(n);return i.hasOwnProperty(t.uuid.toLowerCase())?i[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?s["default"].decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),n=!1,i={},r=0;!n;){var o,a,s,u,l,c=r;if(r>=t.buffer.byteLength)break;if(o=t.getUint32(r),a=r+o,r+=4,1886614376===t.getUint32(r))if(r+=4,s=t.getUint8(r),0===s||1===s){r++,r+=3,u="";var d,f;for(d=0;4>d;d++)f=t.getUint8(r+d).toString(16),u+=1===f.length?"0"+f:f;for(r+=4,u+="-",d=0;2>d;d++)f=t.getUint8(r+d).toString(16),u+=1===f.length?"0"+f:f;for(r+=2,u+="-",d=0;2>d;d++)f=t.getUint8(r+d).toString(16),u+=1===f.length?"0"+f:f;for(r+=2,u+="-",d=0;2>d;d++)f=t.getUint8(r+d).toString(16),u+=1===f.length?"0"+f:f;for(r+=2,u+="-",d=0;6>d;d++)f=t.getUint8(r+d).toString(16),u+=1===f.length?"0"+f:f;r+=6,u=u.toLowerCase(),l=t.getUint32(r),r+=4,i[u]=t.buffer.slice(c,a),r=a}else r=a;else r=a}return i}}]),e}();n["default"]=u,t.exports=n["default"]},{1:1}],107:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var n=null,i=u["default"](r).getInstance();i.setConfig({log:e.log}),i.initialize();var o=t(e);return!n&&o&&(n=a["default"](r).create({protectionModel:o,protectionKeyController:i,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),n}function t(e){var t=e.log,i=e.eventBus,o=e.videoModel.getElement();return void 0!==o.onencrypted&&void 0!==o.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),f["default"](r).create({log:t,eventBus:i})):n(o,b)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),p["default"](r).create({log:t,eventBus:i,api:n(o,b)})):n(o,_)?(t("EME detected on this user agent! (ProtectionModel_01b)"),m["default"](r).create({log:t,eventBus:i,api:n(o,_)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}var i=void 0,r=this.context;return i={createProtectionSystem:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(109),a=i(o),s=e(110),u=i(s),l=e(108),c=i(l),d=e(115),f=i(d),h=e(116),p=i(h),g=e(114),m=i(g),v=e(10),y=i(v),_=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],b=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];r.__dashjs_factory_name="Protection";var T=y["default"].getClassFactory(r);T.events=c["default"],n["default"]=T,t.exports=n["default"]},{10:10,108:108,109:109,110:110,114:114,115:115,116:116}],108:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(14),u=i(s),l=function(e){function t(){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{14:14}],109:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){x=E.getKeySystems(),O=[],D=!1,L="temporary",N="",u["default"].extend(m["default"].events)}function n(e,t,n){if(!D){var i;t||n||(i=C.getStreamsInfo(e)[0]),M=t||(i?C.getMediaInfoForType(e,i,"audio"):null),k=n||(i?C.getMediaInfoForType(e,i,"video"):null);var r=k?k:M,o=E.getSupportedKeySystemsFromContentProtection(r.contentProtection);o&&o.length>0&&_(o,!0),D=!0}}function i(e){var t=a["default"].getPSSHForKeySystem(j,e);if(t){for(var n=S.getAllInitData(),i=0;i<n.length;i++)if(E.initDataEquals(t,n[i]))return void A("DRM: Ignoring initData because we have already seen it!");try{S.createKeySession(t,L)}catch(r){P.trigger(u["default"].KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+r.message})}}else P.trigger(u["default"].KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+j.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function r(e){S.loadKeySession(e)}function o(e){S.removeKeySession(e)}function s(e){S.closeKeySession(e)}function l(e){S.setServerCertificate(e)}function d(e){e?(S.setMediaElement(e),P.on(u["default"].NEED_KEY,w,this),P.on(u["default"].INTERNAL_KEY_MESSAGE,T,this)):null===e&&(S.setMediaElement(e),P.off(u["default"].NEED_KEY,w,this),P.off(u["default"].INTERNAL_KEY_MESSAGE,T,this))}function h(e){L=e}function p(e){N=e}function g(e){R=e}function v(){d(null),j=void 0,S&&(S.reset(),S=null)}function y(e){var t=null,n=e.systemString;return R&&(t=n in R?R[n]:null),t}function _(e,t){var n=this,r=[],o=[];k&&o.push(new c["default"](k.codec,N)),M&&r.push(new c["default"](M.codec,N));var a,s=new f["default"](r,o,"optional","temporary"===L?"optional":"required",[L]),l=[];if(j){for(a=0;a<e.length;a++)if(j===e[a].ks){var d=function(){l.push({ks:e[a].ks,configs:[s]});var r=function o(r){P.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,o,n),r.error?t||P.trigger(u["default"].KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+r.error}):(A("DRM: KeySystem Access Granted"),P.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:r.data}),i(e[a].initData))};return P.on(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,r,n),S.requestKeySystemAccess(l),"break"}();if("break"===d)break}}else if(void 0===j){j=null,O.push(e);for(var h=0;h<e.length;h++)l.push({ks:e[h].ks,configs:[s]});var p,g=function v(e){P.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,v,n),e.error?(j=void 0,P.off(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,m,n),t||P.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+e.error})):(p=e.data,A("DRM: KeySystem Access Granted ("+p.keySystem.systemString+")!  Selecting key system..."),S.selectKeySystem(p))},m=function y(e){if(P.off(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,y,n),P.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,g,n),e.error)j=void 0,t||P.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+e.error});else{j=S.getKeySystem(),P.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:p});for(var r=0;r<O.length;r++)for(a=0;a<O[r].length;a++)if(j===O[r][a].ks){i(O[r][a].initData);break}}};P.on(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,m,n),P.on(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,g,n),S.requestKeySystemAccess(l)}else O.push(e)}function b(e,t){P.trigger(u["default"].LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function T(e){if(A("DRM: onKeyMessage"),e.error)return void A(e.error);var t=e.data;P.trigger(u["default"].KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",i=t.message,r=t.sessionToken,o=y(j),s=j.systemString,l=E.getLicenseServer(j,o,n),c={sessionToken:r,messageType:n};if(!l)return A("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+r.getSessionID()),void b(c);if(E.isClearKey(j)){var d=E.processClearKeyLicenseRequest(o,i);if(d)return A("DRM: ClearKey license request handled by application!"),b(c),void S.updateKeySession(r,d)}var f=new XMLHttpRequest,h=null;if(o&&o.serverURL){var p=o.serverURL;"string"==typeof p&&""!==p?h=p:"object"==typeof p&&p.hasOwnProperty(n)&&(h=p[n])}else o&&o.laURL&&""!==o.laURL?h=o.laURL:(h=j.getLicenseServerURLFromInitData(a["default"].getPSSHData(r.initData)),h||(h=e.data.laURL));if(h=l.getServerURLFromMessage(h,i,n),!h)return void b(c,"DRM: No license server URL specified!");f.open(l.getHTTPMethod(n),h,!0),f.responseType=l.getResponseType(s,n),f.onload=function(){200==this.status?(b(c),S.updateKeySession(r,l.getLicenseMessage(this.response,s,n))):b(c,"DRM: "+s+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?l.getErrorResponse(this.response,s,n):"NONE"))
},f.onabort=function(){b(c,"DRM: "+s+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},f.onerror=function(){b(c,"DRM: "+s+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var g=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(f.withCredentials=!0),f.setRequestHeader(t,e[t])};o&&g(o.httpRequestHeaders),g(j.getRequestHeadersFromMessage(i)),o&&o.withCredentials&&(f.withCredentials=!0),f.send(j.getLicenseRequestFromMessage(i))}function w(e){if(A("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void A("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),A("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var n=E.getSupportedKeySystems(t,R);return 0===n.length?void A("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void _(n,!1)}var E=e.protectionKeyController,S=e.protectionModel,C=e.adapter,P=e.eventBus,A=e.log,I=void 0,x=void 0,O=void 0,M=void 0,k=void 0,R=void 0,D=void 0,L=void 0,N=void 0,j=void 0;return I={initialize:n,createKeySession:i,loadKeySession:r,removeKeySession:o,closeKeySession:s,setServerCertificate:l,setMediaElement:d,setSessionType:h,setRobustnessLevel:p,setProtectionData:g,reset:v},t(),I}Object.defineProperty(n,"__esModule",{value:!0});var o=e(106),a=i(o),s=e(13),u=i(s),l=e(127),c=i(l),d=e(126),f=i(d),h=e(10),p=i(h),g=e(107),m=i(g);r.__dashjs_factory_name="ProtectionController",n["default"]=p["default"].getClassFactory(r),t.exports=n["default"]},{10:10,106:106,107:107,126:126,127:127,13:13}],110:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){e&&e.log&&(_=e.log)}function t(){T=[];var e;e=f["default"](g).getInstance(),T.push(e),e=c["default"](g).getInstance(),T.push(e),e=u["default"](g).getInstance(),T.push(e),w=e}function n(){return T}function i(e){for(var t=0;t<T.length;t++)if(T[t].systemString===e)return T[t];return null}function r(e){return e===w}function o(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0}return!1}function s(e){var t,n,i,r,o=[];if(e)for(i=0;i<T.length;++i)for(n=T[i],r=0;r<e.length;++r)if(t=e[r],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var a=n.getInitData(t);a&&o.push({ks:T[i],initData:a})}return o}function l(e,t){var n,i=[],r=a["default"].parsePSSHList(e);for(n=0;n<T.length;++n){var o=T[n].systemString,s=t?o in t:!0;T[n].uuid in r&&s&&i.push({ks:T[n],initData:r[T[n].uuid]})}return i}function d(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var i=null;return t&&t.hasOwnProperty("drmtoday")?i=p["default"](g).getInstance():"com.widevine.alpha"===e.systemString?i=y["default"](g).getInstance():"com.microsoft.playready"===e.systemString?i=m["default"](g).getInstance():"org.w3.clearkey"===e.systemString&&(i=b["default"](g).getInstance()),i}function h(e,t){try{return w.getClearKeysFromProtectionData(e,t)}catch(n){return _("Failed to retrieve clearkeys from ProtectionData"),null}}var g=this.context,v=void 0,_=void 0,T=void 0,w=void 0;return v={initialize:t,isClearKey:r,initDataEquals:o,getKeySystems:n,getKeySystemBySystemString:i,getSupportedKeySystemsFromContentProtection:s,getSupportedKeySystems:l,getLicenseServer:d,processClearKeyLicenseRequest:h,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(106),a=i(o),s=e(111),u=i(s),l=e(113),c=i(l),d=e(112),f=i(d),h=e(118),p=i(h),g=e(119),m=i(g),v=e(120),y=i(v),_=e(117),b=i(_),T=e(10),w=i(T);r.__dashjs_factory_name="ProtectionKeyController",n["default"]=w["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,106:106,111:111,112:112,113:113,117:117,118:118,119:119,120:120}],111:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],o=0;o<i.kids.length;o++){var s=i.kids[o],l=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");r.push(new a["default"](s,l))}n=new u["default"](r)}return n}function t(e){return c["default"].parseInitDataFromContentProtection(e)}function n(){return null}function i(e){return new Uint8Array(e)}function r(){return null}var o=void 0;return o={uuid:h,schemeIdURI:g,systemString:p,getInitData:t,getRequestHeadersFromMessage:n,getLicenseRequestFromMessage:i,getLicenseServerURLFromInitData:r,getClearKeysFromProtectionData:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(124),a=i(o),s=e(121),u=i(s),l=e(106),c=i(l),d=e(10),f=i(d),h="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",p="org.w3.clearkey",g="urn:uuid:"+h;r.__dashjs_factory_name="KeySystemClearKey",n["default"]=f["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,106:106,121:121,124:124}],112:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var t,n,i={},r=new DOMParser,o="utf16"===s?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o),n=r.parseFromString(t,"application/xml");for(var a=n.getElementsByTagName("name"),u=n.getElementsByTagName("value"),l=0;l<a.length;l++)i[a[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i}function t(e){var t,n,i=null,r=new DOMParser,o="utf16"===s?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,o),n=r.parseFromString(t,"application/xml"),n.getElementsByTagName("Challenge")[0]){var a=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;a&&(i=f["default"].decode(a))}return i}function n(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,o=0;n>o;o++){var a=t.getUint16(i,!0);i+=2;var s=t.getUint16(i,!0);if(i+=2,1===a){var u=e.slice(i,i+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=r.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var f=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else i+=s}return null}function i(e){var t,n,i,r,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,c=null;if("pssh"in e)return a["default"].parseInitDataFromContentProtection(e);if("pro"in e)c=f["default"].decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;c=f["default"].decodeArray(e.prheader.__text)}return t=c.length,n=4+s.length+u.length+4+t,i=new ArrayBuffer(n),r=new Uint8Array(i),o=new DataView(i),o.setUint32(l,n),l+=4,r.set(s,l),l+=s.length,r.set(u,l),l+=u.length,o.setUint32(l,t),l+=4,r.set(c,l),l+=t,r.buffer}function r(e){if("utf8"!==e&&"utf16"!==e)throw new u["default"]("Illegal PlayReady message format! -- "+e);s=e}var o=void 0,s="utf16";return o={uuid:h,schemeIdURI:g,systemString:p,getInitData:i,getRequestHeadersFromMessage:e,getLicenseRequestFromMessage:t,getLicenseServerURLFromInitData:n,setPlayReadyMessageFormat:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(106),a=i(o),s=e(163),u=i(s),l=e(10),c=i(l),d=e(1),f=i(d),h="9a04f079-9840-4286-ab92-e65be0885f95",p="com.microsoft.playready",g="urn:uuid:"+h;r.__dashjs_factory_name="KeySystemPlayReady",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{1:1,10:10,106:106,163:163}],113:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return a["default"].parseInitDataFromContentProtection(e)}function t(){return null}function n(e){return new Uint8Array(e)}function i(){return null}var r=void 0;return r={uuid:l,schemeIdURI:d,systemString:c,getInitData:e,getRequestHeadersFromMessage:t,getLicenseRequestFromMessage:n,getLicenseServerURLFromInitData:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(106),a=i(o),s=e(10),u=i(s),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",c="com.widevine.alpha",d="urn:uuid:"+l;r.__dashjs_factory_name="KeySystemWidevine",n["default"]=u["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,106:106}],114:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){O=null,M=null,D=[],L=[],k=a["default"](C).getInstance(),R=b["default"](C).getInstance(),j=w()}function n(){O&&S();for(var e=0;e<L.length;e++)g(L[e]);P.trigger(y["default"].TEARDOWN_COMPLETE)}function i(){return M}function r(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);for(var t=0;t<L.length;t++)e.push(L[t].initData);return e}function o(e){var t=O;t||(t=document.createElement("video"));for(var n=!1,i=0;i<e.length;i++)for(var r=e[i].ks.systemString,o=e[i].configs,a=null,s=null,u=0;u<o.length;u++){var l=o[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var c=0;c<l.length;c++)""!==t.canPlayType(l[c].contentType,r)&&s.push(l[c])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){n=!0;var d=new p["default"](a,s),f=k.getKeySystemBySystemString(r);P.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](f,d)});break}}n||P.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){M=e.keySystem,P.trigger(y["default"].INTERNAL_KEY_SYSTEM_SELECTED)}function l(e){O!==e&&(O&&S(),O=e,O&&(O.addEventListener(I.keyerror,j),O.addEventListener(I.needkey,j),O.addEventListener(I.keymessage,j),O.addEventListener(I.keyadded,j),P.trigger(y["default"].VIDEO_ELEMENT_SELECTED)))}function d(e){if(!M)throw new Error("Can not create sessions until you have selected a key system");if(N||0===L.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return 0/0},getSessionType:function(){return"temporary"}};return D.push(t),O[I.generateKeyRequest](M.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function h(e,t){var n=e.sessionID;if(k.isClearKey(M))for(var i=0;i<t.keyPairs.length;i++)O[I.addKey](M.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else O[I.addKey](M.systemString,new Uint8Array(t),e.initData,n)}function g(e){O[I.cancelKeyRequest](M.systemString,e.sessionID)}function v(){}function _(){}function T(){}function w(){return{handleEvent:function(e){var t=null;switch(e.type){case I.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;P.trigger(y["default"].NEED_KEY,{key:new u["default"](n,"cenc")});break;case I.keyerror:if(t=E(L,e.sessionId),t||(t=E(D,e.sessionId)),t){var i="";switch(e.errorCode.code){case 1:i+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:i+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:i+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:i+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:i+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:i+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}i+="  System Code = "+e.systemCode,P.trigger(y["default"].KEY_ERROR,{data:new c["default"](t,i)})}else A("No session token found for key error");break;case I.keyadded:t=E(L,e.sessionId),t||(t=E(D,e.sessionId)),t?(A("DRM: Key added."),P.trigger(y["default"].KEY_ADDED,{data:t})):A("No session token found for key added");break;case I.keymessage:if(N=null!==e.sessionId&&void 0!==e.sessionId,N?(t=E(L,e.sessionId),!t&&D.length>0&&(t=D.shift(),L.push(t),t.sessionID=e.sessionId)):D.length>0&&(t=D.shift(),L.push(t),0!==D.length&&R.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=r,P.trigger(y["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](t,r,e.defaultURL)})}else A("No session token found for key message")}}}}function E(e,t){if(t&&e){for(var n=e.length,i=0;n>i;i++)if(e[i].sessionID==t)return e[i];return null}return null}function S(){O.removeEventListener(I.keyerror,j),O.removeEventListener(I.needkey,j),O.removeEventListener(I.keymessage,j),O.removeEventListener(I.keyadded,j)}var C=this.context,P=e.eventBus,A=e.log,I=e.api,x=void 0,O=void 0,M=void 0,k=void 0,R=void 0,D=void 0,L=void 0,N=void 0,j=void 0;return x={getAllInitData:r,requestKeySystemAccess:o,getKeySystem:i,selectKeySystem:s,setMediaElement:l,createKeySession:d,updateKeySession:h,closeKeySession:g,setServerCertificate:v,loadKeySession:_,removeKeySession:T,reset:n},t(),x}Object.defineProperty(n,"__esModule",{value:!0});var o=e(110),a=i(o),s=e(128),u=i(s),l=e(122),c=i(l),d=e(123),f=i(d),h=e(126),p=i(h),g=e(125),m=i(g),v=e(13),y=i(v),_=e(152),b=i(_),T=e(10),w=i(T);r.__dashjs_factory_name="ProtectionModel_01b",n["default"]=w["default"].getClassFactory(r),t.exports=n["default"]},{10:10,110:110,122:122,123:123,125:125,126:126,128:128,13:13,152:152}],115:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){P=null,A=null,I=null,x=[],M=a["default"](k).getInstance(),O=w()}function n(){var e,t=x.length;if(0!==t)for(var n=function(e){E(e),0===x.length&&(A?(A.removeEventListener("encrypted",O),A.setMediaKeys(null).then(function(){R.trigger(m["default"].TEARDOWN_COMPLETE)})):R.trigger(m["default"].TEARDOWN_COMPLETE))},i=0;t>i;i++)e=x[i],function(t){e.session.closed.then(function(){n(t)}),T(e)["catch"](function(){n(t)})}(e);else R.trigger(m["default"].TEARDOWN_COMPLETE)}function i(){return P}function r(){for(var e=[],t=0;t<x.length;t++)e.push(x[t].initData);return e}function o(e){b(e,0)}function s(e){e.mksa.createMediaKeys().then(function(t){P=e.keySystem,I=t,A&&A.setMediaKeys(I),R.trigger(m["default"].INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){R.trigger(m["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function l(e){A!==e&&(A&&(A.removeEventListener("encrypted",O),A.setMediaKeys(null)),A=e,A&&(A.addEventListener("encrypted",O),I&&A.setMediaKeys(I)))}function d(e){if(!P||!I)throw new Error("Can not set server certificate until you have selected a key system");I.setServerCertificate(e).then(function(){D("DRM: License server certificate successfully updated."),R.trigger(m["default"].SERVER_CERTIFICATE_UPDATED)})["catch"](function(e){R.trigger(m["default"].SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function h(e,t){if(!P||!I)throw new Error("Can not create sessions until you have selected a key system");var n=I.createSession(t),i=S(n,e,t);n.generateRequest("cenc",e).then(function(){D("DRM: Session created.  SessionID = "+i.getSessionID()),R.trigger(m["default"].KEY_SESSION_CREATED,{data:i})})["catch"](function(e){E(i),R.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function g(e,t){var n=e.session;M.isClearKey(P)&&(t=t.toJWK()),n.update(t)["catch"](function(t){R.trigger(m["default"].KEY_ERROR,{data:new c["default"](e,"Error sending update() message! "+t.name)})})}function v(e){if(!P||!I)throw new Error("Can not load sessions until you have selected a key system");var t=I.createSession();t.load(e).then(function(n){if(n){var i=S(t);D("DRM: Session created.  SessionID = "+i.getSessionID()),R.trigger(m["default"].KEY_SESSION_CREATED,{data:i})}else R.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})})["catch"](function(t){R.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function y(e){var t=e.session;t.remove().then(function(){D("DRM: Session removed.  SessionID = "+e.getSessionID()),R.trigger(m["default"].KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){R.trigger(m["default"].KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function _(e){T(e)["catch"](function(t){E(e),R.trigger(m["default"].KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function b(e,t){!function(t){var n=e[t].ks,i=e[t].configs;navigator.requestMediaKeySystemAccess(n.systemString,i).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,i=new p["default"](n,t);i.mksa=e,R.trigger(m["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:i})})["catch"](function(){++t<e.length?b(e,t):R.trigger(m["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function w(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;R.trigger(m["default"].NEED_KEY,{key:new u["default"](t,e.initDataType)})}}}}}function E(e){for(var t=0;t<x.length;t++)if(x[t]===e){x.splice(t,1);break}}function S(e,t,n){var i={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":R.trigger(m["default"].KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;R.trigger(m["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",i),e.addEventListener("message",i),e.closed.then(function(){E(i),D("DRM: Session closed.  SessionID = "+i.getSessionID()),R.trigger(m["default"].KEY_SESSION_CLOSED,{data:i.getSessionID()})}),x.push(i),i}var C,P,A,I,x,O,M,k=this.context,R=e.eventBus,D=e.log;return C={getAllInitData:r,requestKeySystemAccess:o,getKeySystem:i,selectKeySystem:s,setMediaElement:l,setServerCertificate:d,createKeySession:h,updateKeySession:g,loadKeySession:v,removeKeySession:y,closeKeySession:_,reset:n},t(),C}Object.defineProperty(n,"__esModule",{value:!0});var o=e(110),a=i(o),s=e(128),u=i(s),l=e(122),c=i(l),d=e(123),f=i(d),h=e(125),p=i(h),g=e(13),m=i(g),v=e(10),y=i(v);r.__dashjs_factory_name="ProtectionModel_21Jan2015",n["default"]=y["default"].getClassFactory(r),t.exports=n["default"]},{10:10,110:110,122:122,123:123,125:125,128:128,13:13}],116:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){x=null,O=null,M=null,k=null,R=[],L=a["default"](S).getInstance(),D=T()}function n(){try{for(var e=0;e<R.length;e++)g(R[e]);x&&x.removeEventListener(A.needkey,D),C.trigger(y["default"].TEARDOWN_COMPLETE)}catch(t){C.trigger(y["default"].TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function i(){return O}function r(){for(var e=[],t=0;t<R.length;t++)e.push(R[t].initData);return e}function o(e){for(var t=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,r=e[n].configs,o=null,a=null,s=0;s<r.length;s++){var u=r[s].audioCapabilities,l=r[s].videoCapabilities;if(u&&0!==u.length){o=[];for(var c=0;c<u.length;c++)window[A.MediaKeys].isTypeSupported(i,u[c].contentType)&&o.push(u[c])}if(l&&0!==l.length){a=[];for(var d=0;d<l.length;d++)window[A.MediaKeys].isTypeSupported(i,l[d].contentType)&&a.push(l[d])}if(!(!o&&!a||o&&0===o.length||a&&0===a.length)){t=!0;var f=new p["default"](o,a),h=L.getKeySystemBySystemString(i);C.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](h,f)});break}}t||C.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){try{M=e.mediaKeys=new window[A.MediaKeys](e.keySystem.systemString),O=e.keySystem,k=e,x&&w(),C.trigger(y["default"].INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){C.trigger(y["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+O.systemString+")! Could not create MediaKeys -- TODO"})}}function l(e){x!==e&&(x&&x.removeEventListener(A.needkey,D),x=e,x&&(x.addEventListener(A.needkey,D),M&&w()))}function d(e){if(!O||!M||!k)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==k.ksConfiguration.videoCapabilities&&k.ksConfiguration.videoCapabilities.length>0&&(t=k.ksConfiguration.videoCapabilities[0]),null===t&&null!==k.ksConfiguration.audioCapabilities&&k.ksConfiguration.audioCapabilities.length>0&&(t=k.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,i=M.createSession(n,new Uint8Array(e)),r=E(i,e);i.addEventListener(A.error,r),i.addEventListener(A.message,r),i.addEventListener(A.ready,r),i.addEventListener(A.close,r),R.push(r),P("DRM: Session created.  SessionID = "+r.getSessionID()),C.trigger(y["default"].KEY_SESSION_CREATED,{data:r})}function h(e,t){var n=e.session;n.update(new Uint8Array(L.isClearKey(O)?t.toJWK():t))}function g(e){var t=e.session;t.removeEventListener(A.error,e),t.removeEventListener(A.message,e),t.removeEventListener(A.ready,e),t.removeEventListener(A.close,e);for(var n=0;n<R.length;n++)if(R[n]===e){R.splice(n,1);break}t[A.release]()}function v(){}function _(){}function b(){}function T(){return{handleEvent:function(e){switch(e.type){case A.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;C.trigger(y["default"].NEED_KEY,{key:new u["default"](t,"cenc")})}}}}}function w(){var e=null,t=function(){x.removeEventListener("loadedmetadata",e),x[A.setMediaKeys](M),C.trigger(y["default"].VIDEO_ELEMENT_SELECTED)};x.readyState>=1?t():(e=t.bind(this),x.addEventListener("loadedmetadata",e))}function E(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return 0/0},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case A.error:var t="KeyError";C.trigger(y["default"].KEY_ERROR,{data:new c["default"](this,t)});break;case A.message:var n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;C.trigger(y["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](this,n,e.destinationURL)});break;case A.ready:P("DRM: Key added."),C.trigger(y["default"].KEY_ADDED);break;case A.close:P("DRM: Session closed.  SessionID = "+this.getSessionID()),C.trigger(y["default"].KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var S=this.context,C=e.eventBus,P=e.log,A=e.api,I=void 0,x=void 0,O=void 0,M=void 0,k=void 0,R=void 0,D=void 0,L=void 0;return I={getAllInitData:r,requestKeySystemAccess:o,getKeySystem:i,selectKeySystem:s,setMediaElement:l,createKeySession:d,updateKeySession:h,closeKeySession:g,setServerCertificate:v,loadKeySession:_,removeKeySession:b,reset:n},t(),I}Object.defineProperty(n,"__esModule",{value:!0});var o=e(110),a=i(o),s=e(128),u=i(s),l=e(122),c=i(l),d=e(123),f=i(d),h=e(126),p=i(h),g=e(125),m=i(g),v=e(13),y=i(v),_=e(10),b=i(_);r.__dashjs_factory_name="ProtectionModel_3Feb2014",n["default"]=b["default"].getClassFactory(r),t.exports=n["default"]},{10:10,110:110,122:122,123:123,125:125,126:126,128:128,13:13}],117:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var i=0;i<n.kids.length;i++)e+=n.kids[i]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function n(){return"json"}function i(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],r=i.kid.replace(/=/g,""),o=i.k.replace(/=/g,"");t.push(new a["default"](r,o))}return new u["default"](t)}function r(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:i,getErrorResponse:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(124),a=i(o),s=e(121),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="ClearKey",n["default"]=c["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,121:121,124:124}],118:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e}function t(){return"POST"}function n(e){return o[e].responseType}function i(e,t){return o[t].getLicenseMessage(e)}function r(e,t){return o[t].getErrorResponse(e)}var o={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return u["default"].decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}},a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:i,getErrorResponse:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(1),u=i(s);r.__dashjs_factory_name="DRMToday",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{1:1,10:10}],119:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function i(e){return e}function r(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:i,getErrorResponse:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="PlayReady",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],120:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function i(e){return e}function r(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:i,getErrorResponse:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="Widevine",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],121:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){if(i(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return r(e,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;t>e;e++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(i)}this.type&&(n.type=this.type);var r=JSON.stringify(n),o=r.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;o>e;e++)s[e]=r.charCodeAt(e);return a}}]),e}();n["default"]=o,t.exports=n["default"]},{}],122:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t){i(this,o),this.sessionToken=e,this.error=t};n["default"]=r,t.exports=n["default"]},{}],123:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t,n,r){i(this,o),this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r?r:"license-request"};n["default"]=r,t.exports=n["default"]},{}],124:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t){i(this,o),this.keyID=e,this.key=t};n["default"]=r,t.exports=n["default"]},{}],125:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t){i(this,o),this.keySystem=e,this.ksConfiguration=t};n["default"]=r,t.exports=n["default"]},{}],126:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t,n,r,a){i(this,o),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=a};n["default"]=r,t.exports=n["default"]},{}],127:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t){i(this,o),this.contentType=e,this.robustness=t};n["default"]=r,t.exports=n["default"]},{}],128:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t){i(this,o),this.initData=e,this.initDataType=t};n["default"]=r,t.exports=n["default"]},{}],129:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n=t.droppedVideoFrames-r;r=t.droppedVideoFrames;var a=t.totalVideoFrames-o;o=t.totalVideoFrames,i[e]?(i[e].droppedVideoFrames+=n,i[e].totalVideoFrames+=a):i[e]={droppedVideoFrames:n,totalVideoFrames:a}}function t(){return i}function n(e){i=[],r=e.droppedVideoFrames,o=e.totalVideoFrames}var i=[],r=0,o=0;return{push:e,getFrameHistory:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="DroppedFramesHistory";var s=a["default"].getClassFactory(r);n["default"]=s,t.exports=n["default"]},{10:10}],130:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){return h.mediaInfo.streamInfo}function n(){return h.mediaInfo}function i(){return h}function r(){return g}function o(){return h.mediaInfo.streamInfo.manifestInfo}function a(){return p}function s(){return m}function u(){return v}function l(){return y}function c(){return _}function d(){return b}var f=void 0,h=e.streamProcessor.getCurrentRepresentationInfo(),p=e.streamProcessor,g=e.currentValue,m=e.playbackIndex,v=e.switchHistory,y=e.droppedFramesHistory,_=e.currentRequest,b=e.hasRichBuffer;return f={getCurrentValue:r,getManifestInfo:o,getMediaInfo:n,getPlaybackIndex:s,getDroppedFramesHistory:l,getCurrentRequest:c,getSwitchHistory:u,getStreamInfo:t,getStreamProcessor:a,getTrackInfo:i,hasRichBuffer:d}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="RulesContext",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10}],131:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){l={}}function t(e){e&&e.abrRulesCollection&&(l[h]=e.abrRulesCollection)}function n(e,t,n,i,o,a){var s,l,c={},d={},f=e.length,h=f,p=r(t,i),g=function(e){var t,r,o;if(e.value!==u["default"].NO_CHANGE){var s=a(c[e.priority],e.value);s!==c[e.priority]&&(c[e.priority]=s,d[e.priority]=e.reason)}--f||(c[u["default"].WEAK]!==u["default"].NO_CHANGE&&(o=u["default"].WEAK,t=c[u["default"].WEAK],r=d[u["default"].WEAK]),c[u["default"].DEFAULT]!==u["default"].NO_CHANGE&&(o=u["default"].DEFAULT,t=c[u["default"].DEFAULT],r=d[u["default"].DEFAULT]),c[u["default"].STRONG]!==u["default"].NO_CHANGE&&(o=u["default"].STRONG,t=c[u["default"].STRONG],r=d[u["default"].STRONG]),o!=u["default"].STRONG&&o!=u["default"].WEAK&&(o=u["default"].DEFAULT),n(void 0!==t?{value:t,confidence:o,reason:r}:{value:i,confidence:o,reason:{name:"NO_CHANGE"}}))
};for(c[u["default"].STRONG]=u["default"].NO_CHANGE,c[u["default"].WEAK]=u["default"].NO_CHANGE,c[u["default"].DEFAULT]=u["default"].NO_CHANGE,l=0;h>l;l++)s=e[l],s.execute(p,g)}function i(){var e,t,n=l[h],i=(n.getRules(c["default"].QUALITY_SWITCH_RULES)||[]).concat(n.getRules(c["default"].ABANDON_FRAGMENT_RULES)||[]),r=i.length;for(t=0;r>t;t++)e=i[t],"function"==typeof e.reset&&e.reset();l={}}function r(e,t){return a["default"](o).create({streamProcessor:e,currentValue:t})}var o=this.context,s=void 0,l=void 0;return s={initialize:e,setConfig:t,applyRules:n,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(130),a=i(o),s=e(132),u=i(s),l=e(134),c=i(l),d=e(10),f=i(d),h=0;r.__dashjs_factory_name="RulesController";var p=f["default"].getSingletonFactory(r);p.ABR_RULE=h,n["default"]=p,t.exports=n["default"]},{10:10,130:130,132:132,134:134}],132:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=void 0===e?s:e,i=void 0===t?null:t,r={value:n,reason:i};return r}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=-1;r.__dashjs_factory_name="SwitchRequest";var u=a["default"].getClassFactory(r);u.NO_CHANGE=s,n["default"]=u,t.exports=n["default"]},{10:10}],133:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){i[e.oldValue]||(i[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=0>t?1:0,o=n?-t:0,a=n?0:1;if(i[e.oldValue].drops+=n,i[e.oldValue].dropSize+=o,i[e.oldValue].noDrops+=a,r.push({idx:e.oldValue,noDrop:a,drop:n,dropSize:o}),r.length>s){var u=r.shift();i[u.idx].drops-=u.drop,i[u.idx].dropSize-=u.dropSize,i[u.idx].noDrops-=u.noDrop}}function t(){return i}function n(){i=[],r=[]}var i=[],r=[];return{push:e,getSwitchRequests:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=8;r.__dashjs_factory_name="SwitchRequestHistory";var u=a["default"].getClassFactory(r);n["default"]=u,t.exports=n["default"]},{10:10}],134:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){d=[],h=[];var e=w["default"](s).getInstance(),t=S["default"](s).getInstance(),n=b["default"](s).getInstance();n.getBufferOccupancyABREnabled()?(d.push(m["default"](s).create({metricsModel:e,dashMetrics:S["default"](s).getInstance()})),h.push(y["default"](s).create({metricsModel:e,dashMetrics:S["default"](s).getInstance()}))):(d.push(a["default"](s).create({metricsModel:e,dashMetrics:t})),d.push(u["default"](s).create({metricsModel:e})),d.push(p["default"](s).create()),d.push(f["default"](s).create()),h.push(c["default"](s).create()))}function t(e){switch(e){case x:return d;case O:return h;default:return null}}function n(e){return e.filter(function(e){return e.value>I["default"].NO_CHANGE})}function i(e){return 0!==e.length?e.reduce(function(e,t){return e.value<t.value?e:t}):void 0}function r(e){var t=d.map(function(t){return t.getMaxIndex(e)}),r=n(t),o=i(r);return o||I["default"](s).create()}function o(e){var t=h.map(function(t){return t.shouldAbandon(e)}),r=n(t),o=i(r);return o||I["default"](s).create()}var s=this.context,l=void 0,d=void 0,h=void 0;return l={initialize:e,getRules:t,getMaxQuality:r,shouldAbandonFragment:o}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(141),a=i(o),s=e(139),u=i(s),l=e(135),c=i(l),d=e(138),f=i(d),h=e(140),p=i(h),g=e(137),m=i(g),v=e(136),y=i(v),_=e(102),b=i(_),T=e(103),w=i(T),E=e(17),S=i(E),C=e(10),P=i(C),A=e(132),I=i(A),x="qualitySwitchRules",O="abandonFragmentRules";r.__dashjs_factory_name="ABRRulesCollection";var M=P["default"].getSingletonFactory(r);M.QUALITY_SWITCH_RULES=x,M.ABANDON_FRAGMENT_RULES=O,n["default"]=M,t.exports=n["default"]},{10:10,102:102,103:103,132:132,135:135,136:136,137:137,138:138,139:139,140:140,141:141,17:17}],135:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){g={},v={},y=[],_=u["default"](h).getInstance(),b=c["default"](h).getInstance(),T=f["default"](h).getInstance()}function t(e,t){g[e]=g[e]||{},g[e][t]=g[e][t]||{}}function n(e,t){y[e]=y[e]||[],y[e].push(t)}function i(e){var i=e.getMediaInfo(),o=i.type,u=e.getCurrentRequest(),c=a["default"](h).create(a["default"].NO_CHANGE,{name:r.__dashjs_factory_name});if(!isNaN(u.index)){t(o,u.index);var f=_.getStableBufferTime(),m=b.getCurrentBufferLevel(T.getReadOnlyMetricsFor(o));if(m>f)return c;var w=g[o][u.index];if(null===w||null===u.firstByteDate||v.hasOwnProperty(w.id))return c;if(void 0===w.firstByteTime&&(y[o]=[],w.firstByteTime=u.firstByteDate.getTime(),w.segmentDuration=u.duration,w.bytesTotal=u.bytesTotal,w.id=u.index),w.bytesLoaded=u.bytesLoaded,w.elapsedTime=(new Date).getTime()-w.firstByteTime,w.bytesLoaded>0&&w.elapsedTime>0&&n(o,Math.round(8*w.bytesLoaded/w.elapsedTime)),y[o].length>=d&&w.elapsedTime>l&&w.bytesLoaded<w.bytesTotal){var E=y[o].reduce(function(e,t){return e+t},0);if(w.measuredBandwidthInKbps=Math.round(E/y[o].length),w.estimatedTimeOfDownload=+(8*w.bytesTotal/w.measuredBandwidthInKbps/1e3).toFixed(2),w.estimatedTimeOfDownload<w.segmentDuration*s||0===e.getTrackInfo().quality)return c;if(!v.hasOwnProperty(w.id)){var S=e.getStreamProcessor().getABRController(),C=w.bytesTotal-w.bytesLoaded,P=S.getBitrateList(i),A=S.getQualityForBitrate(i,w.measuredBandwidthInKbps*_.getBandwidthSafetyFactor()),I=w.bytesTotal*P[A].bitrate/P[S.getQualityFor(o,i.streamInfo)].bitrate;C>I&&(c.value=A,c.reason.throughput=w.measuredBandwidthInKbps,c.reason.fragmentID=w.id,v[w.id]=w,p("AbandonRequestsRule ( ",o,"frag id",w.id,") is asking to abandon and switch to quality to ",A," measured bandwidth was",w.measuredBandwidthInKbps),delete g[o][w.id])}}else w.bytesLoaded===w.bytesTotal&&delete g[o][w.id]}return c}function o(){e()}var s=1.8,l=500,d=5,h=this.context,p=m["default"](h).getInstance().log,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,T=void 0,w={shouldAbandon:i,reset:o};return e(),w}Object.defineProperty(n,"__esModule",{value:!0});var o=e(132),a=i(o),s=e(102),u=i(s),l=e(17),c=i(l),d=e(103),f=i(d),h=e(10),p=i(h),g=e(8),m=i(g);r.__dashjs_factory_name="AbandonRequestsRule",n["default"]=p["default"].getClassFactory(r),t.exports=n["default"]},{10:10,102:102,103:103,132:132,17:17,8:8}],136:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){y={},_=u["default"](d).getInstance()}function n(e,t,n){y[e]={index:t,quality:n}}function i(e,t,n){var i=y[e];return i?t!==i.index||n<i.quality:!0}function o(e){var t=e.getMediaInfo(),o=t.type,s=m.getReadOnlyMetricsFor(o),u=e.getCurrentRequest(),f=a["default"](d).create(a["default"].NO_CHANGE,{name:r.__dashjs_factory_name});if(0===s.BolaState.length)return h("WARNING: executing BolaAbandonRule before initializing BolaRule"),y[o]=null,f;var v=s.BolaState[0]._s,_=u.index,b=u.quality;if(isNaN(_)||0===b||!i(o,_,b)||!u.firstByteDate)return f;var T=Date.now(),w=T-u.firstByteDate.getTime(),E=u.bytesLoaded,S=u.bytesTotal,C=S-E,P=u.duration,A=g.getCurrentBufferLevel(s)?g.getCurrentBufferLevel(s):0,I=A+v.placeholderBuffer,x=8*E/(.001*w),O=v.bandwidthSafetyFactor*x,M=.001*(u.firstByteDate.getTime()-u.requestStartDate.getTime());.001*c>M&&(M=.001*c);var k=M+8*S/O,R="";p["default"].BOLA_DEBUG&&(R="index="+_+" quality="+b+" bytesLoaded/bytesTotal="+E+"/"+S+" bufferLevel="+A+" timeSince1stByte="+(w/1e3).toFixed(3)+" estThroughput="+(O/1e6).toFixed(3)+" latency="+M.toFixed(3));var D=S*v.bitrates[0]/v.bitrates[b],L=C-M*O/8;if(1>L&&(L=1),l>w||D>=C||A>v.bufferTarget||D>=L||P>=k)return f;var N=I-M;0>N&&(N=0);for(var j=0;b>j+1&&S*v.bitrates[j+1]/v.bitrates[b]<L;)++j;var F=b;if(v.state===p["default"].BOLA_STATE_STARTUP){F=0;for(var U=0;j>=U&&(D=S*v.bitrates[U]/v.bitrates[b],!(8*D/P>O));++U)F=U}else for(var B=(v.Vp*(v.utilities[b]+v.gp)-N)/L,U=0;j>=U;++U){D=S*v.bitrates[U]/v.bitrates[b];var V=(v.Vp*(v.utilities[U]+v.gp)-N)/D;V>B&&(F=U,B=V)}var H=v.rebufferSafetyFactor*x*(A-M)/8;if(F===b&&L>H&&(F=j),F===b)return f;for(;F>0&&(D=S*v.bitrates[F]/v.bitrates[b],!(H>=D));)--F;var G=0/0;if(F>0){var q=v.utilities[F],W=v.utilities[F-1],V=v.bitrates[F],z=v.bitrates[F-1];G=v.Vp*((V*W-z*q)/(V-z)+v.gp)}else{var q=v.utilities[0],W=v.utilities[1],V=v.bitrates[0],z=v.bitrates[1];G=v.Vp*((V*W-z*q)/(V-z)+v.gp),G-=P}return I>G&&(v.placeholderBuffer=G-A,v.placeholderBuffer<0&&(v.placeholderBuffer=0)),v.lastQuality=F,m.updateBolaState(o,v),p["default"].BOLA_DEBUG&&h("BolaDebug "+o+" BolaAbandonRule abandon to "+F+" - "+R),n(o,_,b),f.value=F,f.reason.state=v.state,f.reason.throughput=x,f.reason.bufferLevel=A,f.reason.bytesLoaded=u.bytesLoaded,f.reason.bytesTotal=u.bytesTotal,f.reason.elapsedTimeMs=w,f}function s(){y={}}var l=500,c=200,d=this.context,h=f["default"](d).getInstance().log,g=e.dashMetrics,m=e.metricsModel,v=void 0,y=void 0,_=void 0;return v={shouldAbandon:o,reset:s},t(),v}Object.defineProperty(n,"__esModule",{value:!0});var o=e(132),a=i(o),s=e(102),u=i(s),l=e(10),c=i(l),d=e(8),f=i(d),h=e(137),p=i(h);r.__dashjs_factory_name="BolaAbandonRule",n["default"]=c["default"].getClassFactory(r),t.exports=n["default"]},{10:10,102:102,132:132,137:137,8:8}],137:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){B={},V={},H={},G=[],q=c["default"](D).getInstance(),W=f["default"](D).getInstance(),z=g["default"](D).getInstance(),F.on(_["default"].BUFFER_EMPTY,m,U),F.on(_["default"].PLAYBACK_SEEKING,y,U),F.on(_["default"].PERIOD_SWITCH_STARTED,b,U),F.on(_["default"].MEDIA_FRAGMENT_LOADED,x,U)}function n(e){return e.map(function(e){return Math.log(e)})}function i(e,t,i,r){var o=0/0;if(r?(o=0,r.forEach(function(e,t){e>r[o]&&(o=t)})):(r=n(i),o=r.length-1),0===o)return null;var a=1-r[0]+(r[o]-r[0])/(t/e-1),s=e/(r[0]+a-1);return{utilities:r,gp:a,Vp:s}}function o(e){var t={},n=e.getMediaInfo(),r=e.getStreamProcessor(),o=e.getStreamInfo(),a=e.getTrackInfo(),s=r.isDynamic(),u=o.manifestInfo.duration,l=a.fragmentDuration,c=n.bitrateList.map(function(e){return e.bandwidth}),d=i(P,A,c,null);if(null===d)return t.state=w,t;if(t.state=E,t.bitrates=c,t.utilities=d.utilities,t.Vp=d.Vp,t.gp=d.gp,t.isDynamic=s,t.movieDuration=u,t.fragmentDuration=l,t.bandwidthSafetyFactor=q.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=I,t.bufferTarget=q.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?k:R,C){for(var f="",h=0;h<c.length;++h){var p=d.utilities[h],g=c[h],m=0;if(h>0){var v=d.utilities[h-1],y=c[h-1];m=d.Vp*((v*g-p*y)/(g-y)+d.gp)}var _=d.Vp*(p+d.gp);f+="\n"+h+":"+(1e-6*c[h]).toFixed(3)+"Mbps "+m.toFixed(3)+"/"+_.toFixed(3)}L("BolaDebug "+n.type+" bitrates"+f)}return t}function s(e,t){for(var n=e.bitrates.length,i=0/0,r=0/0,o=0;n>o;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(r)||a>=r)&&(r=a,i=o)}return i}function u(e,t){for(var n=N.getHttpRequests(e),i=[],r=n.length-1;r>=0&&i.length<t;--r){var o=n[r];o.type===h.HTTPRequest.MEDIA_SEGMENT_TYPE&&o._tfinish&&o.tresponse&&o.trace&&i.push(o)}return i}function l(e,t,n){var i=u(e,t);if(0===i.length)return 0;for(var r=0,o="",a=0;a<i.length;++a){var s=.001*(i[a]._tfinish.getTime()-i[a].trequest.getTime()),l=8*i[a].trace.reduce(function(e,t){return e+t.b[0]},0);C&&(o+=" "+(1e-6*l).toFixed(3)+"/"+s.toFixed(3)+"="+(1e-6*l/s).toFixed(3)+"Mbps"),r+=s/l}return C&&L("BolaDebug "+n+" BolaRule recent throughput = "+(i.length/(1e6*r)).toFixed(3)+"Mbps:"+o),i.length/r}function d(e,t){var n=0;return e.bitrates.some(function(e,i){return e>t?!0:(n=i,!1)}),n}function p(e,t){var n=Date.now(),i=B[t],r=H[t],o=0/0;if(B[t]=n,H[t]=!1,!r){var a=u(e,1);a.length>0&&(o=a[0]._tfinish.getTime(),o>n&&(o=n))}var s=0;return s=r||i>o?n-i:n-o,isNaN(s)||0>=s?0:.001*s}function m(){C&&L("BolaDebug BUFFER_EMPTY"),G.forEach(function(e){var t=j.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state===S&&(n.placeholderBuffer=0,j.updateBolaState(e,n))}})}function y(e){C&&L("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),G.forEach(function(e){var t=j.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state!==w&&(n.state=E),j.updateBolaState(e,n)}}),V={},H={}}function b(){}function x(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,n=e.chunk.start;void 0===t||isNaN(n)||(n<=V[t]?H[t]=!0:(H[t]=!1,V[t]=n))}}function O(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var n=a["default"](D).create(a["default"].NO_CHANGE,{name:r.__dashjs_factory_name}),i=e.getMediaInfo(),u=i.type,c=j.getReadOnlyMetricsFor(u);if(0===c.BolaState.length){C&&L("BolaDebug "+u+"\nBolaDebug "+u+" BolaRule for state=- fragmentStart="+z.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var f=o(e);j.updateBolaState(u,f);var h=0;if(f.state!==w){G.push(u);var g=l(c,f.throughputCount,u);if(0===g)return C&&L("BolaDebug "+u+" BolaRule quality unchanged for INITIALIZE"),n;h=d(f,g*f.bandwidthSafetyFactor),f.lastQuality=h,n.value=h,n.reason.state=f.state,n.reason.throughput=g}return C&&L("BolaDebug "+u+" BolaRule quality "+h+" for INITIALIZE"),n}var m=c.BolaState[0]._s;if(m.state===w)return C&&L("BolaDebug "+u+" BolaRule quality 0 for ONE_BITRATE"),n;var v=m.bitrates,y=m.utilities;C&&L("BolaDebug "+u+"\nBolaDebug "+u+" EXECUTE BolaRule for state="+m.state+" fragmentStart="+z.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var _=N.getCurrentBufferLevel(c)?N.getCurrentBufferLevel(c):0,b=l(c,m.throughputCount,u);.1>=_&&(m.placeholderBuffer=0);var T=p(c,u);T>0&&(m.placeholderBuffer+=T),m.placeholderBuffer<0&&(m.placeholderBuffer=0);var P=_+m.placeholderBuffer,A=s(m,P);if(C&&L("BolaDebug "+u+" BolaRule bufferLevel="+_.toFixed(3)+"(+"+m.placeholderBuffer.toFixed(3)+"="+P.toFixed(3)+") recentThroughput="+(1e-6*b).toFixed(3)+" tentativeQuality="+A),m.state===E){var h=d(m,b*m.bandwidthSafetyFactor);if(_>m.fragmentDuration/I){m.state=S;for(var x=0,O=0;h>O;++O){var M=m.Vp*(m.gp+(v[h]*y[O]-v[O]*y[h])/(v[h]-v[O]));M>x&&(x=M)}x>_&&(m.placeholderBuffer=x-_)}return C&&L("BolaDebug "+u+" BolaRule quality "+h+" for STARTUP"),m.lastQuality=h,j.updateBolaState(u,m),n.value=h,n.reason.state=E,n.reason.throughput=b,n}if(A>m.lastQuality){var h=d(m,b);A>h&&(h<m.lastQuality&&(h=m.lastQuality),A=h)}if(b>0)for(var k=I*b*_/m.fragmentDuration;A>0&&v[A]>k;)--A;var R=0,F=m.Vp*(y[A]+m.gp);return R=P-F,R>0&&(R>m.placeholderBuffer?(R-=m.placeholderBuffer,m.placeholderBuffer=0):(m.placeholderBuffer-=R,R=0)),R>0?A===v.length-1?R=0:t.getScheduleController().setTimeToLoadDelay(1e3*R):R=0,m.lastQuality=A,j.updateBolaState(u,m),n.value=A,n.reason.state=m.state,n.reason.throughput=b,n.reason.bufferLevel=_,C&&L("BolaDebug "+u+" BolaRule quality "+A+" delay="+R.toFixed(3)+" for STEADY"),n}function M(){F.off(_["default"].BUFFER_EMPTY,m,U),F.off(_["default"].PLAYBACK_SEEKING,y,U),F.off(_["default"].PERIOD_SWITCH_STARTED,b,U),F.off(_["default"].MEDIA_FRAGMENT_LOADED,x,U),t()}var k=2,R=3,D=this.context,L=T["default"](D).getInstance().log,N=e.dashMetrics,j=e.metricsModel,F=v["default"](D).getInstance(),U=void 0,B=void 0,V=void 0,H=void 0,G=void 0,q=void 0,W=void 0,z=void 0;return U={getMaxIndex:O,reset:M},t(),U}Object.defineProperty(n,"__esModule",{value:!0});var o=e(132),a=i(o),s=e(10),u=i(s),l=e(102),c=i(l),d=e(69),f=i(d),h=e(180),p=e(15),g=i(p),m=e(9),v=i(m),y=e(13),_=i(y),b=e(8),T=i(b),w=0,E=1,S=2,C=!1,P=10,A=30,I=.5;r.__dashjs_factory_name="BolaRule";var x=u["default"].getClassFactory(r);x.BOLA_STATE_ONE_BITRATE=w,x.BOLA_STATE_STARTUP=E,x.BOLA_STATE_STEADY=S,x.BOLA_DEBUG=C,n["default"]=x,t.exports=n["default"]},{10:10,102:102,13:13,132:132,15:15,180:180,69:69,8:8,9:9}],138:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var o=e.getDroppedFramesHistory();if(o){for(var a=o.getFrameHistory(),s=0,l=0,c=u["default"].NO_CHANGE,d=1;d<a.length;d++)if(a[d]&&(s=a[d].droppedVideoFrames,l=a[d].totalVideoFrames,l>r&&s/l>i)){c=d-1,n("DroppedFramesRule, index: "+c+" Dropped Frames: "+s+" Total Frames: "+l);break}return u["default"](t).create(c,{droppedFrames:s})}return u["default"](t).create()}var t=this.context,n=c["default"](t).getInstance().log,i=.15,r=375;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(132),u=i(s),l=e(8),c=i(l);r.__dashjs_factory_name="DroppedFramesRule";var d=a["default"].getClassFactory(r);n["default"]=d,t.exports=n["default"]},{10:10,132:132,8:8}],139:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){g={},v=0,y=1e3,d.on(c["default"].PLAYBACK_SEEKING,r,h)}function n(e){var t=(new Date).getTime(),n=e.getMediaInfo().type,r=f.getReadOnlyMetricsFor(n),o=r.BufferState.length>0?r.BufferState[r.BufferState.length-1]:null,u=m["default"](s).create();return y>t-v||null===o?u:(i(n,o.state),o.state===a["default"].BUFFER_EMPTY&&void 0!==g[n].firstBufferLoadedEvent&&(l("Switch to index 0; buffer is empty."),u.value=0,u.reason="InsufficientBufferRule: Buffer is empty"),v=t,u)}function i(e,t){g[e]=g[e]||{},g[e].state=t,t!==a["default"].BUFFER_LOADED||g[e].firstBufferLoadedEvent||(g[e].firstBufferLoadedEvent=!0)}function r(){g={}}function o(){d.off(c["default"].PLAYBACK_SEEKING,r,h),g={},v=0}var s=this.context,l=p["default"](s).getInstance().log,d=u["default"](s).getInstance(),f=e.metricsModel,h=void 0,g=void 0,v=void 0,y=void 0;return h={getMaxIndex:n,reset:o},t(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(64),a=i(o),s=e(9),u=i(s),l=e(13),c=i(l),d=e(10),f=i(d),h=e(8),p=i(h),g=e(132),m=i(g);r.__dashjs_factory_name="InsufficientBufferRule",n["default"]=f["default"].getClassFactory(r),t.exports=n["default"]},{10:10,13:13,132:132,64:64,8:8,9:9}],140:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){for(var o=e.getSwitchHistory(),a=o.getSwitchRequests(),s=0,u=0,l=0,d=c["default"](t).create(),f=0;f<a.length;f++)if(void 0!==a[f]&&(s+=a[f].drops,u+=a[f].noDrops,l+=a[f].dropSize,s+u>=r&&s/u>i)){d.value=f>0?f-1:0,d.reason={index:d.value,drops:s,noDrops:u,dropSize:l},n("Switch history rule index: "+d.value+" samples: "+(s+u)+" drops: "+s);break}return d}var t=this.context,n=u["default"](t).getInstance().log,i=.075,r=6;return{getMaxIndex:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(8),u=i(s),l=e(132),c=i(l);r.__dashjs_factory_name="SwitchRequest";var d=a["default"].getClassFactory(r);n["default"]=d,t.exports=n["default"]},{10:10,132:132,8:8}],141:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){x=[],O=[],M=c["default"](C).getInstance()}function n(e,t){x[e]=x[e]||[],x[e].push(t)}function i(e,t){return O[e]||(O[e]=[]),O[e].push(t),O[e].length>_?O[e].shift():void 0}function r(e){var t=void 0;return O[e]&&O[e].length>0&&(t=O[e].reduce(function(e,t){return e+t})/O[e].length),t}function o(e,t){var n=Math.min(x[e].length,t?m:y),i=x[e].slice(-1*n,x[e].length);return i.length>1&&i.reduce(function(e,t){return(t>=e*S||e>=t*E)&&n++,t}),n=Math.min(x[e].length,n),x[e].slice(-1*n,x[e].length)}function s(e,t){var n=o(e,t),i=0;if(n.length>0){var r=n.reduce(function(e,t){return e+t},0);i=r/n.length}return x[e].length>=p&&x[e].shift(),i/1e3*M.getBandwidthSafetyFactor()}function l(e,t,n){var i=!1;if(w>e&&(i=!0),!i)switch(n){case"video":i=b>t;break;case"audio":i=T>t}return i}function f(e){var t=e.getMediaInfo(),o=t.type,c=I.getReadOnlyMetricsFor(o),f=e.getStreamProcessor(),h=f.getABRController(),p=f.isDynamic(),g=A.getCurrentHttpRequest(c),m=c.BufferState.length>0?c.BufferState[c.BufferState.length-1]:null,y=e.hasRichBuffer(),_=v["default"](C).create();if(!c||!g||g.type!==d.HTTPRequest.MEDIA_SEGMENT_TYPE||!m||y)return _;var b=void 0,T=void 0;if(g.trace&&g.trace.length){T=g.tresponse.getTime()-g.trequest.getTime()||1,b=g._tfinish.getTime()-g.tresponse.getTime()||1;var w=g.trace.reduce(function(e,t){return e+t.b[0]},0),E=Math.round(8*w/(b/1e3)),S=void 0,M=void 0;l(T,b,o)?x[o]&&O[o]?(S=s(o,p),M=r(o)):(S=E/1e3,M=T):(n(o,E),S=s(o,p),i(o,T),M=r(o,p)),h.setAverageThroughput(o,S),h.getAbandonmentStateFor(o)!==u["default"].ABANDON_LOAD&&(m.state===a["default"].BUFFER_LOADED||p)&&(_.value=h.getQualityForBitrate(t,S,M),f.getScheduleController().setTimeToLoadDelay(0),P("ThroughputRule requesting switch to index: ",_.value,"type: ",o,"Average throughput",Math.round(S),"kbps"),_.reason={throughput:S,latency:M})}return _}function h(){t()}var p=20,m=3,y=4,_=y,b=50,T=5,w=50,E=1.3,S=1.3,C=this.context,P=g["default"](C).getInstance().log,A=e.dashMetrics,I=e.metricsModel,x=void 0,O=void 0,M=void 0,k={getMaxIndex:f,reset:h};return t(),k}Object.defineProperty(n,"__esModule",{value:!0});var o=e(64),a=i(o),s=e(61),u=i(s),l=e(102),c=i(l),d=e(180),f=e(10),h=i(f),p=e(8),g=i(p),m=e(132),v=i(m);r.__dashjs_factory_name="ThroughputRule",n["default"]=h["default"].getClassFactory(r),t.exports=n["default"]},{10:10,102:102,132:132,180:180,61:61,64:64,8:8}],142:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t,n=0;return e&&e.some(function(e,t){return n=t,!i.contains(e.serviceLocation)})&&(t=e[n]),t}var n=void 0,i=e.blacklistController;return n={select:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="BasicSelector",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10}],143:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){var t=[],n=function(e){return t.length&&e.dvb_priority&&-1!==t.indexOf(e.dvb_priority)?!1:!0},i=function(e){return o.contains(e.serviceLocation)?(e.dvb_priority&&t.push(e.dvb_priority),!1):!0};return e.filter(i).filter(n)}function n(e){var t,n,i=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},r=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},o=0,a=[],s=0;return n=e.sort(i).filter(r),n.length?(n.length>1&&(n.forEach(function(e){o+=e.dvb_weight,a.push(o)}),t=Math.floor(Math.random()*(o-1)),a.every(function(e,n){return s=n,e>t?!1:!0})),n[s]):void 0}function i(e){return e&&n(t(e))}var r=void 0,o=e.blacklistController;return r={select:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="DVBSelector",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10}],144:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){c=a["default"](r).getInstance(),d=u["default"](r).getInstance()}function n(e,t,n){var r=o.getCurrentBufferLevel(s.getReadOnlyMetricsFor(t));return r<i(e,t,n)}function i(e,t,n){var i=0/0,r=e.getCurrentRepresentationInfo();if("fragmentedText"===t)i=l.getAllTracksAreDisabled()?0:r.fragmentDuration;else if("audio"===t&&n){var a=o.getCurrentBufferLevel(s.getReadOnlyMetricsFor("video"));i=Math.floor(Math.max(a,r.fragmentDuration))}else{var u=r.mediaInfo.streamInfo,d=e.getABRController();if(d.isPlayingAtTopQuality(u)){var f=u.manifestInfo.duration>=c.getLongFormContentDurationThreshold();i=f?c.getBufferTimeAtTopQualityLongForm():c.getBufferTimeAtTopQuality()}else i=c.getStableBufferTime()}return i}var r=this.context,o=e.dashMetrics,s=e.metricsModel,l=e.textSourceBuffer,c=void 0,d=void 0,f={execute:n,getBufferTarget:i};return t(),f}Object.defineProperty(n,"__esModule",{value:!0});var o=e(102),a=i(o),s=e(69),u=i(s),l=e(10),c=i(l);r.__dashjs_factory_name="BufferLevelRule",n["default"]=c["default"].getClassFactory(r),t.exports=n["default"]},{10:10,102:102,69:69}],145:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e,t){var n=e.getCurrentRepresentationInfo(),a=n.mediaInfo,u=a.type,l=e.getScheduleController(),c=l.getSeekTarget(),d=!isNaN(c),f=e.getBuffer(),h=d?c:r.getIndexHandlerTime(e);if(isNaN(h)||"fragmentedText"===u&&s.getAllTracksAreDisabled())return null;if(d&&l.setSeekTarget(0/0),f){var p=o.getBufferRange(e.getBuffer(),h);null!==p&&(i("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",h," was changed to ",p.end),h=p.end)}var g=void 0;return t?(h=t.startTime+t.duration/2,g=r.getFragmentRequestForTime(e,n,h,{timeThreshold:0,ignoreIsFinished:!0})):(g=r.getFragmentRequestForTime(e,n,h,{keepIdx:!d}),g&&e.getFragmentModel().isFragmentLoaded(g)&&(g=r.getNextFragmentRequest(e,n)),g&&(r.setIndexHandlerTime(e,g.startTime+g.duration),g.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))),g}var n=this.context,i=a["default"](n).getInstance().log,r=e.adapter,o=e.sourceBufferController,s=e.textSourceBuffer,u={execute:t};return u}Object.defineProperty(n,"__esModule",{value:!0});var o=e(8),a=i(o),s=e(10),u=i(s);r.__dashjs_factory_name="NextFragmentRequestRule",n["default"]=u["default"].getClassFactory(r),t.exports=n["default"]},{10:10,8:8}],146:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){h=f["default"](o).create({updateEventName:u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u["default"].FRAGMENT_LOADING_COMPLETED}),g=m["default"](o).create({blacklistController:h}),v=p["default"](o).create({blacklistController:h}),y=g}function t(e){e.selector&&(y=e.selector)}function n(e){y=l.getIsDVB(e)?v:g}function i(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var i=y.select(t);return i?(e.selectedIdx=t.indexOf(i),i):void s.trigger(u["default"].URL_RESOLUTION_FAILED,{error:new Error(_,b)})}function r(){h.reset()}var o=this.context,s=a["default"](o).getInstance(),l=c["default"](o).getInstance(),d=void 0,h=void 0,g=void 0,v=void 0,y=void 0;return d={chooseSelectorFromManifest:n,select:i,reset:r,setConfig:t},e(),d}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(22),c=i(l),d=e(63),f=i(d),h=e(143),p=i(h),g=e(142),m=i(g),v=e(10),y=i(v),_=1,b="Failed to resolve a valid URL";r.__dashjs_factory_name="BaseURLSelector";var T=y["default"].getClassFactory(r);T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=_,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=b,n["default"]=T,t.exports=n["default"]},{10:10,13:13,142:142,143:143,22:22,63:63,9:9}],147:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=c["default"].parseBuffer(e),i=a["default"](n).create();return i.setData(t),i}var t=void 0,n=this.context;return t={parse:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(154),a=i(o),s=e(10),u=i(s),l=e(6),c=i(l);r.__dashjs_factory_name="BoxParser",n["default"]=u["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,154:154,6:6}],148:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){a=!1}function t(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function n(){return a}function i(e){a=e}function r(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var o=void 0,a=void 0;return o={supportsMediaSource:t,supportsEncryptedMedia:n,supportsCodec:r,setEncryptedMediaSupported:i},e(),o}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="Capabilities",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],149:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function i(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end?(this.customTimeRangeArray.splice(t,1),!0):!1}function r(e){return this.customTimeRangeArray[e].start}function o(e){return this.customTimeRangeArray[e].end}var a=[],s=0;return{customTimeRangeArray:a,length:s,add:e,clear:t,remove:n,mergeRanges:i,start:r,end:o}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="CustomTimeRanges",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10}],150:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){if(void 0!==_)return _;_=!1;var t,n="1",i="1";try{"undefined"!=typeof window&&(t=window[e])}catch(r){return v("Warning: DOMStorage access denied: "+r.message),_}if(!t||e!==p&&e!==g)return _;try{t.setItem(n,i),t.removeItem(n),_=!0}catch(r){v("Warning: DOMStorage is supported, but cannot be used: "+r.message)}return _}function t(){e(p)&&d.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){v(n.message)}}})}function n(){b=u["default"](m).getInstance(),t()}function i(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function r(t,n){return e(t)&&b["get"+n+"CachingInfo"]().enabled}function o(e){if(!r(p,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=b.getLastMediaSettingsCachingInfo().ttl||!1,o=n.settings;return i&&(localStorage.removeItem(t),o=null),o}function a(e){var t=0/0;if(r(p,"LastBitrate")){var n=f.replace(/\?/,e),i=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=b.getLastBitrateCachingInfo().ttl||!1,a=parseInt(i.bitrate,10);isNaN(a)||o?o&&localStorage.removeItem(n):(t=a,v("Last saved bitrate for "+e+" was "+a))}return t}function s(e,t){if(r(p,"LastMediaSettings")){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:i()}))}catch(o){v(o.message)}}}function l(e,t){if(r(p,"LastBitrate")&&t){var n=f.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t/1e3,timestamp:i()}))}catch(o){v(o.message)}}}var m=this.context,v=c["default"](m).getInstance().log,y=void 0,_=void 0,b=void 0;return y={getSavedBitrateSettings:a,setSavedBitrateSettings:l,getSavedMediaSettings:o,setSavedMediaSettings:s,isSupported:e},n(),y}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(102),u=i(s),l=e(8),c=i(l),d=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],f="dashjs_?_bitrate",h="dashjs_?_settings",p="localStorage",g="sessionStorage";r.__dashjs_factory_name="DOMStorage";var m=a["default"].getSingletonFactory(r);n["default"]=m,t.exports=n["default"]},{10:10,102:102,8:8}],151:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){return p}function n(e){p=e}function i(e,t){var n=!0,i=0,r=void 0,o=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(p)!==e.tag&&(n=!1),i=4):e.tag>65535?(r=h.getUint16(p),o=h.getUint8(p+2),256*r+o!==e.tag&&(n=!1),i=3):e.tag>255?(h.getUint16(p)!==e.tag&&(n=!1),i=2):(h.getUint8(p)!==e.tag&&(n=!1),i=1),!n&&e.required&&!t)throw new u["default"]("required tag not found");
return n&&(p+=i),n}function r(e,t){var n=i(e,t);return n&&s(),n}function o(e){var t=void 0;return i(e),t=s(),f[e.parse](t)}function a(e,t){var n=i(e,t),r=void 0;return n&&(r=s(),p+=r),n}function s(e){var t=1,n=128,i=8,r=-1,o=0,a=h.getUint8(p),s=void 0;for(s=0;i>s;s+=1){if((a&n)===n){o=void 0===e?a&~n:a,r=s;break}n>>=1}for(s=0;r>s;s+=1,t+=1)o=o<<8|255&h.getUint8(p+t);return p+=t,o}function l(e){var t=void 0;switch(e){case 4:t=h.getFloat32(p),p+=4;break;case 8:t=h.getFloat64(p),p+=8}return t}function c(e){var t=0,n=void 0;for(n=0;e>n;n+=1)t<<=8,t|=255&h.getUint8(p+n);return p+=e,t}function d(){return p<h.byteLength}var f=void 0,h=new DataView(e.data),p=0;return f={getPos:t,setPos:n,consumeTag:i,consumeTagAndSize:r,parseTag:o,skipOverElement:a,getMatroskaCodedNum:s,getMatroskaFloat:l,getMatroskaUint:c,moreData:d}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(163),u=i(s);r.__dashjs_factory_name="EBMLParser",n["default"]=a["default"].getClassFactory(r),t.exports=n["default"]},{10:10,163:163}],152:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){d.trigger(u["default"].ERROR,{error:"capability",event:e})}function t(e,t,n){d.trigger(u["default"].ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n,i){d.trigger(u["default"].ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:i}})}function i(e,t,n){d.trigger(u["default"].ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function r(e){d.trigger(u["default"].ERROR,{error:"mediasource",event:e})}function o(e){d.trigger(u["default"].ERROR,{error:"key_session",event:e})}function s(e){d.trigger(u["default"].ERROR,{error:"key_message",event:e})}var l=void 0,c=this.context,d=a["default"](c).getInstance();return l={capabilityError:e,downloadError:t,manifestError:n,timedTextError:i,mediaSourceError:r,mediaKeySessionError:o,mediaKeyMessageError:s}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(9),a=i(o),s=e(13),u=i(s),l=e(10),c=i(l),d="mediasource",f="mediakeys",h="manifest",p="SIDX",g="content",m="initialization",v="xlink",y="codec",_="parse",b="nostreams",T="parse";r.__dashjs_factory_name="ErrorHandler";var w=c["default"].getSingletonFactory(r);w.CAPABILITY_ERROR_MEDIASOURCE=d,w.CAPABILITY_ERROR_MEDIAKEYS=f,w.DOWNLOAD_ERROR_ID_MANIFEST=h,w.DOWNLOAD_ERROR_ID_SIDX=p,w.DOWNLOAD_ERROR_ID_CONTENT=g,w.DOWNLOAD_ERROR_ID_INITIALIZATION=m,w.DOWNLOAD_ERROR_ID_XLINK=v,w.MANIFEST_ERROR_ID_CODEC=y,w.MANIFEST_ERROR_ID_PARSE=_,w.MANIFEST_ERROR_ID_NOSTREAMS=b,w.TIMED_TEXT_ERROR_ID_PARSE=T,n["default"]=w,t.exports=n["default"]},{10:10,13:13,9:9}],153:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){var t=e.streamId,n=e.mediaInfo.type,r=e.quality;i[t]=i[t]||{},i[t][n]=i[t][n]||{},i[t][n][r]=e}function t(e,t,n){return i[e][t][n]}function n(){i={}}var i={},r={save:e,extract:t,reset:n};return r}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="InitCache",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],154:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e&&c&&c.boxes&&0!==c.boxes.length?u(c.fetch(e)):null}function t(e){for(var t,n=c.fetchAll(e),i=[],r=0,o=n.length;o>r;r++)t=u(n[r]),t&&i.push(t);return i}function n(e){c=e}function i(){if(!c||!c.boxes||!c.boxes.length)return null;var e=c.boxes[c.boxes.length-1].type,n=t(e);return n[n.length-1]}function r(){return c._cursor.offset}function o(){d={offset:"_offset",size:"size",type:"type"},f={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},h={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},p={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},g={timescale:"timescale"},m={sequence_number:"sequence_number"},v={samples_with_subsamples:"samples_with_subsamples"},y={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},_={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},b={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},T={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function s(e,t,n){for(var i in n)t[i]=e[n[i]]}function u(e){if(!e)return null;var t,n,i=new a["default"];switch(s(e,i,d),e.hasOwnProperty("_incomplete")&&(i.isComplete=!e._incomplete),i.type){case"sidx":if(s(e,i,f),i.references)for(t=0,n=i.references.length;n>t;t++)s(e.references[t],i.references[t],h);break;case"emsg":s(e,i,p);break;case"mdhd":s(e,i,g);break;case"mfhd":s(e,i,m);break;case"subs":s(e,i,v);break;case"tfhd":s(e,i,y);break;case"tfdt":s(e,i,_);break;case"trun":if(s(e,i,b),i.samples)for(t=0,n=i.samples.length;n>t;t++)s(e.samples[t],i.samples[t],T)}return i}var l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,T=void 0;return l={getBox:e,getBoxes:t,setData:n,getLastBox:i,getOffset:r},o(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e(166),a=i(o),s=e(10),u=i(s);r.__dashjs_factory_name="IsoFile",n["default"]=u["default"].getClassFactory(r),t.exports=n["default"]},{10:10,166:166}],155:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){r=e,o=t}function t(){var e=o.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=r.getExpectedLiveEdge(),r.setClientTimeOffset(t-e.DVRWindow.end)),t}function n(){r=null,o=null}var i=void 0,r=void 0,o=void 0;return i={initialize:e,getLiveEdge:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="LiveEdgeFinder";var s=a["default"].getSingletonFactory(r);n["default"]=s,t.exports=n["default"]},{10:10}],156:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}var t=void 0;return t={areSimpleEquivalent:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="ObjectUtils",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],157:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){return e}function t(e){return e}var n=void 0;return n={modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="RequestModifier",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],158:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(e){e&&e.videoModel&&(it=e.videoModel)}function t(e){if(e.hasOwnProperty("begin")&&e.hasOwnProperty("end")){var t=p(e.begin),n=p(e.end);return[t,n]}return null}function n(){var e="cue_TTML_"+ot;return ot++,e}function i(e,t,n){function i(e,t){if(e.hasOwnProperty(t)){var n=e[t];o.indexOf(n)<0&&o.push(n)}}for(var r=[],o=[],a=[],s=0;s<e.length;s++){var u=e[s];i(u,"begin"),i(u,"end")}if(0===o.length)return a;if("undefined"!=typeof t&&"undefined"!=typeof n){for(var s=0;s<o.length;s++){var l=p(o[s]);l>t&&n>l&&r.push(l)}r.push(t),r.push(n)}else for(var s=0;s<o.length;s++)r.push(p(o[s]));r.sort(function(e,t){return e-t});for(var s=0;s<r.length-1;s++)a.push([r[s],r[s+1]]);return a}function r(e,t){return"undefined"!=typeof startInterval&&t>e&&(e=t),e}function o(e,t){return"undefined"!=typeof t&&e>t&&(e=t),e}function a(e,t,n){var i=p(e.begin),a=p(e.end);return i=r(i,t),a=o(a,n),"undefined"!=typeof t&&"undefined"!=typeof n&&(t>a||i>n)?(U("TTML: Cue "+i+"-"+a+" outside interval "+t+"-"+n),null):[i,a]}function s(e,n){var i=!0;if(e.hasOwnProperty("span")){var r=t(e.span);null!==r&&(i=r[0]<n[1]&&r[1]>n[0])}return i}function l(e,r,o,u){var l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,v="";if(H=rt.xml_str2json(e),!H)throw new Error("TTML document could not be parsed");if(it.getTTMLRenderingDiv()&&(h="html"),l=H.tt,!l)throw new Error("TTML document lacks tt element");var y=g(l,"http://www.w3.org/ns/ttml");if(y&&m(l,y),f=l["tts:extent"],c=l.head,!c)throw new Error("TTML document lacks head element");c.layout&&(q=c.layout.region_asArray),c.styling&&(G=c.styling.style_asArray);var _={};if(u)for(p=0;p<u.length;p++){var E="urn:mpeg:14496-30:subs:"+(p+1).toString(),S="data:image/png;base64,"+btoa(u[p]);_[E]=S}if(c.metadata){var C=c.metadata.image_asArray;if(C)for(p=0;p<C.length;p++){var E="#"+C[p]["xml:id"],P=C[p].imagetype.toLowerCase(),S="data:image/"+P+";base64,"+C[p].__text;_[E]=S}}if(d=l.body,!d)throw new Error("TTML document lacks body element");var A=k(),M=it.getElement().clientWidth,j=it.getElement().clientHeight,F=[M/A[0],j/A[1]];K["font-size"]=F[1]+"px;";var B=[];if(q)for(p=0;p<q.length;p++)B.push(x(JSON.parse(JSON.stringify(q[p])),F));var V=g(H.tt,"http://www.w3.org/ns/ttml#parameter");l.hasOwnProperty(V+":frameRate")&&(l.frameRate=parseInt(l[V+":frameRate"],10));for(var $=[],X=l.body_asArray[0].__children,Q=0;Q<X.length;Q++){var J=X[Q].div,Z=null;if(null===(Z=t(J))){var et=J.p_asArray;if(null===Z&&(!et||0===et.length))return v="TTML has div that contains no timing and no paragraphs.",U(v),$;for(var tt=0;tt<et.length;tt++){var nt=et[tt],ot=nt.span_asArray,at=[];if(nt.hasOwnProperty("begin")&&nt.hasOwnProperty("end")){var st=a(nt,r,o);null!==st&&at.push(st)}else at=i(ot,r,o);if(0!==at.length)for(var ut=nt.__children,lt=0;lt<at.length;lt++){for(var ct=at[lt],dt=[],ft=0;ft<ut.length;ft++){var ht=ut[ft];s(ht,ct)&&dt.push(ht)}if(0!==dt.length)if("html"===h){z={},Y={},W={};var pt=L(nt,J,F),gt=N(nt,F),mt=gt[1];gt=gt[0];var vt=document.createElement("div");vt.className=mt;var yt=D(dt,F);yt.className="cueDirUniWrapper",b("unicode-bidi",gt)&&(yt.style.cssText+=T("unicode-bidi",gt),w("unicode-bidi",gt)),b("direction",gt)&&(yt.style.cssText+=T("direction",gt),w("direction",gt)),b("padding-left",gt)&&b("padding-right",gt)&&(yt.innerHTML=R(yt,gt)),b("padding-left",gt)&&b("padding-right",gt)&&(w("padding-left",gt),w("padding-right",gt));var _t="";if(b("regionID",pt)){var bt=T("regionID",pt);_t=bt.slice(bt.indexOf(":")+1,bt.length-1)}gt&&(vt.style.cssText=gt.join(" ")+"display:flex;"),pt&&(pt=pt.join(" ")),vt.appendChild(yt);var Tt=document.createElement("div");Tt.appendChild(vt),Tt.id=n(),Tt.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+pt,0===Object.keys(W).length&&(W.defaultFontSize="100"),$.push({start:ct[0],end:ct[1],type:"html",cueHTMLElement:Tt,regions:B,regionID:_t,cueID:Tt.id,videoHeight:j,videoWidth:M,cellResolution:A,fontSize:W||{defaultFontSize:"100"},lineHeight:z,linePadding:Y})}else{var wt="",Et=dt;Et.length&&Et.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?wt+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(wt+="\n"))})}else wt+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()}),$.push({start:ct[0],end:ct[1],data:wt,type:"text"})}}else v="TTML: Empty paragraph"}}else{var St=void 0;if(J.region){var Ct=O(q,J.region);St=I(Ct,f)}St||(St=I(J,f));var Pt=J["smpte:backgroundImage"];void 0!==Pt&&void 0!==_[Pt]&&$.push({start:Z[0],end:Z[1],id:n(),data:_[Pt],type:"image",layout:St})}}if(""!==v&&U(v),$.length>0)return $;throw new Error(v)}function h(){V=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,W={},z={},Y={},$={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},K={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},X={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;","default":"font-family: monospace, sans-serif;"},Q={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},J={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},Z={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},et={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},tt={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},nt={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},rt=new u["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}function p(e){var t,n,i,r=V.test(e);if(!r)return 0/0;if(t=e.split(":"),n=parseFloat(t[0])*d+parseFloat(t[1])*f+parseFloat(t[2]),t[3]){if(i=H.tt.frameRate,!i||isNaN(i))return 0/0;n+=parseFloat(t[3])/i}return n}function g(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function m(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"==typeof e[n]||e[n]instanceof Object)&&!Array.isArray(e[n]))m(e[n],t);else if(Array.isArray(e[n]))for(var i=0;i<e[n].length;i++)m(e[n][i],t);var r=t+":",o=n.indexOf(r);if(o>=0){var a=n.slice(o+r.length);e[a]=e[n],delete e[n]}}}function v(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function y(e){var t=e.slice(1),n=t.match(/.{2}/g),i=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3),r=n.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+r.join(",")+","+i+");"}function _(e){var t=void 0,n=void 0,i=void 0;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(t[t.length-1],10)/255,i="rgba("+t[0]+","+t[1]+","+t[2]+","+n+");"}function b(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function T(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function w(e,t){t.splice(t.indexOf(T(e,t)),1)}function E(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)e[n]&&e[n].split(":")[0].indexOf(t[i].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function S(e){var t=new Array(2),n=-1===e.indexOf(":")?0:e.indexOf(":"),i=void 0;return-1===e.indexOf("%")?-1===e.indexOf("c")?-1===e.indexOf("p")?t[0]=t[1]=null:(t[0]="p",i=e.indexOf("p")):(t[0]="c",i=e.indexOf("c")):(t[0]="%",i=e.indexOf("%")),t[1]=e.slice(n,i),t}function C(e,t,n){var i,r,o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=a.replace("ebutts:","");s=s.replace("xml:",""),s=s.replace("tts:",""),s=v(s),e[s]=e[a],delete e[a]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(Y[e.id]=u);var l=u*t[0]+"px;";o.push("padding-left:"+l),o.push("padding-right:"+l)}if("font-size"in e){var c=S(e["font-size"]),d=parseFloat(c[1]);"id"in e&&(W[e.id]=c),"%"===c[0]?i=d/100*t[1]+"px;":"c"===c[0]&&(i=d*t[1]+"px;"),o.push("font-size:"+i)}if("line-height"in e)if("normal"===e["line-height"])o.push("line-height: normal;");else{var f=S(e["line-height"]),h=parseFloat(f[1]);"id"in e&&(z[e.id]=f),"%"===f[0]?r=h/100*t[1]+"px;":"c"===f[0]&&(r=h*t[1]+"px;"),o.push("line-height:"+r)}"font-family"in e&&o.push(e["font-family"]in X?X[e["font-family"]]:"font-family:"+e["font-family"]+";"),"text-align"in e&&e["text-align"]in Q&&(o.push(Q[e["text-align"]][0]),o.push(Q[e["text-align"]][1])),"multi-row-align"in e&&(b("text-align",o)&&"auto"!=e["multi-row-align"]&&w("text-align",o),e["multi-row-align"]in J&&o.push(J[e["multi-row-align"]]));var p;return"background-color"in e&&(p=e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8?y(e["background-color"]):e["background-color"].indexOf("rgba")>-1?_(e["background-color"]):e["background-color"]+";",o.push("background-color: "+p)),"color"in e&&(p=e.color.indexOf("#")>-1&&e.color.length-1===8?y(e.color):e.color.indexOf("rgba")>-1?_(e.color):e.color+";",o.push("color: "+p)),"wrap-option"in e&&o.push(e["wrap-option"]in Z?Z[e["wrap-option"]]:"white-space:"+e["wrap-option"]),"unicode-bidi"in e&&o.push(e["unicode-bidi"]in et?et[e["unicode-bidi"]]:"unicode-bidi:"+e["unicode-bidi"]),"font-style"in e&&o.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&o.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&o.push("direction:"+e.direction+";"),"text-decoration"in e&&o.push("text-decoration:"+e["text-decoration"]+";"),n&&(o=o.concat(x(e,t))),H.tt.hasOwnProperty("xml:space")&&"preserve"===H.tt["xml:space"]&&o.push("white-space: pre;"),o}function P(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i["xml:id"]===t||i.id===t)return i}return null}function A(e,t,n){var i=[],r=e.match(/\S+/g);return r.forEach(function(e){var r=P(G,e);if(r){var o=C(JSON.parse(JSON.stringify(r)),t,n);i=i.concat(o)}}),i}function I(e,t){var n=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var i=n.exec(e["tts:extent"]),r=n.exec(e["tts:origin"]);if(null===i||null===r)return U("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var o=parseFloat(i[1]),a=parseFloat(i[3]),s=parseFloat(r[1]),u=parseFloat(r[3]);if(t){var l=n.exec(t);if(null===l||"px"!==l[2]||"px"!==l[4])return U("Bad tt.extent: "+t),null;var c=parseFloat(l[1]),d=parseFloat(l[3]);"px"===i[2]&&(o=o/c*100),"px"===i[4]&&(a=a/d*100),"px"===r[2]&&(s=s/c*100),"px"===r[4]&&(u=u/d*100)}return{left:s,top:u,width:o,height:a}}return null}function x(e,t){var n=[];for(var i in e){var r=i.replace("tts:","");r=r.replace("xml:",""),r=v(r),e[r]=e[i],r!==i&&delete e[i]}if("extent"in e){var o=e.extent.split(/\s/);n.push("width: "+o[0]+";"),n.push("height: "+o[1]+";")}if("origin"in e){var a=e.origin.split(/\s/);n.push("left: "+a[0]+";"),n.push("top: "+a[1]+";")}if("display-align"in e&&n.push(tt[e["display-align"]]),"writing-mode"in e&&n.push(nt[e["writing-mode"]]),"style"in e){var s=A(e.style,t,!0);n=n.concat(s)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function O(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i["xml:id"]===t||i.id===t)return i}return null}function M(e,t){var n=[],i=e.match(/\S+/g);return i.forEach(function(e){var i=O(q,e);if(i){var r=x(JSON.parse(JSON.stringify(i)),t);n=n.concat(r)}}),n}function k(){var e=[32,15];return H.tt.hasOwnProperty("ttp:cellResolution")?H.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function R(e,t){for(var n=T("padding-left",t),i=T("padding-right",t),r=n.concat(" "+i+" "),o="",a="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],c=u.indexOf(l),d=[];-1!=c;)d.push(c),c=u.indexOf(l,c+1);var f="</span>",h="<br>",p='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(d.length)d.forEach(function(e,t){if(0===t){for(var n="",i=0;e>i;i++)o+=u[i].outerHTML,0===i&&(n=r.concat(u[i].style.cssText));o=p+n+'">'+o}for(var l="",c=e+1;c<u.length;c++)a+=u[c].outerHTML,c===u.length-1&&(l+=r.concat(u[c].style.cssText));a=p+l+'">'+a,o&&a&&t===d.length-1?s+=o+f+h+a+f:o&&a&&t!==d.length-1?s+=o+f+h+a+f+h:o&&!a?s+=o+f:!o&&a&&t===d.length-1?s+=a+f:!o&&a&&t!==d.length-1&&(s+=a+f+h)});else{for(var g="",m=0;m<u.length;m++)g+=u[m].style.cssText;s=p+r+g+'">'+e.innerHTML+f}return s}function D(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var i=e.span.__children,r=document.createElement("span");if(e.span.hasOwnProperty("style")){var o=A(e.span.style,t);r.className="spanPadding "+e.span.style,r.style.cssText=o.join(" ")}i.forEach(function(e){if(!i.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);r.appendChild(t)}else if("br"in e){r.hasChildNodes()&&n.appendChild(r);var o=document.createElement("br");o.className="lineBreak",n.appendChild(o);var a=document.createElement("span");a.className=r.className,a.style.cssText=r.style.cssText,r=a}}),n.appendChild(r)}else if(e.hasOwnProperty("br")){var a=document.createElement("br");a.className="lineBreak",n.appendChild(a)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function L(e,t,n){var i,r,o=[],a=e.region,s=t.region;return s&&(i=M(s,n)),a?(r=o.concat(M(a,n)),o=i?E(i,r):r):i&&(o=i),j(o,$),o}function N(e,t){var n,i,r,o=[],a=e.style,s=H.tt.body.style,u=H.tt.body.div.style,l="";return s&&(n=A(s,t),l="paragraph "+s),u&&(i=A(u,t),n?(i=E(n,i),l+=" "+u):l="paragraph "+u),a?(r=A(a,t),n&&i?(o=E(i,r),l+=" "+a):n?(o=E(n,r),l+=" "+a):i?(o=E(i,r),l+=" "+a):(o=r,l="paragraph "+a)):n&&!i?o=n:!n&&i&&(o=i),j(o,K),[o,l]}function j(e,t){for(var n in t)t.hasOwnProperty(n)&&(b(n,e)||e.push(n+":"+t[n]))}var F=this.context,U=c["default"](F).getInstance().log,B=void 0,V=void 0,H=void 0,G=void 0,q=void 0,W=void 0,z=void 0,Y=void 0,$=void 0,K=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=0;return B={parse:l,setConfig:e},h(),B}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(4),u=i(s),l=e(8),c=i(l),d=3600,f=60;r.__dashjs_factory_name="TTMLParser",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,4:4,8:8}],159:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){try{{new window.URL("x","http://y")}s=d}catch(e){}finally{s=s||f}}function t(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function n(e){var t=e.match(c);return t?t[1]:""}function i(e){return!u.test(e)}function r(e){return i(e)&&"/"===e.charAt(0)}function o(e){return l.test(e)}function a(e,t){return s(e,t)}var s=void 0,u=/^[a-z][a-z0-9+\-.]*:/i,l=/^https?:\/\//i,c=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,d=function(e,t){try{return new window.URL(e,t).toString()}catch(n){return e}},f=function(e,o){var a=t;if(!o)return e;if(!i(e))return e;r(e)&&(a=n);var s=a(o),u="/"!==s.charAt(s.length-1)&&"/"!==e.charAt(0)?"/":"";return[s,e].join(u)};e();var h={parseBaseUrl:t,parseOrigin:n,isRelative:i,isPathAbsolute:r,isHTTPURL:o,resolve:a};return h}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o);r.__dashjs_factory_name="URLUtils",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10}],160:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){function e(){c=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,h=/\s\b/g}function t(e){var t,r,a=[];e=e.split(c),t=e.length,r=-1;for(var u=0;t>u;u++){var l=e[u];if(l.length>0&&"WEBVTT"!==l&&l.match(d)){var h=i(l),p=h.cuePoints,g=h.styles,m=o(e,u+1),v=n(p[0].replace(f,"")),y=n(p[1].replace(f,""));!isNaN(v)&&!isNaN(y)&&v>=r&&y>v?""!==m?(r=v,a.push({start:v,end:y,data:m,styles:g})):s("Skipping cue due to empty/malformed cue text"):s("Skipping cue due to incorrect cue timing")}}return a}function n(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function i(e){var t=e.split(d),n=t[1].split(h);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:r(n)}}function r(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function o(e,t){for(var n,i=t,r="",o="";""!==e[i]&&i<e.length;)i++;if(n=i-t,n>1)for(var a=0;n>a;a++){if(o=e[t+a],o.match(d)){r="";break}r+=o,a!==n-1&&(r+="\n")}else o=e[t],o.match(d)||(r=o);return decodeURI(r)}var a=this.context,s=u["default"](a).getInstance().log,l=void 0,c=void 0,d=void 0,f=void 0,h=void 0;return l={parse:t},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),a=i(o),s=e(8),u=i(s);r.__dashjs_factory_name="VTTParser",n["default"]=a["default"].getSingletonFactory(r),t.exports=n["default"]},{10:10,8:8}],161:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=0/0};n["default"]=r,t.exports=n["default"]},{}],162:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=0/0,this.index=0/0,this.bytes=null,this.start=0/0,this.end=0/0,this.duration=0/0};n["default"]=r,t.exports=n["default"]},{}],163:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e,t,n){i(this,o),this.code=e||null,this.message=t||null,this.data=n||null};n["default"]=r,t.exports=n["default"]},{}],164:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.action=o.ACTION_DOWNLOAD,this.startTime=0/0,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=0/0,this.timescale=0/0,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=0/0,this.index=0/0,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=0/0,this.bytesTotal=0/0,this.delayLoadingTime=0/0,this.responseType="arraybuffer"};r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",n["default"]=r,t.exports=n["default"]},{}],165:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(164),u=i(s),l=function(e){function t(e){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{164:164}],166:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.offset=0/0,this.type=null,this.size=0/0,this.isComplete=!0};n["default"]=r,t.exports=n["default"]},{}],167:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.DVRWindowSize=0/0,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=0/0,this.duration=0/0,this.isDynamic=!1,this.maxFragmentDuration=null};n["default"]=r,t.exports=n["default"]},{}],168:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};n["default"]=r,t.exports=n["default"]},{}],169:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};n["default"]=r,t.exports=n["default"]},{}],170:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.id=null,this.index=null,this.start=0/0,this.duration=0/0,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};n["default"]=r,t.exports=n["default"]},{}],171:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},s=e(164),u=i(s),l=function(e){function t(e,n){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType="stream",this.responseType="text"
}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{164:164}],172:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};n["default"]=r,t.exports=n["default"]},{}],173:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};n["default"]=r,t.exports=n["default"]},{}],174:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};n["default"]=r,t.exports=n["default"]},{}],175:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this._s=void 0};n["default"]=r,t.exports=n["default"]},{}],176:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.t=null,this.level=null};n["default"]=r,t.exports=n["default"]},{}],177:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e(64),a=i(o),s=function u(){r(this,u),this.target=null,this.state=a["default"].BUFFER_EMPTY};n["default"]=s,t.exports=n["default"]},{64:64}],178:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.time=null,this.range=null,this.manifestInfo=null};n["default"]=r,t.exports=n["default"]},{}],179:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.time=null,this.droppedFrames=null};n["default"]=r,t.exports=n["default"]},{}],180:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function a(){i(this,a),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},o=function s(){i(this,s),this.s=null,this.d=null,this.b=[]};r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",n.HTTPRequest=r,n.HTTPRequestTrace=o},{}],181:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function s(){i(this,s),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},o=function u(){i(this,u),this.id=null,this.index=null,this.start=null,this.duration=null},a=function l(){i(this,l),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};n.ManifestUpdate=r,n.ManifestUpdateStreamInfo=o,n.ManifestUpdateTrackInfo=a},{}],182:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function a(){i(this,a),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start";var o=function s(){i(this,s),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};o.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",o.REBUFFERING_REASON="rebuffering",o.USER_REQUEST_STOP_REASON="user_request",o.END_OF_PERIOD_STOP_REASON="end_of_period",o.END_OF_CONTENT_STOP_REASON="end_of_content",o.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",o.FAILURE_STOP_REASON="failure",n.PlayList=r,n.PlayListTrace=o},{}],183:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.t=null,this.mt=null,this.to=null,this.lto=null};n["default"]=r,t.exports=n["default"]},{}],184:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.loadingRequests=[],this.executedRequests=[]};n["default"]=r,t.exports=n["default"]},{}],185:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};n["default"]=r,t.exports=n["default"]},{}],186:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function o(){i(this,o),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};n["default"]=r,t.exports=n["default"]},{}]},{},[5]),e.dashjs=dashjs}.apply(e,arguments)})}(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("videojs",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojs=e()}}(function(){var e;return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(2),u=i(s),l=e(5),c=i(l),d=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(){this.player_.play()},t}(u["default"]);d.prototype.controlText_="Play Video",c["default"].registerComponent("BigPlayButton",d),n["default"]=d},{2:2,5:5}],2:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(3),u=i(s),l=e(5),c=i(l),d=e(86),f=i(d),h=e(88),p=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=h.assign({className:this.buildCSSClass()},t),"button"!==e&&(f["default"].warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=h.assign({tabIndex:0},t),n=h.assign({role:"button"},n)),n=h.assign({type:"button","aria-live":"polite"},n);var i=c["default"].prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return f["default"].warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),c["default"].prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(u["default"]);c["default"].registerComponent("Button",p),n["default"]=p},{3:3,5:5,86:86,88:88}],3:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(82),h=i(f),p=e(83),g=i(p),m=e(86),v=r(m),y=e(94),_=r(y),b=e(88),T=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.emitTapEvents(),r.enable(),r}return s(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=b.assign({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&v["default"].error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=b.assign({role:"button","aria-live":"polite"},i),this.tabIndex_=n.tabIndex;var r=e.prototype.createEl.call(this,t,n,i);return this.createControlTextEl(r),r},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=d.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(!e)return this.controlText_||"Need Text";var n=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=n,t.setAttribute("title",n),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("tap",this.handleClick),this.off("click",this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},t.prototype.handleClick=function(){},t.prototype.handleFocus=function(){h.on(_["default"],"keydown",g.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(){h.off(_["default"],"keydown",g.bind(this,this.handleKeyPress))},t}(l["default"]);l["default"].registerComponent("ClickableComponent",T),n["default"]=T},{5:5,81:81,82:82,83:83,86:86,88:88,94:94}],4:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(2),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.controlText(i&&i.controlText||a.localize("Close")),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},t}(u["default"]);c["default"].registerComponent("CloseButton",d),n["default"]=d},{2:2,5:5}],5:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e(95),s=r(a),u=e(81),l=i(u),c=e(83),d=i(c),f=e(85),h=i(f),p=e(82),g=i(p),m=e(86),v=r(m),y=e(91),_=r(y),b=e(87),T=r(b),w=function(){function e(t,n,i){if(o(this,e),this.player_=!t&&this.play?t=this:t,this.options_=T["default"]({},this.options_),n=this.options_=T["default"](this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var r=t&&t.id&&t.id()||"no_player";this.id_=r+"_component_"+h.newGUID()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),l.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return v["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=T["default"](this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return l.createEl(e,t,n)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages();if(!t||!n)return e;var i=n[t];if(i&&i[e])return i[e];var r=t.split("-")[0],o=n[r];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){return e?(e=_["default"](e),this.childNameIndex_[e]):void 0},e.prototype.addChild=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,r=void 0,o=void 0;if("string"==typeof t){o=_["default"](t),n||(n={}),n===!0&&(v["default"].warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),n={});var a=n.componentClass||o;n.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;r=new s(this.player_||this,n)}else r=t;if(this.children_.splice(i,0,r),"function"==typeof r.id&&(this.childIndex_[r.id()]=r),o=o||r.name&&r.name(),o&&(this.childNameIndex_[o]=r),"function"==typeof r.el&&r.el()){var u=this.contentEl().children,l=u[i]||null;this.contentEl().insertBefore(r.el(),l)}return r},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;n&&!function(){var i=t.options_,r=function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),r!==!1){r===!0&&(r={}),r.playerOptions=t.options_.playerOptions;var o=t.addChild(n,r);o&&(t[n]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(n)?n:Object.keys(n),o.concat(Object.keys(t.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var i=void 0,r=void 0;return"string"==typeof e?(i=e,r=n[i]||t.options_[i]||{}):(i=e.name,r=e),{name:i,opts:r}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||_["default"](t.name));return n&&!a.isTech(n)}).forEach(r)}()},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,n){var i=this;return"string"==typeof e||Array.isArray(e)?g.on(this.el_,e,d.bind(this,t)):!function(){var r=e,o=t,a=d.bind(i,n),s=function(){return i.off(r,o,a)};s.guid=a.guid,i.on("dispose",s);var u=function(){return i.off("dispose",s)};u.guid=a.guid,e.nodeName?(g.on(r,o,a),g.on(r,"dispose",u)):"function"==typeof e.on&&(r.on(o,a),r.on("dispose",u))}(),this},e.prototype.off=function(e,t,n){if(!e||"string"==typeof e||Array.isArray(e))g.off(this.el_,e,t);else{var i=e,r=t,o=d.bind(this,n);this.off("dispose",o),e.nodeName?(g.off(i,r,o),g.off(i,"dispose",o)):(i.off(r,o),i.off("dispose",o))}return this},e.prototype.one=function(e,t,n){var i=this,r=arguments;return"string"==typeof e||Array.isArray(e)?g.one(this.el_,e,d.bind(this,t)):!function(){var o=e,a=t,s=d.bind(i,n),u=function l(){i.off(o,a,l),s.apply(null,r)};u.guid=s.guid,i.on(o,a,u)}(),this},e.prototype.trigger=function(e,t){return g.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return l.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return l.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return l.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return l.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return l.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return l.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.getAttribute=function(e){return l.getAttribute(this.el_,e)},e.prototype.setAttribute=function(e,t){return l.setAttribute(this.el_,e,t),this},e.prototype.removeAttribute=function(e){return l.removeAttribute(this.el_,e),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+_["default"](e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s["default"].getComputedStyle){var n=s["default"].getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(t=parseFloat(t),0===t){var i="offset"+_["default"](e);t=this.el_[i]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.emitTapEvents=function(){var e=0,t=null,n=10,i=200,r=void 0;this.on("touchstart",function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=(new Date).getTime(),r=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)r=!1;else if(t){var i=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY,a=Math.sqrt(i*i+o*o);a>n&&(r=!1)}});var o=function(){r=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(n){if(t=null,r===!0){var o=(new Date).getTime()-e;i>o&&(n.preventDefault(),this.trigger("tap"))}})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=d.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){e=d.bind(this,e);var n=s["default"].setTimeout(e,t),i=function(){this.clearTimeout(n)};return i.guid="vjs-timeout-"+n,this.on("dispose",i),n},e.prototype.clearTimeout=function(e){s["default"].clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=d.bind(this,e);var n=s["default"].setInterval(e,t),i=function(){this.clearInterval(n)};return i.guid="vjs-interval-"+n,this.on("dispose",i),n},e.prototype.clearInterval=function(e){s["default"].clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,n){return t?(t=_["default"](t),e.components_||(e.components_={}),"Player"===t&&e.components_[t]&&!function(){var n=e.components_[t];if(n.players&&Object.keys(n.players).length>0&&Object.keys(n.players).map(function(e){return n.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}(),e.components_[t]=n,n):void 0},e.getComponent=function(t){return t?(t=_["default"](t),e.components_&&e.components_[t]?e.components_[t]:s["default"]&&s["default"].videojs&&s["default"].videojs[t]?(v["default"].warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s["default"].videojs[t]):void 0):void 0},e.extend=function(t){t=t||{},v["default"].warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var n=t.init||t.init||this.prototype.init||this.prototype.init||function(){},i=function(){n.apply(this,arguments)};i.prototype=Object.create(this.prototype),i.prototype.constructor=i,i.extend=e.extend;for(var r in t)t.hasOwnProperty(r)&&(i.prototype[r]=t[r]);return i},e}();w.registerComponent("Component",w),n["default"]=w},{81:81,82:82,83:83,85:85,86:86,87:87,91:91,95:95}],6:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(36),u=i(s),l=e(5),c=i(l),d=e(7),f=i(d),h=function(e){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),i.tracks=n.audioTracks&&n.audioTracks();var a=o(this,e.call(this,n,i));return a.el_.setAttribute("aria-label","Audio Menu"),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var n=0;n<t.length;n++){var i=t[n];e.push(new f["default"](this.player_,{track:i,selectable:!0}))}return e},t}(u["default"]);h.prototype.controlText_="Audio Track",c["default"].registerComponent("AudioTrackButton",h),n["default"]=h},{36:36,5:5,7:7}],7:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(48),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=function(e){function t(n,i){o(this,t);var r=i.track,s=n.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled;var u=a(this,e.call(this,n,i));return u.track=r,s&&!function(){var e=h.bind(u,u.handleTracksChange);s.addEventListener("change",e),u.on("dispose",function(){s.removeEventListener("change",e)})}(),u}return s(t,e),t.prototype.handleClick=function(t){var n=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),n)for(var i=0;i<n.length;i++){var r=n[i];r.enabled=r===this.track}},t.prototype.handleTracksChange=function(){this.selected(this.track.enabled)},t}(l["default"]);d["default"].registerComponent("AudioTrackMenuItem",p),n["default"]=p},{48:48,5:5,83:83}],8:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s);e(12),e(32),e(33),e(35),e(34),e(10),e(18),e(9),e(38),e(40),e(11),e(25),e(27),e(29),e(24),e(6),e(13),e(21);var l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(u["default"]);l.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},u["default"].registerComponent("ControlBar",l),n["default"]=l},{10:10,11:11,12:12,13:13,18:18,21:21,24:24,25:25,27:27,29:29,32:32,33:33,34:34,35:35,38:38,40:40,5:5,6:6,9:9}],9:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(2),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.on(n,"fullscreenchange",a.handleFullscreenChange),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(){this.controlText(this.player_.isFullscreen()?"Non-Fullscreen":"Fullscreen")},t.prototype.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(u["default"]);d.prototype.controlText_="Fullscreen",c["default"].registerComponent("FullscreenToggle",d),n["default"]=d},{2:2,5:5}],10:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")
}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t}(l["default"]);l["default"].registerComponent("LiveDisplay",f),n["default"]=f},{5:5,81:81}],11:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(2),l=r(u),c=e(5),d=r(c),f=e(81),h=i(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"volumechange",r.update),n.tech_&&n.tech_.featuresVolumeControl===!1&&r.addClass("vjs-hidden"),r.on(n,"loadstart",function(){this.update(),n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),r}return s(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.muted(!this.player_.muted())},t.prototype.update=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:.33>e?t=1:.67>e&&(t=2);var n=this.player_.muted()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n);for(var i=0;4>i;i++)h.removeElClass(this.el_,"vjs-vol-"+i);h.addElClass(this.el_,"vjs-vol-"+t)},t}(l["default"]);p.prototype.controlText_="Mute",d["default"].registerComponent("MuteToggle",p),n["default"]=p},{2:2,5:5,81:81}],12:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(2),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.on(n,"play",a.handlePlay),a.on(n,"pause",a.handlePause),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(u["default"]);d.prototype.controlText_="Play",c["default"].registerComponent("PlayToggle",d),n["default"]=d},{2:2,5:5}],13:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(47),l=r(u),c=e(49),d=r(c),f=e(14),h=r(f),p=e(5),g=r(p),m=e(81),v=i(m),y=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.updateVisibility(),r.updateLabel(),r.on(n,"loadstart",r.updateVisibility),r.on(n,"ratechange",r.updateLabel),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=v.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new d["default"](this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new h["default"](this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(){for(var e=this.player().playbackRate(),t=this.playbackRates(),n=t[0],i=0;i<t.length;i++)if(t[i]>e){n=t[i];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(l["default"]);y.prototype.controlText_="Playback Rate",g["default"].registerComponent("PlaybackRateMenuButton",y),n["default"]=y},{14:14,47:47,49:49,5:5,81:81}],14:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(48),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t);var a=i.rate,s=parseFloat(a,10);i.label=a,i.selected=1===s;var u=o(this,e.call(this,n,i));return u.label=a,u.rate=s,u.on(n,"ratechange",u.update),u}return a(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(u["default"]);d.prototype.contentElType="button",c["default"].registerComponent("PlaybackRateMenuItem",d),n["default"]=d},{48:48,5:5}],15:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.partEls_=[],r.on(n,"progress",r.update),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(){var e=this.player_.buffered(),t=this.player_.duration(),n=this.player_.bufferedEnd(),i=this.partEls_,r=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=r(n,t);for(var o=0;o<e.length;o++){var a=e.start(o),s=e.end(o),u=i[o];u||(u=this.el_.appendChild(d.createEl()),i[o]=u),u.style.left=r(a,n),u.style.width=r(s-a,n)}for(var l=i.length;l>e.length;l--)this.el_.removeChild(i[l-1]);i.length=e.length},t}(l["default"]);l["default"].registerComponent("LoadProgressBar",f),n["default"]=f},{5:5,81:81}],16:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(83),h=i(f),p=e(84),g=r(p),m=e(80),v=r(m),y=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return i.playerOptions&&i.playerOptions.controlBar&&i.playerOptions.controlBar.progressControl&&i.playerOptions.controlBar.progressControl.keepTooltipsInside&&(r.keepTooltipsInside=i.playerOptions.controlBar.progressControl.keepTooltipsInside),r.keepTooltipsInside&&(r.tooltip=d.createEl("div",{className:"vjs-time-tooltip"}),r.el().appendChild(r.tooltip),r.addClass("vjs-keep-tooltips-inside")),r.update(0,0),n.on("ready",function(){r.on(n.controlBar.progressControl.el(),"mousemove",h.throttle(h.bind(r,r.handleMouseMove),25))}),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),n=this.calculateDistance(e)*t,i=e.pageX-d.findElPosition(this.el().parentNode).left;this.update(n,i)},t.prototype.update=function(e,t){var n=g["default"](e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",n),this.keepTooltipsInside){var i=this.clampPosition_(t),r=t-i+1,o=parseFloat(v["default"](this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=n,this.tooltip.style.right="-"+(a-r)+"px"}},t.prototype.calculateDistance=function(e){return d.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat(v["default"](this.player().el(),"width")),n=parseFloat(v["default"](this.tooltip,"width")),i=n/2,r=e;return i>e?r=Math.ceil(i):e>t-i&&(r=Math.floor(t-i)),r},t}(l["default"]);l["default"].registerComponent("MouseTimeDisplay",y),n["default"]=y},{5:5,80:80,81:81,83:83,84:84}],17:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(83),d=i(c),f=e(84),h=r(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.updateDataAttr(),r.on(n,"timeupdate",r.updateDataAttr),n.ready(d.bind(r,r.updateDataAttr)),i.playerOptions&&i.playerOptions.controlBar&&i.playerOptions.controlBar.progressControl&&i.playerOptions.controlBar.progressControl.keepTooltipsInside&&(r.keepTooltipsInside=i.playerOptions.controlBar.progressControl.keepTooltipsInside),r.keepTooltipsInside&&r.addClass("vjs-keep-tooltips-inside"),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",h["default"](e,this.player_.duration()))},t}(l["default"]);l["default"].registerComponent("PlayProgressBar",p),n["default"]=p},{5:5,83:83,84:84}],18:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s);e(19),e(16);var l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(u["default"]);l.prototype.options_={children:["seekBar"]},u["default"].registerComponent("ProgressControl",l),n["default"]=l},{16:16,19:19,5:5}],19:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(57),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=e(84),g=r(p),m=e(80),v=r(m);e(15),e(17),e(20);var y=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"timeupdate",r.updateProgress),r.on(n,"ended",r.updateProgress),n.ready(h.bind(r,r.updateProgress)),i.playerOptions&&i.playerOptions.controlBar&&i.playerOptions.controlBar.progressControl&&i.playerOptions.controlBar.progressControl.keepTooltipsInside&&(r.keepTooltipsInside=i.playerOptions.controlBar.progressControl.keepTooltipsInside),r.keepTooltipsInside&&(r.tooltipProgressBar=r.addChild("TooltipProgressBar")),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var e=parseFloat(v["default"](this.player().el(),"width")),t=parseFloat(v["default"](this.tooltipProgressBar.tooltip,"width")),n=this.tooltipProgressBar.el().style;n.maxWidth=Math.floor(e-t/2)+"px",n.minWidth=Math.ceil(t/2)+"px",n.right="-"+t/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",g["default"](t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(l["default"]);y.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},y.prototype.playerEvent="timeupdate",d["default"].registerComponent("SeekBar",y),n["default"]=y},{15:15,17:17,20:20,5:5,57:57,80:80,83:83,84:84}],20:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(83),d=i(c),f=e(84),h=r(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.updateDataAttr(),r.on(n,"timeupdate",r.updateDataAttr),n.ready(d.bind(r,r.updateDataAttr)),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=h["default"](e,this.player_.duration());this.el_.setAttribute("data-current-time",t),this.tooltip.innerHTML=t},t}(l["default"]);l["default"].registerComponent("TooltipProgressBar",p),n["default"]=p},{5:5,83:83,84:84}],21:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(22),u=i(s),l=e(5),c=i(l),d=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(u["default"]);c["default"].registerComponent("CustomControlSpacer",d),n["default"]=d},{22:22,5:5}],22:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(u["default"]);u["default"].registerComponent("Spacer",l),n["default"]=l},{5:5}],23:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(31),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t),i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},i.selectable=!1;var a=o(this,e.call(this,n,i));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+i.kind+" settings dialog"),a}return a(t,e),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(u["default"]);c["default"].registerComponent("CaptionSettingsMenuItem",d),n["default"]=d},{31:31,5:5}],24:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(30),u=i(s),l=e(5),c=i(l),d=e(23),f=i(d),h=function(e){function t(n,i,a){r(this,t);var s=o(this,e.call(this,n,i,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(){var t=2;e.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(t=1),this.items&&this.items.length>t?this.show():this.hide()},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||t.push(new f["default"](this.player_,{kind:this.kind_})),e.prototype.createItems.call(this,t)},t}(u["default"]);h.prototype.kind_="captions",h.prototype.controlText_="Captions",c["default"].registerComponent("CaptionsButton",h),n["default"]=h},{23:23,30:30,5:5}],25:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(30),u=i(s),l=e(5),c=i(l),d=e(26),f=i(d),h=e(91),p=i(h),g=function(e){function t(n,i,a){r(this,t);var s=o(this,e.call(this,n,i,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(p["default"](this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;i>n;n++){var r=t[n],o=new f["default"](this.player_,{track:this.track_,cue:r});e.push(o)}return e},t}(u["default"]);g.prototype.kind_="chapters",g.prototype.controlText_="Chapters",c["default"].registerComponent("ChaptersButton",g),n["default"]=g},{26:26,30:30,5:5,91:91}],26:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(48),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=function(e){function t(n,i){o(this,t);var r=i.track,s=i.cue,u=n.currentTime();i.selectable=!0,i.label=s.text,i.selected=s.startTime<=u&&u<s.endTime;var l=a(this,e.call(this,n,i));return l.track=r,l.cue=s,r.addEventListener("cuechange",h.bind(l,l.update)),l}return s(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},t}(l["default"]);d["default"].registerComponent("ChaptersTrackMenuItem",p),n["default"]=p},{48:48,5:5,83:83}],27:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(30),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=function(e){function t(n,i,r){o(this,t);var s=a(this,e.call(this,n,i,r));s.el_.setAttribute("aria-label","Descriptions Menu");var u=n.textTracks();return u&&!function(){var e=h.bind(s,s.handleTracksChange);u.addEventListener("change",e),s.on("dispose",function(){u.removeEventListener("change",e)})}(),s}return s(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!1,n=0,i=e.length;i>n;n++){var r=e[n];if(r.kind!==this.kind_&&"showing"===r.mode){t=!0;break}}t?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(l["default"]);p.prototype.kind_="descriptions",p.prototype.controlText_="Descriptions",d["default"].registerComponent("DescriptionsButton",p),n["default"]=p},{30:30,5:5,83:83}],28:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(31),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i){r(this,t),i.track={player:n,kind:i.kind,label:i.kind+" off","default":!1,mode:"disabled"},i.selectable=!0;
var a=o(this,e.call(this,n,i));return a.selected(!0),a}return a(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,n=0,i=e.length;i>n;n++){var r=e[n];if(r.kind===this.track.kind&&"showing"===r.mode){t=!1;break}}this.selected(t)},t}(u["default"]);c["default"].registerComponent("OffTextTrackMenuItem",d),n["default"]=d},{31:31,5:5}],29:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(30),u=i(s),l=e(5),c=i(l),d=function(e){function t(n,i,a){r(this,t);var s=o(this,e.call(this,n,i,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(u["default"]);d.prototype.kind_="subtitles",d.prototype.controlText_="Subtitles",c["default"].registerComponent("SubtitlesButton",d),n["default"]=d},{30:30,5:5}],30:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(36),u=i(s),l=e(5),c=i(l),d=e(31),f=i(d),h=e(28),p=i(h),g=function(e){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i.tracks=n.textTracks(),o(this,e.call(this,n,i))}return a(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.push(new p["default"](this.player_,{kind:this.kind_}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var i=t[n];i.kind===this.kind_&&e.push(new f["default"](this.player_,{track:i,selectable:!0}))}return e},t}(u["default"]);c["default"].registerComponent("TextTrackButton",g),n["default"]=g},{28:28,31:31,36:36,5:5}],31:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e(48),c=r(l),d=e(5),f=r(d),h=e(83),p=i(h),g=e(95),m=r(g),v=e(94),y=r(v),_=function(e){function t(n,i){o(this,t);var r=i.track,s=n.textTracks();i.label=r.label||r.language||"Unknown",i.selected=r["default"]||"showing"===r.mode;var l=a(this,e.call(this,n,i));return l.track=r,s&&!function(){var e=p.bind(l,l.handleTracksChange);s.addEventListener("change",e),l.on("dispose",function(){s.removeEventListener("change",e)})}(),s&&void 0===s.onchange&&!function(){var e=void 0;l.on(["tap","click"],function(){if("object"!==u(m["default"].Event))try{e=new m["default"].Event("change")}catch(t){}e||(e=y["default"].createEvent("Event"),e.initEvent("change",!0,!0)),s.dispatchEvent(e)})}(),l}return s(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var o=i[r];o.kind===n&&(o.mode=o===this.track?"showing":"disabled")}},t.prototype.handleTracksChange=function(){this.selected("showing"===this.track.mode)},t}(c["default"]);f["default"].registerComponent("TextTrackMenuItem",_),n["default"]=_},{48:48,5:5,83:83,94:94,95:95}],32:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(84),h=r(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"timeupdate",r.updateContent),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=this.localize("Current Time"),n=h["default"](e,this.player_.duration());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> "+n)},t}(l["default"]);l["default"].registerComponent("CurrentTimeDisplay",p),n["default"]=p},{5:5,81:81,84:84}],33:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(84),h=r(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"durationchange",r.updateContent),r.on(n,"timeupdate",r.updateContent),r.on(n,"loadedmetadata",r.updateContent),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.duration();if(e&&this.duration_!==e){this.duration_=e;var t=this.localize("Duration Time"),n=h["default"](e);this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> "+n}},t}(l["default"]);l["default"].registerComponent("DurationDisplay",p),n["default"]=p},{5:5,81:81,84:84}],34:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(84),h=r(f),p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"timeupdate",r.updateContent),r.on(n,"durationchange",r.updateContent),r}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){if(this.player_.duration()){var e=this.localize("Remaining Time"),t=h["default"](this.player_.remainingTime());t!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> -"+t)}},t}(l["default"]);l["default"].registerComponent("RemainingTimeDisplay",p),n["default"]=p},{5:5,81:81,84:84}],35:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(u["default"]);u["default"].registerComponent("TimeDivider",l),n["default"]=l},{5:5}],36:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(47),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=function(e){function t(n,i){o(this,t);var r=i.tracks,s=a(this,e.call(this,n,i));if(s.items.length<=1&&s.hide(),!r)return a(s);var u=h.bind(s,s.update);return r.addEventListener("removetrack",u),r.addEventListener("addtrack",u),s.player_.on("dispose",function(){r.removeEventListener("removetrack",u),r.removeEventListener("addtrack",u)}),s}return s(t,e),t}(l["default"]);d["default"].registerComponent("TrackButton",p),n["default"]=p},{47:47,5:5,83:83}],37:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(57),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f);e(39);var p=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.on(n,"volumechange",r.updateARIAAttributes),n.ready(h.bind(r,r.updateARIAAttributes)),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(){var e=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},t}(l["default"]);p.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",d["default"].registerComponent("VolumeBar",p),n["default"]=p},{39:39,5:5,57:57,83:83}],38:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s);e(37);var l=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return n.tech_&&n.tech_.featuresVolumeControl===!1&&a.addClass("vjs-hidden"),a.on(n,"loadstart",function(){n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(u["default"]);l.prototype.options_={children:["volumeBar"]},u["default"].registerComponent("VolumeControl",l),n["default"]=l},{37:37,5:5}],39:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(u["default"]);u["default"].registerComponent("VolumeLevel",l),n["default"]=l},{5:5}],40:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(83),l=r(u),c=e(5),d=i(c),f=e(54),h=i(f),p=e(53),g=i(p),m=e(11),v=i(m),y=e(37),_=i(y),b=function(e){function t(n){function i(){n.tech_&&n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),void 0===r.inline&&(r.inline=!0),void 0===r.vertical&&(r.vertical=r.inline?!1:!0),r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=!!r.vertical;var s=a(this,e.call(this,n,r));return s.on(n,"volumechange",s.volumeUpdate),s.on(n,"loadstart",s.volumeUpdate),i.call(s),s.on(n,"loadstart",i),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return s(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new h["default"](this.player_,{contentElType:"div"}),t=new _["default"](this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(){v["default"].prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],l.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(){this.on(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(){this.off(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(g["default"]);b.prototype.volumeUpdate=v["default"].prototype.update,b.prototype.controlText_="Mute",d["default"].registerComponent("VolumeMenuButton",b),n["default"]=b},{11:11,37:37,5:5,53:53,54:54,83:83}],41:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=e(50),c=i(l),d=e(87),f=i(d),h=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.on(n,"error",a.open),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(c["default"]);h.prototype.options_=f["default"](c["default"].prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),u["default"].registerComponent("ErrorDisplay",h),n["default"]=h},{5:5,50:50,87:87}],42:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}n.__esModule=!0;var r=e(82),o=i(r),a=function(){};a.prototype.allowedEvents_={},a.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},o.on(this,e,t),this.addEventListener=n},a.prototype.addEventListener=a.prototype.on,a.prototype.off=function(e,t){o.off(this,e,t)},a.prototype.removeEventListener=a.prototype.off,a.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},o.one(this,e,t),this.addEventListener=n},a.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=o.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),o.trigger(this,e)},a.prototype.dispatchEvent=a.prototype.trigger,n["default"]=a},{82:82}],43:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e(86),a=i(o),s=e(88),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){e.apply(this,arguments)},i={};s.isObject(t)?("function"==typeof t.init&&(a["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),u(n,e);for(var r in i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n};n["default"]=l},{86:86,88:88}],44:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;for(var r=e(94),o=i(r),a={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=s[0],l=void 0,c=0;c<s.length;c++)if(s[c][1]in o["default"]){l=s[c];break}if(l)for(var d=0;d<l.length;d++)a[u[d]]=l[d];n["default"]=a},{94:94}],45:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(u["default"]);u["default"].registerComponent("LoadingSpinner",l),n["default"]=l},{5:5}],46:[function(e,t,n){function i(e){return e instanceof i?e:("number"==typeof e?this.code=e:"string"==typeof e?this.message=e:r.isObject(e)&&("number"==typeof e.code&&(this.code=e.code),r.assign(this,e)),void(this.message||(this.message=i.defaultMessages[this.code]||"")))}n.__esModule=!0;var r=e(88);i.prototype.code=0,i.prototype.message="",i.prototype.status=null,i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<i.errorTypes.length;o++)i[i.errorTypes[o]]=o,i.prototype[i.errorTypes[o]]=o;n["default"]=i},{88:88}],47:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(3),l=r(u),c=e(5),d=r(c),f=e(49),h=r(f),p=e(81),g=i(p),m=e(83),v=i(m),y=e(91),_=r(y),b=function(e){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=a(this,e.call(this,n,i));return r.update(),r.enabled_=!0,r.el_.setAttribute("aria-haspopup","true"),r.el_.setAttribute("role","menuitem"),r.on("keydown",r.handleSubmenuKeyPress),r}return s(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createMenu=function(){var e=new h["default"](this.player_);if(this.options_.title){var t=g.createEl("li",{className:"vjs-menu-title",innerHTML:_["default"](this.options_.title),tabIndex:-1});e.children_.unshift(t),g.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.one(this.menu.contentEl(),"mouseleave",v.bind(this,function(){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(l["default"]);d["default"].registerComponent("MenuButton",b),n["default"]=b},{3:3,49:49,5:5,81:81,83:83,91:91}],48:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(3),u=i(s),l=e(5),c=i(l),d=e(88),f=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.selectable=i.selectable,a.selected(i.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return a(t,e),t.prototype.createEl=function(t,n,i){return e.prototype.createEl.call(this,"li",d.assign({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),i)},t.prototype.handleClick=function(){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},t}(u["default"]);c["default"].registerComponent("MenuItem",f),n["default"]=f},{3:3,5:5,88:88}],49:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)
}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(83),h=i(f),p=e(82),g=i(p),m=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.setAttribute("role","presentation"),n.appendChild(this.contentEl_),g.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice(),n=t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className);n&&t.shift(),t.length>0&&(0>e?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(l["default"]);l["default"].registerComponent("Menu",m),n["default"]=m},{5:5,81:81,82:82,83:83}],50:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(81),l=r(u),c=e(83),d=r(c),f=e(5),h=i(f),p="vjs-modal-dialog",g=27,m=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=l.createEl("div",{className:p+"-content"},{role:"document"}),r.descEl_=l.createEl("p",{className:p+"-description vjs-offscreen",id:r.el().getAttribute("aria-describedby")}),l.textContent(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return p+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===g&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function n(e){if("boolean"==typeof e){var n=this.closeable_=!!e,t=this.getChild("closeButton");if(n&&!t){var i=this.contentEl_;this.contentEl_=this.el_,t=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(t,"close",this.close)}!n&&t&&(this.off(t,"close",this.close),this.removeChild(t),t.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),l.insertContent(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),l.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},t}(h["default"]);m.prototype.options_={temporary:!0},h["default"].registerComponent("ModalDialog",m),n["default"]=m},{5:5,81:81,83:83}],51:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(94),d=r(c),f=e(95),h=r(f),p=e(82),g=i(p),m=e(81),v=i(m),y=e(83),_=i(y),b=e(85),T=i(b),w=e(78),E=i(w),S=e(86),C=r(S),P=e(91),A=r(P),I=e(90),x=e(79),O=e(89),M=i(O),k=e(44),R=r(k),D=e(46),L=r(D),N=e(97),j=r(N),F=e(88),U=e(87),B=r(U),V=e(69),H=r(V),G=e(50),q=r(G),W=e(62),z=r(W),Y=e(63),$=r(Y),K=e(76),X=r(K);e(61),e(59),e(55),e(68),e(45),e(1),e(4),e(8),e(41),e(71),e(60);var Q=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],J=function(e){function t(n,i,r){if(o(this,t),n.id=n.id||"vjs_video_"+T.newGUID(),i=F.assign(t.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&(i.language=s.getAttribute("lang"))}else for(var u=n;u&&1===u.nodeType;){if(v.getElAttributes(u).hasOwnProperty("lang")){i.language=u.getAttribute("lang");break}u=u.parentNode}var l=a(this,e.call(this,null,i,r));if(!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");l.tag=n,l.tagAttributes=n&&v.getElAttributes(n),l.language(l.options_.language),i.languages?!function(){var e={};Object.getOwnPropertyNames(i.languages).forEach(function(t){e[t.toLowerCase()]=i.languages[t]}),l.languages_=e}():l.languages_=t.prototype.options_.languages,l.cache_={},l.poster_=i.poster||"",l.controls_=!!i.controls,n.controls=!1,l.scrubbing_=!1,l.el_=l.createEl();var c=B["default"](l.options_);return i.plugins&&!function(){var e=i.plugins;Object.getOwnPropertyNames(e).forEach(function(t){"function"==typeof this[t]?this[t](e[t]):C["default"].error("Unable to find plugin:",t)},l)}(),l.options_.playerOptions=c,l.initChildren(),l.isAudio("audio"===n.nodeName.toLowerCase()),l.addClass(l.controls()?"vjs-controls-enabled":"vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label","audio player"):l.el_.setAttribute("aria-label","video player"),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),E.IS_IOS||l.addClass("vjs-workinghover"),t.players[l.id_]=l,l.userActive(!0),l.reportUserActivity(),l.listenForUserActivity_(),l.on("fullscreenchange",l.handleFullscreenChange_),l.on("stageclick",l.handleStageClick_),l}return s(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.tag,n=void 0,i=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");n=this.el_=i?t.parentNode:e.prototype.createEl.call(this,"div"),t.removeAttribute("width"),t.removeAttribute("height");var r=v.getElAttributes(t);if(Object.getOwnPropertyNames(r).forEach(function(e){"class"===e?n.className+=" "+r[e]:n.setAttribute(e,r[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused"),h["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=M.createStyleElement("vjs-styles-dimensions");var o=v.$(".vjs-styles-defaults"),a=v.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),u=0;u<s.length;u++){var l=s.item(u);v.addElClass(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!i&&t.parentNode.insertBefore(n,t),v.insertElFirst(t,n),this.children_.unshift(t),this.el_=n,n},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)this[n]=void 0;else{var i=parseFloat(t);if(isNaN(i))return C["default"].error('Improper value "'+t+'" supplied for for '+e),this;this[n]=i}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(h["default"].VIDEOJS_NO_DYNAMIC_STYLE===!0){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}var i=void 0,r=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),u=s[1]/s[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/u:this.videoWidth()||300,r=void 0!==this.height_?this.height_:i*u,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),M.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+i+"px;\n        height: "+r+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*u+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(z["default"].getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var i=F.assign({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(i.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(i.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);var r=z["default"].getTech(e);r||(r=l["default"].getComponent(e)),this.tech_=new r(i),this.tech_.ready(_.bind(this,this.handleTechReady_),!0),H["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_),Q.forEach(function(e){n.on(n.tech_,e,n["handleTech"+A["default"](e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||v.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=H["default"].textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw h["default"].alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){C["default"]("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(C["default"].warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(n){throw C["default"](n),n}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?C["default"]("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(C["default"]("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):C["default"](t),t}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(e){return void 0===e?this.cache_.duration||0:(e=parseFloat(e)||0,0>e&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function n(){var n=this.techGet_("buffered");return n&&n.length||(n=I.createTimeRange(0,0)),n},t.prototype.bufferedPercent=function(){return x.bufferedPercent(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=R["default"];return this.isFullscreen(!0),e.requestFullscreen?(g.on(d["default"],e.fullscreenchange,_.bind(this,function t(){this.isFullscreen(d["default"][e.fullscreenElement]),this.isFullscreen()===!1&&g.off(d["default"],e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=R["default"];return this.isFullscreen(!1),e.requestFullscreen?d["default"][e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d["default"].documentElement.style.overflow,g.on(d["default"],"keydown",_.bind(this,this.fullWindowOnEscKey)),d["default"].documentElement.style.overflow="hidden",v.addElClass(d["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,g.off(d["default"],"keydown",this.fullWindowOnEscKey),d["default"].documentElement.style.overflow=this.docOrigOverflow,v.removeElClass(d["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,n=0,i=this.options_.techOrder;n<i.length;n++){var r=A["default"](i[n]),o=z["default"].getTech(r);if(o||(o=l["default"].getComponent(r)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else C["default"].error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this,n=this.options_.techOrder.map(A["default"]).map(function(e){return[e,z["default"].getTech(e)||l["default"].getComponent(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(C["default"].error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(e,t,n){var i=void 0;return e.some(function(e){return t.some(function(t){return(i=n(e,t))?!0:void 0})}),i},r=void 0,o=function(e){return function(t,n){return e(n,t)}},a=function(e,n){var i=e[0],r=e[1];return r.canPlaySource(n,t.options_[i.toLowerCase()])?{source:n,tech:i}:void 0};return r=this.options_.sourceOrder?i(e,n,o(a)):i(n,e,a),r||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=z["default"].getTech(this.techName_);return t||(t=l["default"].getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_(A["default"](this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},t.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new L["default"](e),this.addClass("vjs-error"),C["default"].error("(CODE:"+this.error_.code+" "+L["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.reportUserActivity=function(){this.userActivity_=!0},t.prototype.userActive=function(e){return void 0!==e?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,i=_.bind(this,this.reportUserActivity),r=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())},o=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},a=function(){i(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",r),this.on("mouseup",a),this.on("keydown",i),this.on("keyup",i);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new X["default"],this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new $["default"],this.audioTracks_)},t.prototype.textTracks=function(){return this.tech_?this.tech_.textTracks():void 0},t.prototype.remoteTextTracks=function(){return this.tech_?this.tech_.remoteTextTracks():void 0},t.prototype.remoteTextTrackEls=function(){return this.tech_?this.tech_.remoteTextTrackEls():void 0},t.prototype.addTextTrack=function(e,t,n){return this.tech_?this.tech_.addTextTrack(e,t,n):void 0},t.prototype.addRemoteTextTrack=function(e,t){return this.tech_?this.tech_.addRemoteTextTrack(e,t):void 0},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track,n=void 0===t?arguments[0]:t;return this.tech_?this.tech_.removeRemoteTextTrack(n):void 0},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=String(e).toLowerCase(),this)},t.prototype.languages=function(){return B["default"](t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=B["default"](this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];i=B["default"](i),i.player=void 0,e.tracks[n]=i}return e},t.prototype.createModal=function(e,t){var n=this;t=t||{},t.content=e||"";var i=new q["default"](this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=v.getElAttributes(e),i=n["data-setup"];if(v.hasElClass(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=j["default"](i||"{}"),o=r[0],a=r[1];o&&C["default"].error(o),F.assign(n,a)}if(F.assign(t,n),e.hasChildNodes())for(var s=e.childNodes,u=0,l=s.length;l>u;u++){var c=s[u],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(v.getElAttributes(c)):"track"===d&&t.tracks.push(v.getElAttributes(c))}return t},t.prototype.flexNotSupported_=function(){var e=d["default"].createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(l["default"]);J.players={};var Z=h["default"].navigator;J.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Z&&(Z.languages&&Z.languages[0]||Z.userLanguage||Z.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){J.prototype[e]=function(){return this.techGet_(e)
}}),Q.forEach(function(e){J.prototype["handleTech"+A["default"](e)+"_"]=function(){return this.trigger(e)}}),l["default"].registerComponent("Player",J),n["default"]=J},{1:1,4:4,41:41,44:44,45:45,46:46,5:5,50:50,55:55,59:59,60:60,61:61,62:62,63:63,68:68,69:69,71:71,76:76,78:78,79:79,8:8,81:81,82:82,83:83,85:85,86:86,87:87,88:88,89:89,90:90,91:91,94:94,95:95,97:97}],52:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var r=e(51),o=i(r),a=function(e,t){o["default"].prototype[e]=t};n["default"]=a},{51:51}],53:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(3),u=i(s),l=e(5),c=i(l),d=function(e){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var a=o(this,e.call(this,n,i));return a.update(),a}return a(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(u["default"]);c["default"].registerComponent("PopupButton",d),n["default"]=d},{3:3,5:5}],54:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(83),h=i(f),p=e(82),g=i(p),m=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),g.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t}(l["default"]);l["default"].registerComponent("Popup",m),n["default"]=m},{5:5,81:81,82:82,83:83}],55:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(3),l=r(u),c=e(5),d=r(c),f=e(83),h=i(f),p=e(81),g=i(p),m=e(78),v=i(m),y=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.update(),n.on("posterchange",h.bind(r,r.update)),r}return s(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=g.createEl("div",{className:"vjs-poster",tabIndex:-1});return v.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=g.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(l["default"]);d["default"].registerComponent("PosterImage",y),n["default"]=y},{3:3,5:5,78:78,81:81,83:83}],56:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t&&(g=t),h["default"].setTimeout(m,e)}n.__esModule=!0,n.hasLoaded=n.autoSetupTimeout=n.autoSetup=void 0;var a=e(81),s=r(a),u=e(82),l=r(u),c=e(94),d=i(c),f=e(95),h=i(f),p=!1,g=void 0,m=function(){if(s.isReal()){var e=d["default"].getElementsByTagName("video"),t=d["default"].getElementsByTagName("audio"),n=[];if(e&&e.length>0)for(var i=0,r=e.length;r>i;i++)n.push(e[i]);if(t&&t.length>0)for(var a=0,u=t.length;u>a;a++)n.push(t[a]);if(n&&n.length>0)for(var l=0,c=n.length;c>l;l++){var f=n[l];if(!f||!f.getAttribute){o(1);break}if(void 0===f.player){var h=f.getAttribute("data-setup");null!==h&&g(f)}}else p||o(1)}};s.isReal()&&"complete"===d["default"].readyState?p=!0:l.one(h["default"],"load",function(){p=!0});var v=function(){return p};n.autoSetup=m,n.autoSetupTimeout=o,n.hasLoaded=v},{81:81,82:82,94:94,95:95}],57:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(5),l=r(u),c=e(81),d=i(c),f=e(88),h=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on("focus",r.handleFocus),r.on("blur",r.handleBlur),r.on("click",r.handleClick),r.on(n,"controlsvisible",r.update),r.on(n,r.playerEvent,r.update),r}return s(t,e),t.prototype.createEl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className=n.className+" vjs-slider",n=f.assign({tabIndex:0},n),i=f.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),d.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;d.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||0>e||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=n:t.el().style.width=n}}},t.prototype.calculateDistance=function(e){var t=d.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal"),this)},t}(l["default"]);l["default"].registerComponent("Slider",h),n["default"]=h},{5:5,81:81,88:88}],58:[function(e,t,n){function i(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),i=void 0;return-1!==n?i=n+1:(n=i=e.lastIndexOf("/")+1,0===n&&(n=i=e.length)),t.connection=e.substring(0,n),t.stream=e.substring(i,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t){var n=e.rtmpSourceHandler.canPlayType(t.type);return n?n:e.isStreamingSrc(t.src)?"maybe":""},e.rtmpSourceHandler.handleSource=function(t,n){var i=e.streamToParts(t.src);n.setRtmpConnection(i.connection),n.setRtmpStream(i.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}n.__esModule=!0,n["default"]=i},{}],59:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.charAt(0).toUpperCase()+e.slice(1);P["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function l(e){P[e]=function(){return this.el_.vjs_getProperty(e)}}n.__esModule=!0;for(var c=e(62),d=r(c),f=e(81),h=i(f),p=e(92),g=i(p),m=e(90),v=e(58),y=r(v),_=e(5),b=r(_),T=e(95),w=r(T),E=e(88),S=w["default"].navigator,C=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return n.source&&r.ready(function(){this.setSource(n.source)},!0),n.startTime&&r.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)},!0),w["default"].videojs=w["default"].videojs||{},w["default"].videojs.Flash=w["default"].videojs.Flash||{},w["default"].videojs.Flash.onReady=t.onReady,w["default"].videojs.Flash.onEvent=t.onEvent,w["default"].videojs.Flash.onError=t.onError,r.on("seeked",function(){this.lastSeekTarget_=void 0}),r}return s(t,e),t.prototype.createEl=function(){var e=this.options_;if(!e.swf){var n="5.1.0";e.swf="//vjs.zencdn.net/swf/"+n+"/video-js.swf"}var i=e.techId,r=E.assign({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),o=E.assign({wmode:"opaque",bgcolor:"#000000"},e.params),a=E.assign({id:i,name:i,"class":"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,r,o,a),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=g.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=t>n.start(0)?t:n.start(0),t=t<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function n(){if(0===this.readyState())return 0/0;var n=this.el_.vjs_getProperty("duration");return n>=0?n:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?m.createTimeRange():m.createTimeRange(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?m.createTimeRange():m.createTimeRange(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t}(d["default"]),P=C.prototype,A="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),I="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),x=0;x<A.length;x++)l(A[x]),u(A[x]);for(var O=0;O<I.length;O++)l(I[O]);C.isSupported=function(){return C.version()[0]>=10},d["default"].withSourceHandlers(C),C.nativeSourceHandler={},C.nativeSourceHandler.canPlayType=function(e){return e in C.formats?"maybe":""},C.nativeSourceHandler.canHandleSource=function(e){function t(e){var t=g.getFileExtension(e);return t?"video/"+t:""}var n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():t(e.src),C.nativeSourceHandler.canPlayType(n)},C.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},C.nativeSourceHandler.dispose=function(){},C.registerSourceHandler(C.nativeSourceHandler),C.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},C.onReady=function(e){var t=h.getEl(e),n=t&&t.tech;n&&n.el()&&C.checkReady(n)},C.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){C.checkReady(e)},50))},C.onEvent=function(e,t){var n=h.getEl(e).tech,i=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,i)},1)},C.onError=function(e,t){var n=h.getEl(e).tech;return"srcnotfound"===t?n.error(4):void n.error("FLASH: "+t)},C.version=function(){var e="0,0,0";try{e=new w["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{S.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(S.plugins["Shockwave Flash 2.0"]||S.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(n){}}return e.split(",")},C.embed=function(e,t,n,i){var r=C.getEmbedCode(e,t,n,i),o=h.createEl("div",{innerHTML:r}).childNodes[0];return o},C.getEmbedCode=function(e,t,n,i){var r='<object type="application/x-shockwave-flash" ',o="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;"}),n=E.assign({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){a+='<param name="'+e+'" value="'+n[e]+'" />'}),i=E.assign({data:e,width:"100%",height:"100%"},i),Object.getOwnPropertyNames(i).forEach(function(e){s+=e+'="'+i[e]+'" '}),""+r+s+">"+a+"</object>"},y["default"](C),b["default"].registerComponent("Flash",C),d["default"].registerTech("Flash",C),n["default"]=C},{5:5,58:58,62:62,81:81,88:88,90:90,92:92,95:95}],60:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return e.raw=t,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),d=e(62),f=r(d),h=e(5),p=r(h),g=e(81),m=i(g),v=e(92),y=i(v),_=e(83),b=i(_),T=e(86),w=r(T),E=e(98),S=r(E),C=e(78),P=i(C),A=e(94),I=r(A),x=e(95),O=r(x),M=e(88),k=e(87),R=r(k),D=e(91),L=r(D),N=function(e){function t(n,i){a(this,t);var r=s(this,e.call(this,n,i)),o=n.source,u=!1;if(o&&(r.el_.currentSrc!==o.src||n.tag&&3===n.tag.initNetworkState_)?r.setSource(o):r.handleLateInit_(r.el_),r.el_.hasChildNodes()){for(var l=r.el_.childNodes,d=l.length,f=[];d--;){var h=l[d],p=h.nodeName.toLowerCase();"track"===p&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(h),r.remoteTextTracks().addTrack_(h.track),u||r.el_.hasAttribute("crossorigin")||!y.isCrossOrigin(h.src)||(u=!0)):f.push(h))}for(var g=0;g<f.length;g++)r.el_.removeChild(f[g])}var m=["audio","video"];return m.forEach(function(e){var t=r.el()[e+"Tracks"],n=r[e+"Tracks"](),i=L["default"](e);r["featuresNative"+i+"Tracks"]&&t&&t.addEventListener&&(r["handle"+i+"TrackChange_"]=function(){n.trigger({type:"change",target:n,currentTarget:n,srcElement:n})},r["handle"+i+"TrackAdd_"]=function(e){return n.addTrack(e.track)},r["handle"+i+"TrackRemove_"]=function(e){return n.removeTrack(e.track)},t.addEventListener("change",r["handle"+i+"TrackChange_"]),t.addEventListener("addtrack",r["handle"+i+"TrackAdd_"]),t.addEventListener("removetrack",r["handle"+i+"TrackRemove_"]),r["removeOld"+i+"Tracks_"]=function(){return r.removeOldTracks_(n,t)},r.on("loadstart",r["removeOld"+i+"Tracks_"]))}),r.featuresNativeTextTracks&&(u&&w["default"].warn(S["default"](c)),r.handleTextTrackChange_=b.bind(r,r.handleTextTrackChange),r.handleTextTrackAdd_=b.bind(r,r.handleTextTrackAdd),r.handleTextTrackRemove_=b.bind(r,r.handleTextTrackRemove),r.proxyNativeTextTracks_()),(P.TOUCH_ENABLED||P.IS_IPHONE||P.IS_NATIVE_ANDROID)&&n.nativeControlsForTouch===!0&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}return u(t,e),t.prototype.dispose=function(){var n=this;["audio","video","text"].forEach(function(e){var t=L["default"](e),i=n.el_[e+"Tracks"];i&&i.removeEventListener&&(i.removeEventListener("change",n["handle"+t+"TrackChange_"]),i.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]),i.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"])),i&&n.off("loadstart",n["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=I["default"].createElement("video");var i=this.options_.tag&&m.getElAttributes(this.options_.tag),r=R["default"]({},i);P.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete r.controls,m.setElAttributes(e,M.assign(r,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}for(var o=["autoplay","preload","loop","muted"],a=o.length-1;a>=0;a--){var s=o[a],u={};"undefined"!=typeof this.options_[s]&&(u[s]=this.options_[s]),m.setElAttributes(e,u)}return e},t.prototype.handleLateInit_=function(e){var t=this;if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var n=function(){var e=!1,n=function(){e=!0};t.on("loadstart",n);var i=function(){e||this.trigger("loadstart")};return t.on("loadedmetadata",i),t.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),e||this.trigger("loadstart")}),{v:void 0}}();if("object"===("undefined"==typeof n?"undefined":l(n)))return n.v}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var n=[];if(t){for(var i=0;i<e.length;i++){for(var r=e[i],o=!1,a=0;a<t.length;a++)if(t[a]===r){o=!0;break}o||n.push(r)}for(var s=0;s<n.length;s++){var u=n[s];e.removeTrack_(u)}}},t.prototype.removeOldTextTracks_=function(){var e=this.textTracks(),t=this.el().textTracks;this.removeOldTracks_(e,t)},t.prototype.play=function(){var e=this.el_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(){})},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(t){w["default"](t,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&P.IS_ANDROID&&P.IS_CHROME&&0===this.el_.currentTime){var t=function(){var t=function n(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",n))};return e.on("timeupdate",t),{v:0/0}}();if("object"===("undefined"==typeof t?"undefined":l(t)))return t.v}return this.el_.duration||0/0},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0})};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=O["default"].navigator&&O["default"].navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=I["default"].createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t["default"]&&(n["default"]=t["default"]),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},t.prototype.addRemoteTextTrack=function(t,n){var i=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},t}(f["default"]);if(m.isReal()){N.TEST_VID=I["default"].createElement("video");var j=I["default"].createElement("track");j.kind="captions",j.srclang="en",j.label="English",N.TEST_VID.appendChild(j)}N.isSupported=function(){try{N.TEST_VID.volume=.5}catch(e){return!1}return!(!N.TEST_VID||!N.TEST_VID.canPlayType)},N.canControlVolume=function(){try{var e=N.TEST_VID.volume;return N.TEST_VID.volume=e/2+.1,e!==N.TEST_VID.volume}catch(t){return!1}},N.canControlPlaybackRate=function(){if(P.IS_ANDROID&&P.IS_CHROME)return!1;try{var e=N.TEST_VID.playbackRate;return N.TEST_VID.playbackRate=e/2+.1,e!==N.TEST_VID.playbackRate}catch(t){return!1}},N.supportsNativeTextTracks=function(){return P.IS_ANY_SAFARI},N.supportsNativeVideoTracks=function(){return!(!N.TEST_VID||!N.TEST_VID.videoTracks)},N.supportsNativeAudioTracks=function(){return!(!N.TEST_VID||!N.TEST_VID.audioTracks)},N.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],N.prototype.featuresVolumeControl=N.canControlVolume(),N.prototype.featuresPlaybackRate=N.canControlPlaybackRate(),N.prototype.movingMediaElementInDOM=!P.IS_IOS,N.prototype.featuresFullscreenResize=!0,N.prototype.featuresProgressEvents=!0,N.prototype.featuresTimeupdateEvents=!0,N.prototype.featuresNativeTextTracks=N.supportsNativeTextTracks(),N.prototype.featuresNativeVideoTracks=N.supportsNativeVideoTracks(),N.prototype.featuresNativeAudioTracks=N.supportsNativeAudioTracks();var F=N.TEST_VID&&N.TEST_VID.constructor.prototype.canPlayType,U=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,B=/^video\/mp4/i;N.patchCanPlayType=function(){P.ANDROID_VERSION>=4&&!P.IS_FIREFOX?N.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&U.test(e)?"maybe":F.call(this,e)}:P.IS_OLD_ANDROID&&(N.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&B.test(e)?"maybe":F.call(this,e)})},N.unpatchCanPlayType=function(){var e=N.TEST_VID.constructor.prototype.canPlayType;return N.TEST_VID.constructor.prototype.canPlayType=F,e},N.patchCanPlayType(),N.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(t){}}()}},N.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(t){}}()}},["paused","currentTime","buffered","volume","muted","poster","preload","autoplay","controls","loop","error","seeking","seekable","ended","defaultMuted","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){N.prototype[e]=function(){return this.el_[e]}}),["volume","muted","src","poster","preload","autoplay","loop","playbackRate"].forEach(function(e){N.prototype["set"+L["default"](e)]=function(t){this.el_[e]=t}}),["pause","load"].forEach(function(e){N.prototype[e]=function(){return this.el_[e]()}}),f["default"].withSourceHandlers(N),N.nativeSourceHandler={},N.nativeSourceHandler.canPlayType=function(e){try{return N.TEST_VID.canPlayType(e)}catch(t){return""}},N.nativeSourceHandler.canHandleSource=function(e){if(e.type)return N.nativeSourceHandler.canPlayType(e.type);if(e.src){var t=y.getFileExtension(e.src);return N.nativeSourceHandler.canPlayType("video/"+t)}return""},N.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},N.nativeSourceHandler.dispose=function(){},N.registerSourceHandler(N.nativeSourceHandler),p["default"].registerComponent("Html5",N),f["default"].registerTech("Html5",N),n["default"]=N},{5:5,62:62,78:78,81:81,83:83,86:86,87:87,88:88,91:91,92:92,94:94,95:95,98:98}],61:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e(5),u=i(s),l=e(62),c=i(l),d=e(91),f=i(d),h=function(e){function t(n,i,a){r(this,t);var s=o(this,e.call(this,n,i,a));if(i.playerOptions.sources&&0!==i.playerOptions.sources.length)n.src(i.playerOptions.sources);else for(var l=0,d=i.playerOptions.techOrder;l<d.length;l++){var h=f["default"](d[l]),p=c["default"].getTech(h);if(h||(p=u["default"].getComponent(h)),p&&p.isSupported()){n.loadTech_(h);break}}return s}return a(t,e),t}(u["default"]);u["default"].registerComponent("MediaLoader",h),n["default"]=h},{5:5,62:62,91:91}],62:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var a=new _["default"](r);return o.addTrack_(a),a}n.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=e(5),d=r(c),f=e(66),h=r(f),p=e(65),g=r(p),m=e(87),v=r(m),y=e(72),_=r(y),b=e(70),T=r(b),w=e(76),E=r(w),S=e(63),C=r(S),P=e(83),A=i(P),I=e(86),x=r(I),O=e(90),M=e(79),k=e(46),R=r(k),D=e(95),L=r(D),N=e(94),j=r(N),F=e(88),U=function(t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o(this,n),e.reportTouchActivity=!1;var r=a(this,t.call(this,null,e,i));return r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),r.textTracks_=e.textTracks,r.videoTracks_=e.videoTracks,r.audioTracks_=e.audioTracks,r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){e["native"+t+"Tracks"]===!1&&(r["featuresNative"+t+"Tracks"]=!1)}),e.nativeCaptions===!1&&(r.featuresNativeTextTracks=!1),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new T["default"],r.initTextTrackListeners(),r.initTrackListeners(),e.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}return s(n,t),n.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},n.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},n.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(A.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},n.prototype.onDurationChange=function(){this.duration_=this.duration()},n.prototype.buffered=function(){return O.createTimeRange(0,0)},n.prototype.bufferedPercent=function(){return M.bufferedPercent(this.buffered(),this.duration_)},n.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},n.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},n.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},n.prototype.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack_(r)}})},n.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.prototype.reset=function(){},n.prototype.error=function(e){return void 0!==e&&(this.error_=new R["default"](e),this.trigger("error")),this.error_},n.prototype.played=function(){return this.hasStarted_?O.createTimeRange(0,0):O.createTimeRange()},n.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.prototype.initTextTrackListeners=function(){var e=A.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",A.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},n.prototype.initTrackListeners=function(){var e=this,t=["video","audio"];t.forEach(function(t){var n=function(){e.trigger(t+"trackchange")},i=e[t+"Tracks"]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},n.prototype.addWebVttScript_=function(){var t=this;if(!L["default"].WebVTT&&null!==this.el().parentNode&&void 0!==this.el().parentNode){var n=function(){var n=e(99);if(!t.options_["vtt.js"]&&F.isPlain(n)&&Object.keys(n).length>0)return Object.keys(n).forEach(function(e){L["default"][e]=n[e]}),t.trigger("vttjsloaded"),{v:void 0};var i=j["default"].createElement("script");i.src=t.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",i.onload=function(){t.trigger("vttjsloaded")},i.onerror=function(){t.trigger("vttjserror")},t.on("dispose",function(){i.onload=null,i.onerror=null}),L["default"].WebVTT=!0,t.el().parentNode.appendChild(i)}();if("object"===("undefined"==typeof n?"undefined":l(n)))return n.v}},n.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){this.remoteTextTracks().on("addtrack",function(t){e.textTracks().addTrack_(t.track)}),this.remoteTextTracks().on("removetrack",function(t){e.textTracks().removeTrack_(t.track)}),this.on("ready",this.addWebVttScript_);var n=function(){return e.trigger("texttrackchange")},i=function(){n();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",n),"showing"===i.mode&&i.addEventListener("cuechange",n)}};i(),t.addEventListener("change",i),this.on("dispose",function(){t.removeEventListener("change",i)})}},n.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new E["default"],this.videoTracks_},n.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new C["default"],this.audioTracks_},n.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new T["default"],this.textTracks_},n.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new T["default"],this.remoteTextTracks_},n.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new g["default"],this.remoteTextTrackEls_},n.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return u(this,e,t,n)},n.prototype.createRemoteTextTrack=function(e){var t=v["default"](e,{tech:this});return new h["default"](t)},n.prototype.addRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=this.createRemoteTextTrack(e);return t!==!0&&t!==!1&&(x["default"].warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),t!==!0&&this.autoRemoteTextTracks_.addTrack_(n.track),n},n.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},n.prototype.setPoster=function(){},n.prototype.canPlayType=function(){return""},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");return n.techs_[e]=t,t},n.getTech=function(e){return n.techs_&&n.techs_[e]?n.techs_[e]:L["default"]&&L["default"].videojs&&L["default"].videojs[e]?(x["default"].warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),L["default"].videojs[e]):void 0},n}(d["default"]);U.prototype.textTracks_,U.prototype.audioTracks_,U.prototype.videoTracks_,U.prototype.featuresVolumeControl=!0,U.prototype.featuresFullscreenResize=!1,U.prototype.featuresPlaybackRate=!1,U.prototype.featuresProgressEvents=!1,U.prototype.featuresTimeupdateEvents=!1,U.prototype.featuresNativeTextTracks=!1,U.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],i=void 0,r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=void 0,o=0;o<i.length;o++)if(r=i[o].canHandleSource(t,n))return i[o];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:x["default"].error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},d["default"].registerComponent("Tech",U),d["default"].registerComponent("MediaTechController",U),U.registerTech("Tech",U),n["default"]=U},{46:46,5:5,63:63,65:65,66:66,70:70,72:72,76:76,79:79,83:83,86:86,87:87,88:88,90:90,94:94,95:95,99:99}],63:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(74),l=r(u),c=e(78),d=i(c),f=e(94),h=r(f),p=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].enabled=!1)},g=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,u=r.length-1;u>=0;u--)if(r[u].enabled){p(r,r[u]);break}if(d.IS_IE8){s=h["default"].createElement("custom");for(var c in l["default"].prototype)"constructor"!==c&&(s[c]=l["default"].prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=n=a(this,e.call(this,r,s)),s.changing_=!1,i=s,a(n,i)}return s(t,e),t.prototype.addTrack_=function(t){var n=this;t.enabled&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,p(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(l["default"]);n["default"]=g},{74:74,78:78,94:94}],64:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(73),l=e(75),c=r(l),d=e(87),f=r(d),h=e(78),p=i(h),g=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=f["default"](r,{kind:u.AudioTrackKind[r.kind]||""}),l=n=a(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(l[d]=t.prototype[d]);return Object.defineProperty(l,"enabled",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("enabledchange"))}}),s.enabled&&(l.enabled=s.enabled),l.loaded_=!0,i=l,a(n,i)}return s(t,e),t}(c["default"]);n["default"]=g},{73:73,75:75,78:78,87:87}],65:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e(78),s=r(a),u=e(94),l=i(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e);var n=this;if(s.IS_IE8){n=l["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var r=0,a=t.length;a>r;r++)n.addTrackElement_(t[r]);return s.IS_IE8?n:void 0}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,i=this.trackElements_.length;i>n;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;n>t;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();n["default"]=c},{78:78,94:94}],66:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(78),l=r(u),c=e(94),d=i(c),f=e(42),h=i(f),p=e(72),g=i(p),m=0,v=1,y=2,_=3,b=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var i=a(this,e.call(this)),r=void 0,s=i;if(l.IS_IE8){s=d["default"].createElement("custom");for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}var c=new g["default"](n);if(s.kind=c.kind,s.src=c.src,s.srclang=c.language,s.label=c.label,s["default"]=c["default"],Object.defineProperty(s,"readyState",{get:function(){return r}}),Object.defineProperty(s,"track",{get:function(){return c}}),r=m,c.addEventListener("loadeddata",function(){r=y,s.trigger({type:"load",target:s})}),l.IS_IE8){var f;return f=s,a(i,f)}return i}return s(t,e),t}(h["default"]);b.prototype.allowedEvents_={load:"load"},b.NONE=m,b.LOADING=v,b.LOADED=y,b.ERROR=_,n["default"]=b},{42:42,72:72,78:78,94:94}],67:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e(78),s=r(a),u=e(94),l=i(u),c=function(){function e(t){o(this,e);var n=this;if(s.IS_IE8){n=l["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}return e.prototype.setCues_.call(n,t),Object.defineProperty(n,"length",{get:function(){return this.length_}}),s.IS_IE8?n:void 0}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(i>t)for(n=t;i>n;n++)r.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,i=this.length;i>n;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}();n["default"]=c},{78:78,94:94}],68:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function l(e,t,n){try{e.style[t]=n}catch(i){return}}n.__esModule=!0;var c=e(5),d=r(c),f=e(83),h=i(f),p=e(95),g=r(p),m="#222",v="#ccc",y={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},_=function(e){function t(n,i,r){o(this,t);var s=a(this,e.call(this,n,i,r));return n.on("loadstart",h.bind(s,s.toggleDisplay)),n.on("texttrackchange",h.bind(s,s.updateDisplay)),n.ready(h.bind(s,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",h.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var i={captions:1,subtitles:1},r=this.player_.textTracks(),o=void 0,a=void 0;if(r){for(var s=0;s<r.length;s++){var u=r[s];u["default"]&&("descriptions"!==u.kind||o?u.kind in i&&!a&&(a=u):o=u)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return s(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof g["default"].WebVTT&&g["default"].WebVTT.processCues(g["default"],[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,n=null,i=e.length;i--;){var r=e[i];"showing"===r.mode&&("descriptions"===r.kind?t=r:n=r)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},t.prototype.updateForTrack=function(e){if("function"==typeof g["default"].WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],i=0;i<e.activeCues.length;i++)n.push(e.activeCues[i]);g["default"].WebVTT.processCues(g["default"],n,this.el_);for(var r=n.length;r--;){var o=n[r];if(o){var a=o.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&l(a.firstChild,"color",u(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&l(a.firstChild,"backgroundColor",u(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?l(a,"backgroundColor",u(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+m+", 2px 2px 4px "+m+", 2px 2px 5px "+m:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+m+", 2px 2px "+m+", 3px 3px "+m:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+v+", 0 1px "+v+", -1px -1px "+m+", 0 -1px "+m:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+m+", 0 0 4px "+m+", 0 0 4px "+m+", 0 0 4px "+m)),t.fontPercent&&1!==t.fontPercent){var s=g["default"].parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=y[t.fontFamily])}}}},t}(d["default"]);d["default"].registerComponent("TextTrackDisplay",_),n["default"]=_},{5:5,83:83,95:95}],69:[function(e,t,n){n.__esModule=!0;var i=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},r=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track}),r=Array.prototype.map.call(t,function(e){var t=i(e.track);return e.src&&(t.src=e.src),t});return r.concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(i))},o=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()};n["default"]={textTracksToJson:r,jsonToTextTracks:o,trackToJson_:i}},{}],70:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(74),l=r(u),c=e(83),d=i(c),f=e(78),h=i(f),p=e(94),g=r(p),m=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);var s=void 0;if(h.IS_IE8){s=g["default"].createElement("custom");for(var u in l["default"].prototype)"constructor"!==u&&(s[u]=l["default"].prototype[u]);for(var c in t.prototype)"constructor"!==c&&(s[c]=t.prototype[c])}return s=n=a(this,e.call(this,r,s)),i=s,a(n,i)}return s(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",d.bind(this,function(){this.trigger("change")}))},t}(l["default"]);n["default"]=m},{74:74,78:78,83:83,94:94}],71:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return t&&(e=t(e)),e&&"none"!==e?e:void 0}function l(e,t){var n=e.options[e.options.selectedIndex].value;return u(n,t)}function c(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(u(e.options[i].value,n)===t){e.selectedIndex=i;break}}n.__esModule=!0;var d=e(95),f=r(d),h=e(5),p=r(h),g=e(81),m=e(83),v=i(m),y=e(88),_=i(y),b=e(86),T=r(b),w="vjs-text-track-settings",E=["#000","Black"],S=["#00F","Blue"],C=["#0FF","Cyan"],P=["#0F0","Green"],A=["#F0F","Magenta"],I=["#F00","Red"],x=["#FFF","White"],O=["#FF0","Yellow"],M=["1","Opaque"],k=["0.5","Semi-Transparent"],R=["0","Transparent"],D={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[E,x,I,P,S,O,A,C]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[M,k,R]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[x,E,I,P,S,O,A,C]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[M,k]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[R,k,M]}};D.windowColor.options=D.backgroundColor.options;var L=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.setDefaults(),r.hide(),r.updateDisplay=v.bind(r,r.updateDisplay),void 0===i.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.hide()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),_.each(D,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}return s(t,e),t.prototype.createElSelect_=function(e){var t=this,n=D[e],i=n.id.replace("%s",this.id_);return[g.createEl("label",{className:"vjs-label",textContent:n.label},{"for":i}),g.createEl("select",{id:i},void 0,n.options.map(function(e){return g.createEl("option",{textContent:t.localize(e[1]),value:e[0]})}))]},t.prototype.createElFgColor_=function(){var e=g.createEl("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),n=g.createEl("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return g.createEl("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElBgColor_=function(){var e=g.createEl("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),n=g.createEl("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return g.createEl("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElWinColor_=function(){var e=g.createEl("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),n=g.createEl("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return g.createEl("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[e].concat(t,n))},t.prototype.createElColors_=function(){return g.createEl("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},t.prototype.createElFont_=function(){var e=g.createEl("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),t=g.createEl("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),n=g.createEl("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return g.createEl("div",{className:"vjs-tracksettings-font"},void 0,[e,t,n])},t.prototype.createElControls_=function(){var e=g.createEl("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=g.createEl("button",{className:"vjs-done-button",textContent:"Done"});return g.createEl("div",{className:"vjs-tracksettings-controls"},void 0,[e,t])},t.prototype.createEl=function(){var e=g.createEl("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=g.createEl("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),n=g.createEl("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),i=g.createEl("div",void 0,{role:"document"},[t,n,e]);
return g.createEl("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":n.id},i)},t.prototype.getValues=function(){var e=this;return _.reduce(D,function(t,n,i){var r=l(e.$(n.selector),n.parser);return void 0!==r&&(t[i]=r),t},{})},t.prototype.setValues=function(e){var t=this;_.each(D,function(n,i){c(t.$(n.selector),e[i],n.parser)})},t.prototype.setDefaults=function(){var e=this;_.each(D,function(t){var n=t.hasOwnProperty("default")?t["default"]:0;e.$(t.selector).selectedIndex=n})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(f["default"].localStorage.getItem(w))}catch(t){T["default"].warn(t)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?f["default"].localStorage.setItem(w,JSON.stringify(e)):f["default"].localStorage.removeItem(w)}catch(t){T["default"].warn(t)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(p["default"]);p["default"].registerComponent("TextTrackSettings",L),n["default"]=L},{5:5,81:81,83:83,86:86,88:88,95:95}],72:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(67),l=r(u),c=e(83),d=i(c),f=e(73),h=e(86),p=r(h),g=e(95),m=r(g),v=e(75),y=r(v),_=e(92),b=e(105),T=r(b),w=e(87),E=r(w),S=e(78),C=i(S),P=function(e,t){var n=new m["default"].WebVTT.Parser(m["default"],m["default"].vttjs,m["default"].WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(m["default"].console&&m["default"].console.groupCollapsed&&m["default"].console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return p["default"].error(e)}),m["default"].console&&m["default"].console.groupEnd&&m["default"].console.groupEnd()),n.flush()},A=function(e,t){var n={uri:e},i=_.isCrossOrigin(e);i&&(n.cors=i),T["default"](n,d.bind(this,function(e,n,i){return e?p["default"].error(e,n):(t.loaded_=!0,void("function"!=typeof m["default"].WebVTT?t.tech_&&!function(){var e=function(){return P(i,t)};t.tech_.on("vttjsloaded",e),t.tech_.on("vttjserror",function(){p["default"].error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",e)})}():P(i,t)))}))},I=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,t),!r.tech)throw new Error("A tech was not provided.");var s=E["default"](r,{kind:f.TextTrackKind[r.kind]||"subtitles",language:r.language||r.srclang||""}),u=f.TextTrackMode[s.mode]||"disabled",c=s["default"];"metadata"!==s.kind&&"chapters"!==s.kind||(u="hidden");var h=n=a(this,e.call(this,s));if(h.tech_=s.tech,C.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(h[p]=t.prototype[p]);h.cues_=[],h.activeCues_=[];var g=new l["default"](h.cues_),m=new l["default"](h.activeCues_),v=!1,y=d.bind(h,function(){this.activeCues,v&&(this.trigger("cuechange"),v=!1)});return"disabled"!==u&&h.tech_.on("timeupdate",y),Object.defineProperty(h,"default",{get:function(){return c},set:function(){}}),Object.defineProperty(h,"mode",{get:function(){return u},set:function(e){f.TextTrackMode[e]&&(u=e,"showing"===u&&this.tech_.on("timeupdate",y),this.trigger("modechange"))}}),Object.defineProperty(h,"cues",{get:function(){return this.loaded_?g:null},set:function(){}}),Object.defineProperty(h,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return m;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;i>n;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(v=!1,t.length!==this.activeCues_.length)v=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(v=!0);return this.activeCues_=t,m.setCues_(this.activeCues_),m},set:function(){}}),s.src?(h.src=s.src,A(s.src,h)):h.loaded_=!0,i=h,a(n,i)}return s(t,e),t.prototype.addCue=function(e){var t=this.tech_.textTracks();if(t)for(var n=0;n<t.length;n++)t[n]!==this&&t[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=!1,n=0,i=this.cues_.length;i>n;n++){var r=this.cues_[n];r===e&&(this.cues_.splice(n,1),t=!0)}t&&this.cues.setCues_(this.cues_)},t}(y["default"]);I.prototype.allowedEvents_={cuechange:"cuechange"},n["default"]=I},{105:105,67:67,73:73,75:75,78:78,83:83,86:86,87:87,92:92,95:95}],73:[function(e,t,n){n.__esModule=!0,n.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},n.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},n.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},n.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},{}],74:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(42),l=r(u),c=e(78),d=i(c),f=e(94),h=r(f),p=function(e){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t);var s=a(this,e.call(this));if(!r&&(r=s,d.IS_IE8)){r=h["default"].createElement("custom");for(var u in t.prototype)"constructor"!==u&&(r[u]=t.prototype[u])}r.tracks_=[],Object.defineProperty(r,"length",{get:function(){return this.tracks_.length}});for(var l=0;l<i.length;l++)r.addTrack_(i[l]);return n=r,a(s,n)}return s(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,i=this.length;i>n;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,i=this.length;i>n;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(l["default"]);p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var g in p.prototype.allowedEvents_)p.prototype["on"+g]=null;n["default"]=p},{42:42,78:78,94:94}],75:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(78),l=r(u),c=e(94),d=i(c),f=e(85),h=r(f),p=e(42),g=i(p),m=function(e){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=a(this,e.call(this)),s=r;if(l.IS_IE8){s=d["default"].createElement("custom");for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}var c={id:i.id||"vjs_track_"+h.newGUID(),kind:i.kind||"",label:i.label||"",language:i.language||""},f=function(e){Object.defineProperty(s,e,{get:function(){return c[e]},set:function(){}})};for(var p in c)f(p);return n=s,a(r,n)}return s(t,e),t}(g["default"]);n["default"]=m},{42:42,78:78,85:85,94:94}],76:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(74),l=r(u),c=e(78),d=i(c),f=e(94),h=r(f),p=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].selected=!1)},g=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,u=r.length-1;u>=0;u--)if(r[u].selected){p(r,r[u]);break}if(d.IS_IE8){s=h["default"].createElement("custom");for(var c in l["default"].prototype)"constructor"!==c&&(s[c]=l["default"].prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=n=a(this,e.call(this,r,s)),s.changing_=!1,Object.defineProperty(s,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i=s,a(n,i)}return s(t,e),t.prototype.addTrack_=function(t){var n=this;t.selected&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,p(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(l["default"]);n["default"]=g},{74:74,78:78,94:94}],77:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var u=e(73),l=e(75),c=r(l),d=e(87),f=r(d),h=e(78),p=i(h),g=function(e){function t(){var n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=f["default"](r,{kind:u.VideoTrackKind[r.kind]||""}),l=n=a(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(l[d]=t.prototype[d]);return Object.defineProperty(l,"selected",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("selectedchange"))}}),s.selected&&(l.selected=s.selected),i=l,a(n,i)}return s(t,e),t}(c["default"]);n["default"]=g},{73:73,75:75,78:78,87:87}],78:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}n.__esModule=!0,n.BACKGROUND_SIZE_SUPPORTED=n.TOUCH_ENABLED=n.IS_ANY_SAFARI=n.IS_SAFARI=n.IE_VERSION=n.IS_IE8=n.IS_CHROME=n.IS_EDGE=n.IS_FIREFOX=n.IS_NATIVE_ANDROID=n.IS_OLD_ANDROID=n.ANDROID_VERSION=n.IS_ANDROID=n.IOS_VERSION=n.IS_IOS=n.IS_IPOD=n.IS_IPHONE=n.IS_IPAD=void 0;var o=e(81),a=r(o),s=e(95),u=i(s),l=u["default"].navigator&&u["default"].navigator.userAgent||"",c=/AppleWebKit\/([\d.]+)/i.exec(l),d=c?parseFloat(c.pop()):null,f=n.IS_IPAD=/iPad/i.test(l),h=n.IS_IPHONE=/iPhone/i.test(l)&&!f,p=n.IS_IPOD=/iPod/i.test(l),g=n.IS_IOS=h||f||p,m=(n.IOS_VERSION=function(){var e=l.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),n.IS_ANDROID=/Android/i.test(l)),v=n.ANDROID_VERSION=function(){var e=l.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t?t:null}(),y=(n.IS_OLD_ANDROID=m&&/webkit/i.test(l)&&2.3>v,n.IS_NATIVE_ANDROID=m&&5>v&&537>d,n.IS_FIREFOX=/Firefox/i.test(l),n.IS_EDGE=/Edge/i.test(l)),_=n.IS_CHROME=!y&&/Chrome/i.test(l),b=(n.IS_IE8=/MSIE\s8\.0/.test(l),n.IE_VERSION=function(e){return e&&parseFloat(e[1])}(/MSIE\s(\d+)\.\d/.exec(l)),n.IS_SAFARI=/Safari/i.test(l)&&!_&&!m&&!y);n.IS_ANY_SAFARI=b||g,n.TOUCH_ENABLED=a.isReal()&&("ontouchstart"in u["default"]||u["default"].DocumentTouch&&u["default"].document instanceof u["default"].DocumentTouch),n.BACKGROUND_SIZE_SUPPORTED=a.isReal()&&"backgroundSize"in u["default"].document.createElement("video").style},{81:81,95:95}],79:[function(e,t,n){function i(e,t){var n=0,i=void 0,o=void 0;if(!t)return 0;e&&e.length||(e=r.createTimeRange(0,0));for(var a=0;a<e.length;a++)i=e.start(a),o=e.end(a),o>t&&(o=t),n+=o-i;return n/t}n.__esModule=!0,n.bufferedPercent=i;var r=e(90)},{90:90}],80:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!e||!t)return"";if("function"==typeof a["default"].getComputedStyle){var n=a["default"].getComputedStyle(e);return n?n[t]:""}return e.currentStyle[t]||""}n.__esModule=!0,n["default"]=r;var o=e(95),a=i(o)},{95:95}],81:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return e.raw=t,e}function a(e){return"string"==typeof e&&/\S/.test(e)}function s(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function u(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function l(){return U["default"]===V["default"].document&&"undefined"!=typeof U["default"].createElement}function c(e){return $.isObject(e)&&1===e.nodeType}function d(e){return function(t,n){if(!a(t))return U["default"][e](null);a(n)&&(n=U["default"].querySelector(n));var i=c(n)?n:U["default"];return i[e]&&i[e](t)}}function f(e){return 0===e.indexOf("#")&&(e=e.slice(1)),U["default"].getElementById(e)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],r=U["default"].createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(W["default"].warn(Y["default"](j,e,n)),r.setAttribute(e,n)):"textContent"===e?p(r,n):r[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){r.setAttribute(e,n[e])}),i&&L(r,i),r}function p(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function g(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function m(e){var t=e[X];return t||(t=e[X]=G.newGUID()),K[t]||(K[t]={}),K[t]}function v(e){var t=e[X];return!!t&&!!Object.getOwnPropertyNames(K[t]).length}function y(e){var t=e[X];if(t){delete K[t];try{delete e[X]}catch(n){e.removeAttribute?e.removeAttribute(X):e[X]=null}}}function _(e,t){return s(t),e.classList?e.classList.contains(t):u(t).test(e.className)}function b(e,t){return e.classList?e.classList.add(t):_(e,t)||(e.className=(e.className+" "+t).trim()),e}function T(e,t){return e.classList?e.classList.remove(t):(s(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function w(e,t,n){var i=_(e,t);return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i?(n?b(e,t):T(e,t),e):void 0}function E(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var i=t[n];null===i||"undefined"==typeof i||i===!1?e.removeAttribute(n):e.setAttribute(n,i===!0?"":i)})}function S(e){var t={},n=",autoplay,controls,loop,muted,default,";if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,r=i.length-1;r>=0;r--){var o=i[r].name,a=i[r].value;"boolean"!=typeof e[o]&&-1===n.indexOf(","+o+",")||(a=null!==a),t[o]=a}return t}function C(e,t){return e.getAttribute(t)}function P(e,t,n){e.setAttribute(t,n)}function A(e,t){e.removeAttribute(t)}function I(){U["default"].body.focus(),U["default"].onselectstart=function(){return!1}}function x(){U["default"].onselectstart=function(){return!0}}function O(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=U["default"].documentElement,i=U["default"].body,r=n.clientLeft||i.clientLeft||0,o=V["default"].pageXOffset||i.scrollLeft,a=t.left+o-r,s=n.clientTop||i.clientTop||0,u=V["default"].pageYOffset||i.scrollTop,l=t.top+u-s;return{left:Math.round(a),top:Math.round(l)}}function M(e,t){var n={},i=O(e),r=e.offsetWidth,o=e.offsetHeight,a=i.top,s=i.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-u+o)/o)),n.x=Math.max(0,Math.min(1,(l-s)/r)),n}function k(e){return $.isObject(e)&&3===e.nodeType}function R(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function D(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),c(e)||k(e)?e:"string"==typeof e&&/\S/.test(e)?U["default"].createTextNode(e):void 0}).filter(function(e){return e})}function L(e,t){return D(t).forEach(function(t){return e.appendChild(t)}),e}function N(e,t){return L(R(e),t)}n.__esModule=!0,n.$$=n.$=void 0;var j=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);n.isReal=l,n.isEl=c,n.getEl=f,n.createEl=h,n.textContent=p,n.insertElFirst=g,n.getElData=m,n.hasElData=v,n.removeElData=y,n.hasElClass=_,n.addElClass=b,n.removeElClass=T,n.toggleElClass=w,n.setElAttributes=E,n.getElAttributes=S,n.getAttribute=C,n.setAttribute=P,n.removeAttribute=A,n.blockTextSelection=I,n.unblockTextSelection=x,n.findElPosition=O,n.getPointerPosition=M,n.isTextNode=k,n.emptyEl=R,n.normalizeContent=D,n.appendContent=L,n.insertContent=N;var F=e(94),U=r(F),B=e(95),V=r(B),H=e(85),G=i(H),q=e(86),W=r(q),z=e(98),Y=r(z),$=e(88),K={},X="vdata"+(new Date).getTime();n.$=d("querySelector"),n.$$=d("querySelectorAll")},{85:85,86:86,88:88,94:94,95:95,98:98}],82:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){var n=h.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&h.removeElData(e)}function a(e,t,n,i){n.forEach(function(n){e(t,n,i)})}function s(e){function t(){return!0}function n(){return!1}return e&&e.isPropagationStopped||!function(){var i=e||_["default"].event;e={};for(var r in i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||T["default"]),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var o=T["default"].documentElement,a=T["default"].body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}(),e}function u(e,t,n){if(Array.isArray(t))return a(u,e,t,n);var i=h.getElData(e);i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=g.newGUID()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=s(t);var r=i.handlers[t.type];if(r)for(var o=r.slice(0),a=0,u=o.length;u>a&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(l){v["default"].error(l)}}}),1===i.handlers[t].length&&(e.addEventListener?e.addEventListener(t,i.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+t,i.dispatcher))}function l(e,t,n){if(h.hasElData(e)){var i=h.getElData(e);if(i.handlers){if(Array.isArray(t))return a(l,e,t,n);var r=function(t){i.handlers[t]=[],o(e,t)};if(t){var s=i.handlers[t];if(s){if(!n)return void r(t);if(n.guid)for(var u=0;u<s.length;u++)s[u].guid===n.guid&&s.splice(u--,1);o(e,t)}}else for(var c in i.handlers)r(c)}}}function c(e,t,n){var i=h.hasElData(e)?h.getElData(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=s(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&t.bubbles===!0)c.call(null,r,t,n);else if(!r&&!t.defaultPrevented){var o=h.getElData(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function d(e,t,n){if(Array.isArray(t))return a(d,e,t,n);var i=function r(){l(e,t,r),n.apply(this,arguments)};i.guid=n.guid=n.guid||g.newGUID(),u(e,t,i)}n.__esModule=!0,n.fixEvent=s,n.on=u,n.off=l,n.trigger=c,n.one=d;var f=e(81),h=r(f),p=e(85),g=r(p),m=e(86),v=i(m),y=e(95),_=i(y),b=e(94),T=i(b)},{81:81,85:85,86:86,94:94,95:95}],83:[function(e,t,n){n.__esModule=!0,n.throttle=n.bind=void 0;var i=e(85);n.bind=function(e,t,n){t.guid||(t.guid=i.newGUID());var r=function(){return t.apply(e,arguments)};return r.guid=n?n+"_"+t.guid:t.guid,r},n.throttle=function(e,t){var n=Date.now(),i=function(){var i=Date.now();i-n>=t&&(e.apply(void 0,arguments),n=i)};return i}},{85:85}],84:[function(e,t,n){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=0>e?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=r>0||a>0?r+":":"",i=((r||o>=10)&&10>i?"0"+i:i)+":",n=10>n?"0"+n:n,r+i+n}n.__esModule=!0,n["default"]=i},{}],85:[function(e,t,n){function i(){return r++}n.__esModule=!0,n.newGUID=i;var r=1},{}],86:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.logByType=void 0;var r=e(95),o=i(r),a=e(78),s=e(88),u=void 0,l=n.logByType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!a.IE_VERSION&&a.IE_VERSION<11;"log"!==e&&t.unshift(e.toUpperCase()+":"),u.history.push(t),t.unshift("VIDEOJS:");var i=o["default"].console&&o["default"].console[e];i&&(n&&(t=t.map(function(e){if(s.isObject(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),i.apply?i[Array.isArray(t)?"apply":"call"](o["default"].console,t):i(t))};u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];l("log",t)},u.history=[],u.error=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return l("error",t)},u.warn=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return l("warn",t)},n["default"]=u},{78:78,88:88,95:95}],87:[function(e,t,n){function i(){for(var e={},t=arguments.length,n=Array(t),o=0;t>o;o++)n[o]=arguments[o];return n.forEach(function(t){t&&r.each(t,function(t,n){return r.isPlain(t)?(r.isPlain(e[n])||(e[n]={}),void(e[n]=i(e[n],t))):void(e[n]=t)})}),e}n.__esModule=!0,n["default"]=i;var r=e(88)},{88:88}],88:[function(e,t,n){function i(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(e).reduce(function(n,i){return t(n,e[i],i)},n)}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(n)):(n.forEach(function(t){t&&i(t,function(t,n){e[n]=t})}),e)}function a(e){return!!e&&"object"===("undefined"==typeof e?"undefined":u(e))}function s(e){return a(e)&&"[object Object]"===l.call(e)&&e.constructor===Object}n.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.each=i,n.reduce=r,n.assign=o,n.isObject=a,n.isPlain=s;var l=Object.prototype.toString},{}],89:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.setTextContent=n.createStyleElement=void 0;var r=e(94),o=i(r);n.createStyleElement=function(e){var t=o["default"].createElement("style");return t.className=e,t},n.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},{94:94}],90:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){if(0>t||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+n+").")}function o(e,t,n,i){return void 0===i&&(l["default"].warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),i=0),r(e,i,n.length-1),n[i][t]}function a(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:o.bind(null,"start",0,e),end:o.bind(null,"end",1,e)}}function s(e,t){return Array.isArray(e)?a(e):void 0===e||void 0===t?a():a([[e,t]])}n.__esModule=!0,n.createTimeRange=void 0,n.createTimeRanges=s;var u=e(86),l=i(u);n.createTimeRange=s},{86:86}],91:[function(e,t,n){function i(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}n.__esModule=!0,n["default"]=i},{}],92:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0,n.isCrossOrigin=n.getFileExtension=n.getAbsoluteURL=n.parseUrl=void 0;var r=e(94),o=i(r),a=e(95),s=i(a),u=n.parseUrl=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o["default"].createElement("a");n.href=e;var i=""===n.host&&"file:"!==n.protocol,r=void 0;i&&(r=o["default"].createElement("div"),r.innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),o["default"].body.appendChild(r));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),i&&o["default"].body.removeChild(r),a};n.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=o["default"].createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},n.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},n.isCrossOrigin=function(e){var t=s["default"].location,n=u(e),i=":"===n.protocol?t.protocol:n.protocol,r=i+n.host!==t.protocol+t.host;return r}},{94:94,95:95}],93:[function(t,n,i){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){var i=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),a.getPlayers()[e])return t&&B["default"].warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&a.getPlayers()[e].ready(n),a.getPlayers()[e];i=H.getEl(e)}else i=e;if(!i||!i.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(i.player||E["default"].players[i.playerId])return i.player||E["default"].players[i.playerId];t=t||{},a.hooks("beforesetup").forEach(function(e){var n=e(i,A["default"](t));return!Y.isObject(n)||Array.isArray(n)?void B["default"].error("please return an object in beforesetup hooks"):void(t=A["default"](t,n))});var r=v["default"].getComponent("Player"),o=new r(i,t,n);return a.hooks("setup").forEach(function(e){return e(o)}),o}i.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=t(95),l=o(u),c=t(94),d=o(c),f=t(56),h=r(f),p=t(89),g=r(p),m=t(5),v=o(m),y=t(42),_=o(y),b=t(82),T=r(b),w=t(51),E=o(w),S=t(52),C=o(S),P=t(87),A=o(P),I=t(83),x=r(I),O=t(72),M=o(O),k=t(64),R=o(k),D=t(77),L=o(D),N=t(90),j=t(84),F=o(j),U=t(86),B=o(U),V=t(81),H=r(V),G=t(78),q=r(G),W=t(92),z=r(W),Y=t(88),$=t(80),K=o($),X=t(43),Q=o(X),J=t(105),Z=o(J),et=t(62),tt=o(et);if("undefined"==typeof HTMLVideoElement&&H.isReal()&&(d["default"].createElement("video"),d["default"].createElement("audio"),d["default"].createElement("track")),a.hooks_={},a.hooks=function(e,t){return a.hooks_[e]=a.hooks_[e]||[],t&&(a.hooks_[e]=a.hooks_[e].concat(t)),a.hooks_[e]},a.hook=function(e,t){a.hooks(e,t)},a.removeHook=function(e,t){var n=a.hooks(e).indexOf(t);return!(-1>=n||(a.hooks_[e]=a.hooks_[e].slice(),a.hooks_[e].splice(n,1),0))},l["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0&&H.isReal()){var nt=H.$(".vjs-styles-defaults");if(!nt){nt=g.createStyleElement("vjs-styles-defaults");var it=H.$("head");it&&it.insertBefore(nt,it.firstChild),g.setTextContent(nt,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")
}}h.autoSetupTimeout(1,a),a.VERSION="5.16.0",a.options=E["default"].prototype.options_,a.getPlayers=function(){return E["default"].players},a.players=E["default"].players,a.getComponent=v["default"].getComponent,a.registerComponent=function(e,t){tt["default"].isTech(t)&&B["default"].warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),v["default"].registerComponent.call(v["default"],e,t)},a.getTech=tt["default"].getTech,a.registerTech=tt["default"].registerTech,a.browser=q,a.TOUCH_ENABLED=q.TOUCH_ENABLED,a.extend=Q["default"],a.mergeOptions=A["default"],a.bind=x.bind,a.plugin=C["default"],a.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),a.options.languages=A["default"](a.options.languages,(n={},n[e]=t,n)),a.options.languages[e]},a.log=B["default"],a.createTimeRange=a.createTimeRanges=N.createTimeRanges,a.formatTime=F["default"],a.parseUrl=z.parseUrl,a.isCrossOrigin=z.isCrossOrigin,a.EventTarget=_["default"],a.on=T.on,a.one=T.one,a.off=T.off,a.trigger=T.trigger,a.xhr=Z["default"],a.TextTrack=M["default"],a.AudioTrack=R["default"],a.VideoTrack=L["default"],a.isEl=H.isEl,a.isTextNode=H.isTextNode,a.createEl=H.createEl,a.hasClass=H.hasElClass,a.addClass=H.addElClass,a.removeClass=H.removeElClass,a.toggleClass=H.toggleElClass,a.setAttributes=H.setElAttributes,a.getAttributes=H.getElAttributes,a.emptyEl=H.emptyEl,a.appendContent=H.appendContent,a.insertContent=H.insertContent,a.computedStyle=K["default"],"function"==typeof e&&e.amd?e("videojs",[],function(){return a}):"object"===("undefined"==typeof i?"undefined":s(i))&&"object"===("undefined"==typeof n?"undefined":s(n))&&(n.exports=a),i["default"]=a},{105:105,42:42,43:43,5:5,51:51,52:52,56:56,62:62,64:64,72:72,77:77,78:78,80:80,81:81,82:82,83:83,84:84,86:86,87:87,88:88,89:89,90:90,92:92,94:94,95:95}],94:[function(e,t){(function(n){var i="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},r=e(96);if("undefined"!=typeof document)t.exports=document;else{var o=i["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{96:96}],95:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(){},{}],97:[function(e,t){function n(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}t.exports=n},{}],98:[function(e,t){function n(e){return e.replace(/\n\r?\s*/g,"")}t.exports=function(e){for(var t="",i=0;i<arguments.length;i++)t+=n(e[i])+(arguments[i+1]||"");return t}},{}],99:[function(e,t){t.exports={WebVTT:e(100).WebVTT,VTTCue:e(101).VTTCue,VTTRegion:e(103).VTTRegion}},{100:100,101:101,103:103}],100:[function(){!function(e){function t(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function n(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function i(){this.values=p(null)}function r(e,t,n,i){var r=i?e.split(i):[e];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(n);if(2===a.length){var s=a[0],u=a[1];t(s,u)}}}function o(e,o,a){function s(){var i=n(e);if(null===i)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+c);return e=e.replace(/^[^\sa-zA-Z-]+/,""),i}function u(e,t){var n=new i;r(e,function(e,t){switch(e){case"region":for(var i=a.length-1;i>=0;i--)if(a[i].id===t){n.set(e,a[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),o=r[0];n.integer(e,o),n.percent(e,o)?n.set("snapToLines",!1):null,n.alt(e,o,["auto"]),2===r.length&&n.alt("lineAlign",r[1],["start","middle","end"]);break;case"position":r=t.split(","),n.percent(e,r[0]),2===r.length&&n.alt("positionAlign",r[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function l(){e=e.replace(/^\s+/,"")}var c=e;if(l(),o.startTime=s(),l(),"-->"!==e.substr(0,3))throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+c);e=e.substr(3),l(),o.endTime=s(),l(),u(e,o)}function a(e,t){function i(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var n=t.match(/^([^<]*)(<[^>]+>?)?/);return e(n[1]?n[1]:n[2])}function r(e){return g[e]}function o(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],r);return e}function a(e,t){return!y[t.localName]||y[t.localName]===e.localName}function s(t,n){var i=m[t];if(!i)return null;var r=e.document.createElement(i);r.localName=i;var o=v[t];return o&&n&&(r[o]=n.trim()),r}for(var u,l=e.document.createElement("div"),c=l,d=[];null!==(u=i());)if("<"!==u[0])c.appendChild(e.document.createTextNode(o(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var f,h=n(u.substr(1,u.length-2));if(h){f=e.document.createProcessingInstruction("timestamp",h),c.appendChild(f);continue}var p=u.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(f=s(p[1],p[3]),!f)continue;if(!a(c,f))continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),d.push(p[1]),c.appendChild(f),c=f}return l}function s(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var i=e.pop(),r=i.textContent||i.innerText;if(r){var o=r.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):r}return"ruby"===i.tagName?n(e):i.childNodes?(t(e,i),n(e)):void 0}var i,r=[],o="";if(!e||!e.childNodes)return"ltr";for(t(r,e);o=n(r);)for(var a=0;a<o.length;a++){i=o.charCodeAt(a);for(var s=0;s<_.length;s++)if(_[s]===i)return"rtl"}return"ltr"}function u(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}function l(){}function c(e,t,n){var i=/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";i&&(r="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),l.call(this),this.cue=t,this.cueDiv=a(e,t.text);var u={color:r,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",u.unicodeBidi="plaintext"),this.applyStyles(u,this.cueDiv),this.div=e.document.createElement("div"),u={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},i||(u.direction=s(this.cueDiv),u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(u),this.div.appendChild(this.cueDiv);var c=0;switch(t.positionAlign){case"start":c=t.position;break;case"middle":c=t.position-t.size/2;break;case"end":c=t.position-t.size}this.applyStyles(""===t.vertical?{left:this.formatStyle(c,"%"),width:this.formatStyle(t.size,"%")}:{top:this.formatStyle(c,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function d(e){var t,n,i,r,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function f(e,t,n,i){function r(e,t){for(var r,o=new d(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);a>u&&(r=new d(e),a=u),e=new d(o)}return r||o}var o=new d(t),a=t.cue,s=u(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var f=o.lineHeight,h=f*Math.round(s),p=n[c]+f,g=l[0];Math.abs(h)>p&&(h=0>h?-1:1,h*=Math.ceil(p/f)*f),0>s&&(h+=""===a.vertical?n.height:n.width,l=l.reverse()),o.move(g,h)}else{var m=o.lineHeight/n.height*100;switch(a.lineAlign){case"middle":s-=m/2;break;case"end":s-=m}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new d(t)}var v=r(o,l);t.move(v.toCSSCompatValues(n))}function h(){}var p=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();t.prototype=p(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},i.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var n;return!!((n=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&100>=t))&&(this.set(e,t),!0)}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},v={v:"title",lang:"lang"},y={rt:"ruby"},_=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];l.prototype.applyStyles=function(e,t){t=t||this.div;for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},l.prototype.formatStyle=function(e,t){return 0===e?0:e+t},c.prototype=p(l.prototype),c.prototype.constructor=c,d.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),n=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),i=t*n;return i/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n};return r},h.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},h.convertCueToDOMTree=function(e,t){return e&&t?a(e,t):null};var b=.05,T="sans-serif",w="1.5%";h.processCues=function(e,t,n){function i(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=w,n.appendChild(r),i(t)){var o=[],a=d.getSimpleBoxPosition(r),s=Math.round(a.height*b*100)/100,u={font:s+"px "+T};!function(){for(var n,i,s=0;s<t.length;s++)i=t[s],n=new c(e,i,u),r.appendChild(n.div),f(e,n,a,o),i.displayState=n.div,o.push(d.getSimpleBoxPosition(n))}()}else for(var l=0;l<t.length;l++)r.appendChild(t[l].displayState)},h.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},h.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof t))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function n(){for(var e=u.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,u.buffer=e.substr(t),n}function a(e){var t=new i;if(r(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var o=new i;if(o.percent("x",r[0]),o.percent("y",r[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(u.vttjs.VTTRegion||u.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),u.onregion&&u.onregion(n),u.regionList.push({id:t.get("id"),region:n})}}function s(e){r(e,function(e,t){switch(e){case"Region":a(t)}},/:/)}var u=this;e&&(u.buffer+=u.decoder.decode(e,{stream:!0}));try{var l;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;l=n();var c=l.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new t(t.Errors.BadSignature);u.state="HEADER"}for(var d=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(d?d=!1:l=n(),u.state){case"HEADER":/:/.test(l)?s(l):l||(u.state="ID");continue;case"NOTE":l||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){u.state="NOTE";break}if(!l)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",-1===l.indexOf("-->")){u.cue.id=l;continue}case"CUE":try{o(l,u.cue,u.regionList)}catch(f){u.reportOrThrowError(f),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var h=-1!==l.indexOf("-->");if(!l||h&&(d=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=l;continue;case"BADCUE":l||(u.state="ID");continue}}}catch(f){u.reportOrThrowError(f),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new t(t.Errors.BadSignature)}catch(n){e.reportOrThrowError(n)}return e.onflush&&e.onflush(),this}},e.WebVTT=h}(this,this.vttjs||{})},{}],101:[function(e,t){"undefined"!=typeof t&&t.exports&&(this.VTTCue=this.VTTCue||e(102).VTTCue),function(e){e.VTTCue.prototype.toJSON=function(){var e={},t=this;return Object.keys(this).forEach(function(n){"getCueAsHTML"!==n&&"hasBeenReset"!==n&&"displayState"!==n&&(e[n]=t[n])}),e},e.VTTCue.create=function(t){if(!t.hasOwnProperty("startTime")||!t.hasOwnProperty("endTime")||!t.hasOwnProperty("text"))throw new Error("You must at least have start time, end time, and text.");var n=new e.VTTCue(t.startTime,t.endTime,t.text);for(var i in t)n.hasOwnProperty(i)&&(n[i]=t[i]);return n},e.VTTCue.fromJSON=function(e){return this.create(JSON.parse(e))}}(this)},{102:102}],102:[function(){!function(e,t){function n(e){if("string"!=typeof e)return!1;var t=s[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(e){if("string"!=typeof e)return!1;var t=u[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function o(e,t,o){var s=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=e,h=t,p=o,g=null,m="",v=!0,y="auto",_="start",b=50,T="middle",w=50,E="middle";return Object.defineProperty(s,"id",r({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return m},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return _},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return b},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return T},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return w},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0,u?s:void 0}var a="auto",s={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=e.VTTCue||o,t.VTTCue=o}(this,this.vttjs||{})},{}],103:[function(e,t){"undefined"!=typeof t&&t.exports&&(this.VTTRegion=e(104).VTTRegion),function(e){e.VTTRegion.create=function(t){var n=new e.VTTRegion;for(var i in t)n.hasOwnProperty(i)&&(n[i]=t[i]);return n},e.VTTRegion.fromJSON=function(e){return this.create(JSON.parse(e))}}(this)},{104:104}],104:[function(){!function(e,t){function n(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(e){return"number"==typeof e&&e>=0&&100>=e}function r(){var e=100,t=3,r=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!i(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!i(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!i(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!i(e))throw new Error("ViewportAnchorY must be between 0 and 100.");
s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!i(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");u=t}}})}var o={"":!0,up:!0};e.VTTRegion=e.VTTRegion||r,t.VTTRegion=r}(this,this.vttjs||{})},{}],105:[function(e,t){function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e,t,n){var i=e;return c(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=f(t,{uri:e}),i.callback=n,i}function o(e,t,n){return t=r(e,t,n),a(t)}function a(e){function t(){4===f.readyState&&a()}function n(){var e=void 0;if(e=f.response?f.response:f.responseText||s(f),T)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(g),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,l(e,c)}function a(){if(!p){var t;clearTimeout(g),t=e.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var i=c,r=null;return 0!==t?(i={body:n(),statusCode:t,method:v,headers:{},url:m,rawRequest:f},f.getAllResponseHeaders&&(i.headers=d(f.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),l(r,i,i.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var u=!1,l=function(t,n,i){u||(u=!0,e.callback(t,n,i))},c={body:void 0,headers:{},statusCode:0,method:v,url:m,rawRequest:f},f=e.xhr||null;f||(f=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var h,p,g,m=f.url=e.uri||e.url,v=f.method=e.method||"GET",y=e.body||e.data||null,_=f.headers=e.headers||{},b=!!e.sync,T=!1;if("json"in e&&(T=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),y=JSON.stringify(e.json))),f.onreadystatechange=t,f.onload=a,f.onerror=r,f.onprogress=function(){},f.ontimeout=r,f.open(v,m,!b,e.username,e.password),b||(f.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(g=setTimeout(function(){p=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)},e.timeout)),f.setRequestHeader)for(h in _)_.hasOwnProperty(h)&&f.setRequestHeader(h,_[h]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(y),f}function s(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function u(){}var l=e(95),c=e(106),d=e(109),f=e(110);t.exports=o,o.XMLHttpRequest=l.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:l.XDomainRequest,n(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,i){return n=r(t,n,i),n.method=e.toUpperCase(),a(n)}})},{106:106,109:109,110:110,95:95}],106:[function(e,t){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var i=Object.prototype.toString},{}],107:[function(e,t){function n(e,t,n){if(!a(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?i(e,t,n):"string"==typeof e?r(e,t,n):o(e,t,n)}function i(e,t,n){for(var i=0,r=e.length;r>i;i++)u.call(e,i)&&t.call(n,e[i],i,e)}function r(e,t,n){for(var i=0,r=e.length;r>i;i++)t.call(n,e.charAt(i),i,e)}function o(e,t,n){for(var i in e)u.call(e,i)&&t.call(n,e[i],i,e)}var a=e(106);t.exports=n;var s=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{106:106}],108:[function(e,t,n){function i(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=i,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],109:[function(e,t){var n=e(108),i=e(107),r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var i=e.indexOf(":"),o=n(e.slice(0,i)).toLowerCase(),a=n(e.slice(i+1));"undefined"==typeof t[o]?t[o]=a:r(t[o])?t[o].push(a):t[o]=[t[o],a]}),t}},{107:107,108:108}],110:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}]},{},[93])(93)}),define("dashJsAndVideoJsShim",["dashjs","videojs"],function(e,t){window.videojs=t,window.dashjs=e}),function(e){define("videojsdash",["dashJsAndVideoJsShim"],function(){return function(){!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e){return"dash-audio-"+e}function i(e,t){return e.find(function(e){var i=e.index;return n(i)===t.id})}var r=e.dash.mediaPlayer,o=r.getTracksFor("audio"),a=e.audioTracks();a.length&&t.clearTracks(["audio"]);var s=r.getCurrentTrackFor("audio");o.forEach(function(e){a.addTrack(new u.default.AudioTrack({enabled:e===s,id:n(e.index),kind:e.kind||"main",label:e.lang,language:e.lang}))}),a.addEventListener("change",function(){for(var e=0;e<a.length;e++){var t=a[e];if(t.enabled){var n=i(o,t);r.setCurrentTrack(n)}else;}})}function r(e,t){e.dash.mediaPlayer.on(a.default.MediaPlayer.events.PLAYBACK_METADATA_LOADED,i.bind(null,e,t))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var o="undefined"!=typeof window?window.dashjs:"undefined"!=typeof e?e.dashjs:null,a=t(o),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,u=t(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("global/window"),u=i(s),l="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,c=i(l),d="undefined"!=typeof window?window.dashjs:"undefined"!=typeof t?t.dashjs:null,f=i(d),h=e("./setup-audio-tracks"),p=i(h),g=function(e){return"[object Array]"===Object.prototype.toString.call(e)},m=function(){function e(t,n,i){var a=this;if(o(this,e),i=i||n.options_,this.player=c.default(i.playerId),this.player.dash=this.player.dash||{},this.tech_=n,this.el_=n.el(),this.elParent_=this.el_.parentNode,t.src){n.isReady_=!1,e.updateSourceData&&(c.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=e.updateSourceData(t)),e.hooks("updatesource").forEach(function(e){t=e(t)});var s=t.src;this.keySystemOptions_=e.buildDashJSProtData(t.keySystemOptions),this.player.dash.mediaPlayer=f.default.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,e.useVideoJSDebug&&(c.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.useVideoJSDebug(this.mediaPlayer_)),e.beforeInitialize&&(c.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.beforeInitialize(this.player,this.mediaPlayer_)),e.hooks("beforeinitialize").forEach(function(e){e(a.player,a.mediaPlayer_)}),this.mediaPlayer_.initialize(),i.dash&&Object.keys(i.dash).forEach(function(e){var t,n="set"+e.charAt(0).toUpperCase()+e.slice(1),o=i.dash[e];return a.mediaPlayer_.hasOwnProperty(n)&&(c.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix "+("has been deprecated. Change '"+e+"' to '"+n+"'")),e=n),a.mediaPlayer_.hasOwnProperty(e)?(g(o)||(o=[o]),void(t=a.mediaPlayer_)[e].apply(t,r(o))):void c.default.log.warn("Warning: dash configuration option unrecognized: "+e)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),p.default.call(null,this.player,n),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(s),this.tech_.triggerReady()}}return a(e,[{key:"dispose",value:function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.player.dash&&delete this.player.dash}},{key:"duration",value:function t(){var t=this.el_.duration;return t===Number.MAX_VALUE?1/0:t}}],[{key:"buildDashJSProtData",value:function(e){var t={};if(!e||!g(e))return null;for(var n=0;n<e.length;n++){var i=e[n],r=c.default.mergeOptions({},i.options);r.licenseUrl&&(r.serverURL=r.licenseUrl,delete r.licenseUrl),t[i.name]=r}return t}},{key:"hooks",value:function(t,n){return e.hooks_[t]=e.hooks_[t]||[],n&&(e.hooks_[t]=e.hooks_[t].concat(n)),e.hooks_[t]}},{key:"hook",value:function(t,n){e.hooks(t,n)}},{key:"removeHook",value:function(t,n){var i=e.hooks(t).indexOf(n);return-1===i?!1:(e.hooks_[t]=e.hooks_[t].slice(),e.hooks_[t].splice(i,1),!0)}}]),e}();m.hooks_={};var v=function(e){e=JSON.parse(JSON.stringify(e)),m.updateSourceData&&(c.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=m.updateSourceData(e)),m.hooks("updatesource").forEach(function(t){e=t(e)});var t=document.createElement("video");return!e.keySystemOptions||navigator.requestMediaKeySystemAccess||t.msSetMediaKeys?!0:!1};c.default.DashSourceHandler=function(){return{canHandleSource:function(e){var t=/\.mpd/i;return v(e)?c.default.DashSourceHandler.canPlayType(e.type)?"probably":t.test(e.src)?"maybe":"":""},handleSource:function(e,t,n){return new m(e,t,n)},canPlayType:function(e){return c.default.DashSourceHandler.canPlayType(e)}}},c.default.DashSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i;return t.test(e)?"probably":""},u.default.MediaSource&&c.default.getTech("Html5").registerSourceHandler(c.default.DashSourceHandler(),0),c.default.Html5DashJS=m,n.default=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./setup-audio-tracks":1,"global/window":3}],3:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])}.apply(e,arguments)})}(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("videojscontribhls",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsContribHls=e()}}(function(){var e;return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e("global/window"),a=i(o),s=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},u=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(e.segments)for(var i=n,o=void 0,u=0;u<e.segments.length;u++){var l=e.segments[u];if(o||(o=s(t,i+l.duration/2)),o){if("cueIn"in l){o.endTime=i,o.adEndTime=i,i+=l.duration,o=null;continue}if(i<o.endTime){i+=l.duration;continue}o.endTime+=l.duration}else if("cueOut"in l&&(o=new a["default"].VTTCue(i,i+l.duration,l.cueOut),o.adStartTime=i,o.adEndTime=i+parseFloat(l.cueOut),t.addCue(o)),"cueOutCont"in l){var c=void 0,d=void 0,f=l.cueOutCont.split("/").map(parseFloat),h=r(f,2);c=h[0],d=h[1],o=new a["default"].VTTCue(i,i+l.duration,""),o.adStartTime=i-c,o.adEndTime=o.adStartTime+d,t.addCue(o)}i+=l.duration}};n["default"]={updateAdCues:u,findAdCue:s},t.exports=n["default"]},{"global/window":28}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t){return e.start(t)+"-"+e.end(t)},r=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},o=function(e){return e>=32&&126>e?String.fromCharCode(e):"."},a=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];t[n]=ArrayBuffer.isView(i)?{bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:i}),t},s={hexDump:function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",a=void 0,s=void 0,u=0;u<t.length/n;u++)a=t.slice(u*n,u*n+n).map(r).join(""),s=t.slice(u*n,u*n+n).map(o).join(""),i+=a+" "+s+"\n";return i},tagDump:function(e){return s.hexDump(e.bytes)},textRanges:function(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=i(e,n)+" ";return t},createTransferableMessage:a};n["default"]=s,t.exports=n["default"]},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={GOAL_BUFFER_LENGTH:30},t.exports=n["default"]},{}],4:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("global/window"),o=i(r),a=e("aes-decrypter"),s=e("./bin-utils"),u=function(e){e.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new a.Decrypter(n,i,r,function(e,n){o["default"].postMessage(s.createTransferableMessage({source:t.source,decrypted:n}),[n.buffer])})}};n["default"]=function(e){return new u(e)},t.exports=n["default"]},{"./bin-utils":2,"aes-decrypter":21,"global/window":28}],5:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},u=e("./playlist-loader"),l=i(u),c=e("./segment-loader"),d=i(c),f=e("./ranges"),h=i(f),p="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,g=i(p),m=e("./ad-cue-tags"),v=i(m),y=e("./sync-controller"),_=i(y),b=e("videojs-contrib-media-sources/es5/codec-utils"),T=e("webworkify"),w=i(T),E=e("./decrypter-worker"),S=i(E),C=3e5,P=void 0,A=function(e,t){if(typeof e!=typeof t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var n in e)if(e[n]!==t[n])return!0;return!1},I=function(e){var t={codecCount:0,videoCodec:null,videoObjectTypeIndicator:null,audioProfile:null},n=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,n=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(e),n&&(t.videoCodec=n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},x=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return b.translateLegacyCodecs([e])[0]})};n.mapLegacyAvcCodecs_=x;var O=function(e,t){var n="mp2t",i={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},r=[],o=void 0,a=null;if(!t)return[];t.segments&&t.segments.length&&t.segments[0].map&&(n="mp4"),o=t.attributes||{},o.CODECS&&!function(){var e=I(o.CODECS);Object.keys(e).forEach(function(t){i[t]=e[t]||i[t]})}(),e.mediaGroups.AUDIO&&(r=e.mediaGroups.AUDIO[o.AUDIO]);for(var s in r){if(a&&!!r[s].uri!=!!a.uri)return["video/"+n+'; codecs="'+i.videoCodec+i.videoObjectTypeIndicator+", mp4a.40."+i.audioProfile+'"',"audio/"+n+'; codecs="mp4a.40.'+i.audioProfile+'"'];a=r[s]}return a&&a.uri?["video/"+n+'; codecs="'+i.videoCodec+i.videoObjectTypeIndicator+'"',"audio/"+n+'; codecs="mp4a.40.'+i.audioProfile+'"']:["video/"+n+'; codecs="'+i.videoCodec+i.videoObjectTypeIndicator+", mp4a.40."+i.audioProfile+'"']};n.mimeTypesForPlaylist_=O;var M=function(e){function t(e){var n=this;r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=e.url,o=e.withCredentials,a=e.mode,u=e.tech,c=e.bandwidth,f=e.externHls,h=e.useCueTags;if(!i)throw new Error("A non-empty playlist URL is required");P=f,this.withCredentials=o,this.tech_=u,this.hls_=u.hls,this.mode_=a,this.useCueTags_=h,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.audioTracks_=[],this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.audioGroups_={},this.mediaSource=new g["default"].MediaSource({mode:a}),this.audioinfo_=null,this.mediaSource.on("audioinfo",this.handleAudioinfoUpdate_.bind(this)),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=g["default"].createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new _["default"],this.decrypter_=w["default"](S["default"]);var p={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},setCurrentTime:function(e){return n.tech_.setCurrentTime(e)},hasPlayed:function(){return n.hasPlayed_()},bandwidth:c,syncController:this.syncController_,decrypter:this.decrypter_,loaderType:"main"};this.masterPlaylistLoader_=new l["default"](i,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.audioPlaylistLoader_=null,this.mainSegmentLoader_=new d["default"](p),p.loaderType="audio",this.audioSegmentLoader_=new d["default"](p),this.decrypter_.onmessage=function(e){"main"===e.data.source?n.mainSegmentLoader_.handleDecrypted_(e.data):"audio"===e.data.source&&n.audioSegmentLoader_.handleDecrypted_(e.data)},this.setupSegmentLoaderListeners_(),this.masterPlaylistLoader_.start()}return o(t,e),a(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3;e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),e.fillAudioTracks_(),e.setupAudio();try{e.setupSourceBuffers_()}catch(i){return g["default"].log.warn("Failed to create SourceBuffers",i),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("audioupdate"),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();return t?(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),void(t.endList||!function(){var t=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};1/0!==e.duration()?!function(){var n=function i(){1/0===e.duration()?t():e.tech_.one("durationchange",i)};e.tech_.one("durationchange",n)}():t()}())):(e.initialMedia_=e.selectPlaylist(),void e.masterPlaylistLoader_.media(e.initialMedia_))}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3,i=void 0,r=void 0;e.requestOptions_.timeout=e.masterPlaylistLoader_.isLowestEnabledRendition_()?0:n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),i=e.activeAudioGroup(),r=i.filter(function(e){return e.enabled})[0],r||(e.setupAudio(),e.trigger("audioupdate")),e.tech_.trigger({type:"mediachange",bubbles:!0})})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("progress",function(){e.masterPlaylistLoader_.media(e.selectPlaylist()),e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("error",function(){g["default"].log.warn("Problem encountered with the current alternate audio track. Switching back to default."),e.audioSegmentLoader_.abort(),e.audioPlaylistLoader_=null,e.setupAudio()})}},{key:"handleAudioinfoUpdate_",value:function(e){if(P.supportsAudioInfoChange_()||!this.audioInfo_||!A(this.audioInfo_,e.info))return void(this.audioInfo_=e.info);var t="had different audio properties (channels, sample rate, etc.) or changed in some other way.  This behavior is currently unsupported in Firefox 48 and below due to an issue: \n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1247138\n\n",n=this.activeAudioGroup().map(function(e){return e.enabled}).indexOf(!0),i=this.activeAudioGroup()[n],r=this.activeAudioGroup().filter(function(e){return e.properties_&&e.properties_["default"]})[0];this.audioPlaylistLoader_?(t="The audio track '"+i.label+"' that we tried to "+("switch to "+t+" Unfortunately this means we will have to ")+("return you to the main track '"+r.label+"'. Sorry!"),r.enabled=!0,this.activeAudioGroup().splice(n,1),this.trigger("audioupdate")):(t="The rendition that we tried to switch to "+t+"Unfortunately that means we will have to blacklist the current playlist and switch to another. Sorry!",this.blacklistCurrentPlaylist()),g["default"].log.warn(t),this.setupAudio()}},{key:"mediaRequests_",value:function(){return this.audioSegmentLoader_.mediaRequests+this.mainSegmentLoader_.mediaRequests}},{key:"mediaTransferDuration_",value:function(){return this.audioSegmentLoader_.mediaTransferDuration+this.mainSegmentLoader_.mediaTransferDuration}},{key:"mediaBytesTransferred_",value:function(){return this.audioSegmentLoader_.mediaBytesTransferred+this.mainSegmentLoader_.mediaBytesTransferred}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"fillAudioTracks_",value:function(){var e=this.master(),t=e.mediaGroups||{};t&&t.AUDIO&&0!==Object.keys(t.AUDIO).length&&"html5"===this.mode_||(t.AUDIO={main:{"default":{"default":!0}}});for(var n in t.AUDIO){this.audioGroups_[n]||(this.audioGroups_[n]=[]);for(var i in t.AUDIO[n]){var r=t.AUDIO[n][i],o=new g["default"].AudioTrack({id:i,kind:r["default"]?"main":"alternative",enabled:!1,language:r.language,label:i});o.properties_=r,this.audioGroups_[n].push(o)}}(this.activeAudioGroup().filter(function(e){return e.properties_["default"]})[0]||this.activeAudioGroup()[0]).enabled=!0}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()}},{key:"activeAudioGroup",value:function(){var e=this.masterPlaylistLoader_.media(),t=void 0;return e.attributes&&e.attributes.AUDIO&&(t=this.audioGroups_[e.attributes.AUDIO]),t||this.audioGroups_.main}},{key:"setupAudio",value:function(){var e=this,t=this.activeAudioGroup(),n=t.filter(function(e){return e.enabled})[0];return n||(n=t.filter(function(e){return e.properties_["default"]})[0]||t[0],n.enabled=!0),this.audioPlaylistLoader_&&(this.audioPlaylistLoader_.dispose(),this.audioPlaylistLoader_=null),this.audioSegmentLoader_.pause(),n.properties_.resolvedUri?(this.audioSegmentLoader_.resetEverything(),this.audioPlaylistLoader_=new l["default"](n.properties_.resolvedUri,this.hls_,this.withCredentials),this.audioPlaylistLoader_.start(),this.audioPlaylistLoader_.on("loadedmetadata",function(){var t=e.audioPlaylistLoader_.media();e.audioSegmentLoader_.playlist(t,e.requestOptions_),(!e.tech_.paused()||t.endList&&"none"!==e.tech_.preload())&&e.audioSegmentLoader_.load(),t.endList||e.audioPlaylistLoader_.trigger("firstplay")}),this.audioPlaylistLoader_.on("loadedplaylist",function(){var t=void 0;return e.audioPlaylistLoader_&&(t=e.audioPlaylistLoader_.media()),t?void e.audioSegmentLoader_.playlist(t,e.requestOptions_):void e.audioPlaylistLoader_.media(e.audioPlaylistLoader_.playlists.master.playlists[0])}),void this.audioPlaylistLoader_.on("error",function(){g["default"].log.warn("Problem encountered loading the alternate audio track. Switching back to default."),e.audioSegmentLoader_.abort(),e.setupAudio()})):void this.mainSegmentLoader_.resetEverything()}},{key:"fastQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader(),this.audiosegmentloader_&&this.audioSegmentLoader_.resetLoader())}},{key:"play",value:function(){return this.setupFirstPlay()?void 0:(this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load(),1/0===this.tech_.duration()&&this.tech_.currentTime()<this.tech_.seekable().start(0)?this.tech_.setCurrentTime(this.tech_.seekable().start(0)):void 0)}},{key:"setupFirstPlay",value:function(){var e=void 0,t=this.masterPlaylistLoader_.media();return!t||this.tech_.paused()||this.hasPlayed_()?!1:(t.endList||(this.trigger("firstplay"),e=this.seekable(),e.length&&this.tech_.setCurrentTime(e.end(0))),this.hasPlayed_=function(){return!0},this.load(),!0)}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return g["default"].log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=void 0,n=void 0;return(t=e.playlist||this.masterPlaylistLoader_.media())?(t.excludeUntil=Date.now()+C,(n=this.selectPlaylist())?(g["default"].log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.masterPlaylistLoader_.media(n)):(g["default"].log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=e,this.mediaSource.endOfStream("network"))):(this.error=e,this.mediaSource.endOfStream("network"))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=h["default"].findRange(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.audioPlaylistLoader_&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),void(this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()))):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:P.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0,n=void 0;return!this.masterPlaylistLoader_||(e=this.masterPlaylistLoader_.media(),!e||(t=P.Playlist.seekable(e),0===t.length||this.audioPlaylistLoader_&&(n=P.Playlist.seekable(this.audioPlaylistLoader_.media()),0===n.length)))?void 0:n?void(this.seekable_=g["default"].createTimeRanges([[n.start(0)>t.start(0)?n.start(0):t.start(0),n.end(0)<t.end(0)?n.end(0):t.end(0)]])):void(this.seekable_=t)}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=P.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function o(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",o)};i.length>0&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.audioPlaylistLoader_&&this.audioPlaylistLoader_.dispose(),this.audioSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e=this.masterPlaylistLoader_.media(),t=void 0;if(e&&"open"===this.mediaSource.readyState){if(t=O(this.masterPlaylistLoader_.master,e),t.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(t[0]),t[1]&&this.audioSegmentLoader_.mimeType(t[1]),this.excludeIncompatibleVariants_(e)}}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this.masterPlaylistLoader_.master,n=2,i=null,r=void 0;e.attributes&&e.attributes.CODECS&&(r=I(e.attributes.CODECS),i=r.videoCodec,n=r.codecCount),t.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes&&e.attributes.CODECS){var r=e.attributes.CODECS;t=I(r),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+x(r)+'"')&&(e.excludeUntil=1/0)}t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),v["default"].updateAdCues(e,this.cueTagsTrack_,t)}}]),t}(g["default"].EventTarget);n.MasterPlaylistController=M}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{"./ad-cue-tags":1,"./decrypter-worker":4,"./playlist-loader":7,"./ranges":9,"./segment-loader":13,"./sync-controller":16,"videojs-contrib-media-sources/es5/codec-utils":44,webworkify:77}],6:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./ranges"),u=r(s),l="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,c=r(l),d=["seeking","seeked","pause","playing","error"],f=function(){function e(t){var n=this;o(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,t.debug&&(this.logger_=c["default"].log.bind(c["default"],"playback-watcher ->")),this.logger_("initialize");var i=function(){return n.waiting_()},r=function(){return n.cancelTimer_()};this.tech_.on("waiting",i),this.tech_.on(d,r),this.monitorCurrentTime_(),this.dispose=function(){n.logger_("dispose"),n.tech_.off("waiting",i),n.tech_.off(d,r),n.checkCurrentTimeTimeout_&&clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return a(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"waiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(!this.tech_.seeking()&&null===this.timer_){if(this.fellOutOfLiveWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),void this.tech_.trigger("liveresync")}var i=this.tech_.buffered(),r=u["default"].findNextRange(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),void this.tech_.trigger("videounderflow");if(r.length>0){var o=r.start(0)-t;this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t)}}}},{key:"fellOutOfLiveWindow_",value:function(e,t){return e.length&&e.start(0)>0&&t<e.start(0)?!0:!1}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=u["default"].findNextRange(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+u["default"].TIME_FUDGE_FACTOR))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=u["default"].findGaps(e),i=0;i<n.length;i++){var r=n.start(i),o=n.end(i);if(4>t-r&&t-r>2)return{start:r,end:o}}return null}},{key:"logger_",value:function(){}}]),e}();n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":9}],7:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./resolve-url"),a=r(o),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,u=e("./playlist.js"),l=e("./stream"),c=r(l),d=e("m3u8-parser"),f=r(d),h=e("global/window"),p=r(h),g=function(e,t,n){var i=t.slice(),r=void 0,o=void 0;for(n=n||0,r=Math.min(e.length,t.length+n),o=n;r>o;o++)i[o-n]=s.mergeOptions(e[o],i[o-n]);return i},m=function(e,t){for(var n=!1,i=s.mergeOptions(e,{}),r=e.playlists.length,o=void 0,u=void 0,l=void 0;r--;)if(o=i.playlists[r],o.uri===t.uri){if(o.segments&&t.segments&&o.segments.length===t.segments.length&&o.mediaSequence===t.mediaSequence)continue;for(i.playlists[r]=s.mergeOptions(o,t),i.playlists[t.uri]=i.playlists[r],o.segments&&(i.playlists[r].segments=g(o.segments,t.segments,t.mediaSequence-o.mediaSequence)),l=0,i.playlists[r].segments&&(l=i.playlists[r].segments.length);l--;)u=i.playlists[r].segments[l],u.resolvedUri||(u.resolvedUri=a["default"](o.resolvedUri,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=a["default"](o.resolvedUri,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=a["default"](o.resolvedUri,u.map.uri));n=!0}return n?i:null},v=function y(e,t,n){var i=this,r=this,o=void 0,s=void 0,l=void 0,c=void 0,d=void 0;if(y.prototype.constructor.call(this),this.hls_=t,!e)throw new Error("A non-empty playlist URL is required");c=function(e,t,n){r.setBandwidth(l||e),l=null,n&&(r.state=n),r.error={playlist:r.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},r.trigger("error")},d=function(e,t){var n=void 0,i=void 0,o=void 0;r.setBandwidth(l||e),l=null,r.state="HAVE_METADATA",n=new f["default"].Parser,n.push(e.responseText),n.end(),n.manifest.uri=t,o=m(r.master,n.manifest),i=1e3*(n.manifest.targetDuration||10),r.targetDuration=n.manifest.targetDuration,o?(r.master=o,r.media_=r.master.playlists[n.manifest.uri]):i/=2,r.media().endList||(p["default"].clearTimeout(s),s=p["default"].setTimeout(function(){r.trigger("mediaupdatetimeout")},i)),r.trigger("loadedplaylist")},r.state="HAVE_NOTHING",o=this.dispose,r.dispose=function(){r.stopRequest(),p["default"].clearTimeout(s),o.call(this)},r.stopRequest=function(){if(l){var e=l;l=null,e.onreadystatechange=null,e.abort()}},r.enabledPlaylists_=function(){return r.master.playlists.filter(u.isEnabled).length},r.isLowestEnabledRendition_=function(){var e=r.media();if(!e||!e.attributes)return!1;var t=r.media().attributes.BANDWIDTH||0;return!(r.master.playlists.filter(function(e){var n=u.isEnabled(e);if(!n)return!1;var i=0;return e&&e.attributes&&(i=e.attributes.BANDWIDTH),t>=i}).length>1)},r.media=function(e){var t=r.state,i=void 0;if(!e)return r.media_;if("HAVE_NOTHING"===r.state)throw new Error("Cannot switch media playlist from "+r.state);if("string"==typeof e){if(!r.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=r.master.playlists[e]}if(i=!r.media_||e.uri!==r.media_.uri,r.master.playlists[e.uri].endList)return l&&(l.onreadystatechange=null,l.abort(),l=null),r.state="HAVE_METADATA",r.media_=e,void(i&&(r.trigger("mediachanging"),r.trigger("mediachange")));if(i){if(r.state="SWITCHING_MEDIA",l){if(a["default"](r.master.uri,e.uri)===l.url)return;l.onreadystatechange=null,l.abort(),l=null}this.media_&&this.trigger("mediachanging"),l=this.hls_.xhr({uri:a["default"](r.master.uri,e.uri),withCredentials:n},function(n,i){if(l){if(n)return c(l,e.uri,t);d(i,e.uri),r.trigger("HAVE_MASTER"===t?"loadedmetadata":"mediachange")}})}},r.setBandwidth=function(e){r.bandwidth=e.bandwidth},r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",l=this.hls_.xhr({uri:a["default"](r.master.uri,r.media().uri),withCredentials:n},function(e){return l?e?c(l,r.media().uri):void d(l,r.media().uri):void 0}))}),r.on("firstplay",function(){var e=r.media();e&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0})}),r.pause=function(){r.stopRequest(),p["default"].clearTimeout(s)},r.load=function(){r.started?r.trigger(r.media().endList?"loadedplaylist":"mediaupdatetimeout"):r.start()},r.start=function(){r.started=!0,l=i.hls_.xhr({uri:e,withCredentials:n},function(t,n){var i=void 0,o=void 0,s=void 0;if(l){if(l=null,t)return r.error={status:n.status,message:"HLS playlist request error at URL: "+e,responseText:n.responseText,code:2},r.trigger("error");if(i=new f["default"].Parser,i.push(n.responseText),i.end(),r.state="HAVE_MASTER",i.manifest.uri=e,i.manifest.playlists){for(r.master=i.manifest,s=r.master.playlists.length;s--;)o=r.master.playlists[s],r.master.playlists[o.uri]=o,o.resolvedUri=a["default"](r.master.uri,o.uri);for(var u in r.master.mediaGroups.AUDIO)for(var c in r.master.mediaGroups.AUDIO[u]){var h=r.master.mediaGroups.AUDIO[u][c];h.uri&&(h.resolvedUri=a["default"](r.master.uri,h.uri))}return r.trigger("loadedplaylist"),void(l||r.media(i.manifest.playlists[0]))}return r.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:p["default"].location.href,playlists:[{uri:e}]},r.master.playlists[e]=r.master.playlists[0],r.master.playlists[0].resolvedUri=e,d(n,e),r.trigger("loadedmetadata")}})}};v.prototype=new c["default"],n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist.js":8,"./resolve-url":12,"./stream":15,"global/window":28,"m3u8-parser":29}],8:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=e("global/window"),a=i(o),s={UNSAFE_LIVE_SEGMENTS:3},u=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=e.segments[i],"undefined"!=typeof r.end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!=typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},l=function(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(i=e.segments[r],"undefined"!=typeof i.start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},c=function(e,t,n){var i=void 0,r=void 0;return"undefined"==typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=u(e,t),i.precise?i.result:(r=l(e,t),r.precise?r.result:i.result+n))},d=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),"undefined"==typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return a["default"].Infinity}return c(e,t,n)};n.duration=d;var f=function(e,t,n){var i=0;if(t>n){var r=[n,t];t=r[0],n=r[1]}if(0>t){for(var o=t;o<Math.min(0,n);o++)i+=e.targetDuration;t=0}for(var o=t;n>o;o++)i+=e.segments[o].duration;return i};n.sumDurations=f;var h=function(e){if(!e||!e.segments)return[null,null];for(var t=e.syncInfo||null,n=null,i=0,r=e.segments.length;r>i;i++){var o=e.segments[i];if("undefined"!=typeof o.start){n={mediaSequence:e.mediaSequence+i,time:o.start};break}}return{expiredSync:t,segmentSync:n}},p=function(e,t,n){if(t&&n){var i=t.mediaSequence-e.mediaSequence,r=n.mediaSequence-e.mediaSequence,o=void 0,a=void 0;return Math.abs(i)>Math.abs(r)?(o=r,a=-n.time):(o=i,a=t.time),Math.abs(a+f(e,o,0))}if(t){var o=t.mediaSequence-e.mediaSequence;return t.time+f(e,o,0)}if(n){var o=n.mediaSequence-e.mediaSequence;return n.time-f(e,o,0)}},g=function(e){if(!e||!e.segments)return r.createTimeRange();if(e.endList)return r.createTimeRange(0,d(e));var t=h(e),n=t.expiredSync,i=t.segmentSync;if(!n&&!i)return r.createTimeRange();var o=p(e,n,i),a=o,u=Math.max(0,e.segments.length-s.UNSAFE_LIVE_SEGMENTS),l=c(e,e.mediaSequence+u,o);return r.createTimeRange(a,l)};n.seekable=g;var m=function(e){return e-Math.floor(e)===0},v=function(e,t){if(m(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;n>=i;i++){var r=Math.pow(10,i),o=t*r;if(m(o)||i===n)return(o+e)/r}},y=v.bind(null,1),_=v.bind(null,-1),b=function(e,t,n,i){var r=void 0,o=void 0,a=e.segments.length,s=t-i;if(0>s){if(n>0)for(r=n-1;r>=0;r--)if(o=e.segments[r],s+=_(o.duration),s>0)return{mediaIndex:r,startTime:i-f(e,n,r)};return{mediaIndex:0,startTime:t}}if(0>n){for(r=n;0>r;r++)if(s-=e.targetDuration,0>s)return{mediaIndex:0,startTime:t};n=0}for(r=n;a>r;r++)if(o=e.segments[r],s-=y(o.duration),0>s)return{mediaIndex:r,startTime:i+f(e,n,r)};return{mediaIndex:a-1,startTime:t}};n.getMediaInfoForTime_=b;var T=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()};n.isBlacklisted=T;var w=function(e){var t=T(e);return!e.disabled&&!t};n.isEnabled=w,s.duration=d,s.seekable=g,s.getMediaInfoForTime_=b,s.isEnabled=w,s.isBlacklisted=T,n["default"]=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":28}],9:[function(e,t,n){(function(e){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,a=i(o),s=1/30,u=function(e,t){var n=r(t,2),i=n[0],o=n[1];return Math.min(Math.max(i,e),o)},l=function(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return a["default"].createTimeRanges(n)},c=function(e,t){return l(e,function(e,n){return t>=e-s&&n+s>=t})},d=function(e,t){return l(e,function(e){return e-s>=t})},f=function(e){if(e.length<2)return a["default"].createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return a["default"].createTimeRanges(t)},h=function(e,t){var n=void 0,i=void 0,r=void 0,o=[],a=[],s=function(e){return e[0]<=r&&e[1]>=r};if(e)for(n=0;n<e.length;n++)i=e.start(n),r=e.end(n),a.push([i,r]);if(t)for(n=0;n<t.length;n++)i=t.start(n),r=t.end(n),a.some(s)||o.push(r);return 1!==o.length?null:o[0]},p=function(e,t){var n=null,i=null,r=0,o=[],s=[];if(!(e&&e.length&&t&&t.length))return a["default"].createTimeRange();for(var u=e.length;u--;)o.push({time:e.start(u),type:"start"}),o.push({time:e.end(u),type:"end"});for(u=t.length;u--;)o.push({time:t.start(u),type:"start"}),o.push({time:t.end(u),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),u=0;u<o.length;u++)"start"===o[u].type?(r++,2===r&&(n=o[u].time)):"end"===o[u].type&&(r--,1===r&&(i=o[u].time)),null!==n&&null!==i&&(s.push([n,i]),n=null,i=null);return a["default"].createTimeRanges(s)},g=function(e,t,n,i){for(var r=t.end(0)-t.start(0),o=e.end(0)-e.start(0),a=r-o,s=p(e,i),u=p(t,i),l=0,c=0,d=s.length;d--;)l+=s.end(d)-s.start(d),s.start(d)===n&&(l+=a);for(d=u.length;d--;)c+=u.end(d)-u.start(d);return Math.max(l,c)/r*100},m=function(e,t,n,i){var r=e+t,o=a["default"].createTimeRanges([[e,r]]),s=a["default"].createTimeRanges([[u(e,[n,r]),r]]);if(s.start(0)===s.end(0))return 0;var l=g(s,o,n,i);return isNaN(l)||1/0===l||l===-1/0?0:l};n["default"]={findRange:c,findNextRange:d,findGaps:f,findSoleUncommonTimeRangesEnd:h,getSegmentBufferedPercent:m,TIME_FUDGE_FACTOR:s},t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){(function(e){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=i(r),a={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),n=t.currentSource_;return e(n)}},s=function l(e,t){var n=0,i=0,r=o["default"].mergeOptions(a,t),s=function(){i&&e.currentTime(i)},u=function(t){null!==t&&void 0!==t&&(i=1/0!==e.duration()&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.play())},c=function(){return Date.now()-n<1e3*r.errorInterval?void 0:r.getSource&&"function"==typeof r.getSource?(n=Date.now(),r.getSource.call(e,u)):void o["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},d=function h(){e.off("loadedmetadata",s),e.off("error",c),e.off("dispose",h)},f=function(t){d(),l(e,t)};e.on("error",c),e.on("dispose",d),e.reloadSourceOnError=f},u=function(e){s(this,e)};n["default"]=u,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./playlist.js"),o=function(e,t,n,i){var o=e.master.playlists[t],a=r.isBlacklisted(o),s=r.isEnabled(o);return"undefined"==typeof i?s:(i?delete o.disabled:o.disabled=!0,i===s||a||n(),i)},a=function u(e,t,n){i(this,u);var r=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(t.attributes){var a=t.attributes;if(a.RESOLUTION){var s=a.RESOLUTION;this.width=s.width,this.height=s.height}this.bandwidth=a.BANDWIDTH}this.id=n,this.enabled=o.bind(this,e.playlists,t.uri,r)},s=function(e){var t=e.playlists;e.representations=function(){return t.master.playlists.filter(function(e){return!r.isBlacklisted(e)}).map(function(t){return new a(e,t,t.uri)})}};n["default"]=s,t.exports=n["default"]},{"./playlist.js":8}],12:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("url-toolkit"),o=i(r),a=e("global/window"),s=i(a),u=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=o["default"].buildAbsoluteURL(s["default"].location.href,e)),o["default"].buildAbsoluteURL(e,t))};n["default"]=u,t.exports=n["default"]},{"global/window":28,"url-toolkit":41}],13:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},l=e("./playlist"),c="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,d=r(c),f=e("./source-updater"),h=r(f),p=e("./config"),g=r(p),m=e("global/window"),v=r(m),y=e("./bin-utils"),_=500,b="console",T=function(){v["default"].logit&&v["default"][b].log.apply(v["default"][b],arguments)},w=function(e,t,n){if(!e)return!1;var i=e.segments,r=n===i.length;return e.endList&&"open"===t.readyState&&r},E=function(e){var t=void 0,n=void 0;return n=e.offset+e.length-1,t=e.offset,"bytes="+t+"-"+n},S=function(e){var t={};return"byterange"in e&&(t.Range=E(e.byterange)),t},C=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},P=function(e){function t(e){var n=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=void 0;if(!e)throw new TypeError("Initialization options are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");i=d["default"].mergeOptions(d["default"].options.hls,e),this.state="INIT",this.bandwidth=i.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=0/0,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=i.hasPlayed,this.currentTime_=i.currentTime,this.seekable_=i.seekable,this.seeking_=i.seeking,this.setCurrentTime_=i.setCurrentTime,this.mediaSource_=i.mediaSource,this.hls_=i.hls,this.loaderType_=i.loaderType,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.xhr_=null,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=i.decrypter,this.syncController_=i.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return n.trigger("syncinfoupdate")}),this.fetchAtBuffer_=!1}return a(t,e),s(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){return"WAITING"!==this.state?void(this.pendingSegment_&&(this.pendingSegment_=null)):(this.abort_(),void(this.paused()||(this.state="READY",this.monitorBuffer_())))}},{key:"error",value:function(e){return"undefined"!=typeof e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"load",value:function(){return this.monitorBuffer_(),this.playlist_?(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.mimeType_?this.init_():void(!this.sourceUpdater_||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))):void 0}},{key:"playlist",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e){var n=this.playlist_,i=this.pendingSegment_;if(this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.trigger("syncinfoupdate")),this.mimeType_&&"INIT"===this.state&&!this.paused())return this.init_();if(!n||n.uri!==e.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var r=e.mediaSequence-n.mediaSequence;T("mediaSequenceDiff",r),null!==this.mediaIndex&&(this.mediaIndex-=r),i&&(i.mediaIndex-=r,i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(v["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e){this.mimeType_||(this.mimeType_=e,this.playlist_&&"INIT"===this.state&&!this.paused()&&this.init_())}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&v["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=v["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&v["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=v["default"].setTimeout(this.monitorBufferTick_.bind(this),_)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"checkBuffer_",value:function(e,t,n,i,r,o){var a=0,s=void 0;e.length&&(a=e.end(e.length-1));var u=Math.max(0,a-r);if(!t.segments.length)return null;if(T("cB_","mediaIndex:",n,"hasPlayed:",i,"currentTime:",r,"syncPoint:",o,"fetchAtBuffer:",this.fetchAtBuffer_),T("cB_ 2","bufferedTime:",u),u>=g["default"].GOAL_BUFFER_LENGTH)return null;if(!i&&u>=1)return null;if(null===o)return n=this.getSyncSegmentCandidate_(t),T("getSync",n),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){T("++",n+1);var c=t.segments[n];return s=c&&c.end?c.end:a,this.generateSegmentInfo_(t,n+1,s,!1)}if(this.fetchAtBuffer_){var d=l.getMediaInfoForTime_(t,a,o.segmentIndex,o.time);n=d.mediaIndex,s=d.startTime}else{var d=l.getMediaInfoForTime_(t,r,o.segmentIndex,o.time);n=d.mediaIndex,s=d.startTime}return T("gMIFT",n,"sos",s),this.generateSegmentInfo_(t,n,s,!1)}},{key:"generateSegmentInfo_",value:function(e,t,n,i){if(0>t||t>=e.segments.length)return null;var r=e.segments[t];return{uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abort_",value:function(){this.xhr_&&this.xhr_.abort(),this.pendingSegment_=null}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new h["default"](this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.mediaSource_.duration,this.currentTimeline_));var e=this.checkBuffer_(this.sourceUpdater_.buffered(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e){var t=w(this.playlist_,this.mediaSource_,e.mediaIndex);return t?void this.mediaSource_.endOfStream():void((e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.currentTimeline_=e.timeline,this.loadSegment_(e)))}}}},{key:"trimBuffer_",value:function(){var e=this.seekable_(),t=this.currentTime_(),n=void 0;return e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):n=t-60}},{key:"loadSegment_",value:function(e){var t=this,n=void 0,i=void 0,r=void 0,o=void 0,a=0;if(a=this.trimBuffer_(e),a>0&&this.sourceUpdater_.remove(0,a),n=e.segment,n.key){var s=d["default"].mergeOptions(this.xhrOptions_,{uri:n.key.resolvedUri,responseType:"arraybuffer"});i=this.hls_.xhr(s,this.handleResponse_.bind(this))}if(n.map&&!this.initSegments_[C(n.map)]){var u=d["default"].mergeOptions(this.xhrOptions_,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:S(n.map)});r=this.hls_.xhr(u,this.handleResponse_.bind(this))}this.pendingSegment_=e;var l=d["default"].mergeOptions(this.xhrOptions_,{uri:e.uri,responseType:"arraybuffer",headers:S(n)});o=this.hls_.xhr(l,this.handleResponse_.bind(this)),o.addEventListener("progress",function(e){t.trigger(e)}),this.xhr_={keyXhr:i,initSegmentXhr:r,segmentXhr:o,abort:function(){this.segmentXhr&&(this.segmentXhr.onreadystatechange=null,this.segmentXhr.abort(),this.segmentXhr=null),this.initSegmentXhr&&(this.initSegmentXhr.onreadystatechange=null,this.initSegmentXhr.abort(),this.initSegmentXhr=null),this.keyXhr&&(this.keyXhr.onreadystatechange=null,this.keyXhr.abort(),this.keyXhr=null)}},this.state="WAITING"}},{key:"handleResponse_",value:function(e,t){var n=void 0,i=void 0,r=void 0;if(this.xhr_&&(t===this.xhr_.segmentXhr||t===this.xhr_.keyXhr||t===this.xhr_.initSegmentXhr)){if(n=this.pendingSegment_,i=n.segment,t.timedout)return this.abort_(),this.bandwidth=1,this.roundTrip=0/0,this.state="READY",this.trigger("progress");if(!t.aborted&&e){var o=this.xhr_.keyXhr;return this.abort_(),this.error({status:t.status,message:t===o?"HLS key request error at URL: "+i.key.uri:"HLS segment request error at URL: "+n.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error")}if(!t.response)return void this.abort_();if(t===this.xhr_.segmentXhr&&(this.xhr_.segmentXhr=null,n.startOfAppend=Date.now(),this.roundTrip=t.roundTripTime,this.bandwidth=t.bandwidth,this.mediaBytesTransferred+=t.bytesReceived||0,this.mediaRequests+=1,this.mediaTransferDuration+=t.roundTripTime||0,i.key?n.encryptedBytes=new Uint8Array(t.response):n.bytes=new Uint8Array(t.response)),t===this.xhr_.keyXhr){if(this.xhr_.keyXhr=null,16!==t.response.byteLength)return this.abort_(),this.error({status:t.status,message:"Invalid HLS key at URL: "+i.key.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error");r=new DataView(t.response),i.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),i.key.iv=i.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence])}t===this.xhr_.initSegmentXhr&&(this.xhr_.initSegmentXhr=null,i.map.bytes=new Uint8Array(t.response),this.initSegments_[C(i.map)]=i.map),this.xhr_.segmentXhr||this.xhr_.keyXhr||this.xhr_.initSegmentXhr||(this.xhr_=null,this.processResponse_())}}},{key:"resetEverything",value:function(){this.resetLoader(),this.remove(0,1/0)}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null}},{key:"remove",value:function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t)}},{key:"processResponse_",value:function(){if(!this.pendingSegment_)return void(this.state="READY");this.state="DECRYPTING";var e=this.pendingSegment_,t=e.segment;t.key?this.decrypter_.postMessage(y.createTransferableMessage({source:this.loaderType_,encrypted:e.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[e.encryptedBytes.buffer,t.key.bytes.buffer]):this.handleSegment_()}},{key:"handleDecrypted_",value:function(e){var t=this.pendingSegment_,n=e.decrypted;t&&(t.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength)),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_)return void(this.state="READY");this.state="APPENDING";var t=this.pendingSegment_,n=t.segment;return this.syncController_.probeSegmentInfo(t),t.isSyncRequest?(this.pendingSegment_=null,void(this.state="READY")):(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&this.sourceUpdater_.timestampOffset(t.timestampOffset),n.map&&!function(){var t=C(n.map);if(!e.activeInitSegmentId_||e.activeInitSegmentId_!==t){var i=e.initSegments_[t];e.sourceUpdater_.appendBuffer(i.bytes,function(){e.activeInitSegmentId_=t})}}(),t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration,void this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this)))}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.pendingSegment_=null,this.recordThroughput_(e),this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,T("handleUpdateEnd_",this.mediaIndex);var t=w(e.playlist,this.mediaSource_,this.mediaIndex+1);t&&this.mediaSource_.endOfStream(),this.state="READY",this.trigger("progress"),this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.startOfAppend+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}}]),t}(d["default"].EventTarget);n["default"]=P,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./playlist":8,"./source-updater":14,"global/window":28}],14:[function(e,t,n){(function(e){function i(e){return e&&e.__esModule?e:{"default":e}
}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,s=i(a),u=function(){function e(t,n){var i=this;r(this,e);var o=function(){i.sourceBuffer_=t.addSourceBuffer(n),i.onUpdateendCallback_=function(){var e=i.pendingCallback_;i.pendingCallback_=null,e&&e(),i.runCallback_()},i.sourceBuffer_.addEventListener("updateend",i.onUpdateendCallback_),i.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,"closed"===t.readyState?t.addEventListener("sourceopen",o):o()}return o(e,[{key:"abort",value:function(e){var t=this;this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:s["default"].createTimeRanges()}},{key:"duration",value:function(e){var t=this;this.queueCallback_(function(){t.sourceBuffer_.duration=e})}},{key:"remove",value:function(e,t){var n=this;this.queueCallback_(function(){n.sourceBuffer_.remove(e,t)})}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating}},{key:"timestampOffset",value:function(e){var t=this;return"undefined"!=typeof e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;this.sourceBuffer_&&!this.sourceBuffer_.updating&&this.callbacks_.length&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}();n["default"]=u,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners={}}return r(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=void 0;return this.listeners[e]?(n=this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),n>-1):!1}},{key:"trigger",value:function(e){var t=void 0,n=void 0,i=void 0,r=void 0;if(t=this.listeners[e])if(2===arguments.length)for(i=t.length,n=0;i>n;++n)t[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=t.length,n=0;i>n;++n)t[n].apply(this,r)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),e}();n["default"]=o,t.exports=n["default"]},{}],16:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},u=e("mux.js/lib/mp4/probe"),l=i(u),c=e("mux.js/lib/tools/ts-inspector.js"),d=e("./playlist"),f="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,h=i(f),p="console",g=function(){window.logit&&window[p].log.apply(window[p],arguments)},m=[{name:"VOD",run:function(e,t,n){if(1/0!==n){var i={time:0,segmentIndex:0};return i}return null}},{name:"ProgramDateTime",run:function(e,t){if(e.datetimeToDisplayTime&&t.dateTimeObject){var n=t.dateTimeObject.getTime()/1e3,i=n+e.datetimeToDisplayTime,r={time:i,segmentIndex:0};return r}return null}},{name:"Segment",run:function(e,t,n,i){for(var r=t.segments,o=r.length-1;o>=0;o--){var a=r[o];if(a.timeline===i&&"undefined"!=typeof a.start){var s={time:a.start,segmentIndex:o};return s}}return null}},{name:"Discontinuity",run:function(e,t){if(t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var i=t.discontinuityStarts[n],r=t.discontinuitySequence+n+1;if(e.discontinuities[r]){var o={time:e.discontinuities[r].time,segmentIndex:i};return o}}return null}},{name:"Playlist",run:function(e,t){if(t.syncInfo){var n={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence};return n}return null}}];n.syncPointStrategies=m;var v=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.inspectCache_=void 0,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null}return o(t,e),a(t,[{key:"getSyncPoint",value:function(e,t,n){for(var i=0;i<m.length;i++){var r=m[i],o=r.run(this,e,t,n);if(o)return g("syncPoint found via <"+r.name+">:",o),o}return null}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence,i=n-1;i>=0;i--){var r=e.segments[i];if("undefined"!=typeof r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},g("playlist sync:",t.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.dateTimeObject){var t=e.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=void 0;n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e),n&&this.calculateSegmentTimeMapping_(e,n)&&this.saveDiscontinuitySyncInfo_(e)}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=l["default"].timescale(t.map.bytes),i=l["default"].startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=c.inspect(e.bytes,this.inspectCache_),n=void 0,i=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime),{start:n,end:i}):null}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)g("tsO:",e.timestampOffset),i={time:e.timestampOffset,mapping:e.timestampOffset-t.start},this.timelines[e.timeline]=i,n.start=e.timestampOffset,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return this.trigger("syncinfoupdate"),!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],o=t.discontinuitySequence+i+1,a=r-e.mediaIndex;a>0&&(!this.discontinuities[o]||this.discontinuities[o].accuracy>a)&&(this.discontinuities[o]={time:n.end+d.sumDurations(t,e.mediaIndex+1,r),accuracy:a})}}}]),t}(h["default"].EventTarget);n["default"]=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":8,"mux.js/lib/mp4/probe":38,"mux.js/lib/tools/ts-inspector.js":39}],17:[function(e,t,n){(function(e){Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,r=function(){var e=function t(e,n){if(e=i.mergeOptions({timeout:45e3},e),t.beforeRequest&&"function"==typeof t.beforeRequest){var r=t.beforeRequest(e);r&&(e=r)}var o=i.xhr(e,function(e,t){!e&&o.response&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=o.response.byteLength||o.response.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),o.timedout=e||o.timedout?o.timedout||"ETIMEDOUT"===e.code:!1,e||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(o.response||o.responseText)))),n(e,o)});return o.requestTime=Date.now(),o};return e};n["default"]=r,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],o=void 0,a=void 0,s=void 0,u=[],l=[],c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,g=void 0;for(o=0;256>o;o++)l[(u[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!i[a];a^=c||1,s=l[s]||1)for(h=s^s<<1^s<<2^s<<3^s<<4,h=h>>8^255&h^99,i[a]=h,r[h]=a,f=u[d=u[c=u[a]]],g=16843009*f^65537*d^257*c^16843008*a,p=257*u[h]^16843008*h,o=0;4>o;o++)t[o][a]=p=p<<24^p>>>8,n[o][h]=g=g<<24^g>>>8;for(o=0;5>o;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e},a=null,s=function(){function e(t){i(this,e),a||(a=o()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var n=void 0,r=void 0,s=void 0,u=void 0,l=void 0,c=this._tables[0][4],d=this._tables[1],f=t.length,h=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(u=t.slice(0),l=[],this._key=[u,l],n=f;4*f+28>n;n++)s=u[n-1],(n%f===0||8===f&&n%f===4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],n%f===0&&(s=s<<8^s>>>24^h<<24,h=h<<1^283*(h>>7))),u[n]=u[n-f]^s;for(r=0;n;r++,n--)s=u[3&r?n:n-4],l[r]=4>=n||4>r?s:d[0][c[s>>>24]]^d[1][c[s>>16&255]]^d[2][c[s>>8&255]]^d[3][c[255&s]]}return r(e,[{key:"decrypt",value:function(e,t,n,i,r,o){var a=this._key[1],s=e^a[0],u=i^a[1],l=n^a[2],c=t^a[3],d=void 0,f=void 0,h=void 0,p=a.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],w=v[4];for(g=0;p>g;g++)d=y[s>>>24]^_[u>>16&255]^b[l>>8&255]^T[255&c]^a[m],f=y[u>>>24]^_[l>>16&255]^b[c>>8&255]^T[255&s]^a[m+1],h=y[l>>>24]^_[c>>16&255]^b[s>>8&255]^T[255&u]^a[m+2],c=y[c>>>24]^_[s>>16&255]^b[u>>8&255]^T[255&l]^a[m+3],m+=4,s=d,u=f,l=h;for(g=0;4>g;g++)r[(3&-g)+o]=w[s>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^a[m++],d=s,s=u,u=l,l=c,c=d}}]),e}();n["default"]=s,t.exports=n["default"]},{}],19:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},u=e("./stream"),l=i(u),c=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"]),this.jobs=[],this.delay=1,this.timeout_=null}return o(t,e),a(t,[{key:"processJob_",value:function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),t}(l["default"]);n["default"]=c,t.exports=n["default"]},{"./stream":22}],20:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./aes"),s=i(a),u=e("./async-stream"),l=i(u),c=e("pkcs7"),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},f=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new s["default"](Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),a=new Int32Array(o.buffer),u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;for(u=n[0],l=n[1],c=n[2],f=n[3],v=0;v<i.length;v+=4)h=d(i[v]),p=d(i[v+1]),g=d(i[v+2]),m=d(i[v+3]),r.decrypt(h,p,g,m,a,v),a[v]=d(a[v]^u),a[v+1]=d(a[v+1]^l),a[v+2]=d(a[v+2]^c),a[v+3]=d(a[v+3]^f),u=h,l=p,c=g,f=m;return o};n.decrypt=f;var h=function(){function e(t,n,i,o){r(this,e);var a=e.STEP,s=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),f=0;for(this.asyncStream_=new l["default"],this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),n,i,u)),f=a;f<s.length;f+=a)i=new Uint32Array([d(s[f-4]),d(s[f-3]),d(s[f-2]),d(s[f-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),n,i,u));this.asyncStream_.push(function(){o(null,c.unpad(u))})}return o(e,[{key:"decryptChunk_",value:function(e,t,n,i){return function(){var r=f(e,t,n);i.set(r,e.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),e}();n.Decrypter=h,n["default"]={Decrypter:h,decrypt:f}},{"./aes":18,"./async-stream":19,pkcs7:24}],21:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./decrypter"),o=e("./async-stream"),a=i(o);n["default"]={decrypt:r.decrypt,Decrypter:r.Decrypter,AsyncStream:a["default"]},t.exports=n["default"]},{"./async-stream":19,"./decrypter":20}],22:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],23:[function(e,t){var n;t.exports=function(e){var t=n[e.byteLength%16||0],i=new Uint8Array(e.byteLength+t.length);return i.set(e),i.set(t,e.byteLength),i},n=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],24:[function(e,t,n){n.pad=e("./pad.js"),n.unpad=e("./unpad.js")},{"./pad.js":23,"./unpad.js":25}],25:[function(e,t){t.exports=function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}],26:[function(){},{}],27:[function(e,t){(function(n){var i="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},r=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=i["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":26}],28:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t){function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./line-stream"),r=n(i),o=e("./parse-stream"),a=n(o),s=e("./parser"),u=n(s);t.exports={LineStream:r["default"],ParseStream:a["default"],Parser:u["default"]}},{"./line-stream":30,"./parse-stream":31,"./parser":32}],30:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("./stream"),l=i(u),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.buffer="",e}return a(t,e),s(t,[{key:"push",value:function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),t}(l["default"]);n["default"]=c},{"./stream":33}],31:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./stream"),c=i(l),d=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},f=function(e){for(var t=e.split(d()),n={},i=t.length,r=void 0;i--;)""!==t[i]&&(r=/([^=]*)=(.*)/.exec(t[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),u(t,[{key:"push",value:function(e){var t=void 0,n=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});if(0!==e.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var i=f(t[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var r=i.BYTERANGE.split("@"),o=s(r,2),a=o[0],u=o[1];n.byterange={},a&&(n.byterange.length=parseInt(a,10)),u&&(n.byterange.offset=parseInt(u,10))}}return void this.trigger("data",n)}if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=f(t[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),n.attributes.RESOLUTION=c}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}return void this.trigger("data",n)}return(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))?(n={type:"tag",tagType:"media"},t[1]&&(n.attributes=f(t[1])),void this.trigger("data",n)):(t=/^#EXT-X-ENDLIST/.exec(e))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(t=/^#EXT-X-DISCONTINUITY/.exec(e))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n)):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(n={type:"tag",tagType:"key"},t[1]&&(n.attributes=f(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n)):(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out-cont"},n.data=t[1]?t[1]:"",void this.trigger("data",n)):(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out"},n.data=t[1]?t[1]:"",void this.trigger("data",n)):(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-in"},n.data=t[1]?t[1]:"",void this.trigger("data",n)):void this.trigger("data",{type:"tag",data:e.slice(4)})}}}]),t}(c["default"]);n["default"]=h},{"./stream":33}],32:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./stream"),c=i(l),d=e("./line-stream"),f=i(d),h=e("./parse-stream"),p=i(h),g=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.lineStream=new f["default"],e.parseStream=new p["default"],e.lineStream.pipe(e.parseStream);var n=e,i=[],a={},u=void 0,l=void 0,c=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(e){var t=void 0,r=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function o(){var o={};"length"in e&&(a.byterange=o,o.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(a.byterange=o,o.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key:function(){return e.attributes?"NONE"===e.attributes.METHOD?void(l=null):e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void("undefined"!=typeof e.attributes.IV&&(l.iv=e.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(e.number)?void(this.manifest.mediaSequence=e.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){return isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,void(h=e.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){return/VOD|EVENT/.test(e.playlistType)?void(this.manifest.playlistType=e.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){u={},e.uri&&(u.uri=e.uri),e.byterange&&(u.byterange=e.byterange)},"stream-inf":function(){return this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes?(a.attributes||(a.attributes={}),void s(a.attributes,e.attributes)):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],r={"default":/yes/i.test(e.attributes.DEFAULT)},r.autoselect=r["default"]?!0:/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(r.language=e.attributes.LANGUAGE),e.attributes.URI&&(r.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(r.instreamId=e.attributes["INSTREAM-ID"]),t[e.attributes.NAME]=r},discontinuity:function(){h+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function(){this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){return!isFinite(e.duration)||e.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):void(this.manifest.targetDuration=e.duration)},totalduration:function(){return!isFinite(e.duration)||e.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):void(this.manifest.totalDuration=e.duration)},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}})[e.tagType]||c).call(n)},uri:function(){a.uri=e.uri,i.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=h,u&&(a.map=u),a={}},comment:function(){}})[e.type].call(n)}),e}return a(t,e),u(t,[{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),t}(c["default"]);n["default"]=g},{"./line-stream":30,"./parse-stream":31,"./stream":33}],33:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners={}}return r(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1}},{key:"trigger",value:function(e){var t=this.listeners[e],n=void 0,i=void 0,r=void 0;if(t)if(2===arguments.length)for(i=t.length,n=0;i>n;++n)t[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=t.length,n=0;i>n;++n)t[n].apply(this,r)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)
})}}]),e}();n["default"]=o},{}],34:[function(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},r=function(e,t,n){var i,r="";for(i=t;n>i;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},o=function(e,t,n){return unescape(r(e,t,n))},a=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)>>4;return r?n+20:n+10},s=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},u=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":e[t]&!0&&240===(240&e[t+1])?"audio":null},l=function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240===(246&e[t+1]))return n[(60&e[t+2])>>>2];t++}return null},c=function(e){var t,n,r,a;t=10,64&e[5]&&(t+=4,t+=i(e.subarray(10,14)));do{if(n=i(e.subarray(t+4,t+8)),1>n)return null;if(a=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===a){r=e.subarray(t+10,t+n+10);for(var s=0;s<r.byteLength;s++)if(0===r[s]){var u=o(r,0,s);if("com.apple.streaming.transportStreamTimestamp"===u){var l=r.subarray(s+1),c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;return c*=4,c+=3&l[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null};t.exports={parseId3TagSize:a,parseAdtsSize:s,parseType:u,parseSampleRate:l,parseAacTimestamp:c}},{}],35:[function(e,t){var n=e("./stream-types.js"),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},r=function(e){return!!(64&e[1])},o=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},a=function(e,t){var n=i(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},s=function(e){var t=r(e),n=4+o(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},u=function(e){var t={},n=r(e),i=4+o(e);if(n&&(i+=e[i]+1),1&e[i+5]){var a,s,u;a=(15&e[i+1])<<8|e[i+2],s=3+a-4,u=(15&e[i+10])<<8|e[i+11];for(var l=12+u;s>l;){var c=i+l;t[(31&e[c+1])<<8|e[c+2]]=e[c],l+=((15&e[c+3])<<8|e[c+4])+5}return t}},l=function(e,t){var r=i(e),o=t[r];switch(o){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},c=function(e){var t=r(e);if(!t)return null;var n,i=4+o(e),a={};return n=e[i+7],192&n&&(a.pts=(14&e[i+9])<<27|(255&e[i+10])<<20|(254&e[i+11])<<12|(255&e[i+12])<<5|(254&e[i+13])>>>3,a.pts*=4,a.pts+=(6&e[i+13])>>>1,a.dts=a.pts,64&n&&(a.dts=(14&e[i+14])<<27|(255&e[i+15])<<20|(254&e[i+16])<<12|(255&e[i+17])<<5|(254&e[i+18])>>>3,a.dts*=4,a.dts+=(6&e[i+18])>>>1)),a},d=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},f=function(e){for(var t,n=4+o(e),i=e.subarray(n),r=0,a=0,s=!1;a<i.byteLength-3;a++)if(1===i[a+2]){r=a+5;break}for(;r<i.byteLength;)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}a+3!==r-2&&(t=d(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(s=!0));do r++;while(1!==i[r]&&r<i.length);a=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}t=d(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(s=!0),a=r-2,r+=3;break;default:r+=3}return i=i.subarray(a),r-=a,a=0,i&&i.byteLength>3&&(t=d(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(s=!0)),s};t.exports={parseType:a,parsePat:s,parsePmt:u,parsePayloadUnitStartIndicator:r,parsePesType:l,parsePesTime:c,videoPacketContainsKeyFrame:f}},{"./stream-types.js":36}],36:[function(e,t){t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],37:[function(e,t){var n=e("../utils/stream"),i=8589934592,r=4294967296,o=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>r;)e+=n*i;return e},a=function(e){var t,n;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=o(e.dts,n),e.pts=o(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")}};a.prototype=new n,t.exports={TimestampRolloverStream:a,handleRollover:o}},{"../utils/stream":40}],38:[function(e,t){var n,i,r,o;n=function(e,t){var r,o,a,s,u,l=[];if(!t.length)return null;for(r=0;r<e.byteLength;)o=e[r]<<24,o|=e[r+1]<<16,o|=e[r+2]<<8,o|=e[r+3],a=i(e.subarray(r+4,r+8)),s=o>1?r+o:e.byteLength,a===t[0]&&(1===t.length?l.push(e.subarray(r+8,s)):(u=n(e.subarray(r+8,s),t.slice(1)),u.length&&(l=l.concat(u)))),r=s;return l},i=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},r=function(e){var t={},i=n(e,["moov","trak"]);return i.reduce(function(e,t){var i,r,o,a,s;return(i=n(t,["tkhd"])[0])?(r=i[0],o=0===r?12:20,a=i[o]<<24|i[o+1]<<16|i[o+2]<<8|i[o+3],(s=n(t,["mdia","mdhd"])[0])?(r=s[0],o=0===r?12:20,e[a]=s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3],e):null):null},t)},o=function(e,t){var i,r,o;return i=n(t,["moof","traf"]),r=[].concat.apply([],i.map(function(t){return n(t,["tfhd"]).map(function(i){var r,o,a;return r=i[4]<<24|i[5]<<16|i[6]<<8|i[7],o=e[r]||9e4,a=n(t,["tfdt"]).map(function(e){var t,n;return t=e[0],n=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(n*=Math.pow(2,32),n+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),n})[0],a=a||1/0,a/o})})),o=Math.min.apply(null,r),isFinite(o)?o:0},t.exports={parseType:i,timescale:r,startTime:o}},{}],39:[function(e,t){var n=e("../m2ts/stream-types.js"),i=e("../m2ts/timestamp-rollover-stream.js").handleRollover,r={};r.ts=e("../m2ts/probe.js"),r.aac=e("../aac/probe.js");var o=9e4,a=188,s=71,u=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)?!0:!1},l=function(e,t){for(var n,i,o=0,u=a;u<e.byteLength;)if(e[o]!==s||e[u]!==s)o++,u++;else{switch(n=e.subarray(o,u),i=r.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=r.ts.parsePat(n));break;case"pmt":t.table||(t.table=r.ts.parsePmt(n))}if(t.pid&&t.table)return;o+=a,u+=a}},c=function(e,t,n){for(var i,o,u,l,c,d=0,f=a,h=!1;f<e.byteLength;)if(e[d]!==s||e[f]!==s)d++,f++;else{switch(i=e.subarray(d,f),o=r.ts.parseType(i,t.pid)){case"pes":u=r.ts.parsePesType(i,t.table),l=r.ts.parsePayloadUnitStartIndicator(i),"audio"===u&&l&&(c=r.ts.parsePesTime(i),c.type="audio",n.audio.push(c),h=!0)}if(h)break;d+=a,f+=a}for(f=e.byteLength,d=f-a,h=!1;d>=0;)if(e[d]!==s||e[f]!==s)d--,f--;else{switch(i=e.subarray(d,f),o=r.ts.parseType(i,t.pid)){case"pes":u=r.ts.parsePesType(i,t.table),l=r.ts.parsePayloadUnitStartIndicator(i),"audio"===u&&l&&(c=r.ts.parsePesTime(i),c.type="audio",n.audio.push(c),h=!0)}if(h)break;d-=a,f-=a}},d=function(e,t,n){for(var i,o,u,l,c,d,f,h,p=0,g=a,m=!1,v={data:[],size:0};g<e.byteLength;)if(e[p]!==s||e[g]!==s)p++,g++;else{switch(i=e.subarray(p,g),o=r.ts.parseType(i,t.pid)){case"pes":if(u=r.ts.parsePesType(i,t.table),l=r.ts.parsePayloadUnitStartIndicator(i),"video"===u&&(l&&!m&&(c=r.ts.parsePesTime(i),c.type="video",n.video.push(c),m=!0),!n.firstKeyFrame)){if(l&&0!==v.size){for(d=new Uint8Array(v.size),f=0;v.data.length;)h=v.data.shift(),d.set(h,f),f+=h.byteLength;r.ts.videoPacketContainsKeyFrame(d)&&(n.firstKeyFrame=r.ts.parsePesTime(d),n.firstKeyFrame.type="video"),v.size=0}v.data.push(i),v.size+=i.byteLength}}if(m&&n.firstKeyFrame)break;p+=a,g+=a}for(g=e.byteLength,p=g-a,m=!1;p>=0;)if(e[p]!==s||e[g]!==s)p--,g--;else{switch(i=e.subarray(p,g),o=r.ts.parseType(i,t.pid)){case"pes":u=r.ts.parsePesType(i,t.table),l=r.ts.parsePayloadUnitStartIndicator(i),"video"===u&&l&&(c=r.ts.parsePesTime(i),c.type="video",n.video.push(c),m=!0)}if(m)break;p-=a,g-=a}},f=function(e,t){if(e.audio&&e.audio.length){var n=t;"undefined"==typeof n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o})}if(e.video&&e.video.length){var r=t;if("undefined"==typeof r&&(r=e.video[0].dts),e.video.forEach(function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=i(a.dts,r),a.pts=i(a.pts,r),a.dtsTime=a.dts/o,a.ptsTime=a.dts/o}}},h=function(e){for(var t,n=!1,i=0,a=null,s=null,u=0,l=0;e.length-l>=3;){var c=r.aac.parseType(e,l);switch(c){case"timed-metadata":if(e.length-l<10){n=!0;break}if(u=r.aac.parseId3TagSize(e,l),u>e.length){n=!0;break}null===s&&(t=e.subarray(l,l+u),s=r.aac.parseAacTimestamp(t)),l+=u;break;case"audio":if(e.length-l<7){n=!0;break}if(u=r.aac.parseAdtsSize(e,l),u>e.length){n=!0;break}null===a&&(t=e.subarray(l,l+u),a=r.aac.parseSampleRate(t)),i++,l+=u;break;default:l++}if(n)return null}if(null===a||null===s)return null;var d=o/a,f={audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*d,pts:s+1024*i*d}]};return f},p=function(e){var t={pid:null,table:null},i={};l(e,t);for(var r in t.table)if(t.table.hasOwnProperty(r)){var o=t.table[r];switch(o){case n.H264_STREAM_TYPE:i.video=[],d(e,t,i),0===i.video.length&&delete i.video;break;case n.ADTS_STREAM_TYPE:i.audio=[],c(e,t,i),0===i.audio.length&&delete i.audio}}return i},g=function(e,t){var n,i=u(e);return n=i?h(e):p(e),n&&(n.audio||n.video)?(f(n,t),n):null};t.exports={inspect:g}},{"../aac/probe.js":34,"../m2ts/probe.js":35,"../m2ts/stream-types.js":36,"../m2ts/timestamp-rollover-stream.js":37}],40:[function(e,t){var n=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return e[t]?(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1):!1},this.trigger=function(t){var n,i,r,o;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;r>i;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;r>i;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};n.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},n.prototype.push=function(e){this.trigger("data",e)},n.prototype.flush=function(e){this.trigger("done",e)},t.exports=n},{}],41:[function(t,n,i){!function(t){var r=/^([^#]*)(.*)$/,o=/^([^\?]*)(.*)$/,a=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,s={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var n=null,i=null,u=r.exec(t);u&&(i=u[2],t=u[1]);var l=o.exec(t);l&&(n=l[2],t=l[1]);var c=r.exec(e);c&&(e=c[1]);var d=o.exec(e);d&&(e=d[1]);var f=a.exec(e);if(!f)throw new Error("Error trying to parse base URL.");var h=f[2]||"",p=f[1]||"",g=f[3];0!==g.indexOf("/")&&""!==p&&(g="/"+g);var m=null;return m=/^\/\//.test(t)?h+s.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?p+"/"+s.buildAbsolutePath("",t.substring(1)):s.buildAbsolutePath(p+g,t),n&&(m+=n),i&&(m+=i),m},buildAbsolutePath:function(e,t){for(var n,i,r=t,o="",a=e.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;i=a.indexOf("/../",s),i>-1;s=i+n)n=/^\/(?:\.\.\/)*/.exec(a.slice(i))[0].length,o=(o+a.substring(s,i)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return o+a.substr(s)}};"object"==typeof i&&"object"==typeof n?n.exports=s:"function"==typeof e&&e.amd?e([],function(){return s}):"object"==typeof i?i.URLToolkit=s:t.URLToolkit=s}(this)},{}],42:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("global/window"),a=r(o),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,u=r(s),l=function(e){Object.defineProperties(e.frame,{id:{get:function(){return u["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return u["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return u["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},c=function(e){var t=void 0;return t=isNaN(e)||1/0===Math.abs(e)?Number.MAX_VALUE:e},d=function(e,t,n){var i=a["default"].WebKitDataCue||a["default"].VTTCue;if(t&&t.forEach(function(e){this.inbandTextTrack_.addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var r=c(e.mediaSource_.duration);if(n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var n=new i(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,l(n),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var o=e.metadataTrack_.cues,s=[],u=0;u<o.length;u++)s.push(o[u]);s.sort(function(e,t){return e.startTime-t.startTime});for(var d=0;d<s.length-1;d++)s[d].endTime!==s[d+1].startTime&&(s[d].endTime=s[d+1].startTime);s[s.length-1].endTime=r}}};n["default"]={addTextTrackData:d,durationOfVideo:c},t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":28}],43:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=e.remoteTextTracks()||[],r=0;r<i.length;r++){var o=i[r];o.kind===t&&o.label===n&&e.removeRemoteTextTrack(o)}};n.removeExistingTrack=i;var r=function(e){i(e,"captions","cc1"),i(e,"metadata","Timed Metadata")};n.cleanupTextTracks=r},{}],44:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return/mp4a\.\d+.\d+/i.test(e)},r=function(e){return/avc1\.[\da-f]+/i.test(e)},o=function(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach(function(e){var n=e.trim().split("=");if(n.length>1){var i=n[0].replace(/"/g,"").trim(),r=n[1].replace(/"/g,"").trim();t.parameters[i]=r}}),t},a=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){var i=("00"+Number(t).toString(16)).slice(-2),r=("00"+Number(n).toString(16)).slice(-2);return"avc1."+i+"00"+r})})};n["default"]={isAudioCodec:i,parseContentType:o,isVideoCodec:r,translateLegacyCodecs:a},t.exports=n["default"]},{}],45:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=e("./cleanup-text-tracks"),r=function(e,t,n){var r=t.player_;n.captions&&n.captions.length&&!e.inbandTextTrack_&&(i.removeExistingTrack(r,"captions","cc1"),e.inbandTextTrack_=r.addRemoteTextTrack({kind:"captions",label:"cc1"},!1).track),n.metadata&&n.metadata.length&&!e.metadataTrack_&&(i.removeExistingTrack(r,"metadata","Timed Metadata",!0),e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)};n["default"]=r,t.exports=n["default"]},{"./cleanup-text-tracks":43}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};n["default"]=i,t.exports=n["default"]},{}],47:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},l=e("global/document"),c=r(l),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,f=r(d),h=e("./flash-source-buffer"),p=r(h),g=e("./flash-constants"),m=r(g),v=e("./codec-utils"),y=e("./cleanup-text-tracks"),_=function(e){function t(){var e=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=c["default"].getElementById(t.swfId),e.player_=f["default"](e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.tech_.hls&&e.tech_.hls.on("dispose",function(){y.cleanupTextTracks(e.player_)}),e.swfObj&&e.swfObj.vjs_load()})}return a(t,e),s(t,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(e){var t=v.parseContentType(e),n=void 0;if("video/mp2t"!==t.type)throw new Error("NotSupportedError (Video.js)");return n=new p["default"](this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),t}(f["default"].EventTarget);n["default"]=_;try{Object.defineProperty(_.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):0/0},set:function(e){var t=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),n>e)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(b){_.prototype.duration=0/0}for(var T in m["default"])_[T]=m["default"][T];t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cleanup-text-tracks":43,"./codec-utils":44,"./flash-constants":46,"./flash-source-buffer":48,"global/document":27}],48:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},l=e("global/window"),c=r(l),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,f=r(d),h=e("mux.js/lib/flv"),p=r(h),g=e("./remove-cues-from-track"),m=r(g),v=e("./create-text-tracks-if-necessary"),y=r(v),_=e("./add-text-track-data"),b=e("./flash-transmuxer-worker"),T=r(b),w=e("webworkify"),E=r(w),S=e("./flash-constants"),C=r(S),P=function(e){c["default"].setTimeout(e,C["default"].TIME_BETWEEN_CHUNKS)},A=function(){return Math.random().toString(36).slice(2,8)},I=function(e,t){("number"!=typeof t||0>t)&&(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n},x=function(e){function t(e){var n=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=void 0;this.chunkSize_=C["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=0/0,this.mediaSource_=e,this.updating=!1,this.timestampOffset_=0,i=c["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(p["default"].getFlvHeader())));var r=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+r+A(),this.flashEncodedDataName_="vjs_flashEncodedData_"+r+A(),c["default"][this.flashEncodedHeaderName_]=function(){return delete c["default"][n.flashEncodedHeaderName_],i},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=E["default"](T["default"]),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(e){"data"===e.data.action&&n.receiveBuffer_(e.data.segment)},this.one("updateend",function(){n.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=0/0,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return f["default"].createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=I(e[0][0],3),e[0][1]=I(e[0][1],3)),f["default"].createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){m["default"](0,1/0,n.metadataTrack_),m["default"](0,1/0,n.inbandTextTrack_)}),this.mediaSource_.player_.tech_.hls.on("dispose",function(){n.transmuxer_.terminate()})}return a(t,e),s(t,[{key:"appendBuffer",value:function(e){var t=void 0;if(this.updating)throw t=new Error("SourceBuffer.append() cannot be called while an update is in progress"),t.name="InvalidStateError",t.code=11,t;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){m["default"](e,t,this.metadataTrack_),m["default"](e,t,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(e){var t=this;y["default"](this,this.mediaSource_,e),_.addTextTrackData(this,e.captions,e.metadata),P(function(){var n=t.convertTagsToData_(e);0===t.buffer_.length&&P(t.processBuffer_.bind(t)),n&&(t.buffer_.push(n),t.bufferSize_+=n.byteLength)})}},{key:"processBuffer_",value:function(){var e=this,t=C["default"].BYTES_PER_CHUNK;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));var n=this.buffer_[0].subarray(0,t);n.byteLength<t||this.buffer_[0].byteLength===t?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(t),this.bufferSize_-=n.byteLength;for(var i=[],r=n.byteLength,o=0;r>o;o++)i.push(String.fromCharCode(n[o]));var a=c["default"].btoa(i.join(""));c["default"][this.flashEncodedDataName_]=function(){return P(e.processBuffer_.bind(e)),delete c["default"][e.flashEncodedDataName_],a},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource_.tech_,i=0,r=void 0,o=[],a=[],s=e.tags.videoTags,u=e.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(s.length||u.length)){var l=s[0]||{pts:1/0},c=u[0]||{pts:1/0};this.basePtsOffset_=Math.min(c.pts,l.pts)}n.buffered().length&&(i=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(i=Math.max(i,n.currentTime()-this.timestampOffset)),i*=1e3,i+=this.basePtsOffset_;for(var d=0;d<u.length;d++)u[d].pts>=i&&o.push(u[d]);for(var f=0;f<s.length;){var h=s[f];if(h.pts>=i)a.push(h);else if(h.keyFrame){for(var p=f+1,g=!1;p<s.length;){var m=s[p];if(m.pts>=i)break;if(m.keyFrame){g=!0;break}p++}if(g)f=p;else for(;p>f;)a.push(s[f]),f++;continue}f++}var v=this.getOrderedTags_(a,o);if(0!==v.length){for(var d=0;d<v.length;d++)t+=v[d].bytes.byteLength;r=new Uint8Array(t);for(var d=0,y=0;d<v.length;d++)r.set(v[d].bytes,y),y+=v[d].bytes.byteLength;return r}}},{key:"getOrderedTags_",value:function(e,t){for(var n=void 0,i=[];e.length||t.length;)n=e.length?t.length&&t[0].dts<e[0].dts?t.shift():e.shift():t.shift(),i.push(n);return i}}]),t}(f["default"].EventTarget);n["default"]=x,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":42,"./create-text-tracks-if-necessary":45,"./flash-constants":46,"./flash-transmuxer-worker":49,"./remove-cues-from-track":51,"global/window":28,"mux.js/lib/flv":62,webworkify:76}],49:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("global/window"),s=i(a),u=e("mux.js/lib/flv"),l=i(u),c=function(e){e.on("data",function(e){s["default"].postMessage({action:"data",segment:e})}),e.on("done",function(){s["default"].postMessage({action:"done"})})},d=function(){function e(t){r(this,e),this.options=t||{},this.init()}return o(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new l["default"].Transmuxer(this.options),c(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}}]),e}(),f=function(e){e.onmessage=function(e){return"init"===e.data.action&&e.data.options?void(this.messageHandlers=new d(e.data.options)):(this.messageHandlers||(this.messageHandlers=new d),void(e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data)))}};n["default"]=function(e){return new f(e)},t.exports=n["default"]},{"global/window":28,"mux.js/lib/flv":62}],50:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},l=e("global/window"),c=r(l),d=e("global/document"),f=r(d),h="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,p=r(h),g=e("./virtual-source-buffer"),m=r(g),v=e("./add-text-track-data"),y=e("./codec-utils"),_=e("./cleanup-text-tracks"),b=function(e){function t(){var e=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var n=void 0;this.nativeMediaSource_=new c["default"].MediaSource;for(n in this.nativeMediaSource_)n in t.prototype||"function"!=typeof this.nativeMediaSource_[n]||(this[n]=this.nativeMediaSource_[n].bind(this.nativeMediaSource_));this.duration_=0/0,Object.defineProperty(this,"duration",{get:function(){return 1/0===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(e){return this.duration_=e,1/0!==e?void(this.nativeMediaSource_.duration=e):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return 1/0===this.duration_?p["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;for(var t=!1,n=!0,i=0;i<e.player_.audioTracks().length;i++){var r=e.player_.audioTracks()[i];if(r.enabled&&"main"!==r.kind){t=!0,n=!1;break}}e.sourceBuffers.forEach(function(i){if(i.appendAudioInitSegment_=!0,i.videoCodec_&&i.audioCodec_)i.audioDisabled_=t;else if(i.videoCodec_&&!i.audioCodec_)i.audioDisabled_=!0,n=!1;else if(!i.videoCodec_&&i.audioCodec_&&(i.audioDisabled_=n,n))return;e.activeSourceBuffers_.push(i)})},this.onPlayerMediachange_=function(){e.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(){var t=f["default"].querySelector('[src="'+e.url_+'"]');t&&(e.player_=p["default"](t.parentNode),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)),e.player_.on("mediachange",e.onPlayerMediachange_))}),this.on("sourceended",function(){for(var t=v.durationOfVideo(e.duration),n=0;n<e.sourceBuffers.length;n++){var i=e.sourceBuffers[n],r=i.metadataTrack_&&i.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),this.on("sourceclose",function(){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(_.cleanupTextTracks(this.player_),this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_))})}return a(t,e),s(t,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(1/0!==this.duration)throw n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),n.name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=y.parseContentType(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=y.translateLegacyCodecs(i),i=i.filter(function(e){return y.isAudioCodec(e)||y.isVideoCodec(e)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new m["default"](this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(p["default"].EventTarget);n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":42,"./cleanup-text-tracks":43,"./codec-utils":44,"./virtual-source-buffer":54,"global/document":27,"global/window":28}],51:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)r=n.cues[i],r.startTime<=t&&r.endTime>=e&&n.removeCue(r)
};n["default"]=i,t.exports=n["default"]},{}],52:[function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("global/window"),s=i(a),u=e("mux.js/lib/mp4"),l=i(u),c=function(e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,s["default"].postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){s["default"].postMessage({action:"caption",data:e})}),e.on("done",function(){s["default"].postMessage({action:"done"})})},d=function(){function e(t){r(this,e),this.options=t||{},this.init()}return o(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new l["default"].Transmuxer(this.options),c(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(){this.transmuxer.flush()}}]),e}(),f=function(e){e.onmessage=function(e){return"init"===e.data.action&&e.data.options?void(this.messageHandlers=new d(e.data.options)):(this.messageHandlers||(this.messageHandlers=new d),void(e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data)))}};n["default"]=function(e){return new f(e)},t.exports=n["default"]},{"global/window":28,"mux.js/lib/mp4":70}],53:[function(e,t,n){(function(t){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("global/window"),o=i(r),a=e("./flash-media-source"),s=i(a),u=e("./html-media-source"),l=i(u),c="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,d=i(c),f=0,h={mode:"auto"};d["default"].mediaSources={};var p=function(e,t){var n=d["default"].mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},g=function(){return!!o["default"].MediaSource&&!!o["default"].MediaSource.isTypeSupported&&o["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},m=function(e){var t=d["default"].mergeOptions(h,e);return this.MediaSource={open:p,supportsNativeMediaSources:g},"html5"===t.mode||"auto"===t.mode&&g()?new l["default"]:new s["default"]};n.MediaSource=m,m.open=p,m.supportsNativeMediaSources=g;var v={createObjectURL:function(e){var t="blob:vjs-media-source/",n=void 0;return e instanceof l["default"]?(n=o["default"].URL.createObjectURL(e.nativeMediaSource_),e.url_=n,n):e instanceof s["default"]?(n=t+f,f++,d["default"].mediaSources[n]=e,n):(n=o["default"].URL.createObjectURL(e),e.url_=n,n)}};n.URL=v,d["default"].MediaSource=m,d["default"].URL=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":47,"./html-media-source":50,"global/window":28}],54:[function(e,t,n){(function(i){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,c=r(l),d=e("./create-text-tracks-if-necessary"),f=r(d),h=e("./remove-cues-from-track"),p=r(h),g=e("./add-text-track-data"),m=e("webworkify"),v=r(m),y=e("./transmuxer-worker"),_=r(y),b=e("./codec-utils"),T=function(e){function t(e,n){var i=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=n,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0;var r={remux:!1};this.codecs_.forEach(function(e){b.isAudioCodec(e)?i.audioCodec_=e:b.isVideoCodec(e)&&(i.videoCodec_=e)}),this.transmuxer_=v["default"](_["default"]),this.transmuxer_.postMessage({action:"init",options:r}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?i.data_(e):"done"===e.data.action?i.done_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,i=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return c["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return c["default"].createTimeRange();for(var o=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,s=o.length;s--;)i.push({time:o.start(s),type:"start"}),i.push({time:o.end(s),type:"end"});for(s=a.length;s--;)i.push({time:a.start(s),type:"start"}),i.push({time:a.end(s),type:"end"});for(i.sort(function(e,t){return e.time-t.time}),s=0;s<i.length;s++)"start"===i[s].type?(n++,2===n&&(e=i[s].time)):"end"===i[s].type&&(n--,1===n&&(t=i[s].time)),null!==e&&null!==t&&(r.push([e,t]),e=null,t=null);return c["default"].createTimeRanges(r)}})}return a(t,e),s(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),f["default"](this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var i=null;e.mediaSource_[n+"Buffer_"]?i=e.mediaSource_[n+"Buffer_"]:(i=e.mediaSource_.nativeMediaSource_.addSourceBuffer(n+'/mp4;codecs="'+e[n+"Codec_"]+'"'),e.mediaSource_[n+"Buffer_"]=i),e[n+"Buffer_"]=i,["update","updatestart","updateend"].forEach(function(r){i.addEventListener(r,function(){if("audio"!==n||!e.audioDisabled_){var i=t.every(function(t){return"audio"===t&&e.audioDisabled_?!0:n!==t&&e[t+"Buffer_"]&&e[t+"Buffer_"].updating?!1:!0});return i?e.trigger(r):void 0}})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(e,t){this.videoBuffer_&&this.videoBuffer_.remove(e,t),this.audioBuffer_&&this.audioBuffer_.remove(e,t),p["default"](e,t,this.metadataTrack_),p["default"](e,t,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1),this.videoBuffer_&&(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),g.addTextTrackData(this,e.captions,e.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,n),n+=e.byteLength});try{t.appendBuffer(i)}catch(r){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:r.message,originalError:r})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(c["default"].EventTarget);n["default"]=T,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":42,"./codec-utils":44,"./create-text-tracks-if-necessary":45,"./remove-cues-from-track":51,"./transmuxer-worker":52,webworkify:76}],55:[function(e,t){var n,i=e("../utils/stream.js");n=function(){var e=new Uint8Array,t=0;n.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)>>4;return r?n+20:n+10},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},this.push=function(n){var i,r,o,a,s=0,u=0;for(e.length?(a=e.length,e=new Uint8Array(n.byteLength+a),e.set(e.subarray(0,a)),e.set(n,a)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(e[u]&!0&&240===(240&e[u+1])){if(e.length-u<7)break;if(s=this.parseAdtsSize(e,u),s>e.length)break;o={type:"audio",data:e.subarray(u,u+s),pts:t,dts:t},this.trigger("data",o),u+=s}else u++;else{if(e.length-u<10)break;if(s=this.parseId3TagSize(e,u),s>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+s)},this.trigger("data",r),u+=s}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array}},n.prototype=new i,t.exports=n},{"../utils/stream.js":75}],56:[function(e,t){var n,i=e("../utils/stream.js"),r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=function(){var e;n.prototype.init.call(this),this.push=function(t){var n,i,o,a,s,u,l=0,c=0;if("audio"===t.type)for(e?(a=e,e=new Uint8Array(a.byteLength+t.data.byteLength),e.set(a),e.set(t.data,a.byteLength)):e=t.data;l+5<e.length;)if(255===e[l]&&240===(246&e[l+1])){if(i=2*(1&~e[l+1]),n=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,s=1024*((3&e[l+6])+1),u=9e4*s/r[(60&e[l+2])>>>2],o=l+n,e.byteLength<o)return;if(this.trigger("data",{pts:t.pts+c*u,dts:t.dts+c*u,sampleCount:s,audioobjecttype:(e[l+2]>>>6&3)+1,channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:r[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+i,o)}),e.byteLength===o)return void(e=void 0);c++,e=e.subarray(o)}else l++},this.flush=function(){this.trigger("done")}},n.prototype=new i,t.exports=n},{"../utils/stream.js":75}],57:[function(e,t){var n,i,r,o=e("../utils/stream.js"),a=e("../utils/exp-golomb.js");i=function(){var e,t,n=0;i.prototype.init.call(this),this.push=function(i){var r;for(t?(r=new Uint8Array(t.byteLength+i.data.byteLength),r.set(t),r.set(i.data,t.byteLength),t=r):t=i.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do e++;while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}},i.prototype=new o,r={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},n=function(){var e,t,o,s,u,l,c,d=new i;n.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,o=e.pts,s=e.dts,d.push(e))},d.on("data",function(n){var i={trackId:t,pts:o,dts:s,data:n};switch(31&n[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=u(n.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=u(n.subarray(1)),i.config=l(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",i)}),d.on("done",function(){e.trigger("done")}),this.flush=function(){d.flush()},c=function(e,t){var n,i,r=8,o=8;for(n=0;e>n;n++)0!==o&&(i=t.readExpGolomb(),o=(r+i+256)%256),r=0===o?r:o},u=function(e){for(var t,n,i=e.byteLength,r=[],o=1;i-2>o;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(o=0;t>o;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=e[a];return n},l=function(e){var t,n,i,o,s,u,l,d,f,h,p,g,m,v,y=0,_=0,b=0,T=0,w=1;if(t=new a(e),n=t.readUnsignedByte(),o=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),r[n]&&(s=t.readUnsignedExpGolomb(),3===s&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==s?8:12,v=0;p>v;v++)t.readBoolean()&&(6>v?c(16,t):c(64,t));if(t.skipUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===u)t.readUnsignedExpGolomb();else if(1===u)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),v=0;l>v;v++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),h=t.readBits(1),0===h&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb(),T=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(m=t.readUnsignedByte()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}g&&(w=g[0]/g[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:o,width:Math.ceil((16*(d+1)-2*y-2*_)*w),height:(2-h)*(f+1)*16-2*b-2*T}}},n.prototype=new o,t.exports={H264Stream:n,NalByteStream:i}},{"../utils/exp-golomb.js":74,"../utils/stream.js":75}],58:[function(e,t){var n=[33,16,5,32,164,27],i=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],r=function(e){for(var t=[];e--;)t.push(0);return t},o=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})},a={96e3:[n,[227,64],r(154),[56]],88200:[n,[231],r(170),[56]],64e3:[n,[248,192],r(240),[56]],48e3:[n,[255,192],r(268),[55,148,128],r(54),[112]],44100:[n,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[n,[255,192],r(268),[55,234],r(226),[112]],24e3:[n,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[n,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[i,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[i,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[i,r(268),[3,121,16],r(47),[7]]};t.exports=o(a)},{}],59:[function(e,t){var n=e("../utils/stream.js"),i=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};i.prototype=new n,i.prototype.flush=function(e){var t,n,i,r,o={tags:{},captions:[],metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),o.tags.videoTags=this.videoTags,o.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)n=this.pendingCaptions[i],n.startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,o.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)t=this.pendingMetadata[i],t.cueTime=t.pts-r,t.cueTime/=9e4,o.metadata.push(t);o.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",o),this.trigger("done")}},t.exports=i},{"../utils/stream.js":75}],60:[function(e,t){var n=e("./flv-tag.js"),i=function(e,t,i){var r,o,a,s=new Uint8Array(9),u=new DataView(s.buffer);return e=e||0,t=void 0===t?!0:t,i=void 0===i?!0:i,u.setUint8(0,70),u.setUint8(1,76),u.setUint8(2,86),u.setUint8(3,1),u.setUint8(4,(t?4:0)|(i?1:0)),u.setUint32(5,s.byteLength),0>=e?(o=new Uint8Array(s.byteLength+4),o.set(s),o.set([0,0,0,0],s.byteLength),o):(r=new n(n.METADATA_TAG),r.pts=r.dts=0,r.writeMetaDataDouble("duration",e),a=r.finalize().length,o=new Uint8Array(s.byteLength+a),o.set(s),o.set(u.byteLength,a),o)};t.exports=i},{"./flv-tag.js":61}],61:[function(e,t){var n;n=function(e,t){var i,r=0,o=16384,a=function(e,t){var n,i=e.position+t;i<e.bytes.byteLength||(n=new Uint8Array(2*i),n.set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},s=n.widthBytes||new Uint8Array("width".length),u=n.heightBytes||new Uint8Array("height".length),l=n.videocodecidBytes||new Uint8Array("videocodecid".length);if(!n.widthBytes){for(i=0;i<"width".length;i++)s[i]="width".charCodeAt(i);for(i=0;i<"height".length;i++)u[i]="height".charCodeAt(i);for(i=0;i<"videocodecid".length;i++)l[i]="videocodecid".charCodeAt(i);n.widthBytes=s,n.heightBytes=u,n.videocodecidBytes=l}switch(this.keyFrame=!1,e){case n.VIDEO_TAG:this.length=16,o*=6;break;case n.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case n.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(o),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i,r=t||0;n=n||e.byteLength,i=r+n,a(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(s,this.position),this.position+=5;else if("height"===e)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,i;switch(this.bytes[0]){case n.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case n.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case n.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return i=this.length-11,this.bytes[1]=(16711680&i)>>>16,this.bytes[2]=(65280&i)>>>8,this.bytes[3]=(255&i)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=n.frameTime(this.bytes),this}},n.AUDIO_TAG=8,n.VIDEO_TAG=9,n.METADATA_TAG=18,n.isAudioFrame=function(e){return n.AUDIO_TAG===e[0]},n.isVideoFrame=function(e){return n.VIDEO_TAG===e[0]},n.isMetaData=function(e){return n.METADATA_TAG===e[0]},n.isKeyFrame=function(e){return n.isVideoFrame(e)?23===e[11]:n.isAudioFrame(e)?!0:n.isMetaData(e)?!0:!1},n.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=n},{}],62:[function(e,t){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),getFlvHeader:e("./flv-header")}},{"./flv-header":60,"./flv-tag":61,"./transmuxer":64}],63:[function(e,t){var n=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})};t.exports=n},{}],64:[function(e,t){var n,i,r,o,a,s,u=e("../utils/stream.js"),l=e("./flv-tag.js"),c=e("../m2ts/m2ts.js"),d=e("../codecs/adts.js"),f=e("../codecs/h264").H264Stream,h=e("./coalesce-stream.js"),p=e("./tag-list.js");o=function(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts=void 0===e.timelineStartInfo.pts?t.pts:Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts=void 0===e.timelineStartInfo.dts?t.dts:Math.min(e.timelineStartInfo.dts,t.dts))},a=function(e,t){var n=new l(l.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},s=function(e,t){var n,i=new l(l.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},r=function(e){var t,n=[];r.prototype.init.call(this),this.push=function(t){o(e,t),e&&void 0===e.channelcount&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var i,r,o,a=new p;if(0===n.length)return void this.trigger("done","AudioSegmentStream");for(o=-1/0;n.length;)i=n.shift(),(e.extraData!==t||i.pts-o>=1e3)&&(r=new l(l.METADATA_TAG),r.pts=i.pts,r.dts=i.dts,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===e.channelcount),r.writeMetaDataDouble("audiosamplerate",e.samplerate),r.writeMetaDataDouble("audiosamplesize",16),a.push(r.finalize()),t=e.extraData,r=new l(l.AUDIO_TAG,!0),r.pts=i.pts,r.dts=i.dts,r.view.setUint16(r.position,e.extraData),r.position+=2,r.length=Math.max(r.length,r.position),a.push(r.finalize()),o=i.pts),r=new l(l.AUDIO_TAG),r.pts=i.pts,r.dts=i.dts,r.writeBytes(i.data),a.push(r.finalize());t=null,this.trigger("data",{track:e,tags:a.list}),this.trigger("done","AudioSegmentStream")}},r.prototype=new u,i=function(e){var t,n,r=[];i.prototype.init.call(this),this.finishFrame=function(i,r){r&&(t&&e&&e.newMetadata&&(r.keyFrame||0===i.length)&&(i.push(a(t,r.dts).finalize()),i.push(s(e,r.dts).finalize()),e.newMetadata=!1),r.endNalUnit(),i.push(r.finalize()),n=null)},this.push=function(t){o(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),r.push(t)},this.flush=function(){for(var i,o=new p;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return void this.trigger("done","VideoSegmentStream");for(;r.length;)i=r.shift(),"seq_parameter_set_rbsp"===i.nalUnitType?(e.newMetadata=!0,t=i.config,e.width=t.width,e.height=t.height,e.sps=[i.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===i.nalUnitType?(e.newMetadata=!0,e.pps=[i.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===i.nalUnitType?(n&&this.finishFrame(o,n),n=new l(l.VIDEO_TAG),n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(i.data);n&&this.finishFrame(o,n),this.trigger("data",{track:e,tags:o.list}),this.trigger("done","VideoSegmentStream")}},i.prototype=new u,n=function(e){var t,o,a,s,u,l,p,g,m,v,y,_,b=this;n.prototype.init.call(this),e=e||{},this.metadataStream=new c.MetadataStream,e.metadataStream=this.metadataStream,t=new c.TransportPacketStream,o=new c.TransportParseStream,a=new c.ElementaryStream,s=new c.TimestampRolloverStream("video"),u=new c.TimestampRolloverStream("audio"),l=new c.TimestampRolloverStream("timed-metadata"),p=new d,g=new f,_=new h(e),t.pipe(o).pipe(a),a.pipe(s).pipe(g),a.pipe(u).pipe(p),a.pipe(l).pipe(this.metadataStream).pipe(_),y=new c.CaptionStream,g.pipe(y).pipe(_),a.on("data",function(e){var t,n,o;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(o=e.tracks[t]);n&&!m&&(_.numberOfTracks++,m=new i(n),g.pipe(m).pipe(_)),o&&!v&&(_.numberOfTracks++,v=new r(o),p.pipe(v).pipe(_))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},_.on("data",function(e){b.trigger("data",e)}),_.on("done",function(){b.trigger("done")})},n.prototype=new u,t.exports=n},{"../codecs/adts.js":56,"../codecs/h264":57,"../m2ts/m2ts.js":66,"../utils/stream.js":75,"./coalesce-stream.js":59,"./flv-tag.js":61,"./tag-list.js":63}],65:[function(e,t){var n=4,i=128,r=e("../utils/stream"),o=function(e){for(var t=0,r={payloadType:-1,payloadSize:0},o=0,a=0;t<e.byteLength&&e[t]!==i;){for(;255===e[t];)o+=255,t++;for(o+=e[t++];255===e[t];)a+=255,t++;if(a+=e[t++],!r.payload&&o===n){r.payloadType=o,r.payloadSize=a,r.payload=e.subarray(t,t+a);break}t+=a,o=0,a=0}return r},a=function(e){return 181!==e.payload[0]?null:49!==(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},s=function(e,t){var n,i,r,o,a=[];if(!(64&t[0]))return a;for(i=31&t[0],n=0;i>n;n++)r=3*n,o={type:3&t[r+2],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],a.push(o));return a},u=function(){u.prototype.init.call(this),this.captionPackets_=[],this.field1_=new E,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};u.prototype=new r,u.prototype.push=function(e){var t,i;"sei_rbsp"===e.nalUnitType&&(t=o(e.escapedRBSP),t.payloadType===n&&(i=a(t),i&&(this.captionPackets_=this.captionPackets_.concat(s(e.pts,i)))))},u.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},c=function(e){return null===e?"":(e=l[e]||e,String.fromCharCode(e))},d=0,f=5152,h=5167,p=5157,g=5158,m=5159,v=5165,y=5153,_=5164,b=5166,T=14,w=function(){for(var e=[],t=T+1;t--;)e.push("");return e},E=function(){E.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=w(),this.nonDisplayed_=w(),this.lastControlCode_=null,this.push=function(e){if(0===e.type){var t,n,i,r;if(t=32639&e.ccData,t===this.lastControlCode_)return void(this.lastControlCode_=null);switch(this.lastControlCode_=4096===(61440&t)?t:null,t){case d:break;
case f:this.mode_="popOn";break;case h:this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;break;case p:this.topRow_=T-1,this.mode_="rollUp";break;case g:this.topRow_=T-2,this.mode_="rollUp";break;case m:this.topRow_=T-3,this.mode_="rollUp";break;case v:this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;break;case y:"popOn"===this.mode_?this.nonDisplayed_[T]=this.nonDisplayed_[T].slice(0,-1):this.displayed_[T]=this.displayed_[T].slice(0,-1);break;case _:this.flushDisplayed(e.pts),this.displayed_=w();break;case b:this.nonDisplayed_=w();break;default:if(i=t>>>8,r=255&t,i>=16&&23>=i&&r>=64&&127>=r&&(16!==i||96>r)&&(i=32,r=null),(17===i||25===i)&&r>=48&&63>=r&&(i=9834,r=""),16===(240&i))return;0===i&&(i=null),0===r&&(r=null),this[this.mode_](e.pts,i,r)}}}};E.prototype=new r,E.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("\n");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t})},E.prototype.popOn=function(e,t,n){var i=this.nonDisplayed_[T];i+=c(t),i+=c(n),this.nonDisplayed_[T]=i},E.prototype.rollUp=function(e,t,n){var i=this.displayed_[T];""===i&&(this.flushDisplayed(e),this.startPts_=e),i+=c(t),i+=c(n),this.displayed_[T]=i},E.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;T>e;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[T]=""},t.exports={CaptionStream:u,Cea608Stream:E}},{"../utils/stream":75}],66:[function(e,t){var n,i,r,o=e("../utils/stream.js"),a=e("./caption-stream"),s=e("./stream-types"),u=e("./timestamp-rollover-stream").TimestampRolloverStream,l=e("./stream-types.js"),c=188,d=71;n=function(){var e=new Uint8Array(c),t=0;n.prototype.init.call(this),this.push=function(n){var i,r=0,o=c;for(t?(i=new Uint8Array(n.byteLength+t),i.set(e.subarray(0,t)),i.set(n,t),t=0):i=n;o<i.byteLength;)i[r]!==d||i[o]!==d?(r++,o++):(this.trigger("data",i.subarray(r,o)),r+=c,o+=c);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===c&&e[0]===d&&(this.trigger("data",e),t=0),this.trigger("done")}},n.prototype=new o,i=function(){var e,t,n,r;i.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i,o,a;if(1&e[5]){for(r.programMapTable={},n=(15&e[1])<<8|e[2],i=3+n-4,o=(15&e[10])<<8|e[11],a=12+o;i>a;)r.programMapTable[(31&e[a+1])<<8|e[a+2]]=e[a],a+=((15&e[a+3])<<8|e[a+4])+5;for(t.programMapTable=r.programMapTable;r.packetsWaitingForPmt.length;)r.processPes_.apply(r,r.packetsWaitingForPmt.shift())}},this.push=function(t){var n={},i=4;n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid?(n.type="pat",e(t.subarray(i),n),this.trigger("data",n)):n.pid===this.pmtPid?(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.streamType=this.programMapTable[n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},i.prototype=new o,i.STREAM_TYPES={h264:27,adts:15},r=function(){var e=this,t={data:[],size:0},n={data:[],size:0},i={data:[],size:0},o=function(e,t){var n;t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},a=function(t,n){var i,r=new Uint8Array(t.size),a={type:n},s=0;if(t.data.length){for(a.trackId=t.data[0].pid;t.data.length;)i=t.data.shift(),r.set(i.data,s),s+=i.data.byteLength;o(r,a),t.size=0,e.trigger("data",a)}};r.prototype.init.call(this),this.push=function(r){({pat:function(){},pes:function(){var e,o;switch(r.streamType){case s.H264_STREAM_TYPE:case l.H264_STREAM_TYPE:e=t,o="video";break;case s.ADTS_STREAM_TYPE:e=n,o="audio";break;case s.METADATA_STREAM_TYPE:e=i,o="timed-metadata";break;default:return}r.payloadUnitStartIndicator&&a(e,o),e.data.push(r),e.size+=r.data.byteLength},pmt:function(){var t,n,i={type:"metadata",tracks:[]},o=r.programMapTable;for(t in o)o.hasOwnProperty(t)&&(n={timelineStartInfo:{baseMediaDecodeTime:0}},n.id=+t,o[t]===l.H264_STREAM_TYPE?(n.codec="avc",n.type="video"):o[t]===l.ADTS_STREAM_TYPE&&(n.codec="adts",n.type="audio"),i.tracks.push(n));e.trigger("data",i)}})[r.type]()},this.flush=function(){a(t,"video"),a(n,"audio"),a(i,"timed-metadata"),this.trigger("done")}},r.prototype=new o;var f={PAT_PID:0,MP2T_PACKET_LENGTH:c,TransportPacketStream:n,TransportParseStream:i,ElementaryStream:r,TimestampRolloverStream:u,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var h in s)s.hasOwnProperty(h)&&(f[h]=s[h]);t.exports=f},{"../utils/stream.js":75,"./caption-stream":65,"./metadata-stream":67,"./stream-types":68,"./stream-types.js":68,"./timestamp-rollover-stream":69}],67:[function(e,t){var n,i=e("../utils/stream"),r=e("./stream-types"),o=function(e,t,n){var i,r="";for(i=t;n>i;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},a=function(e,t,n){return decodeURIComponent(o(e,t,n))},s=function(e,t,n){return unescape(o(e,t,n))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},l={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=a(e.data,1,t),e.value=a(e.data,t+1,e.data.length-1);break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=a(e.data,1,t),e.url=a(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=s(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};n=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},o=0,a=[],s=0;if(n.prototype.init.call(this),this.dispatchType=r.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,r,c,d,f;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(s=0,a.length=0),0===a.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(i.debug&&console.log("Skipping unrecognized metadata packet"));if(a.push(e),s+=e.data.byteLength,1===a.length&&(o=u(e.data.subarray(6,10)),o+=10),!(o>s)){for(t={data:new Uint8Array(o),frames:[],pts:a[0].pts,dts:a[0].dts},d=0;o>d;)t.data.set(a[0].data.subarray(0,o-d),d),d+=a[0].data.byteLength,s-=a[0].data.byteLength,a.shift();n=10,64&t.data[5]&&(n+=4,n+=u(t.data.subarray(10,14)),o-=u(t.data.subarray(16,20)));do{if(r=u(t.data.subarray(n+4,n+8)),1>r)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(f=String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),c={id:f,data:t.data.subarray(n+10,n+r+10)},c.key=c.id,l[c.id]&&(l[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var h=c.data,p=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4,p+=3&h[7],c.timeStamp=p,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),n+=10,n+=r}while(o>n);this.trigger("data",t)}}}},n.prototype=new i,t.exports=n},{"../utils/stream":75,"./stream-types":68}],68:[function(e,t,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],69:[function(e,t,n){arguments[4][37][0].apply(n,arguments)},{"../utils/stream":75,dup:37}],70:[function(e,t){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":71,"./transmuxer":72}],71:[function(e,t){var n,i,r,o,a,s,u,l,c,d,f,h,p,g,m,v,y,_,b,T,w,E,S,C,P,A,I,x,O,M,k,R,D,L,N,j,F=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),P=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),O={video:I,audio:x},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),L=D,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=D,M=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(e){var t,n,i,r=[],o=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)o+=r[t].byteLength;for(n=new Uint8Array(o+8),i=new DataView(n.buffer,n.byteOffset,n.byteLength),i.setUint32(0,n.byteLength),n.set(e,4),t=0,o=8;t<r.length;t++)n.set(r[t],o),o+=r[t].byteLength;return n},i=function(){return n(S.dinf,n(S.dref,R))},r=function(e){return n(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return n(S.ftyp,C,P,C,A)},v=function(e){return n(S.hdlr,O[e])},a=function(e){return n(S.mdat,e)},m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(S.mdhd,t)},g=function(e){return n(S.mdia,m(e),v(e.type),u(e))},s=function(e){return n(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return n(S.minf,"video"===e.type?n(S.vmhd,M):n(S.smhd,k),i(),_(e))},l=function(e,t){for(var i=[],r=t.length;r--;)i[r]=T(t[r]);return n.apply(null,[S.moof,s(e)].concat(i))},c=function(e){for(var t=e.length,i=[];t--;)i[t]=h(e[t]);return n.apply(null,[S.moov,f(4294967295)].concat(i).concat(d(e)))},d=function(e){for(var t=e.length,i=[];t--;)i[t]=w(e[t]);return n.apply(null,[S.mvex].concat(i))},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(S.mvhd,t)},y=function(e){var t,i,r=e.samples||[],o=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)t=r[i].flags,o[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(S.sdtp,o)},_=function(e){return n(S.stbl,b(e),n(S.stts,j),n(S.stsc,L),n(S.stsz,N),n(S.stco,D))},function(){var e,t;b=function(i){return n(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?e(i):t(i))},e=function(e){var t,i=e.sps||[],r=e.pps||[],o=[],a=[];for(t=0;t<i.length;t++)o.push((65280&i[t].byteLength)>>>8),o.push(255&i[t].byteLength),o=o.concat(Array.prototype.slice.call(i[t]));for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));return n(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length]).concat(o).concat([r.length]).concat(a))),n(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return n(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))}}(),p=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(S.tkhd,t)},T=function(e){var t,i,r,o,a,s,u;return t=n(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(F+1)),u=Math.floor(e.baseMediaDecodeTime%(F+1)),i=n(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),a=92,"audio"===e.type?(r=E(e,a),n(S.traf,t,i,r)):(o=y(e),r=E(e,o.length+a),n(S.traf,t,i,r,o))},h=function(e){return e.duration=e.duration||4294967295,n(S.trak,p(e),g(e))},w=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(S.trex,t)},function(){var e,t,i;i=function(e,t){var n=0,i=0,r=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,o,a,s;for(o=e.samples||[],t+=20+16*o.length,r=i(o,t),s=0;s<o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return n(S.trun,new Uint8Array(r))},e=function(e,t){var r,o,a,s;for(o=e.samples||[],t+=20+8*o.length,r=i(o,t),s=0;s<o.length;s++)a=o[s],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return n(S.trun,new Uint8Array(r))},E=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}(),t.exports={ftyp:o,mdat:a,moof:l,moov:c,initSegment:function(e){var t,n=o(),i=c(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}}},{}],72:[function(e,t){var n,i,r,o,a,s,u,l,c,d,f,h=e("../utils/stream.js"),p=e("./mp4-generator.js"),g=e("../m2ts/m2ts.js"),m=e("../codecs/adts.js"),v=e("../codecs/h264").H264Stream,y=e("../aac"),_=e("../data/silence"),b=e("../utils/clock"),T=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"],E=9e4;a=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},s=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)?!0:!1},d=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},f=function(e){var t,n,i=0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return i},i=function(e){var t=[],n=0,r=0,o=0,a=1/0;i.prototype.init.call(this),this.push=function(n){u(e,n),e&&T.forEach(function(t){e[t]=n[t]}),t.push(n)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var i,r,o,a;return 0===t.length?void this.trigger("done","AudioSegmentStream"):(i=this.trimAdtsFramesByEarliestDts_(t),e.baseMediaDecodeTime=c(e),this.prefixWithSilence_(e,i),e.samples=this.generateSampleTable_(i),o=p.mdat(this.concatenateFrameData_(i)),t=[],r=p.moof(n,[e]),a=new Uint8Array(r.byteLength+o.byteLength),n++,a.set(r),a.set(o,r.byteLength),l(e),this.trigger("data",{track:e,boxes:a}),void this.trigger("done","AudioSegmentStream"))},this.prefixWithSilence_=function(e,t){var n,i,r,s=0,u=0,l=0,c=0;if(t.length&&(n=b.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o&&a&&n>o&&(u=n-a,s=Math.ceil(E/(e.samplerate/1024)),l=Math.floor(u/s),c=l*s),!(1>l||c>E/2))){for(i=_[e.samplerate],i||(i=t[0].data),r=0;l>r;r++)t.splice(r,0,{data:i});e.baseMediaDecodeTime-=Math.floor(b.videoTsToAudioTs(c,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=r?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=r?(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(e){var t,n,i=0,r=new Uint8Array(f(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}},i.prototype=new h,n=function(e){var t,i,r=0,o=[];n.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(n){u(e,n),"seq_parameter_set_rbsp"!==n.nalUnitType||t||(t=n.config,e.sps=[n.data],w.forEach(function(n){e[n]=t[n]},this)),"pic_parameter_set_rbsp"!==n.nalUnitType||i||(i=n.data,e.pps=[n.data]),o.push(n)},this.flush=function(){for(var t,n,i,a,s,l;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();return 0===o.length?(this.resetStream_(),void this.trigger("done","VideoSegmentStream")):(t=this.groupNalsIntoFrames_(o),i=this.groupFramesIntoGops_(t),i[0][0].keyFrame||(n=this.getGopForFusion_(o[0],e),n?(i.unshift(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.pts=n.pts,i.dts=n.dts,i.duration+=n.duration):i=this.extendFirstKeyFrame_(i)),u(e,i),e.samples=this.generateSampleTable_(i),s=p.mdat(this.concatenateNalData_(i)),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],e.baseMediaDecodeTime=c(e),this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),a=p.moof(r,[e]),l=new Uint8Array(a.byteLength+s.byteLength),r++,l.set(a),l.set(s,a.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),void this.trigger("done","VideoSegmentStream"))},this.resetStream_=function(){l(e),t=void 0,i=void 0},this.getGopForFusion_=function(t){var n,i,r,o,a,s=45e3,u=1e4,l=1/0;for(a=0;a<this.gopCache_.length;a++)o=this.gopCache_[a],r=o.gop,e.pps&&d(e.pps[0],o.pps[0])&&e.sps&&d(e.sps[0],o.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration,n>=-u&&s>=n&&(!i||l>n)&&(i=o,l=n)));return i?i.gop:null},this.extendFirstKeyFrame_=function(e){var t;return e[0][0].keyFrame||(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,i=[],r=[];for(i.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),i=[n],i.byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},this.groupFramesIntoGops_=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),i=[n],i.nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},this.generateSampleTable_=function(e,t){var n,i,r,o,s,u=t||0,l=[];for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i++)s=o[i],r=a(),r.dataOffset=u,r.compositionTimeOffset=s.pts-s.dts,r.duration=s.duration,r.size=4*s.length,r.size+=s.byteLength,s.keyFrame&&(r.flags.dependsOn=2),u+=r.size,l.push(r);return l},this.concatenateNalData_=function(e){var t,n,i,r,o,a,s=0,u=e.byteLength,l=e.nalCount,c=u+4*l,d=new Uint8Array(c),f=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(o=r[n],i=0;i<o.length;i++)a=o[i],f.setUint32(s,a.data.byteLength),s+=4,d.set(a.data,s),s+=a.data.byteLength;return d}},n.prototype=new h,u=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts=void 0===e.minSegmentPts?t.pts:Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts=void 0===e.maxSegmentPts?t.pts:Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts=void 0===e.minSegmentDts?t.dts:Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts=void 0===e.maxSegmentDts?t.dts:Math.max(e.maxSegmentDts,t.dts))},l=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},c=function(e){var t,n,i=e.minSegmentDts-e.timelineStartInfo.dts;return t=e.timelineStartInfo.baseMediaDecodeTime,t+=i,t=Math.max(0,t),"audio"===e.type&&(n=e.samplerate/E,t*=n,t=Math.floor(t)),t},o=function(e,t){this.numberOfTracks=0,this.metadataStream=t,this.remuxTracks="undefined"!=typeof e.remux?!!e.remux:!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,o.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},o.prototype=new h,o.prototype.flush=function(e){var t,n,i,r,o=0,a={captions:[],metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,w.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,T.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),a.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,i=p.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(i.byteLength),a.initSegment.set(i),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)t=this.pendingCaptions[r],t.startTime=t.startPts-s,t.startTime/=9e4,t.endTime=t.endPts-s,t.endTime/=9e4,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)n=this.pendingMetadata[r],n.cueTime=n.pts-s,n.cueTime/=9e4,a.metadata.push(n);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},r=function(e){var t,a,u=this,c=!0;r.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new g.MetadataStream,t.aacStream=new y,t.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),t.adtsStream=new m,t.coalesceStream=new o(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:u.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new i(a),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new g.MetadataStream,r.packetStream=new g.TransportPacketStream,r.parseStream=new g.TransportParseStream,r.elementaryStream=new g.ElementaryStream,r.videoTimestampRolloverStream=new g.TimestampRolloverStream("video"),r.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),r.adtsStream=new m,r.h264Stream=new v,r.captionStream=new g.CaptionStream,r.coalesceStream=new o(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream),r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream),r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(e){var o;if("metadata"===e.type){for(o=e.tracks.length;o--;)t||"video"!==e.tracks[o].type?a||"audio"!==e.tracks[o].type||(a=e.tracks[o],a.timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime):(t=e.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime);t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new n(t),r.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))}),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),a&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new i(a),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=e,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,l(a),a.timelineStartInfo.baseMediaDecodeTime=e),t&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,l(t),t.timelineStartInfo.baseMediaDecodeTime=e)},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.push=function(e){if(c){var t=s(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()}},r.prototype=new h,t.exports={Transmuxer:r,VideoSegmentStream:n,AudioSegmentStream:i,AUDIO_PROPERTIES:T,VIDEO_PROPERTIES:w}},{"../aac":55,"../codecs/adts.js":56,"../codecs/h264":57,"../data/silence":58,"../m2ts/m2ts.js":66,"../utils/clock":73,"../utils/stream.js":75,"./mp4-generator.js":71}],73:[function(e,t){var n,i,r,o,a,s,u=9e4;n=function(e){return e*u},i=function(e,t){return e*t},r=function(e){return e/u},o=function(e,t){return e/t},a=function(e,t){return n(o(e,t))},s=function(e,t){return i(r(e),t)},t.exports={secondsToVideoTs:n,secondsToAudioTs:i,videoTsToSeconds:r,audioTsToSeconds:o,audioTsToVideoTs:a,videoTsToAudioTs:s}},{}],74:[function(e,t){var n;n=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(r,r+a)),n=new DataView(o.buffer).getUint32(0),i=8*a,t-=a},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),o=n>>>32-r;return i-=r,i>0?n<<=r:t>0&&this.loadWord(),r=e-r,r>0?o<<r|this.readBits(r):o},this.skipLeadingZeros=function(){var e;for(e=0;i>e;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=n},{}],75:[function(e,t,n){arguments[4][40][0].apply(n,arguments)},{dup:40}],76:[function(e,t){var n=arguments[3],i=arguments[4],r=arguments[5],o=JSON.stringify;t.exports=function(e){for(var t,a=Object.keys(r),s=0,u=a.length;u>s;s++){var l=a[s];if(r[l].exports===e){t=l;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,u=a.length;u>s;s++){var l=a[s];c[l]=l}i[t]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[t]=t,i[d]=[Function(["require"],"require("+o(t)+")(self)"),f];var h="("+n+")({"+Object.keys(i).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(d)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],77:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{dup:76}],78:[function(e,t){(function(n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)
}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var r=e,o=t,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;e=l,t=o,n=a,i=!0,s=l=void 0}},u=e("global/document"),l=i(u),c=e("./playlist-loader"),d=i(c),f=e("./playlist"),h=i(f),p=e("./xhr"),g=i(p),m=e("aes-decrypter"),v=e("./bin-utils"),y=i(v),_=e("videojs-contrib-media-sources"),b=e("m3u8-parser"),T=i(b),w="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,E=i(w),S=e("./master-playlist-controller"),C=e("./config"),P=i(C),A=e("./rendition-mixin"),I=i(A),x=e("global/window"),O=i(x),M=e("./playback-watcher"),k=i(M),R=e("./reload-source-on-error"),D=i(R),L={PlaylistLoader:d["default"],Playlist:h["default"],Decrypter:m.Decrypter,AsyncStream:m.AsyncStream,decrypt:m.decrypt,utils:y["default"],xhr:g["default"]()};Object.defineProperty(L,"GOAL_BUFFER_LENGTH",{get:function(){return E["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),P["default"].GOAL_BUFFER_LENGTH},set:function(e){return E["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),"number"!=typeof e||0>=e?void E["default"].log.warn("value passed to Hls.GOAL_BUFFER_LENGTH must be a number and greater than 0"):void(P["default"].GOAL_BUFFER_LENGTH=e)}});var N=1.2,j=function(e,t){var n=void 0;return e?(n=O["default"].getComputedStyle(e),n?n[t]:""):""},F=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.uri){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},U=function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),F(e,t.playlists)},B=function(e,t){var n=e.slice();e.sort(function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r})};L.STANDARD_PLAYLIST_SELECTOR=function(){var e=this.playlists.master.playlists.slice(),t=[],n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=[],c=[],d=[];return B(e,L.comparePlaylistBandwidth),e=e.filter(h["default"].isEnabled),s=this.systemBandwidth,t=e.filter(function(e){return e.attributes&&e.attributes.BANDWIDTH&&e.attributes.BANDWIDTH*N<s}),n=t.filter(function(e){return e.attributes.BANDWIDTH===t[t.length-1].attributes.BANDWIDTH})[0],B(t,L.comparePlaylistResolution),o=parseInt(j(this.tech_.el(),"width"),10),a=parseInt(j(this.tech_.el(),"height"),10),u=t.filter(function(e){return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&e.attributes.RESOLUTION.height}),d=u.filter(function(e){return e.attributes.RESOLUTION.width===o&&e.attributes.RESOLUTION.height===a}),r=d.filter(function(e){return e.attributes.BANDWIDTH===d[d.length-1].attributes.BANDWIDTH})[0],r||(l=u.filter(function(e){return e.attributes.RESOLUTION.width>o||e.attributes.RESOLUTION.height>a}),c=l.filter(function(e){return e.attributes.RESOLUTION.width===l[0].attributes.RESOLUTION.width&&e.attributes.RESOLUTION.height===l[0].attributes.RESOLUTION.height}),i=c.filter(function(e){return e.attributes.BANDWIDTH===c[c.length-1].attributes.BANDWIDTH})[0]),i||r||n||e[0]},L.canPlaySource=function(){return E["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},L.supportsNativeHls=function(){var e=l["default"].createElement("video");if(!E["default"].getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),L.isSupported=function(){return E["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var V=O["default"].navigator&&O["default"].navigator.userAgent||"";L.supportsAudioInfoChange_=function(){if(E["default"].browser.IS_FIREFOX){var e=/Firefox\/([\d.]+)/i.exec(V),t=parseInt(e[1],10);return t>=49}return!0};var H=E["default"].getComponent("Component"),G=function(e){function t(e,n,i){var o=this;if(r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),n.options_&&n.options_.playerId){var a=E["default"](n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return E["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead."),o}})}if(E["default"].options.hls.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.options_=E["default"].mergeOptions(E["default"].options.hls||{},i.hls),this.setOptions_(),this.on(l["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var e=l["default"].fullscreenElement||l["default"].webkitFullscreenElement||l["default"].mozFullScreenElement||l["default"].msFullscreenElement;e&&e.contains(o.tech_.el())&&o.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){return this.ignoreNextSeekingEvent_?void(this.ignoreNextSeekingEvent_=!1):void this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.audioTrackChange_=function(){o.masterPlaylistController_.setupAudio()},this.on(this.tech_,"play",this.play)}return o(t,e),a(t,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),["withCredentials","bandwidth"].forEach(function(t){"undefined"!=typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e){var t=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=L,this.masterPlaylistController_=new S.MasterPlaylistController(this.options_),this.playbackWatcher_=new k["default"](E["default"].mergeOptions(this.options_,{seekable:function(){return t.seekable()}})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):L.STANDARD_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;t=this.throughput>0?1/this.throughput:0;var n=Math.floor(1/(e+t));return n},set:function(){E["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("sourceopen",function(){t.tech_.audioTracks().addEventListener("change",t.audioTrackChange_)}),this.masterPlaylistController_.on("selectedinitialmedia",function(){I["default"](t)}),this.masterPlaylistController_.on("audioupdate",function(){t.tech_.clearTracks("audio"),t.masterPlaylistController_.activeAudioGroup().forEach(function(e){t.tech_.audioTracks().addTrack(e)})}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return t.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(E["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=E["default"].players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){U(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){F(e.qualityLevels_,e.playlists)}))}},{key:"activeAudioGroup_",value:function(){return this.masterPlaylistController_.activeAudioGroup()}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_.audioTracks().removeEventListener("change",this.audioTrackChange_),s(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(H),q=function z(e){return{canHandleSource:function(t){return E["default"].options.hls&&E["default"].options.hls.mode&&E["default"].options.hls.mode!==e?!1:z.canPlayType(t.type)},handleSource:function(t,n,i){"flash"===e&&n.setTimeout(function(){n.trigger("loadstart")},1);var r=E["default"].mergeOptions(i,{hls:{mode:e}});return n.hls=new G(t,n,r),n.hls.xhr=g["default"](),E["default"].Hls.xhr.beforeRequest&&(n.hls.xhr.beforeRequest=E["default"].Hls.xhr.beforeRequest),n.hls.src(t.src),n.hls},canPlayType:function(e){return z.canPlayType(e)?"maybe":""}}};L.comparePlaylistBandwidth=function(e,t){var n=void 0,i=void 0;return e.attributes&&e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||O["default"].Number.MAX_VALUE,t.attributes&&t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||O["default"].Number.MAX_VALUE,n-i},L.comparePlaylistResolution=function(e,t){var n=void 0,i=void 0;return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||O["default"].Number.MAX_VALUE,t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||O["default"].Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},q.canPlayType=function(e){if(E["default"].browser.IE_VERSION&&E["default"].browser.IE_VERSION<=10)return!1;var t=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;return!E["default"].options.hls.overrideNative&&L.supportsNativeHls?!1:t.test(e)},("undefined"==typeof E["default"].MediaSource||"undefined"==typeof E["default"].URL)&&(E["default"].MediaSource=_.MediaSource,E["default"].URL=_.URL);var W=E["default"].getTech("Flash");_.MediaSource.supportsNativeMediaSources()&&E["default"].getTech("Html5").registerSourceHandler(q("html5"),0),O["default"].Uint8Array&&W&&W.registerSourceHandler(q("flash")),E["default"].HlsHandler=G,E["default"].HlsSourceHandler=q,E["default"].Hls=L,E["default"].use||E["default"].registerComponent("Hls",L),E["default"].m3u8=T["default"],E["default"].options.hls=E["default"].options.hls||{},E["default"].registerPlugin?E["default"].registerPlugin("reloadSourceOnError",D["default"]):E["default"].plugin("reloadSourceOnError",D["default"]),t.exports={Hls:L,HlsHandler:G,HlsSourceHandler:q}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":6,"./playlist":8,"./playlist-loader":7,"./reload-source-on-error":10,"./rendition-mixin":11,"./xhr":17,"aes-decrypter":21,"global/document":27,"global/window":28,"m3u8-parser":29,"videojs-contrib-media-sources":53}]},{},[78])(78)}),define("modules/page/models/video/AbstractVideo",[],function(){return{on:function(){throw new Error("on() must be defined by child class")},getPosition:function(){throw new Error("getPosition() must be defined by child class")},getLength:function(){throw new Error("getLength() must be defined by child class")},isPlaying:function(){throw new Error("isPlaying() must be defined by child class")},getCurrentSource:function(){throw new Error("getCurrentSource() must be defined by child class")}}}),define("modules/page/models/video/VideoJSVideo",["lodash","modules/page/models/video/AbstractVideo"],function(e,t){var n=function(e){this.videoJS=e};return e.extend(n.prototype,t,{on:function(e,t){this.videoJS.on(e,t)},getPosition:function(){return this.videoJS.currentTime()},getLength:function(){return this.videoJS.duration()},isPlaying:function(){return!this.videoJS.paused()},getCurrentSource:function(){return this.videoJS.currentSrc()}}),n}),define("modules/page/utils/VideoTracker",["jquery","log","lodash","backbone"],function(e,t,n,i){var r=10,o=.1,a=1,s=function(e,t){this.video=e,this.loadedMetaData=!1,this.playedVideoBeforeMetaDataLoaded=!1,this.sentInitialPlayEvent=!1,this.progressPercents=[],this.isPlaying=!1,this.isTransitioningToPaused=!1,this.videoLength=t?t:!1,this.enabled=!0,this.currentPosition=0,this.lastPosition=0,this.progressStartPosition=0,this.isWindowVisible="hidden"!==document.visibilityState,this.addEventListeners()};return s.prototype=n.extend({},i.Events,{EVENTS:{PLAY:"play",PROGRESS_TIME:"progress_time",PROGRESS_PERCENT:"progress_percent"},enableTracking:function(){this.enabled||(this.enabled=!0,this.isWindowVisible&&this.restartProgressTracking())},disableTracking:function(){this.enabled&&(this.isWindowVisible&&this.triggerProgressEvent(this.lastPosition),this.enabled=!1)},addEventListeners:function(){document.addEventListener("visibilitychange",n.bind(function(){"hidden"===document.visibilityState?(this.isWindowVisible=!1,this.enabled&&this.triggerProgressEvent(this.lastPosition)):"visible"===document.visibilityState&&(this.isWindowVisible=!0,this.enabled&&this.restartProgressTracking())},this));var e=this;n.each("loadedmetadata,timeupdate".split(","),function(t){e.video.on(t,function(){switch(e.currentPosition=e.video.getPosition(),e.videoLength&&(e.currentPosition=Math.min(e.currentPosition,e.videoLength)),e.isTransitioningToPaused=e.isPlaying&&!e.video.isPlaying(),e.isPlaying=e.video.isPlaying(),t){case"loadedmetadata":e.handleLoadedMetadataEvent();break;case"timeupdate":e.handleTimeUpdateEvent();break;default:throw new Error("Missing handler function for video event: "+t)}e.lastPosition=e.currentPosition})})},handleLoadedMetadataEvent:function(){this.loadedMetaData=!0,this.videoLength||!this.video.getLength()||1/0===this.video.getLength()||isNaN(this.video.getLength())||(this.videoLength=this.video.getLength()),this.playedVideoBeforeMetaDataLoaded&&(this.triggerPlayEvent(),this.sentInitialPlayEvent=!0)},sendInitialPlayEvent:function(){this.sentInitialPlayEvent||this.playedVideoBeforeMetaDataLoaded||(this.loadedMetaData?(this.triggerPlayEvent(),this.sentInitialPlayEvent=!0):this.playedVideoBeforeMetaDataLoaded=!0)},triggerPlayEvent:function(){this.triggerEvent(this.EVENTS.PLAY,{videoPosition:this.sanitizeVideoPosition(this.currentPosition)})},handleTimeUpdateEvent:function(){this.isPlaying&&this.sendInitialPlayEvent(),this.enabled&&this.isWindowVisible&&(this.currentPosition<this.lastPosition||Math.abs(this.currentPosition-this.lastPosition)>a?this.triggerProgressEvent(this.lastPosition):(this.isTransitioningToPaused||this.currentPosition-this.progressStartPosition>=r)&&this.triggerProgressEvent(),(this.isPlaying||this.isTransitioningToPaused)&&this.trackProgressPercent())},trackProgressPercent:function(){var e=this.videoLength?Math.floor(this.videoLength):this.videoLength;if(e&&100!==this.progressPercents.length){var t=Math.round(100*(this.currentPosition/e));t=Math.max(1,Math.min(100,t));var n=1;100>e&&(n=Math.ceil(100/e));for(var i=0;n>i&&(this.addProgressPercentViewed(t),t--,!(0>=t));i++);}},addProgressPercentViewed:function(e){if(!n.includes(this.progressPercents,e)){this.progressPercents.push(e);var t=this.progressPercents.length;this.triggerEvent(this.EVENTS.PROGRESS_PERCENT,{progressPercent:t})}},triggerProgressEvent:function(e){e=e||this.currentPosition;var t=e-this.progressStartPosition;t>o&&this.triggerEvent(this.EVENTS.PROGRESS_TIME,{videoPosition:this.sanitizeVideoPosition(this.progressStartPosition),videoPlayTime:this.round(t)}),this.restartProgressTracking()},triggerEvent:function(e,t){this.videoLength&&(t.videoLength=this.round(this.videoLength)),this.trigger(e,t)},restartProgressTracking:function(){this.progressStartPosition=this.currentPosition},round:function(e){return Math.round(100*e)/100},sanitizeVideoPosition:function(e){var t=this.round(e);return 0>t&&(t=0),t}}),s}),define("modules/page/views/components/video/DesktopVideoComponentView",["lodash","jquery","device","globals","log","videojsdash","videojscontribhls","color","modules/page/views/components/video/AbstractVideoComponentView","modules/page/models/video/VideoJSVideo","modules/page/utils/VideoTracker"],function(e,t,n,i,r,o,a,s,u,l,c){var d=261,f=138,h=90;return u.extend({animationFinishedBeforeVideoReady:!1,_initializeDom:function(){var n={id:this.id,"class":"video-js vjs-default-skin vjs-user-inactive "+(this.options.videoAutoPlay?"vjs-autoplay":""),poster:this._getPosterFrameSrc(),preload:"none",width:this.options.width,height:this.options.height,type:"application/x-mpegURL",playsinline:!0,"webkit-playsinline":!0};this.muted&&(n.muted=!0),this.$vid=t("<video>",n),this.bindVideoElementPauseAndPlayForManualPauseDetection(),this._setVideoSources(),this.on(this.internalEvents.ENTRY_ANIMATIONS_END,e.bind(function(){this.isVideoReady&&this.canAutoplay()?this.play():this.animationFinishedBeforeVideoReady=!0},this)),this.on(this.internalEvents.EXIT_ANIMATIONS_START,e.bind(function(){this.autoPause(),this._rewindEndedAutoplayingVideo()},this)),this.$el.append(this.$vid)},attachMedia:function(){var e=new t.Deferred;if(this.areMediaPropertiesSet()){this.$vid.find(".vjs-poster").css("background-image","url("+this._getPosterFrameSrc()+")");var n=this.getPosterFramePreloadPromise();n?n.done(function(){e.resolve()}):e.resolve()}else e.resolve();return e},play:function(){this.isVideoReady&&!this.isManuallyPaused&&(this.videoTracker&&this.videoTracker.enableTracking(),this.videoHandle.play())},_getVideoFormats:function(){var e=[];return n.isDesktopSafari()||(n.isIE11()||e.push({format:"hls-playlist",type:"vnd.apple.mpegurl"}),e.push({format:"dash-playlist",type:"dash+xml"})),e=e.concat([{format:"original",type:"mp4"},{format:"h264-high",type:"mp4"},{format:"h264-low",type:"mp4"},{format:"webm",type:"webm"}])},_isPlaying:function(){return this.$vid&&this.$vid.hasClass("vjs-playing")},_isEnded:function(){return this.isVideoReady&&this.videoHandle.currentTime()>=this.videoHandle.duration()},_setCurrentTime:function(e){this.isVideoReady&&this.videoHandle.currentTime(e)},onAttach:function(){if(this.areMediaPropertiesSet()){var e=this,t=["html5","flash"];return new videojs(e.id,{controls:e._isShowControls(),loop:e._isLoopForever(),flash:{swf:i.videoJsSwf,params:{wmode:"transparent"}},techOrder:t},function(){var t=this;e.videoHandle=t;var n=new l(t),i=e.options.videoMedia.get("duration");e.videoTracker=new c(n,i),e.$vid=e.$el.find(".video-js"),e.$playButton=e.$el.find(".vjs-big-play-button"),e._adjustChromeColors(),e._adjustVideoControls(),e._configureVideoEvents(n),e.isVideoReady=!0,e.animationFinishedBeforeVideoReady&&e.canAutoplay()&&e.play(),e.animationFinishedBeforeVideoReady=!1})}},_hideTimeControls:function(){this.$vid.find(".vjs-time-control").hide(),this.$vid.find(".vjs-progress-control").hide()},_hideMuteControl:function(){this.$vid.find(".vjs-volume-menu-button").hide()},_hideVolumeControl:function(){this.$vid.find(".vjs-volume-menu-button>.vjs-menu").hide()},_adjustVideoControls:function(){this.$vid.width()<h?(this._hideTimeControls(),this._hideVolumeControl(),this._hideMuteControl()):this.$vid.width()<f?(this._hideTimeControls(),this._hideVolumeControl()):this.$vid.width()<d&&this._hideTimeControls()},_adjustChromeColors:function(){this._adjustPlayButtonColors();var e=s.fromString(this.options.theme.menuBgColor).rgba();this.$vid.css("color",this.options.theme.menuFgColor),this.$vid.find(".vjs-play-progress, .vjs-volume-level").css("background-color",this.options.theme.menuFgColor),this.$vid.find(".vjs-control-bar").css("background",this.options.theme.menuBgColor);var t="rgba("+e.r+","+e.g+","+e.b+",0.3)";this.$vid.find(".vjs-slider").css("background",t)},isPaused:function(){return this.$vid.hasClass("vjs-paused")}})}),define("modules/page/models/video/HTMLVideo",["lodash","modules/page/models/video/AbstractVideo"],function(e,t){var n=function(e){this.$videoElement=e};return e.extend(n.prototype,t,{on:function(e,t){this.$videoElement.on(e,t)},getPosition:function(){return this.$videoElement[0].currentTime},getLength:function(){return this.$videoElement[0].duration},isPlaying:function(){return this.$videoElement[0].ended===!1&&this.$videoElement[0].paused===!1&&this.$videoElement[0].currentTime>0},getCurrentSource:function(){return this.$videoElement[0].currentSrc}}),n}),define("modules/page/views/components/video/MobileVideoComponentView",["jquery","lodash","device","log","modules/page/views/components/video/AbstractVideoComponentView","modules/page/models/video/HTMLVideo","modules/page/utils/VideoTracker"],function(e,t,n,i,r,o,a){return r.extend({className:"video video-js vjs-default-skin",_initializeDom:function(){this.$poster=e("<img>",{width:this.options.width,height:this.options.height,position:"absolute",top:0,left:0}),this.$el.append(this.$poster),this.$playButton=e("<div>",{"class":"vjs-big-play-button"}),this.$playButton.append(e("<span>")),this.$el.append(this.$playButton),this._isShowControls()||this._hidePlayButton(),this._adjustPlayButtonColors(),this.on(this.internalEvents.ENTRY_ANIMATIONS_START,t.bind(function(){this._hidePlayButton()},this)),this.on(this.internalEvents.ENTRY_ANIMATIONS_END,t.bind(function(){this.canAutoplay()?this.play():this._showPlayButton()},this)),this.on(this.internalEvents.EXIT_ANIMATIONS_START,t.bind(function(){this._hidePlayButton(),this._hideVideoAndShowPoster(),this.autoPause(),this._rewindEndedAutoplayingVideo()},this))},attachMedia:function(){if(t.isUndefined(this.$poster))return(new e.Deferred).resolve().promise();var n=this.getPosterFramePreloadPromise();if(!n){var i=new e.Deferred;this.$poster.on("load",i.resolve),n=i.promise()}return this.$poster.attr("src",this._getPosterFrameSrc()),n},deactivate:function(){r.prototype.deactivate.call(this),this._hideVideoAndShowPoster()},_hidePoster:function(){this.$poster&&this.$poster.hide()},_showPoster:function(){this.$poster&&this.$poster.show()},_hideVideo:function(){this.$vid&&this.$vid.hide()},_showVideo:function(){this.$vid&&this.$vid.show()},_hideVideoAndShowPoster:function(){this._showPoster(),this.isVideoReady&&this._hideVideo()},_hidePosterAndShowVideo:function(){this.isVideoReady&&this._showVideo(),this._hidePoster()},_getVideoFormats:function(){var e="h264-high";return n.smartPhone()&&(e="h264-low"),[{format:"dash-playlist",type:"dash+xml"},{format:"hls-playlist",type:"vnd.apple.mpegurl"},{format:e,type:"mp4"},{format:"original",type:"mp4"}]},_hidePlayButton:function(){r.prototype._hidePlayButton.apply(this),this._isShowControls()&&(this.$el.off("click"),this.$el.removeClass("action"),this.$el.css({cursor:"auto"}))},_showPlayButton:function(){r.prototype._showPlayButton.apply(this),this.bindInteraction(this.$el,t.bind(this.onClick,this)),this.$el.addClass("action"),this.$el.css({cursor:"pointer"})},play:function(){this.isVideoReady?this._hidePosterAndShowVideo():this._loadVideo(),this.videoTracker&&this.videoTracker.enableTracking(),this.isManuallyPaused||this.videoHandle.play()},onClick:function(e){return e&&e.preventDefault(),this._isPlaying()?this.manuallyPause():this.play(),!1},_isPlaying:function(){return this.videoHandle&&this.videoHandle.ended===!1&&this.videoHandle.paused===!1&&this.videoHandle.currentTime>0},_isEnded:function(){return this.isVideoReady&&this.videoHandle.ended},_setCurrentTime:function(e){this.isVideoReady&&(this.videoHandle.currentTime=e)},_loadVideo:function(){var i={id:this.id,width:this.options.width,height:this.options.height,poster:this._getPosterFrameSrc(),preload:"auto","webkit-playsinline":!0,playsinline:!0,type:"application/x-mpegURL"};this.muted&&(i.muted=!0),this.$vid=e("<video>",i).css({"-webkit-transform":"translateX(-2048px)",top:0,left:0}),this.$vid.prop("controls",this._isShowControls());var r=new o(this.$vid),s=this.options.videoMedia.get("duration");this.videoTracker=new a(r,s),this._setVideoSources(),this.videoHandle=this.$vid[0],this.videoHandle.autoplay=!0,this._configureVideoEvents(r),this.$vid.on("progress load canplaythrough",t.bind(function(){this.videoHandle.readyState>1&&(this._hidePoster(),this.$vid.css({"-webkit-transform":"translateX(0)"}),this.$vid.off("progress load canplaythrough"))},this)),this.$poster.after(this.$vid);var u=e("<div>",{"class":"video-loading-spinner"});u.css({top:this.options.height/2+"px",left:this.options.width/2+"px"}),this.$vid.on("loadedmetadata",t.bind(function(){u.remove()},this)),this.$vid.after(u),n.webkit&&(this.$vid.on("ended",t.bind(function(){this.videoHandle.webkitExitFullScreen()},this)),this.$vid.on("webkitendfullscreen",t.bind(function(){n.smartPhone()&&(this._hideVideoAndShowPoster(),this._showPlayButton())},this))),this._isLoopForever()&&this.$vid.on("ended",t.bind(function(){this.play()},this)),this.bindVideoElementPauseAndPlayForManualPauseDetection(),this.isVideoReady=!0},isPaused:function(){return this.$vid[0].paused}})}),define("modules/page/utils/VideoAutoplayCapabilities",["lodash","device"],function(e,t){var n={FULL:"full",MUTED:"muted",NONE:"none"},i=e.once(function(){return t.isIos()?t.isIosLessThan(10)?n.NONE:n.MUTED:t.isAndroid()&&t.isBrowserChrome()?t.isBrowserChromeLessThan(53)?n.NONE:n.MUTED:t.isDesktopSafari()&&!t.isDesktopSafariLessThan(11)?n.MUTED:n.FULL});return{isFullSupport:function(){return i()===n.FULL},isMutedSupport:function(){return i()===n.MUTED},isNoSupport:function(){return i()===n.NONE}}}),define("libs/utils/VideoAutoplayConstants",[],function(){return{NO_AUTOPLAY_FALLBACK_OPTIONS:{TAP_TO_PLAY:"tap-to-play",SHOW_THUMBNAIL_IMAGE:"show-thumbnail-image"},MUTED_AUTOPLAY_FALLBACK_OPTIONS:{PLAY_MUTED_VIDEO:"play-muted-video",TAP_TO_PLAY:"tap-to-play",SHOW_THUMBNAIL_IMAGE:"show-thumbnail-image"}}}),define("modules/page/views/components/video/VideoComponentViewFactory",["device","modules/page/views/components/video/DesktopVideoComponentView","modules/page/views/components/video/MobileVideoComponentView","modules/page/views/components/ImageComponentView","modules/page/utils/VideoAutoplayCapabilities","libs/utils/VideoAutoplayConstants"],function(e,t,n,i,r,o){function a(i){return e.mobile()?new n(i):new t(i)}function s(e){return e.imageLoader=e.posterLoader,new i(e)}function u(e){return r.isNoSupport()?c(e):r.isMutedSupport()?l(e):(e.tapToPlay=!1,a(e))}function l(e){var t=e.mutedAutoplayFallbackOption;return t===o.MUTED_AUTOPLAY_FALLBACK_OPTIONS.TAP_TO_PLAY?a(e):t===o.MUTED_AUTOPLAY_FALLBACK_OPTIONS.SHOW_THUMBNAIL_IMAGE?s(e):(e.tapToPlay=!1,e.muted=!0,a(e))}function c(e){var t=e.noAutoplayFallbackOption;return t===o.NO_AUTOPLAY_FALLBACK_OPTIONS.SHOW_THUMBNAIL_IMAGE?s(e):a(e)}return{create:function(e){return e.videoAutoPlay?u(e):a(e)}}}),define("modules/page/utils/ComponentFactory",["log","modules/page/views/components/SquareShapeComponentView","modules/page/views/components/ShapeComponentView","modules/page/views/components/HtmlComponentView","modules/page/views/components/HubspotFormComponentView","modules/page/views/components/HotspotComponentView","modules/page/views/components/HotspotPathComponentView","modules/page/views/components/ImageComponentView","modules/page/views/components/VectorImageComponentView","modules/page/views/components/LineComponentView","modules/page/views/components/TextComponentView","modules/page/views/components/video/VideoComponentViewFactory","modules/page/views/SmartgroupView","VectorImageUtils"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h){return{createComponentFromObject:function(p){var g=null;switch(p.type){case"html-component":g=new i(p);break;case"hubspot-form-component":g=new r(p);break;case"hotspot-component":g=new o(p);break;case"hotspot-path-component":g=new a(p);break;case"shape-component":g="square"==p.shape?new t(p):new n(p);break;case"line-component":g=new l(p);break;case"image-component":g=h.isVectorBased(p.contentType)?new u(p):new s(p);break;case"smartgroup":g=new f(p);break;case"text-component":g=new c(p);break;case"video-widget":g=d.create(p);break;default:return e.warn("Object type on page "+this.options.physicalPageNumber+" not supported:",p.type),null}return g}}}),define("modules/page/utils/PageChildPreRenderList",["lodash"],function(e){var t=function(e,t){this.parentItem=e,this.model=t,this.childViews=[],this.view=null};t.prototype={isSmartgroupLayer:function(){return this.model&&!e.isUndefined(this.model.smartgroupId)},isFolder:function(){return this.model&&"folder"===this.model.type},isLayer:function(){return this.model&&(!e.isUndefined(this.model.objects)||this.isSmartgroupLayer())},findParentSmartgroupModel:function(){for(var e=null,t=this;null!==t;){if(t.isSmartgroupLayer()){e=t.model;break}t=t.parentItem}return e},setView:function(e){this.view=e,this.parentItem.childViews.push(e)}};var n=function(n,i){var r=[];if(!i)return r;var o=function(n,i){n&&e.each(n,function(n){var a=new t(i,n);r.push(a),n.smartgroupId?o(n.layers,a):"folder"===n.type?o(n.items,a):e.each(n.objects,function(e){var n=new t(a,e);r.push(n)})})},a=new t(null,null);return a.childViews=n.childViews,o(i,a),r.reverse()};return{createPreRenderList:n}}),define("modules/page/utils/PageViewPrerenderer",["device","jquery","lodash","log","modules/page/views/LayerView","modules/page/views/FolderView","modules/page/views/SmartgroupView","modules/page/utils/ComponentFactory","modules/page/utils/PageChildPreRenderList"],function(e,t,n,i,r,o,a,s,u){var l=10,c=function(e){this.prerenderDeferred=new t.Deferred,this.prerenderWorkQueue=[],this.pageView=e,this.pageIndex=this.pageView.getPageIndex(),this.nextZIndex=1,this.docFrag=document.createDocumentFragment(),this.pinnedDocFrag=document.createDocumentFragment()};return c.prototype={prerender:function(){var e=Date.now();for(this.isPrerenderQueueEmpty()&&this.initPrerenderQueue();!this.isPrerenderQueueEmpty();)this.prerenderNextWorkItem();i.debug("Prerender complete for page idx: "+this.pageIndex+". Elapsed time: "+(Date.now()-e)+" ms"),this.prerenderDeferred.resolve()},lazyPrerender:function(){if(!this.isPrerendered()){var e=Date.now();i.debug("Starting lazy prerender on page idx: "+this.pageIndex);
var t=n.bind(function(){var n=Date.now();if(!this.isPrerendered()){if(this.isPrerenderQueueEmpty())this.initPrerenderQueue();else for(this.prerenderNextWorkItem();!this.isPrerenderQueueEmpty()&&Date.now()-n<l;)this.prerenderNextWorkItem();this.isPrerenderQueueEmpty()?(i.debug("Lazy prerender complete for page idx: "+this.pageIndex+". Elapsed time: "+(Date.now()-e)+" ms"),this.prerenderDeferred.resolve()):window.requestAnimationFrame(t)}},this);window.requestAnimationFrame(t)}return this.prerenderDeferred.promise()},initPrerenderQueue:function(){this.pageView.resetPageForPrerender(),this.nextZIndex=1,this.docFrag=document.createDocumentFragment(),this.pinnedDocFrag=document.createDocumentFragment(),this.prerenderWorkQueue=u.createPreRenderList(this.pageView,this.pageView.model.get("layers")),i.debug("Prerender queue for page idx: "+this.pageIndex+" has "+this.prerenderWorkQueue.length+" items.")},prerenderObjectView:function(e,t){e=this.pageView.applyPageContext(e);var n=s.createComponentFromObject(e);return null!==n&&(n.render(),t||this.setObjectViewToNextHighestZIndex(n),n.doTriggerOnScroll()&&this.pageView._addScrollTriggeredObject(n),n.hasResettableHoverInteractions()&&this.pageView.addResetWhenOffscreenHoverTrigger(n),n.options.fixedPosition&&this.pageView.setFixedPosition(n)),n},prerenderFolderView:function(e,t,i){var r=new o(e);return r.childViews=t,n.each(r.childViews,n.bind(function(e){r.isInitiallyVisible()||e.hide(),e.addFolderView(r),e.addContainerId(r.getId()),i||this._isLayerOrFolderOrSmartGroupView(e)||this.docFrag.appendChild(e.$el[0])},this)),r},prerenderLayerView:function(t,i,o){var a=new r(t);return a.childViews=i,n.each(a.childViews,n.bind(function(t){t.setLayerView(a),a.isInitiallyVisible()||t.hide();var n=t.$el.attr("data-container-id")?t.$el.attr("data-container-id")+",":"";t.$el.attr("data-container-id",n+a.getId()),o||(t.options.fixedPosition&&e.desktop()?this.pinnedDocFrag.appendChild(t.$el[0]):this.docFrag.appendChild(t.$el[0]))},this)),a},prerenderSmartgroupView:function(t,i){function r(e){n.each(e,function(e){"folder"===e.options.type?r(e.childViews):n.each(e.childViews,function(e){o.setObjectViewToNextHighestZIndex(e),a.$el.append(e.$el[0]),e.options.parentSmartgroup=a})})}var o=this;t=this.pageView.applyPageContext(t);var a=s.createComponentFromObject(t);a.childViews=i,this.setObjectViewToNextHighestZIndex(a),r(a.childViews),a.render(),a.doTriggerOnScroll()&&this.pageView._addScrollTriggeredObject(a);var u=a.$el.attr("data-container-id")?a.$el.attr("data-container-id")+",":"";return a.$el.attr("data-container-id",u+a.id),a.options.fixedPosition&&this.pageView.setFixedPosition(a),a.options.fixedPosition&&e.desktop()?this.pinnedDocFrag.appendChild(a.$el[0]):this.docFrag.appendChild(a.$el[0]),a},setObjectViewToNextHighestZIndex:function(e){e.$el.css("zIndex",this.nextZIndex),this.nextZIndex++},isPrerendered:function(){return"resolved"===this.prerenderDeferred.state()},getPrerenderPromise:function(){return this.prerenderDeferred.promise()},getDocumentFragment:function(){return this.docFrag},getPinnedDocumentFragment:function(){return this.pinnedDocFrag},isPrerenderQueueEmpty:function(){return!this.prerenderWorkQueue||0===this.prerenderWorkQueue.length},_isLayerOrFolderOrSmartGroupView:function(e){return e instanceof r||e instanceof o||e instanceof a},prerenderNextWorkItem:function(){var e=this.prerenderWorkQueue.shift();this.prerenderSingleWorkItem(e)},prerenderSingleWorkItem:function(e){var t=null;if(e)if(e.isSmartgroupLayer()){var n=this.prerenderSmartgroupView(e.model,e.childViews);e.setView(n)}else if(e.isFolder()){t=e.findParentSmartgroupModel();var i=this.prerenderFolderView(e.model,e.childViews,t);e.setView(i)}else if(e.isLayer()){t=e.findParentSmartgroupModel();var r=this.prerenderLayerView(e.model,e.childViews,t);e.setView(r)}else{t=e.findParentSmartgroupModel();var o=this.prerenderObjectView(e.model,t);e.setView(o)}}},c}),define("modules/page/views/PageView",["log","jquery","lodash","backbone","device","globals","shared/models/EmbeddedViewportModel","shared/views/AbstractView","modules/page/views/components/AbstractComponentView","modules/page/views/components/video/AbstractVideoComponentView","modules/page/utils/PageViewPrerenderer","modules/splash-screen/module","ExtentsUtils","InteractionUtils","urlUtils"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p){var g=1e3,m=100;return s.extend({className:"page-viewport",tagName:"div",activated:!1,documentVersion:null,$pageContainer:null,$pinnedContainer:null,$pageScroll:null,scaleContext:null,scaleTransformKey:null,scaleTransformValue:null,scaleExperience:null,prerenderer:null,activeHoversGroupedByInteraction:null,exitPromisesByLayerId:[],defaults:{physicalPageNumber:"unknown"},initialize:function(){this.options=n.defaults(this.options,this.defaults),this.documentVersion=this.options.documentVersion,this.scaleContext=this.options.scaleContext,this.scaleExperience=this.documentVersion.getScaleExperience(),this.scrollTriggeredObjects=[],this.resetWhenOffscreenHoverTriggers=[],this.prerenderer=new c(this),this.$pageContainer=t("<div>",{"class":"page-container"}),this.throttleReload=n.debounce(n.bind(this.reload,this),g),this.documentVersion.on("reload",this.throttleReload),this.$pageScroll=t("<div>",{"class":"page-scroll"}),this.$pageContainer.append(this.$pageScroll);var e=this;r.desktop()&&(this.$pinnedContainer=t("<div>",{"class":"pinned-container"}),this.$el.append(this.$pinnedContainer),this.$pinnedContainer.on("wheel mousewheel",function(t){if(t.originalEvent.deltaY){t.preventDefault(),t.stopPropagation();var n=e.$pageContainer.scrollTop(),i=t.originalEvent.deltaY;1===t.originalEvent.deltaMode&&(i*=e.getUnstyledLineHeight()),e.$pageContainer.scrollTop(n+i)}})),this.$pageContainer.on("wheel mousewheel",function(t){if(t.originalEvent.deltaY){var n=e.$pageContainer.scrollTop(),i=n+t.originalEvent.deltaY;1===t.originalEvent.deltaMode&&(i=n+t.originalEvent.deltaY*e.getUnstyledLineHeight());var r=e.$pageContainer[0].scrollHeight>e.$pageContainer[0].offsetHeight,a=e.$pageContainer[0].scrollHeight-e.$pageContainer[0].scrollTop>0,s=e.$pageContainer[0].scrollHeight-e.$pageContainer[0].scrollTop<e.$pageContainer[0].clientHeight;if(o.isEmbedded){if(!(-1===window.location.href.indexOf("?heightOverride=")&&r&&a&&s))return;t.preventDefault(),t.stopPropagation(),e.$pageContainer.scrollTop(i)}else t.preventDefault(),t.stopPropagation(),e.$pageContainer.scrollTop(i)}}),this.$el.append(this.$pageContainer),s.prototype.initialize.call(this),this.el=function(){return this.$el},this.$el.attr("data-slug",this.model.get("slug")),this.prepare=n.once(n.bind(this.prepare,this)),this.attach=n.once(n.bind(this.attach,this)),this.spinner=null,this.pageReady=new t.Deferred,this.renderPlaceholder(),this.hasRunEntryAnimations=!1,this.activeHoversGroupedByInteraction=[],this.lastViewportUpdate=performance.now(),this.isProcessingScroll=!1;var i=this,u=function(e){e-i.lastViewportUpdate>m?(i.onScrollAndWindowResize(),i.lastViewportUpdate=e,i.isProcessingScroll=!1):requestAnimationFrame(u)};this.$pageContainer.on("scroll",function(){i.isProcessingScroll||(i.isProcessingScroll=!0,requestAnimationFrame(u))}),a.getInstance().on("change",n.bind(this.onScrollAndWindowResize,this)),this.childViews=[]},startLazyPrerender:function(){this.prerenderer.lazyPrerender()},prerender:function(){this.prerenderer.prerender()},getPrerenderDeferred:function(){return this.prerenderer.prerenderDeferred},isPrerendered:function(){return this.prerenderer.isPrerendered()},resetPageForPrerender:function(){this.closeAllComponents(),this.childViews=[],this.scrollTriggeredObjects=[],this.resetWhenOffscreenHoverTriggers=[]},getUnstyledLineHeight:function(){if(!this.unstyledLineHeight){var e=document.createElement("iframe");e.src="#",document.body.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),n.close();var i=n.body.firstElementChild;this.unstyledLineHeight=i.offsetHeight,document.body.removeChild(e)}return this.unstyledLineHeight},getPageHeight:function(){return this.model.getPageHeight(this.documentVersion)},getPageWidth:function(){return this.model.getPageWidth(this.documentVersion)},getScrollPosition:function(){return this.$pageContainer.scrollTop()},setScrollPosition:function(e){this.$pageContainer.scrollTop(e)},focusScrollContainer:function(){this.$pageContainer.focus()},onScrollAndWindowResize:function(){if(this.activated){for(var e=this.getVisibleYBoundaries(),t=this.getVisibleXBoundaries(),i=0;i<this.scrollTriggeredObjects.length;i++){var r=this.scrollTriggeredObjects[i],o=r.isWithinBoundaries(e,t);o||r.resetWhenNotVisible(),this.isReady()&&(r.runEntryAnimationsWhenVisible(e,t),o&&r.createTimedTriggers())}for(var a=0;a<this.resetWhenOffscreenHoverTriggers.length;a++){var s=this.resetWhenOffscreenHoverTriggers[a],u=s.isWithinBoundaries(e,t),l=n.bind(this.resetVisibilityIfAllTargetsAndHoverTriggerOffscreen,this,s,e,t);if(!u){var c=s.getResettableHoverInteractions();n.each(c,l)}}this.getModule().trigger(this.getModule().publishedEvents.PAGE_SCROLL,{slug:this.model.get("slug"),topY:e.topY,bottomY:e.bottomY,pageHeight:this.getPageHeight()})}},resetVisibilityIfAllTargetsAndHoverTriggerOffscreen:function(e,t,i,r){function o(e){var r=a.findChildView(e),o=[];r.childViews?o=r.childViews:o.push(r),u.push(r),n.each(o,function(e){e&&e.isWithinBoundaries(t,i)&&(s=!1)})}if(r.resetWhenScrolledOffscreen){var a=this,s=!0,u=[];n.each(r.layerTargets,o),s&&(this.resetChildViewToInitialVisibility(e),n.each(u,n.bind(this.resetChildViewToInitialVisibility,this)))}},resetChildViewToInitialVisibility:function(e){e.initiallyVisible?this.showChildView(e):this.hideChildView(e)},resetTimedTriggers:function(){n.each(this.scrollTriggeredObjects,function(e){e.timedTriggersCreatedAtLeastOnce=!1})},getVisibleYBoundaries:function(){var e,t,n=this.getScaleContext(),i=n.height/n.ratio,r=a.getInstance(),o=this.$pageContainer.scrollTop();if(r.isActive()){var s=this.getPageHeight(),u=Math.max((i-s)/2,0),l=r.getTop()/n.ratio,c=r.getBottom()/n.ratio;e=Math.max(l,0)+o-u,t=Math.min(c,i)+o-u}else e=o,t=e+i;return{topY:Math.round(e),bottomY:Math.round(t)}},getVisibleXBoundaries:function(){if(this.scaleExperience)return null;var e=this.getScaleContext();return{leftX:this.$pageContainer.scrollLeft(),rightX:this.$pageContainer.scrollLeft()+e.width}},getScaleContext:function(){return this.scaleContext.getPageScaleContext(this)},getSlug:function(){return this.model.get("slug")},onClose:function(){this.closeAllComponents()},closeAllComponents:function(){if(this.childViews){var e=function(t){n.each(t,function(t){t.close(),t.childViews&&e(t.childViews)})};e(this.childViews)}},_bindModel:function(){this.model.on("remote",this.applyRemoteChange,this),this.model.on("reload",this.throttleReload,this)},renderPlaceholder:function(){this.closeAllComponents();var e=t(window);this.$el.css({width:e.width(),height:e.height()}),this._createSpinner(!1)},setFixedPosition:function(e){var t=this;r.desktop()||(e.$el.css("position","fixed"),e.$el.on("mousewheel",function(e){e.preventDefault(),e.stopPropagation();var n=t.$pageContainer.scrollTop();e.originalEvent.deltaY&&t.$pageContainer.scrollTop(n+e.originalEvent.deltaY)}))},findChildView:function(e){var t=null,i=function(r){return n.some(r,function(n){return n.id===e?(t=n,!0):n instanceof l&&n.el&&n.el.id===e?(t=n,!0):n.childViews?i(n.childViews):!1})};return this.childViews&&i(this.childViews),t},findVideo:function(e){var t=null,i=function(r){return n.some(r,function(n){return n.el&&n.el.id===e?(t=n,!0):n.childViews?i(n.childViews):!1})};return this.childViews&&i(this.childViews),t},_addScrollTriggeredObject:function(e){var t=n.some(this.scrollTriggeredObjects,function(t){return t.id==e.id});t||this.scrollTriggeredObjects.push(e)},_removeScrollTriggeredObject:function(e){var t,i=n.find(this.scrollTriggeredObjects,function(n,i){return n.id==e.id?(t=i,!0):!1});i&&this.scrollTriggeredObjects.splice(t,1)},addResetWhenOffscreenHoverTrigger:function(e){var t=n.some(this.resetWhenOffscreenHoverTriggers,function(t){return t.id==e.id});t||this.resetWhenOffscreenHoverTriggers.push(e)},removeResetWhenOffscreenHoverTrigger:function(e){var t,i=n.find(this.resetWhenOffscreenHoverTriggers,function(n,i){return n.id==e.id?(t=i,!0):!1});i&&this.resetWhenOffscreenHoverTriggers.splice(t,1)},prepare:function(){return this.prerenderer.isPrerendered()||this.prerenderer.prerender(),this.prerenderer.getPrerenderPromise().done(n.bind(function(){t.when.apply(t,this.attachVisibleMedia()).done(n.bind(function(){e.debug("All page media attached"),this.pageReady.resolve()},this)).fail(n.bind(function(){e.debug("Page media failed"),this.pageReady.reject()},this))},this)),this.pageReady.promise()},attachVisibleMedia:function(){var e=!0;return this.attachChildMedia(this,e)},attachViewMedia:function(e){var t=[];t.push(e.attachMedia());var n=!1;return t=t.concat(this.attachChildMedia(e,n))},attachChildMedia:function(e,t){var i=[],r=function(e){n.each(e,function(e){(!t||e.initiallyVisible)&&(i.push(e.attachMedia()),e.childViews&&r(e.childViews))})};return e&&e.childViews&&r(e.childViews),i},scale:function(){var e=this.getScaleContext();this.model.preloadVisibleImages(e),this.model.preloadHiddenImages(e);var t=function(e){n.each(e,function(e){(e.mediaHasBeenLoaded||e.initiallyVisible)&&(e.scaleComponent(),e.childViews&&t(e.childViews))})};t(this.childViews)},attach:function(){this._destroySpinner(),this.pageReady.resolve(),this.render(),e.debug("Page idx: "+this.getPageIndex()+" attached!")},render:function(){this.$pageScroll[0].appendChild(this.prerenderer.getDocumentFragment()),r.desktop()&&this.$pinnedContainer[0].appendChild(this.prerenderer.getPinnedDocumentFragment());var e=function(t){n.each(t,function(t){t.onAttach(),t.childViews&&e(t.childViews)})};e(this.childViews),this.$pageScroll.focus()},applyRemoteChange:function(e){var t=this,n=this.findChildView(e.id);if(n&&n instanceof u){var i=!1,r=n.allParentLayersAndFoldersVisible();i=!r,n.applyChanges(t.applyPageContext(e.options)),i&&n.hide(),n.doTriggerOnScroll()?t._addScrollTriggeredObject(n):t._removeScrollTriggeredObject(n),n.getResettableHoverInteractions()?t.addResetWhenOffscreenHoverTrigger(n):t.removeResetWhenOffscreenHoverTrigger(n)}},reload:function(){var e=this.getScaleContext();this.model.preloadVisibleMediaNow(e),this.model.preloadHiddenMedia(e),this.prerender(),this.$pageScroll.empty(),r.desktop()&&this.$pinnedContainer.empty(),this.render(),this.getModule().trigger(this.getModule().publishedEvents.PAGE_RELOAD),this.attachVisibleMedia(),this.runInitialEntryAnimations()},storeScaleTransform:function(e,t){this.scaleTransformKey=e,this.scaleTransformValue=t},setBackgroundPositionAndScaleTransform:function(e,t){var n={"background-position-x":e+"px",zoom:"",transform:""};(this.scaleExperience||t)&&(t?"transform"===this.scaleTransformKey?n.transform="translateX("+e+"px) "+this.scaleTransformValue:(n.transform="translateX("+e+"px)",n[this.scaleTransformKey]=this.scaleTransformValue):n[this.scaleTransformKey]=this.scaleTransformValue),this.$el.css(n)},getLeft:function(){return parseInt(this.$el.css("background-position-x"),10)},setOpacity:function(e){this.$pageScroll.css("opacity",e)},isInTransition:function(){return this.$el.hasClass("in-transition")},isPending:function(){return this.$el.hasClass("pending")},isTop:function(){return this.$el.hasClass("top")},isViewed:function(){return this.$el.hasClass("viewed")},isReady:function(){return"resolved"===this.pageReady.state()},isDisabled:function(){return this.model.get("disabled")===!0},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},makeInTransition:function(){this.$el.addClass("in-transition"),this._startSpinner()},makePending:function(){this.$el.removeClass("top viewed in-transition").addClass("pending");var e=this.getScaleContext();this.setBackgroundPositionAndScaleTransform(e.originalWindowWidth,!1),this._stopSpinner()},makeTop:function(){this._startSpinner(),this.$el.removeClass("pending viewed in-transition").addClass("top"),this.setBackgroundPositionAndScaleTransform(0,!1)},activate:function(){var e=this.hasRunEntryAnimations;this.runInitialEntryAnimations(e);var t=this.getVisibleYBoundaries(),i=this.getVisibleXBoundaries();this.isReady()&&n.each(this.scrollTriggeredObjects,function(e){e.isWithinBoundaries(t,i)&&e.createTimedTriggers()}),this.getModule().trigger(this.getModule().publishedEvents.PAGE_ACTIVATED,{slug:this.model.get("slug"),topY:t.topY,bottomY:t.bottomY,pageHeight:this.getPageHeight()}),this.activated=!0},makeViewed:function(){this.$el.removeClass("top pending in-transition").addClass("viewed");var e=this.getScaleContext();this.setBackgroundPositionAndScaleTransform(-e.originalWindowWidth,!1),this._stopSpinner()},getThumbnail:function(){return p.makeUrlAbsolute(this.options.thumbnail)},getDomObjectsForChildViewAndAllChildren:function(e){return this.$('.page-object[data-container-id*="'+e.id+'"]')},getDomObjectForChildView:function(e){return this.$('.page-object[data-container-id="'+e.id+'"]')},getChildViews:function(){return this.childViews},showChildView:function(e,t,i){var r=this;e&&("smartgroup"===e.options.type?this.getDomObjectForChildView(e).show():e instanceof l?this.$(e.el).show():e instanceof u?this.$("#"+e.getEscapedId()).show():n.each(e.childViews,function(e){e.visible&&r.showChildView(e,t,i)}),e.visible=!0,i&&(e.hiddenByAction=!1),t&&(i&&(e.repeatedTimedTriggersCanBeCreatedAgain=!0),this.createTimedInteractionsForChildView(e)))},createTimedInteractionsForChildView:function(e){if(e instanceof u&&e.isWithinBoundaries(this.getVisibleYBoundaries(),this.getVisibleXBoundaries())&&e.createTimedTriggers(),e.childViews){var t=this;n.each(e.childViews,function(e){t.createTimedInteractionsForChildView(e)})}},hideChildView:function(e,t){e&&("smartgroup"===e.options.type?this.getDomObjectForChildView(e).hide():e instanceof l?this.$(e.el).hide():e instanceof u?this.$("#"+e.getEscapedId()).hide():this.getDomObjectsForChildViewAndAllChildren(e).hide(),e.visible=!1,e.hiddenByAction=t,e instanceof u&&e.onNotVisible(),e.childViews&&n.each(e.childViews,function(e){e instanceof u&&(e.hiddenByAction=t,e.onNotVisible())}))},isChildVisible:function(e){return null!==e&&e.visible===!0},showChildViewByAction:function(e,n){n=n||t.noop,e.allParentLayersAndFoldersVisible()&&(this.showChildView(e,!0,!0),n())},hideChildViewByAction:function(e,i,r){this.exitPromisesByLayerId[e.id]&&this.exitPromisesByLayerId[e.id].length>0||(this.exitPromisesByLayerId[e.id]=[],i=i||t.noop,this.runAllChildViewExitAnimations(e.id,e,!0),t.when.apply(t,this.exitPromisesByLayerId[e.id]).done(n.bind(function(){var t=!r;this.hideChildView(e,t),this.exitPromisesByLayerId[e.id]=[],i()},this)))},runAllChildViewExitAnimations:function(e,t,i){t instanceof u&&(t.hiddenByAction=i,i&&(t.repeatedTimedTriggersCanBeCreatedAgain=!0),this.exitPromisesByLayerId[e].push(t.runExitAnimations())),t.childViews&&n.each(t.childViews,n.bind(function(t){this.runAllChildViewExitAnimations(e,t,i)},this))},reset:function(){if(this.childViews){this.deactivateHovers();var e=this,t=function(i){n.each(i,function(i){i.childViews&&t(i.childViews),n.isUndefined(i.initiallyVisible)||i.initiallyVisible?e.showChildView(i,!1,!1):e.hideChildView(i),i.reset(),e.exitPromisesByLayerId[i.id]=[]})};t(this.childViews)}},resetChildView:function(e){var t=e instanceof u,i=Boolean(e.childViews);t?e.reset():i&&n.each(e.childViews,n.bind(function(e){e.reset()},this)),(t||i)&&(this.exitPromisesByLayerId[e.id]=[])},resetNonVisible:function(){if(!n.isEmpty(this.scrollTriggeredObjects)){var e=this.getVisibleYBoundaries(),t=this.getVisibleXBoundaries();n.each(this.scrollTriggeredObjects,n.bind(function(n){n.resetWhenNotVisible(n.isWithinBoundaries(e,t))},this))}},deactivate:function(){this.childViews&&n.each(this.childViews,n.bind(function(e){this.finishChildViewAnimations(e),this.deactivateChildView(e)},this))},deactivateChildView:function(e){e.deactivate(),e.childViews&&n.each(e.childViews,n.bind(function(e){this.deactivateChildView(e)},this))},runInitialEntryAnimations:function(e){if(this.childViews){var t=this.getVisibleYBoundaries(),i=this.getVisibleXBoundaries(),r=function(o){n.each(o,function(o){(n.isUndefined(o.visible)||o.visible)&&o.runInitialEntryAnimations(t,i,e),o.childViews&&o.visible&&r(o.childViews)})};r(this.childViews)}},runVisibleEntryAnimations:function(){if(this.isReady()&&!n.isEmpty(this.scrollTriggeredObjects)){var e=this.getVisibleYBoundaries(),t=this.getVisibleXBoundaries();n.each(this.scrollTriggeredObjects,n.bind(function(n){n.runEntryAnimationsWhenVisible(e,t)},this))}},runAllChildViewEntryAnimations:function(e,t){this.isChildVisible(e)&&(this.resetChildView(e),e instanceof u&&e.runEntryAnimations(t),e.childViews&&n.each(e.childViews,n.bind(function(e){this.runAllChildViewEntryAnimations(e,t)},this)))},pauseAnimations:function(){if(this.childViews){var e=function(t){n.each(t,function(t){t.pauseAnimations(),t.childViews&&e(t.childViews)})};e(this.childViews)}},resumeAnimations:function(){if(this.childViews){var e=function(t){n.each(t,function(t){t.resumeAnimations(),t.childViews&&e(t.childViews)})};e(this.childViews)}},finishChildViewAnimations:function(e){e.finishAnimations(),e.childViews&&n.each(e.childViews,n.bind(function(e){this.finishChildViewAnimations(e)},this))},isValidChildView:function(e){var t=this.findChildView(e);return null!==t},applyPageContext:function(e){return n.defaults(e,{pageWidth:this.getPageWidth(),pageHeight:this.getPageHeight(),module:this.getModule(),pageView:this,theme:this.options.theme,allowCommerceIntegration:this.options.allowCommerceIntegration,allowLightboxes:this.options.allowLightboxes})},invokeChildActions:function(i,r,o){if(i&&0!==i.length){var a=[],s=[],u=this,l=this.getModule();n.each(i,n.bind(function(e){var t=this.findChildView(e);if(t){var n=!1;r===l.INTERACTION_ACTIONS.CHILD_SHOW?n=!0:r===l.INTERACTION_ACTIONS.CHILD_TOGGLE&&(n=!u.isChildVisible(t)),n?a.push(t):s.push(t)}},this)),n.uniq(a),n.uniq(s);var c=[];if(n.each(a,function(e){e.mediaHasBeenLoaded||(c=c.concat(u.attachViewMedia(e)))}),n.isEmpty(c))n.each(s,function(e){u.hideChildViewByAction(e,function(){u.resetChildView(e)},o)}),n.each(a,function(e){u.showChildViewByAction(e,function(){u.runAllChildViewEntryAnimations(e)})});else{n.isNull(this.childLoadingTimeout)||clearTimeout(this.childLoadingTimeout),this.childLoadingTimeout=n.delay(function(){u._createSpinner(!0)},200);var d=function(){clearTimeout(u.childLoadingTimeout),u.childLoadingTimeout=null,u._destroySpinner(),n.each(s,function(e){u.hideChildViewByAction(e,function(){u.resetChildView(e)},o)}),n.each(a,function(e){e.mediaHasBeenLoaded=!0,u.showChildViewByAction(e,function(){u.runAllChildViewEntryAnimations(e)})})};t.when.apply(t,c).done(function(){e.debug("Successfully attached child media being shown."),d()}).fail(function(){e.debug("Failed to load child media being shown."),d()})}}},_createSpinner:function(e){n.isNull(this.spinner)&&(this.spinner=d.showLoading(this.$el,{startImmediately:e}))},_destroySpinner:function(){this.spinner&&(this.spinner.destroy(),this.spinner=null)},_stopSpinner:function(){this.spinner&&this.spinner.stop()},_startSpinner:function(){this.spinner&&this.spinner.start()},addActiveHoverAndBindMouseEvents:function(e,t){0===this.activeHoversGroupedByInteraction.length&&(this.$pageScroll.on("mousemove",n.bind(this._handleMouseMove,this)),this.$pageScroll.on("mouseleave",n.bind(this._handleMouseLeave,this)),this.$pinnedContainer.on("mousemove",n.bind(this._handleMouseMove,this)),this.$pinnedContainer.on("mouseleave",n.bind(this._handleMouseLeave,this)));var i=t.layerTargets,r=e.getExtents(),o=e.getHoverArea(),a=[];return n.isEmpty(r)?void this.deactivateHovers():(n.each(i,n.bind(function(i){if(this.isValidChildView(i)){var s;if(h.shouldCreateHoverArea(t)){var u=this.getChildViewExtents(i);if(n.isEmpty(u))return void this.deactivateHovers();s=f.createHoverArea(r,u,!1)}else s=o?o:f.createHoverArea(r,r,!1);if(e.options.parentSmartgroup){var l=e.options.parentSmartgroup.options.x,c=e.options.parentSmartgroup.options.y;n.each(s,function(e){e.x+=l,e.y+=c})}var d={object:e,interaction:t,area:s,target:this.findChildView(i)};(e.options.fixedPosition||e.options.parentSmartgroup&&e.options.parentSmartgroup.options.fixedPosition)&&(d.pinned=!0),a.push(d)}},this)),void this.activeHoversGroupedByInteraction.push(a))},_handleMouseMove:function(e){var t,i,r=this.getScaleContext(),o=this.$pageScroll.offset();this.scaleContext.doBlurryFontFix(r.ratio)?(t=e.pageX/r.ratio-o.left,i=e.pageY/r.ratio-o.top):(t=(e.pageX-o.left)/r.ratio,i=(e.pageY-o.top)/r.ratio);var a=[],s=Math.ceil(t),u=Math.floor(t),l=Math.ceil(i),c=Math.floor(i);n.each(this.activeHoversGroupedByInteraction,n.bind(function(e){var t=n.every(e,function(e){var t=n.cloneDeep(e.area);return e.pinned&&n.each(t,function(e){e.y-=o.top}),e.target.mediaHasBeenLoaded&&!Math.pointInPoly(t,s,l)&&!Math.pointInPoly(t,u,c)});t?e[0].object.triggerMouseOutAction(e[0].interaction):a.push(e)},this)),this.activeHoversGroupedByInteraction=a,0===this.activeHoversGroupedByInteraction.length&&this.deactivateHovers()},_handleMouseLeave:function(){n.each(this.activeHoversGroupedByInteraction,n.bind(function(e){e[0].object.triggerMouseOutAction(e[0].interaction)},this)),this.deactivateHovers()},deactivateNonParentHovers:function(e){var t=e.getLayerView(),i=[];n.each(this.activeHoversGroupedByInteraction,n.bind(function(r){if(r.length>0){var o=n.every(r,n.bind(function(n){var i=n.target.id===t.id||n.target.id===e.id,r=n.object.id===e.id;return i||r||!n.target.mediaHasBeenLoaded?!1:!0},this));o?r[0].object.triggerMouseOutAction(r[0].interaction):i.push(r)}},this)),this.activeHoversGroupedByInteraction=i},deactivateHovers:function(){this.activeHoversGroupedByInteraction=[],this.$pageScroll.off("mousemove"),this.$pageScroll.off("mouseleave")},getChildViewExtents:function(e){var t=this.findChildView(e),n={};return t&&(n=t.getExtents()),n},getPageIndex:function(){return this.model.getPageIndex()}})}),define("modules/page/module",["lodash","ceros","globals","modules/page/views/PageView"],function(e,t,n,i){var r=new t.Module({id:"page",description:"",version:"1.0",dependencies:{splashScreen:"1.0"},publishedEvents:{PAGE_COMPONENT_INTERACTION:"page.component.interaction",PAGE_COMPONENT_CLICKED:"page.component.clicked",PAGE_COMPONENT_FORM_SUBMITTED:"page.component.form_submitted",PAGE_PRELOAD_READY:"page.preload_ready",PAGE_ACTIVATED:"page.activated",PAGE_SCROLL:"page.scroll",PAGE_ACTION_SCROLL_TO:"page.action.scroll_to",PAGE_ACTION_GO_TO_PREV_PAGE:"page.action.go_to_prev_page",PAGE_ACTION_GO_TO_NEXT_PAGE:"page.action.go_to_next_page",PAGE_ACTION_GO_TO_PAGE:"page.action.go_to_page",PAGE_ACTION_ENABLE_DISABLE_PAGES:"page.action.enable_disable_pages",PAGE_ACTION_GO_TO_URL:"page.action.go_to_url",PAGE_ACTION_OPEN_LIGHTBOX:"page.action.open_lightbox",PAGE_ACTION_OPEN_PRODUCT_PANEL:"page.action.open_product_panel",PAGE_ACTION_OPEN_SHOPPING_CART:"page.action.open_shopping_cart",PAGE_ACTION_LAYER_VISIBILITY:"page.action.layer_visibility",PAGE_ACTION_INVOKE_ANIMATION:"page.action.invoke.animation",PAGE_ACTION_PLAY_AUDIO:"page.action.play_audio",PAGE_ACTION_SHARE_PAGE:"page.action.share.page",PAGE_VIDEO_PLAY:"page.video.play",PAGE_VIDEO_PROGRESS_TIME:"page.video.progress_time",PAGE_VIDEO_PROGRESS_PERCENT:"page.video.progress_percent",PAGE_RELOAD:"page.reload",PAGE_COMPONENT_ANIMATION_START:"page.component.animation.start",PAGE_COMPONENT_ANIMATION_END:"page.component.animation.end",TIMED_INTERACTION:"page.component.timed.interaction"},INTERACTION_TRIGGERS:{CLICK:"click",HOVER:"hover",VIEW:"view",SUBMIT:"submit"},INTERACTION_ACTIONS:{CHILD_SHOW:"show",CHILD_HIDE:"hide",CHILD_TOGGLE:"toggle"},delegate:{createPageView:function(t,o){var a={theme:e.isUndefined(n.themeObj)?{}:n.themeObj};o=e.extend({enableLoadingThumbnail:!1,enableLoadingSpinner:!1,allowCommerceIntegration:n.allowCommerceIntegration,allowLightboxes:n.allowLightboxes},a,o||{});var s=new i(e.extend(o,{module:r,model:t}));return s}}});return r}),define("text!modules/chrome/templates/menubar.html",[],function(){return'<div id="chrome-menu">\n    <span class="title"></span>\n    <div class="cart button">\n        <a href="#"><span class="icon">&#xe004;</span></a>\n    </div>\n    <div class="share button">\n        <a href="#" class="share-button"><span class="icon">&#xe000;</span></a>\n        <div class="arrow"><!-- A dynamically rendered HTML5 canvas or VML element is inserted here --></div>\n    </div>\n\n    <div class="share-menu" style="display:none;">\n        <ul>\n            <li><a href="#" data-share="facebook" title="Share on Facebook"><span class="icon ceros-facebook-icon"></span></a></li>\n            <li><a href="#" data-share="twitter" title="Share on Twitter"><span class="icon ceros-twitter-icon"></span></a></li>\n            <li><a href="#" data-share="linkedin" title="Share on LinkedIn"><span class="icon ceros-linkedin-icon"></span></a></li>\n            <li><a href="#" data-share="pinterest" title="Share on Pinterest"><span class="icon ceros-pinterest-icon"></span></a></li>\n            <li><a href="#" data-share="email" title="Share via Email"><span class="icon ceros-email-icon"></span></a></li>\n        </ul>\n    </div>\n</div>\n'}),define("modules/chrome/views/ChromeView",["jquery","lodash","backbone","color","device","globals","VectorImageUtils","libs/image/VectorImageResourceFactory","shared/views/AbstractView","shared/utils/CerosResourceLoader","modules/page/utils/VectorImage","text!modules/chrome/templates/menubar.html"],function(e,t,n,i,r,o,a,s,u,l,c,d){var f=5e3,h=42,p=50;return u.extend({id:"chrome",initialize:function(){u.prototype.initialize.call(this),this.autoHideTimer=null,this.render(),this.clickOverlay=e('<div class="click-overlay"></div>'),this.bindInteraction(this.clickOverlay,t.bind(this._hideShareMenu,this)),this.configureInteractions()},configureInteractions:function(){this.bindInteraction(this.title,t.bind(this._clickTitle,this)),this.bindInteraction(this.share,t.bind(this._activateShareMenu,this)),this.bindInteraction(this.shareMenu.find("a"),t.bind(this._sharePage,this)),this.bindInteraction(this.cart,t.bind(this._activateCart,this))},render:function(){this.$el.empty().html(d),e(window).bind("resize",t.bind(this._onResize,this)),this.chromeMenu=this.$el.find("#chrome-menu"),this.title=this.chromeMenu.find(".title"),this.share=this.chromeMenu.find(".share"),this.shareMenu=this.chromeMenu.find(".share-menu"),this.shareMenuArrow=this.chromeMenu.find(".arrow"),this._renderShareMenuArrow(),this.cart=this.chromeMenu.find(".cart"),this.options.showChromeMenu===!1&&this.chromeMenu.hide(),this.setCustomTheming(),this.options.allowCommerceIntegration&&this.options.commerceSettings.shoppingCartUrl||this.cart.remove(),this.chromeMenu.addClass("icon-"+this.chromeMenu.find("div.button").length)},_renderShareMenuArrow:function(){var t=39,n=18,i=e('<canvas width="'+t+'" height="'+n+'"></canvas>');this.shareMenuArrow.empty().append(i);var r=i[0].getContext("2d");r.save(),r.clearRect(0,0,t,n),r.fillStyle=this.options.menuBackgroundColor,r.beginPath(),r.moveTo(t/2,0),r.lineTo(t,n),r.lineTo(0,n),r.lineTo(t/2,0),r.fill(),r.restore()},setCustomTheming:function(){this.chromeMenu.css("background-color",this.options.menuBackgroundColor),this.shareMenu.css("background-color",this.options.menuBackgroundColor),this.shareMenu.find("li").css("border-color",this.options.menuBorderColor);var t=this.options.menuForegroundColor;this.$el.find(".title,.label,.icon").css("color",t);var n=this.$el.find("a"),i=this.options.menuHoverOpacity;r.desktop()&&n.hover(function(){e(this).css("opacity",i)},function(){e(this).css("opacity","1.0")}),r.touch()&&n.bind("touchstart",function(){e(this).css("opacity",i)}).bind("touchend",function(){e(this).css("opacity","1.0")})},toggle:function(){this.chromeMenu.fadeToggle({duration:"fast",queue:!1,complete:t.bind(this.setAutoHideTimer,this)})
},setAutoHideTimer:function(){this.cancelAutoHide(),this.chromeMenu.is(":visible")&&(this.autoHideTimer=setTimeout(t.bind(function(){"none"===this.shareMenu.css("display")&&this.hide(!0)},this),f))},cancelAutoHide:function(){clearTimeout(this.autoHideTimer)},show:function(e){this.cancelAutoHide(),e?this.$el.fadeIn("fast"):this.$el.show()},hide:function(e){this.cancelAutoHide(),e?this.chromeMenu.fadeOut("fast"):this.chromeMenu.hide()},getHeight:function(){return this.options.showChromeMenu===!1?0:r.mobile()?p:h},setTitle:function(e){this.chromeMenu.find(".title").text(e)},_onResize:function(){this._positionShareMenu()},_showShareMenu:function(){this._positionShareMenu(),this.shareMenuArrow.show(),this.shareMenu.slideDown(150,t.bind(function(){this.$el.after(this.clickOverlay),this.clickOverlay.show()},this)),t.defer(t.bind(function(){this.bindInteraction(this.$el,t.bind(this._hideShareMenu,this))},this))},_hideShareMenu:function(){this.shareMenu.slideUp(100,t.bind(function(){this.shareMenuArrow.hide(),this.clickOverlay.detach(),this.unbindInteraction(this.$el)},this)),r.mobile()&&this.setAutoHideTimer()},_positionShareMenu:function(){var t,n=e(window).width(),i=this.chromeMenu.height()+10;t=480>=n?this.share.position().left+this.share.width()/2-this.shareMenu.width()/2:this.share.position().left,this.shareMenu.css({top:i+"px",left:t+"px"})},_clickTitle:function(){this.getModule().trigger(this.getModule().publishedEvents.CHROME_TITLE_CLICK)},_activateCart:function(){this.getModule().trigger(this.getModule().publishedEvents.CHROME_SHOPPING_CART)},_activateShareMenu:function(){"none"===this.shareMenu.css("display")?(this.getModule().trigger(this.getModule().publishedEvents.CHROME_SHARE),this._showShareMenu()):this._hideShareMenu()},_sharePage:function(t){var n="share-"+e(t.currentTarget).attr("data-share");this.getModule().trigger(this.getModule().publishedEvents.CHROME_SHARE_PAGE,{action:n}),this._hideShareMenu()}})}),define("modules/chrome/module",["jquery","lodash","ceros","globals","device","color","modules/chrome/views/ChromeView"],function(e,t,n,i,r,o,a){var s=new n.Module({id:"chrome",description:"Provides a menu bar user interface for the web player",version:"2.0",chromeView:null,publishedEvents:{CHROME_SHARE:"chrome.share",CHROME_SHARE_PAGE:"chrome.share.page",CHROME_SHOPPING_CART:"chrome.shopping_cart",CHROME_TITLE_CLICK:"chrome.title.click"},delegate:{load:function(e){var n={theme:t.isUndefined(i.themeObj)?{}:i.themeObj};this.options=t.extend({},n,e);var r=this.options.theme.menuFgColor,u=this.options.theme.menuBgColor,l=o.fromHex(r);l.a=.1,this.chromeView=new a({module:s,menuBackgroundColor:u,menuBorderColor:l,menuForegroundColor:r,menuHoverOpacity:this.options.theme.menuHoverOpacity,allowCommerceIntegration:i.allowCommerceIntegration,commerceSettings:i.commerceSettings,showChromeMenu:this.options.theme.menuEnabled})},shouldShow:function(){return!i.isEmbedded&&i.themeObj.menuEnabled},initiallyHidden:function(){return r.mobile()},getHeight:function(){return this.chromeView.getHeight()},el:function(){return this.chromeView.$el},show:function(e){this.chromeView&&this.chromeView.show(e)},hide:function(e){this.chromeView&&this.chromeView.hide(e)},toggle:function(){this.chromeView&&this.chromeView.toggle()},setTitle:function(e){this.chromeView.setTitle(e)}}});return s}),define("text!modules/branding/templates/branding.html",[],function(){return'\n    <a href="#" class="label"></a>'}),define("modules/branding/views/BrandingView",["jquery","lodash","device","globals","VectorImageUtils","libs/image/VectorImageResourceFactory","shared/views/AbstractView","shared/utils/CerosResourceLoader","modules/page/utils/VectorImage","text!modules/branding/templates/branding.html"],function(e,t,n,i,r,o,a,s,u,l){var c=i.publicAssetsBaseUrl+"PoweredByCeros.svg",d="Powered By Ceros";return a.extend({id:"ceros-branding",initialize:function(){a.prototype.initialize.call(this),this.render(),this.configureInteractions()},configureInteractions:function(){this.bindInteraction(this.$el,t.bind(this._clickCerosBranding,this))},render:function(){if(this.$el.empty().html(l),e(window).bind("resize",t.bind(this._onResize,this)),this.setCustomTheming(),this.options.showCerosBranding){var n={color:this.options.menuForegroundColor},i={alt:d,width:"100%",height:"100%"};s.addVectorImage(c).loadNow().done(t.bind(function(e){e.createImageElement(n,i).done(t.bind(function(e){var t=this.$el.find("a");t.append(e)},this))},this))}},setCustomTheming:function(){this.$el.css("background-color",this.options.menuBackgroundColor);var t=this.options.menuHoverOpacity,i=this.$el.find("a");n.desktop()&&i.hover(function(){e(this).css("opacity",t)},function(){e(this).css("opacity","1.0")}),n.touch()&&i.bind("touchstart",function(){e(this).css("opacity",t)}).bind("touchend",function(){e(this).css("opacity","1.0")}),this._positionCerosBranding()},_positionCerosBranding:function(){this.$el.css(n.isIphoneFullscreenMobileSafari(e(window).width(),e(window).height())?{right:"42px","border-radius":"3px 3px 0 0"}:{right:0,"border-radius":"3px 0 0 0"})},_onResize:function(){this._positionCerosBranding()},_clickCerosBranding:function(){this.getModule().trigger(this.getModule().publishedEvents.BRANDING_CEROS_BRANDING_CLICK)}})}),define("modules/branding/module",["jquery","lodash","ceros","globals","device","color","modules/branding/views/BrandingView"],function(e,t,n,i,r,o,a){var s=new n.Module({id:"branding",version:"1.0",brandingView:null,publishedEvents:{BRANDING_CEROS_BRANDING_CLICK:"branding.ceros_branding.click"},delegate:{load:function(){var e=i.themeObj.menuFgColor,t=i.themeObj.menuBgColor;this.brandingView=new a({module:s,menuBackgroundColor:t,menuForegroundColor:e,menuHoverOpacity:i.themeObj.menuHoverOpacity,showCerosBranding:i.showCerosBranding})},shouldShow:function(){return i.showCerosBranding},el:function(){return this.brandingView.$el},show:function(){this.brandingView&&this.brandingView.show()}}});return s}),define("shared/utils/IconFontMap",[],function(){return{PAGES:"&#xe001;",FACEBOOK:"&#xe002;",EMAIL:"&#xe003;",CART:"&#xe004;",LINK:"&#xe005;",TWITTER:"&#xe006;",LEFT_ARROW:"&#xe007;",PINTEREST:"&#xe008;",RIGHT_ARROW:"&#xe009;",SHARE:"&#xe000;"}}),define("modules/flippers/views/FlippersView",["jquery","lodash","backbone","shared/models/EmbeddedViewportModel","shared/views/AbstractView","device","shared/utils/IconFontMap"],function(e,t,n,i,r,o,a){var s=37,u=39;return r.extend({id:"flippers",leftArrow:null,rightArrow:null,scaleData:null,smallWindowThreshold:600,options:null,initialize:function(){r.prototype.initialize.call(this),o.desktop()&&e(document).bind("keydown",t.bind(this.keyHandler,this)),this.render(),this.bindInteraction(this.leftArrow,t.bind(this._previousPage,this)),this.bindInteraction(this.rightArrow,t.bind(this._nextPage,this)),this.bindInteraction(this.$el)},onClose:function(){r.prototype.initialize.call(this),this.unbindInteraction(this.leftArrow),this.unbindInteraction(this.rightArrow),this.unbindInteraction(this.$el)},render:function(){this.leftArrow=e("<div>",{"class":"prev left",css:{"background-color":this.options.menuBackgroundColor}}),this.leftArrowA=e("<a>",{title:"Previous Page",href:"#",html:a.LEFT_ARROW,css:{color:this.options.menuForegroundColor}}),this.leftArrow.append(this.leftArrowA),this.rightArrow=e("<div>",{"class":"next right",css:{"background-color":this.options.menuBackgroundColor}}),this.rightArrowA=e("<a>",{title:"Next Page",href:"#",html:a.RIGHT_ARROW,css:{color:this.options.menuForegroundColor}}),this.rightArrow.append(this.rightArrowA);var t=this.options.menuHoverOpacity;o.touch()&&(this.leftArrowA.bind("touchstart",function(){e(this).css("opacity",t)}).bind("touchend",function(){e(this).css("opacity","1.0")}),this.rightArrowA.bind("touchstart",function(){e(this).css("opacity",t)}).bind("touchend",function(){e(this).css("opacity","1.0")})),o.desktop()&&(this.leftArrowA.hover(function(){e(this).css("opacity",t)},function(){e(this).css("opacity","1.0")}),this.rightArrowA.hover(function(){e(this).css("opacity",t)},function(){e(this).css("opacity","1.0")})),this.disableNext(),this.disablePrevious(),this.$el.append(this.leftArrow),this.$el.append(this.rightArrow),this.options.arrowsEnabled===!1&&this.hide()},scale:function(e){e&&(this.scaleData=e);var t=this.scaleData.height,n=this.scaleData.marginTop,r=this.scaleData.originalWindowWidth,o=this.scaleData.windowHeight;o<this.smallWindowThreshold||r<this.smallWindowThreshold?(this.rightArrow.addClass("small"),this.leftArrow.addClass("small")):(this.leftArrow.removeClass("small"),this.rightArrow.removeClass("small"));var a,s=parseFloat(this.rightArrowA.css("height")),u=i.getInstance();a=u.isActive()?u.getVerticalCenterOfVisibleArea(t)-s/2:t/2-s/2+n,a=Math.round(a)+"px",this.leftArrow.css("top",a),this.rightArrow.css("top",a)},isPreviousDisabled:function(){return this.leftArrow.hasClass("disabled")},isNextDisabled:function(){return this.rightArrow.hasClass("disabled")},disablePrevious:function(){this.isPreviousDisabled()||(this.leftArrow.addClass("disabled"),this.leftArrowA.attr("title",""))},disableNext:function(){this.isNextDisabled()||(this.rightArrow.addClass("disabled"),this.rightArrowA.attr("title",""))},enablePrevious:function(){this.isPreviousDisabled()&&(this.leftArrow.removeClass("disabled"),this.leftArrowA.attr("title","Previous Page"))},enableNext:function(){this.isNextDisabled()&&(this.rightArrow.removeClass("disabled"),this.rightArrowA.attr("title","Next Page"))},show:function(){this.options.arrowsEnabled===!0&&this.$el.show()},hide:function(){this.$el.hide()},_nextPage:function(e){e.preventDefault(),this.options.module.trigger(this.options.module.publishedEvents.NEXT_PAGE)},_previousPage:function(e){e.preventDefault(),this.options.module.trigger(this.options.module.publishedEvents.PREVIOUS_PAGE)},keyHandler:function(e){(!e.target||"SELECT"!=e.target.tagName&&"INPUT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName)&&(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||this.options.arrowsEnabled&&(e.keyCode!==u||this.isNextDisabled()?e.keyCode!==s||this.isPreviousDisabled()?(e.keyCode===s||e.keyCode===u)&&(e.stopPropagation(),e.preventDefault()):(e.stopPropagation(),e.preventDefault(),this._previousPage(e)):(e.stopPropagation(),e.preventDefault(),this._nextPage(e))))}})}),define("modules/flippers/module",["jquery","lodash","ceros","globals","color","shared/models/EmbeddedViewportModel","modules/flippers/views/FlippersView","shared/utils/ModuleEventManager"],function(e,t,n,i,r,o,a){var s=new n.Module({id:"flippers",description:"Provides left/right (previous/next) arrows for navigation between pages",version:"1.0",flippersView:null,publishedEvents:{NEXT_PAGE:"flippers.next_page",PREVIOUS_PAGE:"flippers.previous_page"},dependencies:{viewport:"1.0"},delegate:{load:function(e){var n={theme:t.isUndefined(i.themeObj)?{}:i.themeObj};this.options=t.extend({},n,e);var o=this.options.theme.menuFgColor,u=this.options.theme.menuBgColor,l=r.fromHex(o);l.a=.1,this.flippersView=new a({arrowsEnabled:this.options.theme.arrowsEnabled,menuBackgroundColor:u,menuBorderColor:l,menuForegroundColor:o,menuHoverOpacity:this.options.theme.menuHoverOpacity,module:s}),this.registerEvents()},el:function(){if(this.flippersView)return this.flippersView.$el;throw new Error("FlippersView is missing")},show:function(){if(!this.flippersView)throw new Error("FlippersView is missing");this.flippersView.show()},hide:function(){if(!this.flippersView)throw new Error("FlippersView is missing");this.flippersView.hide()},updateScale:function(e){if(!this.flippersView)throw new Error("FlippersView is missing");this.flippersView.scale(e)},determineFlipperState:function(e,t,n){var i=!n||e,r=!n||t;this.updateFlippers(i,r)},updateFlippers:function(e,t){if(!this.flippersView)throw new Error("FlippersView is missing");e?this.flippersView.disablePrevious():this.flippersView.enablePrevious(),t?this.flippersView.disableNext():this.flippersView.enableNext()},registerEvents:function(){o.getInstance().on("change",t.bind(function(){this.flippersView.scale(null)},this))}}});return s}),define("shared/utils/ScrollbarUtils",["lodash"],function(e){var t=null;return{getScrollbarWidth:function(){if(!e.isNull(t))return t;var n=document.createElement("div");n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n);var i=n.offsetWidth;n.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",n.appendChild(r);var o=r.offsetWidth;return n.parentNode.removeChild(n),t=i-o}}}),define("shared/utils/ScaleContext",["log","jquery","lodash","backbone","globals","shared/utils/ScrollbarUtils","device"],function(e,t,n,i,r,o,a){var s=function(e){this.initialize(e)};return s.prototype={documentVersion:null,marginTopCallback:null,module:null,cachedScale:{},initialize:function(e){this.documentVersion=e.documentVersion,this.marginTopCallback=e.marginTopCallback,this.module=e.module},getCurrentWindowScaleContext:function(){var e=t(window);return this._calculateScaleInternal(e.width(),e.height())},getScaleContext:function(e,t){if(n.isUndefined(e)||n.isUndefined(t))throw new Error("Missing Width or Height input");return this._calculateScaleInternal(e,t)},_calculateScaleInternal:function(e,i){var o=this.documentVersion.getExperienceWidth(),s=r.heightOverride||this.documentVersion.getExperienceHeight(),u=this.documentVersion.getScaleExperience(),l=t(window),c=l.width(),d=l.height(),f=e+"x"+i+"-"+c+"x"+d;if(!n.has(this.cachedScale,f)){var h={width:e,height:i,marginTop:this.marginTopCallback(),windowWidth:e,windowHeight:i,ratio:1,constrainedByHeight:!1,constrainedByWidth:!1,originalWindowWidth:c,originalWindowHeight:d};h.windowWidth+=h.windowWidth%2,h.windowHeight+=h.windowHeight%2;var p=h.windowHeight+a.getSlackHeight(h.windowHeight)-h.marginTop;h.height=p,u&&(s/o>p/h.windowWidth?(h.constrainedByHeight=!0,h.ratio=h.height/s,h.width=o*h.ratio):(h.constrainedByWidth=!0,h.width=h.windowWidth,h.ratio=h.width/o)),h.adjustedRatio=h.ratio*a.pixelRatio(),this.cachedScale[f]=h}return this.cachedScale[f]},getPageScaleContext:function(e){var t=this.getCurrentWindowScaleContext();if(this.documentVersion.getScaleExperience()){var n=e.model.getPageHeight(this.documentVersion),i=this.documentVersion.getExperienceWidth(),r=Math.round(t.height/t.ratio),o=r>=n;t.constrainedByWidth&&!o&&(t=this.calculateNewScaleContextWhenConstrainedByWidthAndPageDoesNotFit(t,i,n))}return t},calculateNewScaleContextWhenConstrainedByWidthAndPageDoesNotFit:function(e,t,n){for(var i=o.getScrollbarWidth()*e.ratio,r=i;r>=0;r--){var a=(e.width-i+r)/t,s=n<=Math.round(e.height/a);if(s===!0){i-=r;break}}var u=e.originalWindowWidth-i;return e=this._calculateScaleInternal(u,e.originalWindowHeight)},doBlurryFontFix:function(e){var t=a.isBrowserChrome()&&a.desktop()||a.isDesktopSafari();return t&&e>=.8}},s}),define("modules/viewport/utils/PageLoadPolicy",["lodash"],function(e){var t=function(e,t){this.lookBehind=1,this.lookAhead=1,this.isCircular=t,this.pageNumbers=e.sort(function(e,t){return e-t})};return t.prototype={getPageNumbersToLoad:function(t){var n=null,i=!1;e.each(this.pageNumbers,e.bind(function(e,r){return e===t?(n=r,i=!0,!1):e>t?(n=r,!1):void 0},this));var r;i?r=this.pageNumbers:(r=this.pageNumbers.slice(),null===n&&(n=r.length),r.splice(n,0,t));var o,a=[],s=n;for(o=0;o<this.lookBehind;o++){if(--s,-1===s){if(!this.isCircular)break;s=r.length-1}a.push(r[s])}for(a.push(r[n]),s=n,o=0;o<this.lookAhead;o++){if(++s,s===r.length){if(!this.isCircular)break;s=0}a.push(r[s])}return e.uniq(a)}},t}),define("modules/viewport/utils/GesturesBehavior",["log","jquery","lodash","globals","device","hammer"],function(e,t,n,i,r,o){var a=1e3,s=20,u=.6,l=10,c={startX:null,startY:null,lastDirection:null,xDistance:0,yDistance:0,gesturesEnabled:!0,swipeDirection:null,originalDirection:null};return{offsetTimeout:null,disableGestures:function(){c.gesturesEnabled=!1},enableGestures:function(){c.gesturesEnabled=!0},configureGestures:function(){var e={};r.isBrowserChrome()&&r.isAndroid()&&(e.inputClass=o.TouchInput),r.isMobileSafari()&&(e.touchAction="pan-x pan-y");var t=new o.Manager(this.$el[0],e);t.add(new o.Press({time:500})),r.isMobileSafari()&&(t.add(new o.Pinch),t.add(new o.Tap),t.get("pinch").set({enable:!0}),t.on("pinch pinchend pinchstart tap",function(e){("tap"!==e.type||2===e.tapCount)&&e.preventDefault()})),t.on("press",n.bind(function(e){c.gesturesEnabled&&(e.preventDefault(),this.options.module.trigger(this.options.module.publishedEvents.LONGPRESS))},this)),t.on("hammer.input",n.bind(function(e){var t=e.eventType,r=e.deltaTime;if(c.gesturesEnabled){var a=this.getCurrentPage();if(this.isPageTransitioning())return void e.preventDefault();switch(t){case o.INPUT_START:this.pauseAnimationsOnMove=n.once(n.bind(function(){a.pauseAnimations()},this)),this.clearAutoTransitionDelay();break;case o.INPUT_MOVE:var s=e.deltaX,u=e.deltaY;if(c.xDistance=Math.abs(s),c.yDistance=Math.abs(u),!c.swipeDirection&&(c.xDistance>l||c.yDistance>l))c.swipeDirection=c.xDistance>c.yDistance?o.DIRECTION_HORIZONTAL:o.DIRECTION_VERTICAL;else if(!c.swipeDirection)return;if(c.swipeDirection==o.DIRECTION_HORIZONTAL?c.lastDirection=s>0?o.DIRECTION_RIGHT:o.DIRECTION_LEFT:c.swipeDirection==o.DIRECTION_VERTICAL&&(c.lastDirection=u>0?o.DIRECTION_DOWN:o.DIRECTION_UP),n.isNull(c.originalDirection)||(c.originalDirection=c.lastDirection),c.originalDirection!=c.lastDirection&&(c.changedDirection=!0),c.swipeDirection==o.DIRECTION_HORIZONTAL){if(!i.themeObj.swipeEnabled)return;if(this.getPageCount()<=1&&this.documentVersion.getScaleExperience())return void e.preventDefault();var d=this.getNextPage(),f=this.getPreviousPage();if(!this.isValidHorizontalSwipe())return;if(n.isFunction(this.pauseAnimationsOnMove)&&this.pauseAnimationsOnMove(),i.isEmbedded&&(this._isSwipeRight()&&!f||this._isSwipeLeft()&&!d))return;d&&this._isSwipeLeft()&&(d.makeInTransition(),d.setBackgroundPositionAndScaleTransform(s+this.getPageViewportWidth(),!0)),f&&this._isSwipeRight()&&(f.makeInTransition(),f.setBackgroundPositionAndScaleTransform(s-this.getPageViewportWidth(),!0));var h=this._isSwipeOutOfPageBounds(),p=s;h&&(p=this._getRubberbandHorizontalDistance(),this._isSwipeLeft()&&(p*=-1)),this.getCurrentPage().setBackgroundPositionAndScaleTransform(p,!0),e.preventDefault()}break;case o.INPUT_END:case o.INPUT_CANCEL:if(c.swipeDirection==o.DIRECTION_HORIZONTAL){if(!this.isValidHorizontalSwipe())return;if(this.pauseAnimationsOnMove=null,!i.themeObj.swipeEnabled)return void this.setAutoTransitionDelay();var g=c.xDistance/r,m=!this._isSwipeOutOfPageBounds()&&t==o.INPUT_END&&(this._isDistancePageChangeSwipe(c.xDistance)||this._isVelocityPageChangeSwipe(g));if(m){var v=this.calculateRemainingTransitionTime(c.xDistance,r);this._isSwipeLeft()?this._slideLeft(v):this._isSwipeRight()&&this._slideRight(v)}else this._abortSlide(r)}c.xDistance=0,c.yDistance=0,c.lastDirection=null,c.swipeDirection=null,c.originalDirection=null,c.changedDirection=!1;break;default:e.preventDefault()}}},this))},isValidHorizontalSwipe:function(){if(!this.documentVersion.getScaleExperience()){if(!this._isAtLeft()&&!this._isAtRight())return!1;if(this._isAtLeft()&&!this._isSwipeRight())return!1;if(this._isAtRight()&&!this._isSwipeLeft())return!1}return!0},_getPageTopWithOffset:function(){var e,t=this.getCurrentPage();return e=this._isAtTop()?this._getPageTop(t):this._isAtBottom()?this._getPageTop(t)+this.MOBILE_PAGE_SCROLL_HEIGHT_OFFSET:this._getPageTop(t)+this.MOBILE_PAGE_SCROLL_HEIGHT_OFFSET/2},_isAtTop:function(){return this.getCurrentPage().$el.scrollTop()<=0},_isAtBottom:function(){var e=this.getCurrentPage(),t=e.$el.height(),n=e.$pageScroll.height(),i=n-t,r=e.$el.scrollTop();return r>=i},_isAtLeft:function(){return-1*this.getCurrentPage().$pageScroll.offset().left<=0},_isAtRight:function(){var e=this.getCurrentPage(),t=e.$el.width(),n=e.$pageScroll.width(),i=n-t,r=-1*e.$pageScroll.offset().left;return r>=i},_isSwipeOutOfPageBounds:function(){var e=!1;return e=this.isFirstPage()&&this._isSwipeRight()||this.isLastPage()&&this._isSwipeLeft()},_getRubberbandHorizontalDistance:function(){var e=this.getPageViewportWidth();return c.xDistance>=.5*e?.25*e:(e-c.xDistance)/e*c.xDistance},_isSwipeLeft:function(){return c.lastDirection==o.DIRECTION_LEFT},_isSwipeRight:function(){return c.lastDirection==o.DIRECTION_RIGHT},_isSwipeUp:function(){return c.lastDirection==o.DIRECTION_UP},_isSwipeDown:function(){return c.lastDirection==o.DIRECTION_DOWN},_abortSlide:function(e){var t=this.getCurrentPage();if(0!==t.getLeft()){this.isPageTransitionInProgress=!0;var i=this.calculateTransitionTime(c.xDistance,e);t.el().animate({"background-position-x":0},{duration:i,easing:"easeOutCubic",step:n.bind(function(e){t.setBackgroundPositionAndScaleTransform(e,!0),this.getNextPage()&&this.getNextPage().setBackgroundPositionAndScaleTransform(e+this.getPageViewportWidth(),!0),this.getPreviousPage()&&this.getPreviousPage().setBackgroundPositionAndScaleTransform(e-this.getPageViewportWidth(),!0)},this),complete:n.bind(function(){this.isPageTransitionInProgress=!1;var e=this.getNextPage();e&&e.makePending();var n=this.getPreviousPage();n&&n.makeViewed(),t.resumeAnimations(),this.setAutoTransitionDelay()},this)})}},_isDistancePageChangeSwipe:function(e){return e>=this.getPageViewportWidth()*(s/100)},_isVelocityPageChangeSwipe:function(e){return e>u},_slideRight:function(e){return this._slide("right",this.getPreviousPage(),e)},_slideLeft:function(e){return this._slide("left",this.getNextPage(),e)},_slide:function(e,t,n){"left"===e?this.nextPage(n):this.previousPage(n)},calculateTransitionTime:function(e,t){return this._calculateTransitionTimeInternal(e,t,!1)},calculateRemainingTransitionTime:function(e,t){return this._calculateTransitionTimeInternal(e,t,!0)},_calculateTransitionTimeInternal:function(e,t,n){var i=a,r=e/t,o=e/this.getPageViewportWidth();n&&(o=1-o),i*=o;var s=i/r;return s>i&&(s=i),s}}}),define("modules/viewport/views/ViewportView",["log","jquery","lodash","backbone","globals","shared/utils/DelegateUtils","shared/utils/CerosResourceLoader","shared/utils/ScaleContext","shared/utils/ScrollbarUtils","device","shared/views/AbstractView","modules/viewport/utils/PageLoadPolicy","modules/viewport/utils/GesturesBehavior","urlUtils"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h){var p,g,m="pending",v=1e4,y=500,_={NONE:0,LEFT:1,RIGHT:2};return c.extend({id:"viewport",documentVersion:null,module:null,pageJumpFrom:null,currentPage:null,currentPageSlug:null,pageViews:null,leftThresholdA:null,leftThresholdB:null,rightThresholdA:null,rightThresholdB:null,clickShield:null,isPageTransitionInProgress:!1,autoTransitionDelay:null,backgroundImage:null,scaleContext:null,scrollPositionsByPage:{},viewportContainer:null,MOBILE_PAGE_SCROLL_HEIGHT_OFFSET:2,initialize:function(){this.documentVersion=this.options.documentVersion,this.scaleContext=this.options.scaleContext,this.module=this.options.module,c.prototype.initialize.call(this),t(window).bind("resize",n.bind(this.scale,this)),l.touch()&&(o.mergeDelegates(this,f),this.configureGestures()),this.clickShield=t('<div class="click-shield"></div>'),this.addClickShield(),this.reset(null),r.previewMode&&this.listenForRemoteChanges(),n.each(this.documentVersion.pages,n.bind(function(e){e.on("change:disabled",function(){this.module.trigger(this.module.publishedEvents.PAGE_ENABLED_CHANGE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()})},this)},this))},listenForRemoteChanges:function(){this.documentVersion.on("change:carousel",n.bind(function(){var e=this.getCurrentPage();e&&this.currentPageSlug&&(this.module.trigger(this.module.publishedEvents.PAGE_UPDATE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()}),this.setAutoTransitionDelay())},this)),this.documentVersion.on(this.documentVersion.MANIFEST_ADD_PAGE,n.bind(function(e,t){var i=this.module.createSinglePageView(e,t);this.pageViews.splice(t,0,i);var r=i.prepare();r.done(n.bind(function(){i.attach(),this.$el[0].appendChild(i.el()[0]),this.scale(),i.makePending(),this.currentPage=this.documentVersion.getPageNumberBySlug(this.currentPageSlug),this.module.trigger(this.module.publishedEvents.PAGE_UPDATE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()})},this))},this)),this.documentVersion.on(this.documentVersion.MANIFEST_REMOVE_PAGE,n.bind(function(e){var t=e+1;t===this.currentPage?this.module.trigger(this.module.publishedEvents.CURRENT_PAGE_DELETED):(this.pageViews.splice(e,1),this.currentPage=this.documentVersion.getPageNumberBySlug(this.currentPageSlug),this.module.trigger(this.module.publishedEvents.PAGE_UPDATE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()}))},this)),this.documentVersion.on(this.documentVersion.MANIFEST_MOVE_PAGE,n.bind(function(e,t){var n=this.pageViews.splice(e,1)[0];this.pageViews.splice(t,0,n),this.currentPage=this.documentVersion.getPageNumberBySlug(this.currentPageSlug),this.module.trigger(this.module.publishedEvents.PAGE_UPDATE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()})},this))},getNextPageIndex:function(){var e=!1;if(this.pageViews){e=this.currentPage+1;for(var t=this.pageViews[e-1];t&&t.isDisabled();)e++,t=this.pageViews[e-1];if(!t||t.isDisabled())if(this.documentVersion.isCarousel()){for(e=1;this.pageViews[e-1].isDisabled()&&e<this.currentPage;)e++;e>=this.currentPage&&(e=!1)}else e=!1}return e},getPreviousPageIndex:function(){var e=!1;if(this.pageViews){e=this.currentPage-1;for(var t=this.pageViews[e-1];t&&t.isDisabled();)e--,t=this.pageViews[e-1];if(!t||t.isDisabled())if(this.documentVersion.isCarousel()){for(e=this.pageViews.length;this.pageViews[e-1].isDisabled()&&e>this.currentPage;)e--;e<=this.currentPage&&(e=!1)}else e=!1}return e},isFirstPage:function(){return this.getPreviousPageIndex()===!1},isLastPage:function(){return this.getNextPageIndex()===!1},getCurrentPage:function(){return null===this.pageViews?!1:this.pageViews[this.currentPage-1]},getNextPage:function(){var e=!1,t=this.getNextPageIndex();return t&&(e=this.pageViews[t-1]),e},getPreviousPage:function(){var e=!1,t=this.getPreviousPageIndex();return t&&(e=this.pageViews[t-1]),e},getPageCount:function(){return null===this.pageViews?0:this.pageViews.length},getPageViewportWidth:function(){return this.getCurrentPage().getScaleContext().originalWindowWidth},getExperienceWidth:function(){return this.documentVersion.getExperienceWidth()},getExperienceHeight:function(){return this.documentVersion.getExperienceHeight()},reset:function(e,t){if(this.$el.children().not("#ceros-branding").remove(),this.currentPage=n.isNull(t)?1:t,null!==this.pageViews&&n.each(this.pageViews,function(e){e.close()}),this.pageViews=e,this.viewportContainer=document.createDocumentFragment(),null!==this.pageViews){this._updatePageCss();var i=[];n.each(this.pageViews,function(e){i.unshift(e.el()[0])}),n.each(i,n.bind(function(e){this.viewportContainer.appendChild(e)},this)),this.$el[0].appendChild(this.viewportContainer),this.scale()}},disablePage:function(e){this.pageViews[e-1].disable()},enablePage:function(e){this.pageViews[e-1].enable()},nextPage:function(e){if(null!==this.pageViews&&!this.isPageTransitioning()){var t=this.getNextPageIndex();if(t){var n=this.getCurrentPage(),i=this.getNextPage();this._preTransition(n,i),this.switchPage(t,_.RIGHT,e)}}},previousPage:function(e){if(null!==this.pageViews&&!this.isPageTransitioning()){var t=this.getPreviousPageIndex();if(t){var n=this.getCurrentPage(),i=this.getPreviousPage();this._preTransition(n,i),this.switchPage(t,_.LEFT,e)}}},doTransitionAnimation:function(e,i,r,o){if(r===_.NONE)return(new t.Deferred).resolve().promise();var a=new t.Deferred;this.isPageTransitionInProgress=!0,a.done(n.bind(function(){this.isPageTransitionInProgress=!1},this)),i.makeInTransition();var s=this.getPageViewportWidth()*(r===_.RIGHT?-1:1);return e.pauseAnimations(),e.el().animate({"background-position-x":s},{duration:o,easing:"easeOutCubic",step:n.bind(function(t){e.setBackgroundPositionAndScaleTransform(t,this.isPageTransitionInProgress),i.setBackgroundPositionAndScaleTransform(t-s,this.isPageTransitionInProgress)},this),complete:a.resolve}),a.promise()},_storePageScrollPosition:function(e){this.scrollPositionsByPage[e.getSlug()]=e.getScrollPosition()},_getStoredPageScrollPosition:function(e){return!n.isUndefined(e)&&n.has(this.scrollPositionsByPage,e.getSlug())?this.scrollPositionsByPage[e.getSlug()]:0},_preTransition:function(e,t){var n=e.getScaleContext();this._storePageScrollPosition(e),n.constrainedByHeight&&(this._hidePageScrollbar(e),this._hidePageScrollbar(t))},jumpToPage:function(e){if(null!==this.pageViews){var t=this.pageViews.length;e>=1&&t>=e&&(this.pageViews[e-1].isDisabled()||this.switchPage(e,_.NONE))}},isPageTransitioning:function(){return this.isPageTransitionInProgress},switchPage:function(e,t,i){if(!this.isPageTransitioning()){this.clearAutoTransitionDelay(),t==_.NONE||this.documentVersion.isAutoTransitioning()||this.getCurrentPage().pauseAnimations(),this.getCurrentPage().resetTimedTriggers();var r=this.showPage(e,t,i);r.done(n.bind(function(){this.activatePage(this.getCurrentPage())},this))}},showPage:function(e,i,r){i=i||_.NONE,r=r||y;var o=null;this.currentPage!==e&&(o=this.pageViews[this.currentPage-1]);var a=e-1;this.currentPage=e,this.currentPageSlug=this.pageViews[a].getSlug(),this.module.trigger(this.module.publishedEvents.PAGE_CHANGING,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage(),isPageReady:this.getCurrentPage().isReady()}),o&&o.reset();var s=new d(this.documentVersion.getEnabledPageIndexes(),this.documentVersion.isCarousel()),u=s.getPageNumbersToLoad(a),l=new t.Deferred;this.attachPages(u,a).always(n.bind(function(){l.resolve()},this));var c=this.doTransitionAnimation(o,this.getCurrentPage(),i,r);return c.done(n.bind(function(){this._updatePageCss(),this._adjustPage()},this)),t.when(l,c)},_adjustPage:function(){var e=this.getCurrentPage();e.setScrollPosition(this._getStoredPageScrollPosition(e)),this._showPageScrollbar(e),this._focusPage(e)},_focusPage:function(e){r.isEmbedded||e&&e.focusScrollContainer()},activatePage:function(e){this.module.trigger(this.module.publishedEvents.PAGE_CHANGE,{slug:this.currentPageSlug,isFirstPage:this.isFirstPage(),isLastPage:this.isLastPage()}),e.activate(),this.setAutoTransitionDelay()},attachPages:function(i,r){var o=new t.Deferred;setTimeout(n.bind(function(){n.each(i,n.bind(function(e){this.pageViews[e].attach()},this)),o.state()===m&&(e.devWarn("Page media took over 10 seconds"),o.reject())},this),v),this.module.trigger(this.module.publishedEvents.PAGE_BATCH_LOAD_START);var a=[];return n.each(i,n.bind(function(e){var t=this.pageViews[e],i=t.prepare();i.always(n.bind(t.attach,t)),(n.isUndefined(r)||e===r)&&a.push(i)},this)),t.when.apply(t,a).done(o.resolve),t.when.apply(t,a).fail(o.reject),o.promise()},_updatePageCss:function(){var e;n.each(this.pageViews,n.bind(function(t,n){e=n+1,e<this.currentPage&&!t.isViewed()?t.makeViewed():e!==this.currentPage||t.isTop()?e>this.currentPage&&!t.isPending()&&t.makePending():t.makeTop()},this))},scalePageComponents:function(){n.each(this.pageViews,function(e){e.scale()})},_showPageScrollbar:function(e){!l.isIos()&&this._doesPageFitInViewport(e)?e.$pageContainer.css("overflow-y","hidden"):e.$pageContainer.css("overflow-y","scroll")},_hidePageScrollbar:function(e){e.$pageContainer.css("overflow-y","hidden")},_doesPageFitInViewport:function(e){var t=e.model.getPageHeight(this.documentVersion),n=r.heightOverride||this.documentVersion.getExperienceHeight();if(n>=t)return!0;var i=e.getScaleContext();return t<=Math.round(i.windowHeight/i.ratio)},scale:function(){var e,i,r=this.scaleContext.getCurrentWindowScaleContext(),o=this.getExperienceWidth(),a=this.documentVersion.getScaleExperience();
t("#main").css({height:r.originalWindowHeight+"px",width:r.originalWindowWidth+"px"}),this.$el.css({height:r.originalWindowHeight+"px",width:r.originalWindowWidth+"px","margin-top":r.marginTop+"px"}),null!==this.pageViews&&n.each(this.pageViews,n.bind(function(t){var n=t.model.getPageHeight(this.documentVersion),s=t.getScaleContext(),l=this._doesPageFitInViewport(t),c=l?0:u.getScrollbarWidth();if(i=Math.max(0,(s.height/s.ratio-t.model.getPageHeight(this.documentVersion))/2),e=Math.max(0,(s.windowWidth/s.ratio-this.getExperienceWidth()-c)/2),s.constrainedByWidth&&s.windowWidth<s.originalWindowWidth&&l){var d=s.originalWindowWidth-s.windowWidth,f=d/s.ratio;e+=f/2}var h=a?"hidden":"scroll";t.$pageContainer.css({width:"100%",height:"100%","overflow-y":"scroll","overflow-x":h,position:"relative"}),this._showPageScrollbar(t);var p=0;t.isPending()?p=r.originalWindowWidth:t.isViewed()&&(p=-1*r.originalWindowWidth),a?this.setPageViewScaleTransformCss(t,s):t.$el.css({height:"100%",width:"100%"}),t.setBackgroundPositionAndScaleTransform(p,this.isPageTransitionInProgress),a?t.$pageScroll.css({height:n+"px",width:o,left:e,top:i}):this.setPageScrollUnscaledCss(t,n,o,s),t.$pinnedContainer&&this.setPinnedContainerCss(n,s,e,i,c,o,t)},this));var s=this.getCurrentPage();s!==!1&&(this._focusPage(s),this.module.isFirstPageReadyToShow()&&s.onScrollAndWindowResize()),this.module.trigger(this.module.publishedEvents.SCALE,r)},setPageScrollUnscaledCss:function(e,t,n,i){e.$pageScroll.css({height:t+"px",width:n});var r="";t<=i.height?(r+="translateY(-50%) ",e.$pageScroll.css({top:"50%"})):e.$pageScroll.css({top:""}),n<=i.windowWidth?(r+="translateX(-50%)",e.$pageScroll.css({left:"50%"})):e.$pageScroll.css({left:""}),e.$pageScroll.css({transform:r})},setPinnedContainerCss:function(e,t,i,r,o,a,s){var u={height:e+"px",width:t.width/t.ratio,left:i,top:r};o?n.extend(u,{"max-width":a,width:t.originalWindowWidth/t.ratio-o}):n.extend(u,{width:a}),s.$pinnedContainer.css(u)},setPageViewScaleTransformCss:function(e,t){var n,i;this.scaleContext.doBlurryFontFix(t.ratio)?(n="zoom",i=t.ratio):(n="transform",i="scale("+t.ratio+","+t.ratio+")"),e.storeScaleTransform(n,i);var r={height:t.height/t.ratio+"px",width:t.originalWindowWidth/t.ratio+"px"};r[n]=i,e.$el.css(r)},addClickShield:function(){this.$el.before(this.clickShield),this.clickShield.show()},removeClickShield:function(){this.clickShield.detach()},setAutoTransitionDelay:function(){this.clearAutoTransitionDelay(),this.documentVersion.isAutoTransitioning()&&(this.autoTransitionDelay=n.delay(n.bind(function(){this.clearAutoTransitionDelay(),this.nextPage()},this),1e3*this.documentVersion.getAutoTransitionDelay()))},clearAutoTransitionDelay:function(){clearTimeout(this.autoTransitionDelay),this.autoTransitionDelay=null},preloadMedia:function(){n.isUndefined(r.themeObj)||n.isNull(r.themeObj.backgroundImage)||a.addImage(this._getBackgroundImageSrc())},_getBackgroundImageSrc:n.once(function(){var e=null;if(r.themeObj.backgroundImage){var t=r.themeObj.backgroundImage.url;e=h.replaceProtocolIfHttpsRequest(t)}return e}),_getBackgroundImage:function(){return this.backgroundImage?this.backgroundImage:(this.backgroundImage=new Image,this.backgroundImage.src=this._getBackgroundImageSrc(),this.backgroundImage.width=20,this.backgroundImage.height=20,this.backgroundImage)},getBackgroundImagePromise:function(){var e=this._getBackgroundImageSrc();if(!n.isNull(e)){var i=a.addImage(e);if(i)return i.getPromise()}return(new t.Deferred).reject().promise()},showBackground:function(){if(a.get(this._getBackgroundImageSrc())){var e=this._getBackgroundImage();p=t("#backgroundContainer"),p.empty().append(e),g=t("img",p),t(e).load(n.bind(this.scaleBackground,this)).attr("src",this._getBackgroundImageSrc()),t(window).on("resize",n.bind(this.scaleBackground,this)),p.fadeIn()}},scaleBackground:function(){if(a.get(this._getBackgroundImageSrc())){var e=this._getBackgroundImage(),n=t(window),i=n.width(),r=n.height();r+=l.getSlackHeight(r),p.width(i).height(r);var o=i/e.naturalWidth,s=r/e.naturalHeight,u=o>s?o:s,c=u*e.naturalWidth,d=u*e.naturalHeight;g.width(c).height(d).css({left:"-"+(c>i?c/2-i/2:0)+"px"})}}})}),define("socialSharing",["jquery","lodash","urlUtils"],function(e,t,n){var i="mailto:",r="http://www.facebook.com/sharer.php",o="http://pinterest.com/pin/create/button/",a="http://twitter.com/share",s="http://www.linkedin.com/shareArticle";return{shareOnTwitter:function(e,t){var i={url:e,text:t},r=n.appendQueryParams(a,i);window.open(r,"_blank","width=450,height=300")},shareOnLinkedIn:function(e,t){var i={url:e,mini:"true",title:t},r=n.appendQueryParams(s,i);window.open(r,"_blank","width=520,height=570")},shareOnPinterest:function(e,t,i){var r={url:e,media:t};i&&(r.description=i);var a=n.appendQueryParams(o,r);window.open(a,"_blank","width=810,height=530")},shareOnFacebook:function(e,t,i,o){var a={s:100,"p[url]":e};t&&(a["p[images][0]"]=t),i&&(a["p[title]"]=i),o&&(a["p[summary]"]=o);var s=n.appendQueryParams(r,a);window.open(s,"_blank","width=450,height=300")},shareViaEmail:function(t,r){var o={subject:r,body:"I thought you might like this. Here's a link to it on the web: "+t},a=document.createElement("a");a.href=n.appendQueryParams(i,o),e("body").append(a),a.click(),e(a).remove()}}}),define("modules/viewport/module",["jquery","lodash","log","ceros","globals","modules/viewport/views/ViewportView","socialSharing","device","shared/utils/NavigationUtils","shared/utils/CerosResourceLoader","libs/image/ImageResource","modules/viewport/utils/PageLoadPolicy","modules/page/module","shared/utils/ScaleContext","shared/utils/ModuleEventManager","urlUtils"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p,g){var m={TOP:"top",BOTTOM:"bottom",SCRANCHOR:"scranchor"},v=null,y=null,_=null,b=null,T=null,w=null,E=null,S=new i.Module({id:"viewport",description:"",version:"1.0",dependencies:{page:"1.0"},firstPageShown:new e.Deferred,publishedEvents:{LONGPRESS:"viewport.longpress",SCALE:"viewport.scale",PAGE_CHANGE:"viewport.page_change",PAGE_CHANGING:"viewport.page_changing",PAGE_BATCH_LOAD_START:"viewport.page_batch_load_start",PAGE_UPDATE:"viewport.page_update",PAGE_ENABLED_CHANGE:"viewport.page_enabled_change",CURRENT_PAGE_DELETED:"viewport.current_page_deleted",TIMED_LIGHTBOX:"viewport.timed.lightbox",TIMED_PRODUCT_PANEL:"viewport.timed.product_panel",TIMED_SHOPPING_CART:"viewport.timed.shopping_cart"},delegate:{init:function(e,i){_=e,E=i.performanceTracker;var a=t.extend({module:S,marginTopCallback:function(){return 0},documentVersion:_},i||{});y=new h(a);var s=t.extend({module:S,documentVersion:_,scaleContext:y},i||{});v=new o(s),v.preloadMedia();var l=new d(_.getEnabledPageIndexes(),_.isCarousel()),c=u.parsePageFromLocation();T=_.getPageInfoByNumberOrSlug(c).number;var f=_.getNearestEnabledPage(T);T===f||r.previewMode||(n.info("Requesting disabled page",T),T=f),w=l.getPageNumbersToLoad(T-1),this.registerEvents()},triggerExperienceLevelInteractions:function(e){e.get("interactions")&&t.each(e.get("interactions"),function(e){switch(e.action){case"lightbox":setTimeout(function(){S.trigger(S.publishedEvents.TIMED_LIGHTBOX,e)},1e3*e.delay);break;case"product":setTimeout(function(){S.trigger(S.publishedEvents.TIMED_PRODUCT_PANEL,e)},1e3*e.delay);break;case"shopping-cart":setTimeout(function(){S.trigger(S.publishedEvents.TIMED_SHOPPING_CART,e)},1e3*e.delay)}})},registerEvents:function(){p.on("sdk.experience.page.goto",t.bind(function(e){this.jumpToPage(e.pageNum,!0)},this)),p.on("sdk.experience.page.next",t.bind(function(){this.nextPage()},this)),p.on("sdk.experience.page.previous",t.bind(function(){this.previousPage()},this)),p.on("sdk.component.video.start",t.bind(function(e){this.startVideo(e.componentId)},this)),p.on("sdk.component.video.stop",t.bind(function(e){this.stopVideo(e.componentId)},this)),p.on("sdk.component.text.settext",t.bind(function(e){this.setComponentText(e.componentId,e.textContent)},this)),p.on("sdk.component.image.seturl",t.bind(function(e){this.setImageUrl(e.componentId,e.url,e.useNewImageSize)},this)),p.on("sdk.component.image.reset",t.bind(function(e){this.resetImage(e.componentId)},this)),p.on("sdk.component.click",t.bind(function(e){this.clickComponent(e.componentId)},this)),p.on("sdk.component.show",t.bind(function(e){this.showComponent(e.componentId)},this)),p.on("sdk.component.hide",t.bind(function(e){this.hideComponent(e.componentId)},this)),p.on("sdk.layer.show",t.bind(function(e){this.showLayer(e.layerId)},this)),p.on("sdk.layer.hide",t.bind(function(e){this.hideLayer(e.layerId)},this)),p.on("sdk.page.animations.start",t.bind(function(e){this.startPageAnimations(e.pageSlug)},this)),p.on("sdk.page.animations.pause",t.bind(function(e){this.pausePageAnimations(e.pageSlug)},this)),p.on("sdk.page.disable",t.bind(function(e){this.disablePage(e.pageNum)},this)),p.on("sdk.page.enable",t.bind(function(e){this.enablePage(e.pageNum)},this))},createPageViews:function(){var e=[];f.on(f.publishedEvents.PAGE_RELOAD,function(){v.scale()}),b=_.editorPagesManifest,b.each(t.bind(function(t,n){var i=this.createSinglePageView(t,n);e.push(i)},this)),this.pageViews=e},createSinglePageView:function(e,t){var n=_.getPages()[t];return f.createPageView(n,{physicalPageNumber:t,enableLoadingThumbnail:!1,enableLoadingSpinner:!0,thumbnail:e.get("thumbnail"),documentVersion:_,scaleContext:y})},getPageViews:function(){return this.pageViews},scale:function(){v.scalePageComponents()},preloadPageMedia:function(){var e=t.map(w,t.bind(function(e){return _.getPages()[e]},this)),n=t.map(_.getPages(),function(e){return y.getPageScaleContext({model:e})});E.mark(E.MARKS.PLAYER.HIGH_PRIORITY_IMAGES_START_LOADING),t.map(e,function(e,t){e.preloadVisibleMediaNow(n[t])}),E.mark(E.MARKS.PLAYER.LOW_PRIORITY_IMAGES_START_LOADING),t.each(_.getPages(),function(e,i){t.includes(w,i)||e.preloadVisibleMedia(n[i])}),t.each(_.getPages(),function(e,t){e.preloadHiddenMedia(n[t])})},renderPages:function(){this.createPageViews(),v.reset(this.pageViews,T),this.preRenderPages(),r.previewMode||(n.debug("Setting up the lazy preRender Defer"),t.defer(t.bind(S.startLazyPrerender,S)));var e=v.showPage(T);return e.done(S.firstPageShown.resolve),e},activateFirstPage:function(){v.getBackgroundImagePromise().done(function(){v.showBackground()}),v.activatePage(v.getCurrentPage()),S.triggerExperienceLevelInteractions(_)},preRenderPages:function(){E.mark(E.MARKS.PLAYER.BEGIN_PRERENDERING_PAGES);var n=this.pageViews;r.previewMode||(n=t.map(w,t.bind(function(e){return this.pageViews[e]},this)));var i=[];t.each(n,t.bind(function(e){e.prerender(),i.push(e.getPrerenderDeferred())},this)),e.when.apply(e,i).done(t.bind(function(){E.mark(E.MARKS.PLAYER.ALL_PAGES_PRERENDERED)},this))},isFirstPageReadyToShow:function(){return"resolved"===S.firstPageShown.state()},getFirstPageReadyPromise:function(){return S.firstPageShown},nextPage:function(){v&&v.nextPage()},previousPage:function(){v&&v.previousPage()},jumpToPage:function(e,t){v&&v.jumpToPage(e,t)},show:function(){v&&v.show()},hide:function(){v&&v.hide()},el:function(){return v?v.$el:null},getCurrentPageHeight:function(){return v?v.getCurrentPage().getPageHeight():null},getCurrentPageSlug:function(){return v?v.currentPageSlug:null},getCurrentPageNumber:function(){return v?v.currentPage:null},isLastPage:function(e){var n=b.length,i=b.at(n-1),r=t.last(i.uri.split("/"));return r===e},isFirstPage:function(e){var n=b.at(0),i=t.last(n.uri.split("/"));return i===e},scrollTo:function(e,t){var n=v.getCurrentPage(),i=this.getScrollPositionForInteraction(e,t);return n.$pageContainer.animate({scrollTop:i},300,"easeOutCubic"),{scrollPosition:i,pageHeight:n.model.getPageHeight(_),visibleHeight:n.$pageContainer.height()}},getScrollPositionForInteraction:function(e,i){switch(e){case m.TOP:return 0;case m.BOTTOM:return v.getCurrentPage().model.getPageHeight(_);case m.SCRANCHOR:var r=v.getCurrentPage().model.get("scranchors");return r&&t.has(r,i)?r[i]:(n.warn("Could not find scranchor for id: "+i),null);default:return n.warn("Scroll interaction target type is invalid: "+e),null}},shareCurrentPageOnSocial:function(e,t){if(v){var n=u.buildUriForPageNumber(v.currentPage),i=v.getCurrentPage();this.shareOnSocial(e,window.location.protocol+"//"+window.location.host+n,i.getThumbnail(),t.get("title"))}},shareOnSocial:function(e,t,i,o){switch(t=g.removeEmbedParams(t),e){case"share-twitter":a.shareOnTwitter(t,o);break;case"share-linkedin":a.shareOnLinkedIn(t,o);break;case"share-pinterest":if(!i){var s="Sorry, sharing to Pinterest is currently not supported in the Previewer.";n.info(s),r.previewMode&&alert(s);break}a.shareOnPinterest(t,i,o);break;case"share-facebook":a.shareOnFacebook(t,i,o);break;case"share-email":a.shareViaEmail(t,o)}},addClickShield:function(){v&&v.addClickShield()},removeClickShield:function(){v&&v.removeClickShield()},disableGestures:function(){t.isFunction(v.disableGestures)&&v.disableGestures()},enableGestures:function(){t.isFunction(v.enableGestures)&&v.enableGestures()},getExperienceWidth:function(){return v.getExperienceWidth()},getExperienceHeight:function(){return v.getExperienceHeight()},startVideo:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=v.getCurrentPage().findVideo(e);t&&t.play()})},stopVideo:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=v.getCurrentPage().findVideo(e);if(t){var n=!0;t.pause(n)}})},setComponentText:function(e,n){var i=v.getCurrentPage(),r=i.model.getAllSmartgroupInstanceComponentIds(e),o=[e].concat(r);t.each(o,function(e){var i=v.getCurrentPage().findChildView(e);i&&"text"===i.type&&i.setTextFromSDK(t.isNil(n)?"":String(n))})},setImageUrl:function(n,i,r){var o=v.getCurrentPage(),a=o.model.getAllSmartgroupInstanceComponentIds(n),s=[n].concat(a);t.each(s,function(t){var n=v.getCurrentPage().findChildView(t);if(n&&"image"===n.type)if(n.srcOverride=i,n.dimensionsOverride=r,r){var o=new Image;o.onload=function(){var t=n.$imgEl.attr("style"),i=n.$imgEl.attr("alt");n.$imgEl.remove();var r=e(o);r.attr("style",t).attr("alt",i),n.$imgEl=e(r),n.$el.append(n.$imgEl)},o.src=i}else n.$imgEl.attr("src",i)})},resetImage:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=v.getCurrentPage().findChildView(e);t&&"image"===t.type&&(t.srcOverride=null,t.dimensionsOverride=null,t.render())})},showLayer:function(e){var t=v.getCurrentPage(),n=t.model.getAllSmartgroupInstanceLayerIds(e),i=[e].concat(n);v.getCurrentPage().invokeChildActions(i,f.INTERACTION_ACTIONS.CHILD_SHOW)},hideLayer:function(e){var t=v.getCurrentPage(),n=t.model.getAllSmartgroupInstanceLayerIds(e),i=[e].concat(n);t.invokeChildActions(i,f.INTERACTION_ACTIONS.CHILD_HIDE)},clickComponent:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=n.findChildView(e);t&&t.simulateClick()})},showComponent:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=v.getCurrentPage().findChildView(e);t&&(t.reset(),t._applyVisibility(!0),t.runEntryAnimations(!1))})},hideComponent:function(e){var n=v.getCurrentPage(),i=n.model.getAllSmartgroupInstanceComponentIds(e),r=[e].concat(i);t.each(r,function(e){var t=v.getCurrentPage().findChildView(e);t&&t._applyVisibility(!1)})},startPageAnimations:function(e){var t=v.getCurrentPage();t.model.get("slug")===e&&(t.reset(),t.runInitialEntryAnimations(!1))},pausePageAnimations:function(e){var t=v.getCurrentPage();t.model.get("slug")===e&&t.pauseAnimations()},disablePage:function(e){v.disablePage(e)},enablePage:function(e){v.enablePage(e)},isLayerVisible:function(e){return t.some(this.pageViews,function(t){return t.isChildVisible(e)})}},startLazyPrerender:function(){n.debug("Lazy prerender process starting...");var i=Date.now(),r=e.Deferred().resolve();return t.each(this.getPageViews(),function(e){e.isPrerendered()||(r=r.pipe(t.bind(e.startLazyPrerender,e)))}),r.pipe(function(){n.debug("Lazy prerender process complete. Total elapsed time: "+(Date.now()-i)+" ms")}),r.promise()}});return S}),define("libs/uuid/UuidGenerator",[],function(){var e=navigator.userAgent;return{generate:function(){var t=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},n=function(){return Math.random().toString(16).replace(".","")},i=function(){function t(e,t){var n,i=0;for(n=0;n<t.length;n++)i|=o[n]<<8*n;return e^i}var n,i,r=e,o=[],a=0;for(n=0;n<r.length;n++)i=r.charCodeAt(n),o.unshift(255&i),o.length>=4&&(a=t(a,o),o=[]);return o.length>0&&(a=t(a,o)),a.toString(16)};return function(){var e=(screen.height*screen.width).toString(16);return t()+"-"+n()+"-"+i()+"-"+e+"-"+t()}}()}}),define("libs/analytics/AnalyticsEnvironmentData",["lodash","jquery","device","globals","urlUtils"],function(e,t,n,i,r){var o=window.navigator.userAgent,a=function(){};return a.prototype={data:null,scale:null,initialScale:null,getData:function(){return this.data||(this.data=e.extend(this.getStandardParams(),this.getCampaignParams())),e.extend(this.data,this.getDynamicTrackingInfo())},updateScale:function(e){this.initialScale=this.initialScale||e,this.scale=e},getDynamicTrackingInfo:function(){var e={screen_width:window.screen.width,screen_height:window.screen.height};return this.initialScale&&(e.initial_scale=this.initialScale),this.scale&&(e.scale=this.scale),e},getBrowserAndVersionUsingMixpanelAlgorithm:function(t,n,i){var r=function(e){var n=t.match(e);return n&&n[1]},o=null,a=null;n=n||"",e.includes(t,"PhantomJS")?(o="PhantomJS",a=r(/PhantomJS\/(\d+)/)):i?o=e.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?o="BlackBerry":e.includes(t,"Edge")?(o="Microsoft Edge",a=r(/Edge\/(\d+)/)):e.includes(t,"FBIOS")?o="Facebook Mobile":e.includes(t,"Chrome")?(o="Chrome",a=r(/Chrome\/(\d+)/)):e.includes(t,"CriOS")?(o="Chrome iOS",a=r(/CriOS\/(\d+)/)):e.includes(n||"","Apple")?(o=e.includes(t,"Mobile")?"Mobile Safari":"Safari",a=r(/Version\/(\d+)/)):e.includes(t,"Android")?o="Android Mobile":e.includes(t,"Konqueror")?o="Konqueror":e.includes(t,"Firefox")?(o="Firefox",a=r(/Firefox\/(\d+)/)):/msie|trident/i.test(t)?(o="Internet Explorer",a=r(/(?:msie |rv:)(\d+)/i)):e.includes(t,"Gecko")&&(o="Mozilla");var s={};return o&&(s.name=o),a&&(s.version=a),s},getStandardParams:function(){var e=window.document.referrer,t=this.getSearchEngine(e),r=this.getBrowserAndVersionUsingMixpanelAlgorithm(o,navigator.vendor,window.opera);return{browser:r.name,trial:i.isTrialAccount?1:0,browser_version:r.version,user_agent:o,device_type:n.deviceType(),player_type:n.playerType(),initial_orientation:n.orientation(),cookies_enabled:n.cookies()?1:0,embedded:n.isIframe()?1:0,https:"https:"===window.location.protocol?1:0,device:this.getDevice(),device_pixel_ratio:n.pixelRatio(),search_engine:t,search_keyword:this.getSearchKeyword(t,e),os:n.os.name,os_version:n.os.version,referrer:e||null,referring_domain:this.extractReferringDomain(e)}},extractReferringDomain:function(e){var t=null;return e&&(t=r.extractDomain(e),t||(t=e)),t},getDevice:function(){return/Windows Phone/i.test(o)||/WPDesktop/.test(o)?"Windows Phone":/iPad/.test(o)?"iPad":/iPod/.test(o)?"iPod Touch":/iPhone/.test(o)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(o)?"BlackBerry":/Android/.test(o)?"Android":null},getSearchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},getSearchKeyword:function(e,t){var n="yahoo"!=e?"q":"p";if(null!==e){var i=r.getUrlParams(t)[n];if(i&&i.length)return i}return null},getCampaignParams:function(){return e.pick(r.getUrlParams(window.document.URL),"utm_source","utm_medium","utm_campaign","utm_content","utm_term")}},a}),define("libs/analytics/EventQueue",["jquery","lodash","backbone"],function(e,t,n){var i=5e3,r=5,o=function(){this.queue=[],this.timerId=null};return o.prototype=t.extend({},n.Events,{EVENTS:{AGGREGATE_EVENT:"aggregate-event"},addEvent:function(e){this.queue.push(e),this.startTimer()},isEmpty:function(){return 0===this.queue.length},popEvents:function(){var e=this.queue.splice(0,r);return this.clearTimer(),t.isEmpty(this.queue)||this.startTimer(),e},startTimer:function(){null===this.timerId&&(this.timerId=setTimeout(t.bind(this.postEvents,this),i))},clearTimer:function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},postEvents:function(){this.queue.length>0?this.trigger(this.EVENTS.AGGREGATE_EVENT,this.popEvents()):this.clearTimer()}}),o}),define("libs/analytics/CerosTracker",["jquery","lodash","cookie","globals","libs/uuid/UuidGenerator","device","libs/analytics/AnalyticsEnvironmentData","libs/analytics/EventQueue"],function(e,t,n,i,r,o,a,s){var u=8,l="cerosexperiencetracking",c="cerosdomaintracking",d=36e5,f=15,h=["player.page.dwell","player.video.progress_percent","player.video.progress_time","player.performance.marker","previewer.performance.marker","studio.performance.marker","admin.performance.marker"],p=function(e){if(this.options=e||{},this.userEmail=null,this.fullName=null,this.anonymousUserTrackingData=null,this.domain=this.getRootDomain(),this.experienceCookiePath=this.getExperienceCookiePath(),this.noAnalyticsTracking=i.noAnalyticsTracking?!0:!1,this.defaultAttributes={timezone:this.getTimezoneOffset(),user_agent:navigator.userAgent,visit_slug:r.generate()},this.eventQueue=new s,this.eventQueue.on(this.eventQueue.EVENTS.AGGREGATE_EVENT,t.bind(function(e){this.trackEvents(e,!1)},this)),this.environmentData=new a,this.options.trackInitialReferrer){var n=this.environmentData.getData();this.setInitialReferrer(n.referrer,n.referring_domain)}};return t.extend(p.prototype,{setUser:function(e,t){this.setDomainTrackingCookie({email:e,full_name:t,user_token:e}),this.userEmail=e,this.fullName=t},setInitialReferrer:function(e,n){var i=this.getExperienceTrackingCookieData();(t.isUndefined(i.initial_referrer)||t.isUndefined(i.initial_referring_domain))&&(i.initial_referrer=e||null,i.initial_referring_domain=n||null,this.setExperienceTrackingCookie(i))},encodeData:function(e){return encodeURIComponent(btoa(unescape(encodeURIComponent(JSON.stringify(e)))))},getEvent:function(e,n){var i=t.extend({},{event_slug:r.generate()},n||{},{event_name:e,client_timestamp:(new Date).getTime()});return i=t.omitBy(i,t.isNull)},track:function(n,i){var r=this.getEvent(n,i);return t.includes(h,r.event_name)?(this.eventQueue.addEvent(r),e.Deferred().resolve()):this.trackEvents([r],!0)},trackEvents:function(n,r){if(this.noAnalyticsTracking)return e.Deferred().resolve();if(!i.analyticsUrl)return e.Deferred().resolve();if(!n||0===n.length)return e.Deferred().resolve();var o=this.getDomainTrackingCookieData();o.user_token||(o=this.createDomainTrackingData()),this.setDomainTrackingCookie(o);var a={account_slug:i.accountSlug,client_version:u,user_token:o.user_token,visit_slug:this.defaultAttributes.visit_slug};this.isPlayerPreviewer()&&(a=t.extend(a,{experience_alias:i.issueAliasSlug,experience_slug:i.issue.slug,experience_version_slug:i.docVersion.slug,project_slug:i.appSlug}));var s=this.environmentData.getData();this.options.envPropertyList&&(s=t.pick(s,this.options.envPropertyList));var l=this.getExperienceTrackingCookieData();s=t.extend(s,{email:o.email,full_name:o.full_name,timezone:this.defaultAttributes.timezone,user_agent:this.defaultAttributes.user_agent,initial_referrer:l.initial_referrer,initial_referring_domain:l.initial_referring_domain}),a=t.omitBy(a,t.isNull),s=t.omitBy(s,t.isNull),r&&(n=n.concat(this.eventQueue.popEvents()));var c={common:a,extended_common:s,events:n},d=i.analyticsUrl+"?data="+this.encodeData(c);return this._sendTrackingRequest(d,0)},_handleTrackingError:function(e,t,n,i){var r=this;3>i?setTimeout(function(){r._sendTrackingRequest(n,i)},3e3):3!==i||window.sentRollbarForAnalyticsRetryFail||(window.Rollbar&&window.Rollbar.error("One or more analytics events are failing due to HTTP or connection errors.",{errorThrown:t,errorCode:e.status,url:n}),window.sentRollbarForAnalyticsRetryFail=!0)},_sendTrackingRequest:function(t,n){var i=this,r=new e.Deferred;if(o.isIE9OrEarlier()&&"http:"===location.protocol){var a=new Image;a.crossOrigin="Anonymous",a.src=t+"&_="+Math.random(),a.onload=function(){r.resolve()},a.onerror=function(){r.resolve()}}else e.ajax({url:t,type:"GET",cache:!1,crossDomain:!0}).then(r.resolve,function(e,o,a){i._handleTrackingError(e,a,t,++n),r.resolve()});return r},getRootDomain:function(){var e=location.host.split(".").reverse();return"."+e[1]+"."+e[0]},getExperienceCookiePath:function(){var e=window.location.pathname,t=e.search(/\/p\/\d+/g);return t>=0?e.substr(0,t):e},getTimezoneOffset:function(){var e=(new Date).getTimezoneOffset()/60;return Math.abs(e)>f?null:e},createAnonymousUserDomainTrackingData:function(){return{user_token:r.generate()}},createDomainTrackingData:function(){return this.userEmail?{email:this.userEmail,full_name:this.fullName,user_token:this.userEmail}:(null===this.anonymousUserTrackingData&&(this.anonymousUserTrackingData=this.createAnonymousUserDomainTrackingData()),this.anonymousUserTrackingData)},setDomainTrackingCookie:function(e){if(!this.noAnalyticsTracking){var t=JSON.stringify(e);t=encodeURIComponent(t),n.set(c,t,{expires:365,path:"/",domain:this.domain})}},setExperienceTrackingCookie:function(e){if(!this.noAnalyticsTracking){var t=JSON.stringify(e);t=encodeURIComponent(t),n.set(l,t,{expires:365,path:this.experienceCookiePath,domain:this.domain})}},getDomainTrackingCookieData:function(){return this.getCookieData(c)},getExperienceTrackingCookieData:function(){return this.getCookieData(l)},getCookieData:function(e){var t=n.get(e);if(t){var i=decodeURIComponent(t);try{return JSON.parse(i)}catch(r){this.parseError(e,r)}}return{}},parseError:function(e,t){var n=(new Date).getTime(),i=this.lastParseError||0;n-i>d&&(window.Rollbar.error("Unable to parse "+e+" cookie data, the content was malformed. Exception was: "+t),this.lastParseError=n)},updateScale:function(e){this.environmentData.updateScale(e)},isPlayerPreviewer:function(){return"player"===i.analyticsApplicationKey||"previewer"===i.analyticsApplicationKey}}),p}),define("libs/analytics/PerformanceTracker",["jquery","lodash","globals","libs/analytics/CerosTracker"],function(e,t,n){var i=function(e){this.tracker=e,this.eventName=n.analyticsApplicationKey+".performance.marker"};return i.prototype=t.extend(i.prototype,{MARKS:{PLAYER:{RUN_START:"run-start",DOM_READY:"dom-ready",SPINNER_SHOWN:"spinner-shown",DOC_VERSION_LOADED:"doc-version-loaded",SPINNER_HIDDEN:"spinner-hidden",HIGH_PRIORITY_IMAGES_START_LOADING:"high-priority-images-start-loading",LOW_PRIORITY_IMAGES_START_LOADING:"low-priority-images-start-loading",BEGIN_PRERENDERING_PAGES:"begin-prerendering-pages",ALL_PAGES_PRERENDERED:"all-pages-prerendered",PRIORITY_QUEUE_EMPTIED:"priority-queue-emptied",ALL_RESOURCES_LOADED:"all-resources-loaded"},STUDIO:{SHAREJS_CONNECTION_INITIALIZED:"sharejs-connection-initialized",ALL_DATA_LOADED:"all-data-loaded",ALL_PAGES_LOADED:"all-pages-loaded",USER_LOADED:"user-loaded",THUMBNAIL_POLICY_LOADED:"thumbnail-policy-loaded"}},optionalProperties:{},setOptionalProperties:function(e){return this.optionalProperties=e,this},startTracking:function(e){this.startTime=e?e:(new Date).getTime();var n=t.extend({},this.optionalProperties,{performance_marker_name:"start-tracking",performance_marker_time:0});this.tracker.track(this.eventName,n)},mark:function(e){if(null===this.startTime)return!1;var n=(new Date).getTime()-this.startTime,i=t.extend({},this.optionalProperties,{performance_marker_name:e,performance_marker_time:n});return this.tracker.track(this.eventName,i),!0}}),i}),define("modules/analytics/trackers/GoogleAnalyticsTracker",["lodash","globals","shared/utils/NavigationUtils","urlUtils"],function(e,t,n){var i=function(e){if(!window.ga)throw Error("No Google Analytics loaded.");this.googleAnalyticsId=e,t.isEmbedded||window.ga("create",this.googleAnalyticsId,"auto")};return i.prototype={isEnabled:function(){return this.googleAnalyticsId?!0:!1},viewPage:function(e){var i=n.buildUriForPageNumber(e);t.isEmbedded||window.ga("send","pageview",{page:i})}},i}),define("libs/analytics/AbstractPageViewTracker",["jquery","lodash","backbone"],function(e,t,n){var i=function(){this.lastUserActivityTime=null,this.timerId=null,this.paused=!1,this.pageActivated=!1,document.addEventListener&&document.addEventListener("visibilitychange",t.bind(function(){"hidden"===document.visibilityState?this.pause():"visible"===document.visibilityState&&this.registerUserActivity()},this))};return i.prototype=t.extend({},n.Events,{EVENTS:{USER_ACTIVITY_PING:"user-activity-ping"},PAGE_PING_INTERVAL_MILLIS:5e3,USER_INACTIVITY_TIMEOUT_MILLIS:3e4,pause:function(){this.isRunning()&&(this.logDebug("Pausing page ping timer"),clearTimeout(this.timerId),this.timerId=null,this.paused=!0)},registerUserActivity:function(){this.pageActivated&&(this.lastUserActivityTime=new Date,this.paused=!1,this.isRunning()||this.startTimer())},registerUserActivityIfNotPaused:function(){this.paused||this.registerUserActivity()},startTimer:function(){this.logDebug("Starting page ping timer");var e=t.bind(function(){this.timerId=setTimeout(t.bind(function(){this.trigger(this.EVENTS.USER_ACTIVITY_PING,this.getDwellTimeEventData()),this.setPostEventFireData(),this.shouldStartPagePingEventTimer()?e():(this.logDebug("Stopping page pings. User is not active."),this.timerId=null)},this),this.PAGE_PING_INTERVAL_MILLIS),this.timerStartTime=Date.now()},this);e()},getDwellTimeEventData:function(){return{dwellTime:this.PAGE_PING_INTERVAL_MILLIS/1e3}},setPostEventFireData:function(){},shouldStartPagePingEventTimer:function(){return this.isUserActive()},isUserActive:function(){var e=new Date-this.lastUserActivityTime;return e<this.USER_INACTIVITY_TIMEOUT_MILLIS},isRunning:function(){return null!==this.timerId},logDebug:function(e){console.debug(e)}}),i}),define("modules/analytics/PlayerPageViewTracker",["jquery","log","lodash","backbone","libs/analytics/AbstractPageViewTracker"],function(e,t,n,i,r){var o=function(){r.call(this)};o.prototype=Object.create(r.prototype),o.prototype.constructor=o;var a=200;return n.extend(o.prototype,{activatePage:function(e,n,i){this.timerId&&(t.debug("Stopping page ping timer"),clearTimeout(this.timerId),this.timerId=null),e=isNaN(e)?0:e,n=isNaN(n)?i:n,this.minY=e,this.maxY=n,this.lastTopY=e,this.lastBottomY=n,this.pageHeight=i,this.pageActivated=!0,this.registerUserActivity()},resetYMinMax:function(){this.minY=void 0,this.maxY=void 0},trackPageScroll:n.throttle(function(e,t){isNaN(e)||isNaN(t)||(this.minY=void 0===this.minY?e:Math.min(e,this.minY),this.maxY=void 0===this.maxY?t:Math.max(t,this.maxY),this.lastTopY=e,this.lastBottomY=t,this.registerUserActivity())},a),setPostEventFireData:function(){this.minY=this.lastTopY,this.maxY=this.lastBottomY},shouldStartPagePingEventTimer:function(){return this.isUserActive()||this.isLightboxOpen()},getDwellTimeEventData:function(){var e=Math.max(0,this.minY),t=this.maxY;return this.pageHeight&&(t=Math.min(this.pageHeight,t)),{minY:e,maxY:t,dwellTime:this.PAGE_PING_INTERVAL_MILLIS/1e3}},isLightboxOpen:function(){return e(".ceros-lightbox").is(":visible")},logDebug:function(e){t.debug(e)}}),o}),define("modules/analytics/Analytics",["log","lodash","jquery","device","globals","libs/analytics/CerosTracker","libs/analytics/PerformanceTracker","modules/analytics/trackers/GoogleAnalyticsTracker","modules/analytics/PlayerPageViewTracker"],function(e,t,n,i,r,o,a,s,u){var l=function(){this.ready=!1,this.lastPageLoadedAttr=null};return l.prototype={init:function(e){this.options=t.extend({application:"player"},e||{}),this.cerosTracker=new o({trackInitialReferrer:!0,application:this.options.application}),this.performanceTracker=new a(this.cerosTracker),this.googleAnalyticsTracker=!e.previewMode&&e.googleAnalyticsId?new s(e.googleAnalyticsId):null,this.playerPageViewTracker=new u,this.playerPageViewTracker.on(this.playerPageViewTracker.EVENTS.USER_ACTIVITY_PING,this.sendPageDwellEvent,this),this.ready=!0
},isGoogleAnalyticsEnabled:function(){return null!==this.googleAnalyticsTracker&&this.googleAnalyticsTracker.isEnabled()},getPerformanceTracker:function(){return this.performanceTracker},updateScale:function(e){return this.cerosTracker.updateScale(e)},unsupportedOpen:function(e){return this._track(this.options.application+".unsupported_browser.open",e)},unsupportedEmbed:function(e){this._track(this.options.application+".unsupported_embed.open",e)},_openExperience:function(e){this._track(this.options.application+".experience.open",e)},viewExperience:function(n){if(window.cerosPlayerLoadStart){var i=new Date,r=(i-window.cerosPlayerLoadStart)/1e3;e.info("First Page Load Time: "+r);var o=0>r;o&&(e.warn(new Error("Analytics: negative load time calculated. Start time: "+window.cerosPlayerLoadStart+", End time: "+i)),r=0),this._openExperience(t.extend({load_time:r},n)),window.cerosPlayerLoadStart=null}},viewPage:function(e){i.isBot()||this._trackViewPage(e),this.googleAnalyticsTracker&&this.googleAnalyticsTracker.viewPage(e.page_num)},playVideo:function(e){this._track(this.options.application+".video.play",e)},trackVideoProgressTime:function(e){this.isPlayer()&&this._track(this.options.application+".video.progress_time",e)},trackVideoProgressPercent:function(e){this.isPlayer()&&this._track(this.options.application+".video.progress_percent",e)},clickComponent:function(e){this._track(this.options.application+".component.click",e)},clickLink:function(e){this._track(this.options.application+".link.click",e)},clickLightbox:function(e){this._track(this.options.application+".lightbox.click",e)},clickProduct:function(e){this._track(this.options.application+".product.click",e)},clickShoppingCart:function(e){this._track(this.options.application+".shopping_cart.click",e)},clickPageShare:function(e){this._track(this.options.application+".page.share",e)},clickCerosBranding:function(e){this._track(this.options.application+".ceros_branding.click",e)},experienceLoadInteraction:function(e){this._track(this.options.application+".experience_load.timed",e)},onViewInteraction:function(e){this._track(this.options.application+".on_view.timed",e)},formSubmit:function(e){this._track(this.options.application+".component.form_submit",e)},handleApiRequest:function(e){this._track(this.options.application+".ceros.api.request",{sdk_event_name:e.name,sdk_version:e.client.sdkVersion})},_trackViewPage:function(e){this._track(this.options.application+".page.view",t.pick(e,["page_slug","page_num"])),this.playerPageViewTracker.activatePage(e.topY,e.bottomY,e.pageHeight),this.lastPageLoadedAttr=e},_track:function(e,t){if(!this.ready)throw Error("please call init() before attempting to capture analytics!");return i.isBot()?n.Deferred().resolve():(this.playerPageViewTracker.registerUserActivity(),this._sendToCeros(e,t))},resetPageTrackingMinMaxY:function(){this.playerPageViewTracker.resetYMinMax()},_sendToCeros:function(e,t){return i.isBot()?n.Deferred().resolve():this.cerosTracker.track(e,t)},trackPageScroll:function(e){this.lastPageLoadedAttr&&this.lastPageLoadedAttr.page_slug===e.page_slug&&this.playerPageViewTracker.trackPageScroll(e.topY,e.bottomY)},registerUserActivity:function(){this.playerPageViewTracker.registerUserActivity()},registerUserActivityIfVisible:function(){this.playerPageViewTracker.registerUserActivityIfNotPaused()},sendPageDwellEvent:function(t){if(!i.isBot()&&this.isPlayer()&&this.lastPageLoadedAttr){var n={page_slug:this.lastPageLoadedAttr.page_slug,page_num:this.lastPageLoadedAttr.page_num,page_height:this.lastPageLoadedAttr.pageHeight,min_y:t.minY,max_y:t.maxY,dwell_time:t.dwellTime};e.debug("SENDING PING, min_y: "+n.min_y+", max_y: "+n.max_y+", Dur: "+n.dwell_time+", page_height: "+n.page_height),this._sendToCeros(this.options.application+".page.dwell",n)}},isPlayer:function(){return"player"===this.options.application},getUserToken:function(){return this.cerosTracker.getDomainTrackingCookieData().user_token}},new l}),define("modules/analytics/module",["lodash","ceros","modules/analytics/Analytics"],function(e,t,n){var i=new t.Module({id:"analytics",description:"Provides an interface for tracking statistics on the analytics service.",version:"1.0",delegate:function(){var t={},i=e.functionsIn(n);return e.each(i,function(i){"_"!=i.substr(0,1)&&(t[i]=e.bind(n[i],n))}),t}()});return i}),define("text!modules/lightbox/templates/lightbox.html",[],function(){return'<div class="container ceros-lightbox">\n    <div class="close">&#xE00B;</div>\n    <div class="scrolling">\n        <iframe src="about:blank" frameborder="0" allowfullscreen></iframe>\n    </div>\n</div>\n'}),define("modules/lightbox/views/LightboxView",["log","jquery","lodash","backbone","shared/utils/CerosResourceLoader","shared/models/EmbeddedViewportModel","shared/views/AbstractView","device","text!modules/lightbox/templates/lightbox.html"],function(e,t,n,i,r,o,a,s,u){var l={"click .close":"_close",click:"_backgroundClick"},c={"touchstart .close":"_close",touchstart:"_backgroundClick"},d=function(){var e={};return s.desktop()&&n.extend(e,l),s.touch()&&n.extend(e,c),e};return a.extend({id:"lightbox",events:d(),lightboxWidth:null,lightboxHeight:null,initialize:function(){a.prototype.initialize.apply(this,arguments),this._render()},setSizeAndPosition:function(){var e=o.getInstance();if(e.isActive()){var t=this.$el,n=this.$(".container"),i=e.getVerticalCenterOfVisibleArea(t.height())-this.lightboxHeight/2,r=Math.max(t.width()-this.lightboxWidth,0)/2;t.css({padding:0}),n.css({transform:"none",top:i+"px",left:r+"px"})}s.smallWindow()?this.$el.addClass("fullscreen-lightbox"):this.$(".container").css({"max-width":this.lightboxWidth,"max-height":this.lightboxHeight})},_close:function(e){e&&e.preventDefault(),this.deactivate()},_backgroundClick:function(e){e.target==this.$el[0]&&this._close(e)},_render:function(){this.$el.html(u)},openLightbox:function(t){return n.isEmpty(t)?void e.warn("missing options for lightbox"):n.isEmpty(t.url)?void e.warn("missing URL for lightbox"):t.width?t.height?(t.showCloseButton?(this.$el.removeClass("without-close-button"),this.$el.addClass("with-close-button")):(this.$el.removeClass("with-close-button"),this.$el.addClass("without-close-button")),this.lightboxWidth=t.width,this.lightboxHeight=t.height,this.setSizeAndPosition(),this.$(".close").css("background-color",t.closeButtonBgColor),this.$(".close").css("color",t.closeButtonFgColor),this.$("iframe").attr("src",t.url),this.show(),void r.pause()):void e.warn("missing height for lightbox"):void e.warn("missing width for lightbox")},deactivate:function(){r.resume(),this.$("iframe").attr("src","about:blank"),this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})}),define("modules/lightbox/module",["lodash","jquery","ceros","globals","device","shared/models/EmbeddedViewportModel","modules/lightbox/views/LightboxView","urlUtils"],function(e,t,n,i,r,o,a,s){var u=new n.Module({id:"lightbox",description:"",version:"1.0",dependencies:{},lightboxView:null,delegate:{load:function(){return this.lightboxView=new a({module:u}),this.registerEvents(),this},showLightbox:function(t,n,r,o){var a=e.isUndefined(i.themeObj)?{}:i.themeObj,u=e.extend({},this.getBrowserUrlParams(),this.getDefaultUrlParams());this.lightboxView.openLightbox({url:s.appendQueryParams(t,u),width:n,height:r,showCloseButton:o,closeButtonBgColor:a.menuBgColor,closeButtonFgColor:a.menuFgColor})},showProduct:function(t){if(!e.isEmpty(t)){var n=this.getUrlForProduct(t);e.isEmpty(n)||this.lightboxView.openLightbox({url:n,width:i.commerceSettings.panelWidth,height:i.commerceSettings.panelHeight})}},getUrlForProduct:function(t){var n=i.allowCommerceIntegration?i.commerceSettings.productUrl:"";if(e.isUndefined(n)||e.isEmpty(n)||-1===n.indexOf("{id}"))return"";var r=!1;-1!==n.indexOf("?")&&n.indexOf("?")<n.indexOf("{id}")&&(r=!0);var o=null,a=t.lastIndexOf("?");a>0&&(o=s.getUrlParams(t.substring(a)),t=t.substring(0,a));var u;u=r?encodeURIComponent(t):t.replace(/[^\/]+/gi,function(e){return encodeURIComponent(e)}),n=n.replace("{id}",u);var l=e.extend({},this.getBrowserUrlParams(),o,this.getDefaultUrlParams());return n=s.appendQueryParams(n,l)},showShoppingCart:function(){var t=this.getUrlForShoppingCart();e.isEmpty(t)||this.lightboxView.openLightbox({url:t,width:i.commerceSettings.panelWidth,height:i.commerceSettings.panelHeight})},getUrlForShoppingCart:function(){var t=i.allowCommerceIntegration?i.commerceSettings.shoppingCartUrl:"";return e.isUndefined(t)||e.isEmpty(t)?"":s.appendQueryParams(t,this.getDefaultUrlParams())},getDefaultUrlParams:function(){return{ceros_device_pixel_ratio:r.pixelRatio(),ceros_account_slug:i.accountSlug,ceros_app_slug:i.appSlug,ceros_issue_slug:i.issue.slug,ceros_device_type:r.deviceType(),ceros_player_type:r.playerType()}},getBrowserUrlParams:function(){var e=s.removeEmbedParams(this.getWindowUrl());return s.getUrlParams(e)},show:function(){this.lightboxView.show()},hide:function(){this.lightboxView.hide()},deactivate:function(){this.lightboxView.deactivate()},el:function(){return this.lightboxView.$el},iframe:function(){return this.lightboxView.$("iframe")[0]},getWindowUrl:function(){return window.location.href},registerEvents:function(){o.getInstance().on("change",this.lightboxView.setSizeAndPosition,this.lightboxView)}}});return u}),define("modules/url-navigation/module",["log","ceros","device","shared/utils/NavigationUtils","lodash","shared/utils/ModuleEventManager"],function(e,t,n,i,r,o){var a=new t.Module({id:"url-navigation",description:"",version:"1.0",publishedEvents:{POPSTATE:"url-navigation.popstate"},handledEvents:{},dependencies:{},PAGE_MODES:{NUMBER:"page_number",SLUG:"page_slug"},delegate:{getHistoryState:function(e,t,n){var i={mode:e,pageNumber:null,pageSlug:null,title:n};return e===a.PAGE_MODES.NUMBER?i.pageNumber=t:i.pageSlug=t,i},navigateTo:function(e,t,o){var s=i.buildUri(e,t);s&&(r.endsWith(location.href,s)&&null!==window.history.state||(o||(o=window.document.title),n.html5()&&window.history&&window.history.pushState&&(document.title=o,window.history.pushState(a.getHistoryState(e,t,o),o,s))))},navigateToPageNumber:function(e,t){a.navigateTo(a.PAGE_MODES.NUMBER,e,t)},navigateToPageSlug:function(e,t){a.navigateTo(a.PAGE_MODES.SLUG,e,t)},bindPopstate:r.once(function(){window.onpopstate=function(e){e.state&&e.state.mode&&o.trigger(a.publishedEvents.POPSTATE,e.state)}})}});return a}),define("text!modules/404/templates/404.html",[],function(){return'<div id="float"></div>\n<div id="dialog">\n    <div id="content">\n        <div id="title">\n            Sorry, page not found\n        </div>\n        <div id="image"></div>\n        <div id="message">\n            Please check the url and\n            <br/>\n            try again\n        </div>\n    </div>\n</div>'}),define("modules/404/views/404View",["jquery","lodash","backbone","mustache","shared/views/AbstractView","text!modules/404/templates/404.html"],function(e,t,n,i,r,o){return r.extend({id:"notFound",initialize:function(e){r.prototype.initialize.call(this,e),this.render()},render:function(){var e=i.render(o);this.$el.html(e)}})}),define("modules/404/module",["jquery","ceros","modules/404/views/404View"],function(e,t,n){var i=new t.Module({id:"404",description:"Provides a 404 display module",version:"1.0",publishedEvents:{},dependencies:{},delegate:{load:function(){this.view404=new n},el:function(){return this.view404.$el}}});return i}),define("modules/sdk-backend/module",["jquery","lodash","log","ceros","globals","shared/utils/ModuleEventManager","shared/utils/NavigationUtils","modules/page/models/PageModel"],function(e,t,n,i,r,o,a,s){var u="ceros.sdk.player:",l="1.1.0",c=["sdk.experience.container.ready","sdk.experience.container.scrolled","sdk.experience.container.resized","sdk.experience.page.goto","sdk.experience.page.next","sdk.experience.page.previous","sdk.component.video.start","sdk.component.video.stop","sdk.component.text.settext","sdk.component.image.seturl","sdk.component.image.reset","sdk.component.click","sdk.component.show","sdk.component.hide","sdk.layer.show","sdk.layer.hide","sdk.page.animations.start","sdk.page.animations.pause","sdk.page.disable","sdk.page.enable"],d=function(e,t){t=JSON.stringify(t),e.postMessage(t,"*")},f=function(e,t){var n={name:u+e,version:l,params:t};r.isEmbedded&&d(parent,n),d(window,n)},h=function(e){var t=new RegExp("^"+u);return e.replace(t,"")},p=function(e){if(e=e.originalEvent,"undefined"!=typeof e.data&&null!==e.data&&-1!==e.data.indexOf(u)){var t={};try{t=JSON.parse(e.data)}catch(i){return void n.debug("Error processing message: "+i)}if(t.name){if(t.name=h(t.name),-1===c.indexOf(t.name))return void n.debug("Received message that is not an SDK event: "+t.name);o.trigger(t.name,t.params)}}},g=function(){var e={},n=function(n,i,r){r&&!t.isEmpty(r)&&t.each(r,function(t){e[t]||(e[t]={pages:[],smartgroups:[],layers:[],components:[]}),e[t][n].push(i)})};this.addPageTags=function(e,t){n("pages",e,t)},this.addSmartgroupTags=function(e,t){n("smartgroups",e,t)},this.addLayerTags=function(e,t){n("layers",e,t)},this.addComponentTags=function(e,t){n("components",e,t)},this.getTags=function(){return e}},m=new i.Module({id:"sdk-backend",description:"The API for the player SDK.",version:"1.0",delegate:{experienceID:null,initialize:function(i,r,o){if(t.isUndefined(window.postMessage))return void n.warn("This browser does not support inter-frame communication.");n.debug("Embedded Player SDK listening for inter-frame messages."),e(window).bind("message",p);var a=this.buildExperienceData(i,r,o);this.experienceID=i.get("slug"),this.registerEvents(),f("ready",a)},buildExperienceData:function(e,t,n){var i=new g,o=this.buildPages(t,i),s=this.buildSmartgroups(t.get("smartgroups"),i);return{experienceId:e.get("slug"),experienceAlias:r.issueAliasSlug,experienceTitle:e.get("title"),currentPageNumber:t.getPageInfoByNumberOrSlug(a.parsePageFromLocation()).number,documentVersion:r.docVersion,allPageData:o,allSmartgroupData:s,tags:i.getTags(),userToken:n}},buildSmartgroups:function(e,n){var i=[],r=this;return t.each(e,t.bind(function(e){function o(e){"folder"===e.type?t.each(e.items,o):a.push(r.buildLayer(e,n))}var a=[];e.layers&&t.each(e.layers,o),i.push({id:e.id,payload:e.sdkPayload,tags:e.sdkTags,layers:a})},this)),i},buildPages:function(e,n){var i=[];return t.each(e.getPages(),t.bind(function(t){var r=[];t.get("layers")&&(r=this.buildLayers(t.get("layers"),n,t.getSlug())),i.push({pageSlug:t.getSlug(),pageNumber:t.getPageIndex()+1,payload:t.getSdkPayload(),tags:t.getSdkTags(),layers:r,width:t.getPageWidth(e),height:t.getPageHeight(e),enabled:!t.getDisabled()}),n.addPageTags(t.getSlug(),t.getSdkTags())},this)),i},buildLayers:function(e,n,i){function r(e){e.smartgroupId?(o.push({id:e.id,smartgroupId:e.smartgroupId,tags:e.sdkTags,payload:e.sdkPayload,objects:[]}),n.addSmartgroupTags(e.id,e.sdkTags)):"folder"===e.type?t.each(e.items,function(e){r(e)}):o.push(a.buildLayer(e,n,i))}var o=[],a=this;return e&&t.each(e,r),o},buildLayer:function(e,n,i){var r=[];return e.objects&&t.each(e.objects,t.bind(function(e){r.push(this.buildComponent(e,n,i))},this)),n.addLayerTags(e.id,e.sdkTags),{id:e.id,payload:e.sdkPayload,objects:r,tags:e.sdkTags,pageSlug:i}},buildComponent:function(e,t,n){var i=e.id;t.addComponentTags(e.id,e.sdkTags);var r;switch(e.type){case"hotspot-component":r="hotspot";break;case"image-component":r="image";break;case"line-component":r="line";break;case"shape-component":r="shape";break;case"text-component":r="text";break;case"video-widget":r="video"}var o={id:i,type:r,payload:e.sdkPayload,tags:e.sdkTags,x:e.x,y:e.y,width:e.width,height:e.height,pageSlug:n};return"text"===r&&(o.textContent=e.textContent),"image"===r&&e.imageLoader&&(o.fullResolutionUrl=e.imageLoader.getFullResolutionSrc(),o.url=e.imageLoader.getSrc()),o},registerEvents:function(){o.on("page.action.share.page",t.bind(function(e){this.announceSocialShare(e.componentSlug,e.action)},this)),o.on("page.component.clicked",t.bind(function(e){this.announceComponentClick(e.componentSlug)},this)),o.on("page.component.animation.start",t.bind(function(e){this.announceAnimationStarted(e)},this)),o.on("page.component.animation.end",t.bind(function(e){this.announceAnimationEnded(e)},this))},announcePageChanged:function(e){f("page.changed",{pageNum:e,experienceId:this.experienceID})},announcePageChanging:function(e){f("page.changing",{pageNum:e,experienceId:this.experienceID})},announceSocialShare:function(e,t){e=s.extractObjectIdFromSmartgroupInstanceId(e),f("social.share",{componentId:e,shareType:t,experienceId:this.experienceID})},announceComponentClick:function(e){e=s.extractObjectIdFromSmartgroupInstanceId(e),f("component.clicked",{componentId:e,experienceId:this.experienceID})},announceLayersShown:function(e){e=t.map(e,s.extractObjectIdFromSmartgroupInstanceId),t.each(e,t.bind(function(e){f("layer.shown",{layerId:e,experienceId:this.experienceID})},this))},announceLayersHidden:function(e){e=t.map(e,s.extractObjectIdFromSmartgroupInstanceId),t.each(e,t.bind(function(e){f("layer.hidden",{layerId:e,experienceId:this.experienceID})},this))},announceVideoPlayed:function(e){e=s.extractObjectIdFromSmartgroupInstanceId(e),f("video.played",{componentId:e,experienceId:this.experienceID})},announceAnimationStarted:function(e){e=s.extractObjectIdFromSmartgroupInstanceId(e),f("animation.started",{componentId:e,experienceId:this.experienceID})},announceAnimationEnded:function(e){e=s.extractObjectIdFromSmartgroupInstanceId(e),f("animation.ended",{componentId:e,experienceId:this.experienceID})},announceScrollTo:function(e){f("scroll.to",{scrollPosition:e.scrollPosition,pageHeight:e.pageHeight,experienceId:this.experienceID,innerHeight:window.innerHeight})},announceTimedInteraction:function(e){f("timed.interaction.fired",e)}}});return m}),define("applications/html5-player/noembed",["globals","jquery"],function(e,t){return function(){t("html").addClass("noembed");var n=t("body");n.empty();var i=t('<div id="embed-breakout">&#9654;</div>').click(function(e){e.preventDefault(),window.open(window.location.href)});e.themeObj&&(n.css("background",e.themeObj.backgroundColor),i.css({color:e.themeObj.menuFgColor,background:e.themeObj.menuBgColor})),n.append(i),setTimeout(function(){i.css("visibility","visible")},1)}}),define("applications/html5-player/TopView",["log","lodash","jquery","device","globals","backbone","shared/utils/CerosResourceLoader","shared/utils/ModuleEventManager","shared/models/EmbeddedViewportModel","modules/splash-screen/module","modules/chrome/module","modules/branding/module","modules/flippers/module","modules/viewport/module","modules/lightbox/module","modules/404/module"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p,g){var m=null,v=t.extend({},o.Events,{publishedEvents:{PLAYER_DOCUMENT_SHOWN:"player.document.shown"},setupInitialDom:function(){var e=n("html");e.addClass(i.mobile()?"mobile":"desktop"),e.addClass(i.msie?"msie"+i.msieVersion():"non-msie"),e.addClass(i.renderingEngine()),e.addClass(i.orientation()),i.retina()&&e.addClass("retina"),n(window).bind(i.supportsOrientationChange()?"orientationchange":"resize",t.debounce(t.bind(function(){e.removeClass("portrait landscape"),e.addClass(i.orientation())},this),100));var r=n("body"),o=n("#main"),a=n("#backgroundContainer");c.shouldShow()&&o.append('<div id="chrome"></div>'),o.append('<div id="viewport"></div>'),o.append('<div id="flippers"></div>'),r.append('<div id="lightbox"></div>'),r.append(o).append(a)},attachModuleViews:function(e){n("#viewport").replaceWith(h.el()),n("#flippers").replaceWith(f.el()),n("#lightbox").replaceWith(p.el()),n("#viewport").append(d.el()),r.isEmbedded||(n("#chrome").replaceWith(c.el()),c.setTitle(e.get("title")))},showDocument:function(){c.shouldShow()&&(c.show(),c.initiallyHidden()&&c.hide()),d.shouldShow()&&d.show(),n("#main").addClass("document"),h.show(),f.show(),this.hideLoadingExperience(),this.trigger(this.publishedEvents.PLAYER_DOCUMENT_SHOWN)},showLoadingExperience:function(){m=l.showLoading(n("#main"),{showCerosBranding:r.showCerosBranding,showPreviewLabel:r.previewMode,overlayed:!1})},hideLoadingExperience:function(){m?m.destroy():e.warn("Showing document but never showed the loading experience")},show404:function(){this.hideLoadingExperience(),g.load(),n("html").css({height:"100%"}),n("body").empty().css({display:"block",height:"100%"}).append(g.el())}});return v}),define("iosorientationfix",[],function(){!function(e){function t(){c.setAttribute("content",h),p=!0}function n(){c.setAttribute("content",f),p=!1}function i(i){l=i.accelerationIncludingGravity,a=Math.abs(l.x),s=Math.abs(l.y),u=Math.abs(l.z),e.orientation&&180!==e.orientation||!(a>7||(u>6&&8>s||8>u&&s>6)&&a>5)?p||t():p&&n()}var r=navigator.userAgent;if(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(r)&&r.indexOf("AppleWebKit")>-1){var o=e.document;if(o.querySelector){var a,s,u,l,c=o.querySelector("meta[name=viewport]"),d=c&&c.getAttribute("content"),f=d+",maximum-scale=1",h=d+",maximum-scale=10",p=!0;c&&(e.addEventListener("orientationchange",t,!1),e.addEventListener("devicemotion",i,!1))}}}(window)}),define("applications/html5-player/Player",["log","lodash","jquery","backbone","device","globals","domReady","playerApi","cookie","shared/utils/NavigationUtils","shared/utils/CerosResourceLoader","shared/utils/ModuleEventManager","shared/utils/ScrollProxy","modules/viewport/models/DocumentVersionModel","shared/models/EmbeddedViewportModel","modules/splash-screen/module","modules/page/module","modules/chrome/module","modules/branding/module","modules/flippers/module","modules/viewport/module","modules/analytics/module","modules/lightbox/module","modules/url-navigation/module","modules/404/module","modules/page/utils/ShareJSConnection","modules/sdk-backend/module","applications/html5-player/noembed","applications/html5-player/TopView","modules/page/views/LayerView","InteractionUtils","iosorientationfix"],function(e,t,n,i,r,o,a,s,u,l,c,d,f,h,p,g,m,v,y,_,b,T,w,E,S,C,P,A,I,x,O){var M="pending",k=5e3,R=null,D=null,L={documentVersion:null,issue:null},N=window.location.search.match(/[\?&]heightOverride=(\d+)(&|$)/);o.heightOverride=N?N[1]:null;var j=function(){if(U(),V(),D.mark(D.MARKS.PLAYER.RUN_START),e.init(o.logging),e.debug("Player.run() start"),!B()){var i=W();i.done(function(){H(),z()||(Y(),a(function(){D.mark(D.MARKS.PLAYER.DOM_READY),e.debug("domReady: About to load the doc version."),I.setupInitialDom(),I.showLoadingExperience(),D.mark(D.MARKS.PLAYER.SPINNER_SHOWN);var i=q();v.load();var r=K();r.done(function(){D.mark(D.MARKS.PLAYER.DOC_VERSION_LOADED),e.debug("docVersionLoaded promise is resolved. About to render initial pages."),G(),$(),Q(),rt(),_.load({}),w.load(),y.load(),X(),I.attachModuleViews(L.issue),b.renderPages().always(function(){P.initialize(L.issue,L.documentVersion,T.getUserToken())}),n.when(i).then(function(){e.debug("InitialFontsReady promise is resolved. About to load initial pages."),b.getFirstPageReadyPromise().done(function(){I.showDocument(),D.mark(D.MARKS.PLAYER.SPINNER_HIDDEN),E.bindPopstate(),document.hidden?document.addEventListener("visibilitychange",F):F()}).fail(function(){I.show404()})})}),r.fail(t.bind(I.show404,I))}))})}},F=function(){document.hidden||(e.debug("First page(s) media is loaded. Showing first page."),b.activateFirstPage()),document.removeEventListener("visibilitychange",F)},U=function(){u.remove("mobile-help-overlay")},B=function(){var e=o.isEmbedded&&!o.allowEmbedding;return e&&(T.unsupportedEmbed(),A()),e},V=function(){T.init({application:o.analyticsApplicationKey,googleAnalyticsId:o.googleAnalyticsId}),D=T.getPerformanceTracker(),window.cerosPlayerLoadStart&&D.startTracking(window.cerosPlayerLoadStart),c.onPriorityQueueCompletion(function(){D.mark(D.MARKS.PLAYER.PRIORITY_QUEUE_EMPTIED)}),c.onAllResourcesLoaded(function(){D.mark(D.MARKS.PLAYER.ALL_RESOURCES_LOADED)})},H=function(){var e=null;o.previewMode?C.initialize():e=window.docVersionRequest,L.issue=new i.Model(o.issue),L.documentVersion=new h(o.docVersion,{docVersionRequest:e})},G=function(){if(e.isEnabled("debug")){var n=[I,g,m,b,_,T,w,S];o.isEmbedded||(n=n.concat([v,E])),t.each(n,function(n){t.each(n.publishedEvents,function(t){n.on(t,function(n){e.debug("EVENT: "+t,n)})})})}},q=function(){if(!R){R=new n.Deferred;var t=o.publicAssetsBaseUrl+"ceros-fonts-2017-06-21-2.css",i=c.addCustomWebFont(["CerosIcons-Regular"],t,"").loadNow(),r=c.addGoogleWebFont("Varela+Round::latin").loadNow();n.when(i,r).always(function(){R.resolve()}),setTimeout(function(){"resolved"!==R.state()&&(e.devWarn("Font loading timed out"),R.resolve())},k)}return R.promise()},W=function(){var e=new n.Deferred;return o.previewMode&&o.isEmbedded?q().always(function(){g.showEmbeddedPreviewerWarning(n("body")),g.on(g.publishedEvents.EMBED_WARNING_DISMISSED,function(){e.resolve(),g.hideEmbeddedPreviewerWarning(n("body"))})}):e.resolve(),e},z=function(){return o.gracePeriodExpired&&q().done(function(){g.showUnavailableScreen(n("body"),{theme:L.documentVersion.get("theming")});var e=L.documentVersion.getPageInfoByNumberOrSlug(l.parsePageFromLocation());T.viewExperience({page_slug:e.slug,page_num:e.number,grace_period_expired:!0})}),o.gracePeriodExpired},Y=function(){if(o.previewMode){var e={"X-Powered-By":"Ceros Player/HTML5"};o.revalidateWithCore&&(e["Cache-Control"]="must-revalidate"),n.ajaxSetup({timeout:6e4,cache:o.ajaxCaching,headers:e,statusCode:{404:function(){a(t.bind(I.show404,I))}}}),n.ajaxPrefilter(function(e){e.crossDomain&&(e.headers={})})}},$=function(){f.init(L.issue.get("slug"));var e=function(e){p.getInstance().setTopAndBottom(e.top,e.bottom)},n=!1;f.on(f.EVENTS.UPDATE_POSITION,function(e){var t=b.getCurrentPageHeight(),i=t&&e.top<t&&e.top<e.bottom;!n&&i&&(T.resetPageTrackingMinMaxY(),n=!0)});var i=50;d.on("sdk.experience.container.ready",e),d.on("sdk.experience.container.scrolled",t.debounce(e,i)),d.on("sdk.experience.container.resized",e)},K=function(){var i=new n.Deferred,r=L.documentVersion.fetch();return r.done(function(){e.debug("Doc Version is loaded. About to preload page media"),b.init(L.documentVersion,{performanceTracker:D,marginTopCallback:function(){return v.shouldShow()&&!v.initiallyHidden()?v.getHeight():0}}),b.preloadPageMedia(),t.defer(i.resolve)}).fail(i.reject),i.promise()},X=function(){s.on("*",t.bind(T.handleApiRequest,T)).on("ceros.sdk.ping",function(e,t){t.data="pong"}).on("ceros.sdk.productPanel.close",w.deactivate),s.bindToIframe(w.iframe())},Q=function(){d.registerEvents(m.publishedEvents,m),d.registerEvents(E.publishedEvents,E),et(),nt(),tt(),it(),J(),Z()},J=function(){var e=function(){var e=b.getFirstPageReadyPromise();e.state()===M?e.done(b.scale):b.scale()};b.on(b.publishedEvents.SCALE,e)},Z=function(){b.on(b.publishedEvents.SCALE,function(e){_.updateScale(e)}),b.on(b.publishedEvents.PAGE_CHANGE,function(e){_.determineFlipperState(e.isFirstPage,e.isLastPage,!0),b.removeClickShield(),b.enableGestures(),P.announcePageChanged(b.getCurrentPageNumber())}),b.on(b.publishedEvents.PAGE_CHANGING,function(e){_.determineFlipperState(e.isFirstPage,e.isLastPage,e.isPageReady),P.announcePageChanging(b.getCurrentPageNumber())}),b.on(b.publishedEvents.PAGE_UPDATE,function(e){_.determineFlipperState(e.isFirstPage,e.isLastPage,e.isPageReady)}),b.on(b.publishedEvents.PAGE_ENABLED_CHANGE,function(e){_.determineFlipperState(e.isFirstPage,e.isLastPage,e.isPageReady)}),b.on(b.publishedEvents.PAGE_BATCH_LOAD_START,function(){b.addClickShield(),b.disableGestures()}),b.on(b.publishedEvents.TIMED_LIGHTBOX,function(e){w.showLightbox(e.lightboxUrl,e.lightboxWidth,e.lightboxHeight,e.lightboxHasCloseButton),P.announceTimedInteraction(e),T.experienceLoadInteraction({action:e.action,delay:e.delay})}),b.on(b.publishedEvents.TIMED_PRODUCT_PANEL,function(e){w.showProduct(e.productPanelId),P.announceTimedInteraction(e),T.experienceLoadInteraction({action:e.action,delay:e.delay})}),b.on(b.publishedEvents.TIMED_SHOPPING_CART,function(e){w.showShoppingCart(),P.announceTimedInteraction(e),T.experienceLoadInteraction({action:e.action,delay:e.delay})}),_.on(_.publishedEvents.NEXT_PAGE,function(){b.nextPage()}),_.on(_.publishedEvents.PREVIOUS_PAGE,function(){b.previousPage()})},et=function(){b.on(b.publishedEvents.SCALE,function(){g.scale()}),b.on(b.publishedEvents.CURRENT_PAGE_DELETED,function(){g.showDeletedPageWarning(n("body"))})},tt=function(){y.on(y.publishedEvents.BRANDING_CEROS_BRANDING_CLICK,function(){var e="http://www3.ceros.com/poweredbyceros",t=["utm_source=M-W-CerosPower","account="+encodeURIComponent(o.accountSlug),"experience="+encodeURIComponent(o.issueAliasSlug)];window.open(e+"?"+t.join("&"))})},nt=function(){v.shouldShow()&&(v.initiallyHidden()&&(b.on(b.publishedEvents.LONGPRESS,function(){v.toggle()}),m.on(m.publishedEvents.PAGE_COMPONENT_INTERACTION,function(){v.hide(!0)})),v.on(v.publishedEvents.CHROME_SHARE_PAGE,function(e){b.shareCurrentPageOnSocial(e.action,L.issue)}),v.on(v.publishedEvents.CHROME_SHOPPING_CART,function(){w.showShoppingCart()}),v.on(v.publishedEvents.CHROME_TITLE_CLICK,function(){b.jumpToPage(1,!1)}))},it=function(){d.on(m.publishedEvents.PAGE_ACTION_SCROLL_TO,function(e){var t=b.scrollTo(e.scrollTargetType,e.scrollTargetScranchor);P.announceScrollTo(t),f.announceScrollTo(t)}),d.on(m.publishedEvents.PAGE_ACTION_GO_TO_PREV_PAGE,function(){b.previousPage()}),d.on(m.publishedEvents.PAGE_ACTION_GO_TO_NEXT_PAGE,function(){b.nextPage()}),d.on(m.publishedEvents.PAGE_ACTION_GO_TO_PAGE,function(e){b.jumpToPage(e.pageTarget)}),d.on(m.publishedEvents.PAGE_ACTION_ENABLE_DISABLE_PAGES,function(e){t.each(e.pageTargets,function(e,t){e?b.enablePage(t):b.disablePage(t)})}),o.isEmbedded||m.on(m.publishedEvents.PAGE_ACTIVATED,function(e){e.slug&&L.issue.get("slug")&&(o.usePageSlugsInNavigation?E.navigateToPageSlug(e.slug,L.issue.get("title")):E.navigateToPageNumber(L.documentVersion.getPageNumberBySlug(e.slug),L.issue.get("title")))}),d.on(E.publishedEvents.POPSTATE,function(e){if(e.pageNumber)b.jumpToPage(e.pageNumber);else if(e.pageSlug){var t=L.documentVersion.getPageNumberBySlug(e.pageSlug);b.jumpToPage(t)}}),m.on(m.publishedEvents.PAGE_ACTION_GO_TO_URL,function(e){o.isEmbedded&&T.isGoogleAnalyticsEnabled()?f.announceGotoUrl(e.url,e.urlOpenInNewWindow):e.urlOpenInNewWindow?window.open(e.url):top.location=e.url}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_LIGHTBOX,function(e){w.showLightbox(e.lightboxUrl,e.lightboxWidth,e.lightboxHeight,e.lightboxHasCloseButton)}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_PRODUCT_PANEL,function(e){w.showProduct(e.productPanelId)}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_SHOPPING_CART,function(){w.showShoppingCart()}),d.on(m.publishedEvents.PAGE_ACTION_SHARE_PAGE,function(e){b.shareCurrentPageOnSocial(e.action,L.issue)}),d.on(m.publishedEvents.TIMED_INTERACTION,function(e){P.announceTimedInteraction(e)}),d.on(m.publishedEvents.PAGE_ACTION_LAYER_VISIBILITY,function(e){if(O.isShowLayersInteraction(e)&&P.announceLayersShown(e.layerTargets),O.isHideLayersInteraction(e)&&P.announceLayersHidden(e.layerTargets),"toggle-layers"===e.action){var n=[],i=[];t.each(e.layerTargets,function(e){b.isLayerVisible(e)?n.push(e):i.push(e)}),n.length>0&&P.announceLayersShown(n),i.length>0&&P.announceLayersHidden(i)}})},rt=function(){if(o.analyticsApplicationKey){b.on(b.publishedEvents.SCALE,function(e){var t=e.ratio;T.updateScale(t)}),m.on(m.publishedEvents.PAGE_SCROLL,function(e){T.trackPageScroll({page_slug:e.slug,page_num:L.documentVersion.getPageNumberBySlug(e.slug),topY:e.topY,bottomY:e.bottomY,pageHeight:e.pageHeight})}),m.on(m.publishedEvents.PAGE_ACTIVATED,function(e){T.viewExperience({page_slug:e.slug,page_num:L.documentVersion.getPageNumberBySlug(e.slug),grace_period_expired:!1}),L.documentVersion.isAutoTransitioning()||T.viewPage({page_slug:e.slug,page_num:L.documentVersion.getPageNumberBySlug(e.slug),topY:e.topY,bottomY:e.bottomY,pageHeight:e.pageHeight})});var e=function(e){var t={experience_slug:L.issue.get("slug"),experience_version_slug:L.documentVersion.get("slug"),page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,video_slug:e.videoSlug};
return e.videoLength&&(t.video_length=e.videoLength),t};m.on(m.publishedEvents.PAGE_VIDEO_PLAY,function(n){T.playVideo(t.extend(e(n),{video_position:n.videoPosition})),P.announceVideoPlayed(n.componentSlug)}),m.on(m.publishedEvents.PAGE_VIDEO_PROGRESS_TIME,function(n){T.trackVideoProgressTime(t.extend(e(n),{video_position:n.videoPosition,video_play_time:n.videoPlayTime}))}),m.on(m.publishedEvents.PAGE_VIDEO_PROGRESS_PERCENT,function(n){T.trackVideoProgressPercent(t.extend(e(n),{video_progress_percent:n.progressPercent}))}),m.on(m.publishedEvents.PAGE_ACTION_GO_TO_URL,function(e){T.clickLink({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,outgoing_url:e.url,outgoing_domain:e.domain})}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_LIGHTBOX,function(e){T.clickLightbox({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,lightbox_url:e.lightboxUrl,lightbox_width:e.lightboxWidth,lightbox_height:e.lightboxHeight,lightbox_has_close_button:e.lightboxHasCloseButton})}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_PRODUCT_PANEL,function(e){T.clickProduct({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,product_id:e.productPanelId})}),m.on(m.publishedEvents.PAGE_ACTION_OPEN_SHOPPING_CART,function(e){T.clickShoppingCart({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType})}),m.on(m.publishedEvents.PAGE_COMPONENT_INTERACTION,function(e){T.clickComponent({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,click_x:e.clickX,click_y:e.clickY})}),m.on(m.publishedEvents.PAGE_COMPONENT_FORM_SUBMITTED,function(e){T.formSubmit({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,form_origin:e.formOrigin,form_origin_account_id:e.formOriginAccountId,form_origin_form_id:e.formOriginFormId,form_origin_form_name:e.formOriginFormName,interaction_triggered:e.interactionTriggered})}),v.on(v.publishedEvents.CHROME_SHOPPING_CART,function(){T.clickShoppingCart({page_slug:b.getCurrentPageSlug(),page_num:b.getCurrentPageNumber()})}),d.on(m.publishedEvents.PAGE_ACTION_SHARE_PAGE,function(e){T.clickPageShare({page_slug:e.pageSlug,page_num:L.documentVersion.getPageNumberBySlug(e.pageSlug),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,service:e.action})}),v.on(v.publishedEvents.CHROME_SHARE_PAGE,function(e){T.clickPageShare({page_slug:b.getCurrentPageSlug(),page_num:b.getCurrentPageNumber(),service:e.action})}),y.on(y.publishedEvents.BRANDING_CEROS_BRANDING_CLICK,function(){T.clickCerosBranding({page_slug:b.getCurrentPageSlug(),page_num:b.getCurrentPageNumber()})}),d.on(m.publishedEvents.TIMED_INTERACTION,function(e){T.onViewInteraction({page_slug:b.getCurrentPageSlug(),page_num:b.getCurrentPageNumber(),component_slug:e.componentSlug,component_name:e.componentName,component_type:e.componentType,action:e.action,delay:e.delay})}),n(document).click(T.registerUserActivity)}};return{run:j}}),define("jquery",[],function(){return window.jQuery}),define("webfont",[],function(){return window.WebFont}),require.config({baseUrl:window.cerosContext.viewAssetsDomain,paths:{log:"shared/libs/ceros/log-1.0",lodash:"../js/libs/lodash/lodash",backbone:"../js/libs/backbone/backbone",ceros:"shared/libs/ceros/ceros-1.0",globals:"shared/libs/ceros/globals-1.0",animation:"shared/libs/ceros/animation-css3-1.0",animationTypes:"shared/libs/ceros/animation-types-1.0",sequenceBuilder:"shared/libs/ceros/animation-sequence-builder-1.0",color:"shared/libs/ceros/color-1.0",device:"../js/libs/device/DeviceProfile",browser:"../js/libs/device/MobileBrowserDetector",modernizr:"../js/libs/device/modernizr-custom-2.6.2",cssresource:"shared/libs/ceros/css-resource-1.0",playerApi:"shared/libs/ceros/player-api-1.0",socialSharing:"shared/libs/ceros/social-sharing-1.0",domReady:"shared/libs/require/plugins/domReady",text:"shared/libs/require/plugins/text",crypto:"shared/libs/crypto/crypto-2.2",hammer:"shared/libs/hammer/hammer",mustache:"../js/libs/mustache/mustache.amd",iosorientationfix:"shared/libs/ios-orientation-fix/ios-orientation-fix",easing:"shared/libs/jquery/plugins/jquery.animation.easing",cssHooksTransform:"shared/libs/ceros/css-hooks-transform-1.0",cssHooksGradients:"shared/libs/ceros/css-hooks-gradients-1.0",polyfills:"shared/libs/ceros/polyfills-1.0",base64:"shared/libs/base64/base64",jqueryajaxie9corsfix:"shared/libs/jquery/fixes/jquery-ajax-ie9-cors-fix",videojs:"shared/video/video.min",videojscontribhls:"shared/video/videojs-contrib-hls",dashjs:"shared/video/dash.all.debug",videojsdash:"shared/video/videojs-dash",dashJsAndVideoJsShim:"shared/video/dashjs-and-videojs-shim","libs/font/FontVariant":"../js/libs/font/FontVariant","libs/font/FontFamily":"../js/libs/font/FontFamily","libs/typesetter/GlyphMetrics":"../js/libs/typesetter/GlyphMetrics",ExtentsUtils:"../js/libs/utils/ExtentsUtils",InteractionUtils:"../js/libs/utils/InteractionUtils",urlUtils:"../js/libs/utils/UrlUtils",ThumbnailVariantUtils:"../js/libs/utils/ThumbnailVariantUtils",cookie:"../js/libs/utils/Cookies",hubspotFormUtils:"../js/libs/utils/HubspotFormUtils",VectorImageUtils:"../js/libs/utils/VectorImageUtils",cerosMath:"../js/libs/utils/CerosMath",rect:"../js/libs/utils/Rect","libs/image/ImageResource":"../js/libs/image/ImageResource","libs/image/AbstractImageResource":"../js/libs/image/AbstractImageResource","libs/image/VectorImageResource":"../js/libs/image/VectorImageResource","libs/image/VectorImageResourceFactory":"../js/libs/image/VectorImageResourceFactory","libs/analytics/CerosTracker":"../js/libs/analytics/CerosTracker","libs/analytics/PerformanceTracker":"../js/libs/analytics/PerformanceTracker","libs/analytics/AnalyticsEnvironmentData":"../js/libs/analytics/AnalyticsEnvironmentData","libs/analytics/AbstractPageViewTracker":"../js/libs/analytics/AbstractPageViewTracker","libs/analytics/EventQueue":"../js/libs/analytics/EventQueue","libs/uuid/UuidGenerator":"../js/libs/uuid/UuidGenerator",jsBezier:"../js/libs/jsbezier/jsBezier-0.8","libs/device/BrowserDetector":"../js/libs/device/BrowserDetector","libs/utils/LetterSpacingUtils":"../js/libs/utils/LetterSpacingUtils","libs/utils/VideoAutoplayConstants":"../js/libs/utils/VideoAutoplayConstants"},shim:{modernizr:{exports:"Modernizr"},dashjs:{exports:"dashjs"},videojsdash:{deps:["dashJsAndVideoJsShim"]},videojscontribhls:{deps:["videojsdash"]}},config:{text:{useXhr:function(){return!0}}}}),require.onError=function(e){var t="error: "+e.requireType+" loading modules: "+e.requireModules;window.Rollbar&&window.Rollbar.error(t)},require(["modernizr","polyfills","easing","cssHooksTransform","cssHooksGradients"],function(){require(["applications/html5-player/Player"],function(e){e.run()})}),define("applications/html5-player/bootstrap",function(){});